(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[5190,7654],{36786:(e,t,r)=>{"use strict";e.exports=r(22822)},40797:(e,t,r)=>{"use strict";r.d(t,{ZP:()=>s});var o=r(53329),n=r(15402),c=r(5346),i=n.Z,a=o.Z;const s={Message:c.Z,HTML:i,DateFormat:a}},6790:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>Y});var o,n,c=r(27361),i=r.n(c),a=r(1469),s=r.n(a),l=r(27418),u=r.n(l),p=r(45697),f=r.n(p),h=r(5053),y=r.n(h),g=r(89208),d=r(1852),m=r.n(d),v=r(22222),b=r(60604),S=r(81808),O=r(82904),w=r(1550),C=r(97222),P=r(25016),T=r(8578),k=r(86568),j=r(28578),x=r(26125),E=r(69301),I=r(75110),R=r(827),M=r(37275),F=r(18412),Z=r(64975);function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function B(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function A(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?B(Object(r),!0).forEach((function(t){q(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):B(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function D(){return(D=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e}).apply(this,arguments)}function G(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function J(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function L(e,t){return(L=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function N(e,t){return!t||"object"!==_(t)&&"function"!=typeof t?U(e):t}function U(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function z(e){return(z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function q(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var H=(0,v.P1)([function(e){return e.search||null},function(e){return e.controls&&e.controls.searchBookmarkConfig||null},function(e){return e.mapConfigRawData||{}},function(e){return(null==e?void 0:e.searchbookmarkconfig)||""}],(function(e,t,r,o){return{enabledSearchBookmarkConfig:t&&t.enabled||!1,error:e&&e.error,coordinate:e&&e.coordinate||{},loading:e&&e.loading,searchText:e?e.searchText:"",activeSearchTool:i()(e,"activeSearchTool","addressSearch"),format:i()(e,"format")||M.ZP.getConfigProp("defaultCoordinateFormat"),selectedItems:e&&e.selectedItems,mapInitial:r,bookmarkConfig:o||{}}})),V=(0,g.connect)(H,{onSearch:C.tt,onChangeCoord:C.TS,onChangeActiveSearchTool:C.a,onClearCoordinatesSearch:b.fU,onClearBookmarkSearch:P.N3,onChangeFormat:C.Zw,onToggleControl:O.Xi,onZoomToPoint:C.Z,onPurgeResults:C.kV,onSearchReset:C.v2,onSearchTextChange:C.k9,onCancelSelectedItem:C.KG,onZoomToExtent:w.Px,onLayerVisibilityLoad:S.H0})(T.Z),W=(0,v.P1)([R.Od,I.l2,function(e){return e.search||null}],(function(e,t,r){return{mapConfig:e,layers:t,results:r?r.results:null}})),X=(0,g.connect)(W,{onItemClick:C.Jc,addMarker:C._q,showGFI:C.w4})(k.Z),K=(0,g.connect)((function(e){return{enabled:e.controls&&e.controls.search&&e.controls.search.enabled||!1,selectedServices:e&&e.search&&e.search.selectedServices,selectedItems:e&&e.search&&e.search.selectedItems,textSearchConfig:e&&e.searchconfig&&e.searchconfig.textSearchConfig}}),{onUpdateResultsStyle:C.o$})((n=o=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&L(e,t)}(a,e);var t,r,o,n,c=(o=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=z(o);if(n){var r=z(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return N(this,e)});function a(){var e;G(this,a);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return q(U(e=c.call.apply(c,[this].concat(r))),"getServiceOverrides",(function(t){return e.props.selectedItems&&e.props.selectedItems[e.props.selectedItems.length-1]&&i()(e.props.selectedItems[e.props.selectedItems.length-1],t)})),q(U(e),"getSearchOptions",(function(){var t=e.props,r=t.searchOptions,o=t.textSearchConfig;return o&&o.services&&o.services.length>0?o.override?u()({},r,{services:o.services}):u()({},r,{services:r.services.concat(o.services)}):r})),q(U(e),"getCurrentServices",(function(){var t=e.props.selectedServices,r=e.getSearchOptions();return t&&t.length>0?u()({},r,{services:t}):r})),q(U(e),"getSearchAndToggleButton",(function(){var t=y().createElement(V,D({key:"searchBar"},e.props,{searchOptions:e.getCurrentServices(),placeholder:e.getServiceOverrides("placeholder"),placeholderMsgId:e.getServiceOverrides("placeholderMsgId")}));return!0===e.props.withToggle?[y().createElement(Z.Z,null)].concat(e.props.enabled?[t]:null):s()(e.props.withToggle)?y().createElement("span",null,y().createElement(m(),{query:"("+e.props.withToggle[0]+")"},y().createElement(Z.Z,null),e.props.enabled?t:null),y().createElement(m(),{query:"("+e.props.withToggle[1]+")"},t)):t})),e}return t=a,(r=[{key:"componentDidMount",value:function(){this.props.onUpdateResultsStyle(A(A({},F.be),this.props.resultsStyle))}},{key:"render",value:function(){return y().createElement("span",null,this.getSearchAndToggleButton(),y().createElement(X,{fitToMapSize:this.props.fitResultsToMapSize,searchOptions:this.props.searchOptions,onUpdateResultsStyle:this.props.onUpdateResultsStyle,key:"nominatimresults"}))}}])&&J(t.prototype,r),a}(y().Component),q(o,"propTypes",{splitTools:f().bool,showOptions:f().bool,isSearchClickable:f().bool,fitResultsToMapSize:f().bool,searchOptions:f().object,resultsStyle:f().object,selectedItems:f().array,selectedServices:f().array,userServices:f().array,withToggle:f().oneOfType([f().bool,f().array]),enabled:f().bool,textSearchConfig:f().object}),q(o,"defaultProps",{searchOptions:{services:[{type:"nominatim",priority:5}]},isSearchClickable:!1,splitTools:!0,resultsStyle:{color:"#3388ff",weight:4,dashArray:"",fillColor:"#3388ff",fillOpacity:.2},fitResultsToMapSize:!0,withToggle:!1,enabled:!0}),n));const Y={SearchPlugin:u()(K,{OmniBar:{name:"search",position:1,tool:!0,priority:1}}),epics:{searchEpic:j.Mk,searchOnStartEpic:j.h5,searchItemSelected:j.XH,zoomAndAddPointEpic:j.OY,textSearchShowGFIEpic:j.Ls},reducers:{search:E.Z,mapInfo:x.Z}}},54625:e=>{e.exports=function(e){if(!e||!e.type)return null;var r=t[e.type];return r?"geometry"===r?{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:e}]}:"feature"===r?{type:"FeatureCollection",features:[e]}:"featurecollection"===r?e:void 0:null};var t={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featurecollection"}},98805:(e,t,r)=>{var o=r(40180),n=r(62689),c=r(83140),i=r(79833);e.exports=function(e){return function(t){t=i(t);var r=n(t)?c(t):void 0,a=r?r[0]:t.charAt(0),s=r?o(r,1).join(""):t.slice(1);return a[e]()+s}}},89179:(e,t,r)=>{var o=r(55639),n=r(40554),c=r(14841),i=r(79833),a=o.isFinite,s=Math.min;e.exports=function(e){var t=Math[e];return function(e,r){if(e=c(e),(r=null==r?0:s(n(r),292))&&a(e)){var o=(i(e)+"e").split("e"),l=t(o[0]+"e"+(+o[1]+r));return+((o=(i(l)+"e").split("e"))[0]+"e"+(+o[1]-r))}return t(e)}}},48403:(e,t,r)=>{var o=r(79833),n=r(11700);e.exports=function(e){return n(o(e).toLowerCase())}},7654:(e,t,r)=>{var o=r(81763);e.exports=function(e){return o(e)&&e!=+e}},59854:(e,t,r)=>{var o=r(89179)("round");e.exports=o},11700:(e,t,r)=>{var o=r(98805)("toUpperCase");e.exports=o},55745:(e,t,r)=>{var o=r(3465),n=o.featureCollection,c=r(98098),i=r(54625);e.exports=function(e,t,r){var a=o.distanceToDegrees(t,r),s=i(e),l=i(n(s.features.map((function(e){return function(e,t){var r=(new c.io.GeoJSONReader).read(e.geometry).buffer(t);return{type:"Feature",geometry:r=(new c.io.GeoJSONWriter).write(r),properties:{}}}(e,a)}))));return l.features.length>1?l:1===l.features.length?l.features[0]:void 0}},65442:(e,t,r)=>{var o=r(98098);e.exports=function(e,t){var r,n;r="Feature"===e.type?e.geometry:e,n="Feature"===t.type?t.geometry:t;var c=new o.io.GeoJSONReader,i=c.read(JSON.stringify(r)),a=c.read(JSON.stringify(n)),s=i.intersection(a);if(!s.isEmpty())return{type:"Feature",properties:{},geometry:(new o.io.GeoJSONWriter).write(s)}}}}]);