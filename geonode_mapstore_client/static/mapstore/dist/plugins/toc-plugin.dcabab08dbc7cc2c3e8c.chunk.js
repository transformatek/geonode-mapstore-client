(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[6895],{57575:(e,t,r)=>{"use strict";var o=r(29059);t.__esModule=!0,t.default=void 0;var n,a=o(r(87867)),i="clearTimeout",l=function(e){var t=(new Date).getTime(),r=Math.max(0,16-(t-c)),o=setTimeout(e,r);return c=t,o},s=function(e,t){return e+(e?t[0].toUpperCase()+t.substr(1):t)+"AnimationFrame"};a.default&&["","webkit","moz","o","ms"].some((function(e){var t=s(e,"request");if(t in window)return i=s(e,"cancel"),l=function(e){return window[t](e)}}));var c=(new Date).getTime();(n=function(e){return l(e)}).cancel=function(e){window[i]&&"function"==typeof window[i]&&window[i](e)};var u=n;t.default=u,e.exports=t.default},48074:(e,t,r)=>{"use strict";const o=r(88554),n=r(44020),a=r(74851);function i(e,t){return t.encode?t.strict?o(e):encodeURIComponent(e):e}function l(e,t){return t.decode?n(e):e}function s(e){return Array.isArray(e)?e.sort():"object"==typeof e?s(Object.keys(e)).sort(((e,t)=>Number(e)-Number(t))).map((t=>e[t])):e}function c(e){const t=e.indexOf("#");return-1!==t&&(e=e.slice(0,t)),e}function u(e){const t=(e=c(e)).indexOf("?");return-1===t?"":e.slice(t+1)}function p(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&"string"==typeof e&&""!==e.trim()?e=Number(e):!t.parseBooleans||null===e||"true"!==e.toLowerCase()&&"false"!==e.toLowerCase()||(e="true"===e.toLowerCase()),e}function d(e,t){const r=function(e){let t;switch(e.arrayFormat){case"index":return(e,r,o)=>{t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===o[e]&&(o[e]={}),o[e][t[1]]=r):o[e]=r};case"bracket":return(e,r,o)=>{t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==o[e]?o[e]=[].concat(o[e],r):o[e]=[r]:o[e]=r};case"comma":return(e,t,r)=>{const o="string"==typeof t&&t.split("").indexOf(",")>-1?t.split(","):t;r[e]=o};default:return(e,t,r)=>{void 0!==r[e]?r[e]=[].concat(r[e],t):r[e]=t}}}(t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",parseNumbers:!1,parseBooleans:!1},t)),o=Object.create(null);if("string"!=typeof e)return o;if(!(e=e.trim().replace(/^[?#&]/,"")))return o;for(const n of e.split("&")){let[e,i]=a(t.decode?n.replace(/\+/g," "):n,"=");i=void 0===i?null:l(i,t),r(l(e,t),i,o)}for(const e of Object.keys(o)){const r=o[e];if("object"==typeof r&&null!==r)for(const e of Object.keys(r))r[e]=p(r[e],t);else o[e]=p(r,t)}return!1===t.sort?o:(!0===t.sort?Object.keys(o).sort():Object.keys(o).sort(t.sort)).reduce(((e,t)=>{const r=o[t];return Boolean(r)&&"object"==typeof r&&!Array.isArray(r)?e[t]=s(r):e[t]=r,e}),Object.create(null))}t.extract=u,t.parse=d,t.stringify=(e,t)=>{if(!e)return"";const r=function(e){switch(e.arrayFormat){case"index":return t=>(r,o)=>{const n=r.length;return void 0===o||e.skipNull&&null===o?r:null===o?[...r,[i(t,e),"[",n,"]"].join("")]:[...r,[i(t,e),"[",i(n,e),"]=",i(o,e)].join("")]};case"bracket":return t=>(r,o)=>void 0===o||e.skipNull&&null===o?r:null===o?[...r,[i(t,e),"[]"].join("")]:[...r,[i(t,e),"[]=",i(o,e)].join("")];case"comma":return t=>(r,o)=>null==o||0===o.length?r:0===r.length?[[i(t,e),"=",i(o,e)].join("")]:[[r,i(o,e)].join(",")];default:return t=>(r,o)=>void 0===o||e.skipNull&&null===o?r:null===o?[...r,i(t,e)]:[...r,[i(t,e),"=",i(o,e)].join("")]}}(t=Object.assign({encode:!0,strict:!0,arrayFormat:"none"},t)),o=Object.assign({},e);if(t.skipNull)for(const e of Object.keys(o))void 0!==o[e]&&null!==o[e]||delete o[e];const n=Object.keys(o);return!1!==t.sort&&n.sort(t.sort),n.map((o=>{const n=e[o];return void 0===n?"":null===n?i(o,t):Array.isArray(n)?n.reduce(r(o),[]).join("&"):i(o,t)+"="+i(n,t)})).filter((e=>e.length>0)).join("&")},t.parseUrl=(e,t)=>({url:c(e).split("?")[0]||"",query:d(u(e),t)})},88554:e=>{"use strict";e.exports=e=>encodeURIComponent(e).replace(/[!'()*]/g,(e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`))},4206:(e,t,r)=>{"use strict";r.d(t,{hZ:()=>o,pb:()=>n,kD:()=>a,DI:()=>i,IC:()=>l,Vw:()=>u,KD:()=>p,uj:()=>d,lo:()=>f,Yf:()=>y,fo:()=>m,PY:()=>g,bp:()=>b});var o="CHANGE_DRAWING_STATUS",n="DRAW:END_DRAWING",a="DRAW:SET_CURRENT_STYLE",i="DRAW:GEOMETRY_CHANGED",l="DRAW:DRAW_SUPPORT_STOPPED",s="DRAW:FEATURES_SELECTED",c="DRAW:DRAWING_FEATURES";function u(e,t,r,o,n){return{type:i,features:e,owner:t,enableEdit:r,textChanged:o,circleChanged:n}}function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{type:s,features:e}}function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{type:c,features:e}}function f(){return{type:l}}function y(e,t,r,n,a,i){return{type:o,status:e,method:t,owner:r,features:n,options:a,style:i}}function m(e,t){return{type:n,geometry:e,owner:t}}function g(e){return{type:a,currentStyle:e}}var b=function(e){return y("clean","",e,[],{})}},90825:(e,t,r)=>{"use strict";r.d(t,{H:()=>v,k:()=>T});var o=r(80416),n=r(67007),a=r(32420),i=r(75875),l=r.n(i),s=r(72500),c=r.n(s),u=r(37295),p=r.n(u),d=r(5055),f=r.n(d);const y=function(e,t){var r=c().parse(e,!0),o=c().format(p()({},r,{query:p()({service:"WCS",version:"1.1.0",identifiers:t,request:"DescribeCoverage"},r.query)}));return l().get(o).then((function(e){var t;return f().parseString(e.data,{explicitArray:!1},(function(e,r){t=r})),t}))};var m=r(24262),g=r(57546),b=r.n(g),h=r(20721),E=r.n(h);function v(e,t,r){return function(i){return n.ZP.describeLayer(e,t.name,r).then((function(r){return r&&"WFS"===r.owsType?a._c(e,r.name).then((function(e){var n=b()(e,"complexType[0].complexContent.extension.sequence.element"),a=E()(n&&n.filter((function(e){return"the_geom"===e.name||0===e.type.prefix.indexOf("gml")})));return a=a&&a.type.localPart,r.geometryType=a&&a.split("PropertyType")[0],i((0,o.tV)(t.id,"id",{describeLayer:r,describeFeatureType:e}))})).catch((function(){return i((0,o.tV)(t.id,"id",{describeLayer:r||{error:"no describe feature found"}}))})):(r&&"WCS"===r.owsType&&y(e,r.name).then((function(e){var n=b()(e,"wcs:CoverageDescriptions.wcs:CoverageDescription.wcs:Range.wcs:Field.wcs:Axis.wcs:AvailableKeys.wcs:Key");r.bands=n&&"string"==typeof n?["1"]:n.map((function(e,t){return t+1+""})),i((0,o.tV)(t.id,"id",{describeLayer:r,describeCoverage:e}))})).catch((function(){return i((0,o.tV)(t.id,"id",{describeLayer:r||{error:"no describe coverage found"}}))})),i((0,o.tV)(t.id,"id",{describeLayer:r||{error:"no describe Layer found"}})))})).catch((function(e){return i((0,o.tV)(t.id,"id",{describeLayer:{error:e.status}}))}))}}function T(e,t){var r=(0,m.Fh)(e);return function(a){return a((0,o.tV)(e.id,"id",{capabilitiesLoading:!0})),n.ZP.getCapabilities(r,t).then((function(t){var r=n.ZP.parseLayerCapabilities(t,e);a(r?(0,o.tV)(e.id,"id",(0,m.IA)(r)):(0,o.tV)(e.id,"id",{capabilitiesLoading:null,capabilities:{error:"error getting capabilities",details:"no layer info"},description:null}))})).catch((function(t){a((0,o.tV)(e.id,"id",{capabilitiesLoading:null,capabilities:{error:"error getting capabilities",details:t},description:null}))}))}}},40512:(e,t,r)=>{"use strict";r.d(t,{y6:()=>o,g$:()=>n,Xk:()=>a,H1:()=>i,MY:()=>l,Xs:()=>s,no:()=>c,Nd:()=>u,Zq:()=>p,Xr:()=>d,Rb:()=>f,HH:()=>y});var o="LAYER_FILTER:INIT_LAYER_FILTER",n="LAYER_FILTER:APPLIED_FILTER",a="LAYER_FILTER:STORE_CURRENT_APPLIED_FILTER",i="LAYER_FILTER:DISCARD_CURRENT_FILTER",l="LAYER_FILTER:APPLY_FILTER",s="LAYER_FILTER:OPEN_QUERY_BUILDER";function c(){return{type:a}}function u(){return{type:i}}function p(){return{type:s}}function d(e){return{type:n,filter:e}}function f(){return{type:l}}function y(e){return{type:o,filter:e}}},80416:(e,t,r)=>{"use strict";r.d(t,{yS:()=>o,Zz:()=>n,ms:()=>a,ih:()=>i,OX:()=>l,sb:()=>s,K$:()=>c,k7:()=>u,cX:()=>p,x9:()=>d,vs:()=>f,oE:()=>y,Po:()=>m,qv:()=>g,cI:()=>b,g6:()=>h,I4:()=>E,l$:()=>v,Xv:()=>T,k3:()=>O,CQ:()=>L,R8:()=>R,HN:()=>_,sH:()=>w,c7:()=>S,_7:()=>A,eF:()=>P,O6:()=>I,ED:()=>C,RP:()=>F,sF:()=>D,VP:()=>x,He:()=>N,vO:()=>G,WO:()=>j,bh:()=>k,pV:()=>M,MK:()=>Z,ZF:()=>Y,tV:()=>U,Dv:()=>B,Yz:()=>W,kI:()=>H,XG:()=>q,A4:()=>V,Rp:()=>z,ct:()=>Q,oh:()=>X,$h:()=>$,ud:()=>J,Qr:()=>K,LR:()=>ee,nN:()=>te,UG:()=>re,F5:()=>oe,c9:()=>ne,Jh:()=>ae,Xy:()=>ie});var o="CHANGE_LAYER_PROPERTIES",n="LAYERS:CHANGE_LAYER_PARAMS",a="CHANGE_GROUP_PROPERTIES",i="TOGGLE_NODE",l="SORT_NODE",s="REMOVE_NODE",c="UPDATE_NODE",u="MOVE_NODE",p="LAYER_LOADING",d="LAYER_LOAD",f="LAYER_ERROR",y="ADD_LAYER",m="ADD_GROUP",g="REMOVE_LAYER",b="SHOW_SETTINGS",h="HIDE_SETTINGS",E="UPDATE_SETTINGS",v="REFRESH_LAYERS",T="LAYERS:UPDATE_LAYERS_DIMENSION",O="LAYERS_REFRESHED",L="LAYERS_REFRESH_ERROR",R="LAYERS:BROWSE_DATA",_="LAYERS:DOWNLOAD",w="LAYERS:CLEAR_LAYERS",S="LAYERS:SELECT_NODE",A="LAYERS:FILTER_LAYERS",P="LAYERS:SHOW_LAYER_METADATA",I="LAYERS:HIDE_LAYER_METADATA",C="LAYERS:UPDATE_SETTINGS_PARAMS";function F(e,t,r){return{type:b,node:e,nodeType:t,options:r}}function D(){return{type:h}}function x(e){return{type:E,options:e}}function N(e,t){return{type:o,newProperties:t,layer:e}}function G(e,t){return{type:n,layer:e,params:t}}function j(e,t){return{type:a,newProperties:t,group:e}}function k(e,t,r){return{type:i,node:e,nodeType:t,status:!r}}function M(e){return{type:"CONTEXT_NODE",node:e}}function Z(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:l,node:e,order:t,sortLayers:r}}function Y(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{type:s,node:e,nodeType:t,removeEmpty:r}}function U(e,t,r){return{type:c,node:e,nodeType:t,options:r}}function B(e,t,r){return{type:u,node:e,groupId:t,index:r}}function W(e){return{type:p,layerId:e}}function H(e,t){return{type:d,layerId:e,error:t}}function q(e,t,r){return{type:f,layerId:e,tilesCount:t,tilesErrorCount:r}}function V(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return{type:y,layer:e,foreground:t}}function z(e,t,r){return{type:m,group:e,parent:t,options:r}}function Q(e,t){return{type:o,layer:e,newProperties:{_v_:t||(new Date).getTime()}}}function X(e){return{type:O,layers:e}}function $(e,t){return{type:L,layers:e,error:t}}function J(e,t,r,o){return{type:T,dimension:e,value:t,options:r,layers:o}}function K(e){return{type:R,layer:e}}function ee(e){return{type:_,layer:e}}function te(){return{type:w}}function re(e,t,r){return{type:S,id:e,nodeType:t,ctrlKey:r}}function oe(e){return{type:A,text:e}}function ne(e,t){return{type:P,metadataRecord:e,maskLoading:t}}function ae(){return{type:I}}function ie(e,t){return{type:C,newParams:e,update:t}}},7878:(e,t,r)=>{"use strict";r.d(t,{E6:()=>i,vo:()=>l,l1:()=>s,J9:()=>c,U:()=>u,z8:()=>p,ql:()=>d,O_:()=>f,M$:()=>y,Ug:()=>m,p5:()=>g,Fz:()=>b,WZ:()=>h,bP:()=>E,On:()=>v,d_:()=>T,xM:()=>O,bl:()=>L,Wi:()=>R,PN:()=>_,_M:()=>w,Wm:()=>S,Eg:()=>A,V1:()=>P,cY:()=>I,RD:()=>C,Hl:()=>F,co:()=>D,uY:()=>x,H8:()=>N,je:()=>G,go:()=>j,_8:()=>k,xd:()=>M,o7:()=>Z,Nr:()=>Y,Gf:()=>U,nh:()=>B,Rf:()=>W,D6:()=>H,Sm:()=>q,Ef:()=>V,jW:()=>z,kQ:()=>Q,JG:()=>X,js:()=>$,q$:()=>J,OZ:()=>K,Nc:()=>ee,NV:()=>te,I5:()=>re,QL:()=>oe,I:()=>ne,ku:()=>ae,EU:()=>ie,IV:()=>le,HT:()=>se,lg:()=>ce,ds:()=>ue,VF:()=>pe,DD:()=>de,uo:()=>fe,Ry:()=>ye,ZH:()=>me,AQ:()=>ge,yC:()=>be,F:()=>he,mc:()=>Ee,uM:()=>Te,eJ:()=>Oe,uP:()=>Le,N5:()=>Re,bn:()=>_e,Bm:()=>we,F2:()=>Se,jR:()=>Ae,$J:()=>Pe});var o=r(75875),n=r.n(o);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i="ADD_FILTER_FIELD",l="REMOVE_FILTER_FIELD",s="UPDATE_FILTER_FIELD",c="UPDATE_EXCEPTION_FIELD",u="ADD_GROUP_FIELD",p="UPDATE_LOGIC_COMBO",d="REMOVE_GROUP_FIELD",f="CHANGE_CASCADING_VALUE",y="EXPAND_ATTRIBUTE_PANEL",m="EXPAND_SPATIAL_PANEL",g="QUERYFORM:EXPAND_CROSS_LAYER",b="QUERYFORM:SET_CROSS_LAYER_PARAMETER",h="QUERYFORM:RESET_CROSS_LAYER_FILTER",E="SELECT_SPATIAL_METHOD",v="SELECT_VIEWPORT_SPATIAL_METHOD",T="UPDATE_GEOMETRY",O="SELECT_SPATIAL_OPERATION",L="CHANGE_SPATIAL_ATTRIBUTE",R="CHANGE_SPATIAL_FILTER_VALUE",_="REMOVE_SPATIAL_SELECT",w="SHOW_SPATIAL_DETAILS",S="QUERY_FORM_SEARCH",A="QUERY_FORM_RESET",P="SHOW_GENERATED_FILTER",I="CHANGE_DWITHIN_VALUE",C="ZONE_SEARCH",F="ZONE_SEARCH_ERROR",D="ZONE_FILTER",x="ZONE_CHANGE",N="ZONES_RESET",G="SIMPLE_FILTER_FIELD_UPDATE",j="ADD_SIMPLE_FILTER_FIELD",k="REMOVE_SIMPLE_FILTER_FIELD",M="REMOVE_ALL_SIMPLE_FILTER_FIELDS",Z="UPDATE_FILTER_FIELD_OPTIONS",Y="LOADING_FILTER_FIELD_OPTIONS",U="QUERYFORM:ADD_CROSS_LAYER_FILTER_FIELD",B="QUERYFORM:UPDATE_CROSS_LAYER_FILTER_FIELD",W="QUERYFORM:REMOVE_CROSS_LAYER_FILTER_FIELD",H="SET_AUTOCOMPLETE_MODE",q="TOGGLE_AUTOCOMPLETE_MENU",V="QUERYFORM:LOAD_FILTER";function z(e){return{type:i,groupId:e}}function Q(e,t){return{type:u,groupId:e,index:t}}function X(e){return{type:l,rowId:e}}function $(e,t){return{type:q,rowId:e,status:t}}function J(e,t,r,o){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return{type:s,rowId:e,fieldName:t,fieldValue:r,fieldType:o,fieldOptions:n}}function K(e,t){return{type:c,rowId:e,exceptionMessage:t}}function ee(e,t){return{type:p,groupId:e,logic:t}}function te(e){return{type:H,status:e}}function re(e){return{type:d,groupId:e}}function oe(e){return{type:f,attributes:e}}function ne(e){return{type:y,expand:e}}function ae(e){return{type:m,expand:e}}function ie(e){return{type:g,expand:e}}function le(e,t){return{type:b,key:e,value:t}}function se(e,t){return{type:E,fieldName:t,method:e}}function ce(){return{type:v}}function ue(e){return{type:T,geometry:e}}function pe(e,t){return{type:O,fieldName:t,operation:e}}function de(e){return{type:L,attribute:e}}function fe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.feature,r=e.srsName,o=e.collectGeometries,n=e.style,a=e.options,i=e.value;return{type:R,value:i,collectGeometries:o,options:a,geometry:t&&t.geometry,feature:t,srsName:r,style:n}}function ye(){return{type:_}}function me(e){return{type:w,show:e}}function ge(e){return{type:I,distance:e}}function be(e,t){return{type:S,searchUrl:e,filterObj:t}}function he(e){return{type:V,filter:e}}function Ee(e){return{type:A,skip:e}}function ve(e,t){return{type:F,error:e,id:t}}function Te(e,t){return{type:C,active:e,id:t}}function Oe(e,t,r){return function(o){return n().post(e,t,{timeout:1e4,headers:{Accept:"application/json","Content-Type":"text/plain"}}).then((function(n){var i=n.data;if("object"!==a(i))try{i=JSON.parse(i)}catch(n){o(ve("Search result broken ("+e+":   "+t+"): "+n.message,r))}o(function(e,t){return{type:D,data:e,id:t}}(i,r)),o(Te(!1,r))})).catch((function(e){o(ve(e,r))}))}}function Le(e,t){return{type:x,id:e,value:t}}function Re(e){return{type:U,rowId:(new Date).getTime(),groupId:e}}function _e(e,t,r,o){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return{type:B,rowId:e,fieldName:t,fieldValue:r,fieldType:o,fieldOptions:n}}function we(e){return{type:W,rowId:e}}function Se(){return{type:h}}function Ae(e,t){return{type:Y,status:e,filterField:t}}function Pe(e,t,r){return{type:Z,filterField:e,options:t,valuesCount:r}}},95797:(e,t,r)=>{"use strict";r.d(t,{DR:()=>o,S0:()=>n,u7:()=>a,lj:()=>i,yz:()=>l,lN:()=>s,zW:()=>c,Yx:()=>u,VN:()=>p,Hu:()=>d,VT:()=>f,RD:()=>y,Qq:()=>m,R1:()=>g,_T:()=>b,vO:()=>h,XO:()=>E,jG:()=>v,Xc:()=>T,gT:()=>O,rG:()=>L,t3:()=>R,Fs:()=>_,w_:()=>w,Lm:()=>S,rh:()=>A,rP:()=>P,IO:()=>I}),r(75875);var o="LAYER_SELECTED_FOR_SEARCH",n="FEATURE_TYPE_SELECTED",a="FEATURE_TYPE_LOADED",i="FEATURE_LOADED",l="FEATURE_LOADING",s="FEATURE_TYPE_ERROR",c="FEATURE_ERROR",u="QUERY_CREATE",p="QUERY:UPDATE_QUERY",d="QUERY_RESULT",f="QUERY_ERROR",y="RESET_QUERY",m="QUERY",g="INIT_QUERY_PANEL",b="QUERY:TOGGLE_SYNC_WMS",h="QUERY:TOGGLE_LAYER_FILTER";function E(){return{type:b}}function v(){return{type:h}}function T(){return{type:g}}function O(e,t){return{type:n,url:e,typeName:t}}function L(e,t){return{type:a,typeName:e,featureType:t}}function R(e,t){return{type:s,typeName:e,error:t}}function _(e){return{type:l,isLoading:e}}function w(e,t,r,o,n){return{type:d,searchUrl:t,filterObj:r,result:e,queryOptions:o,reason:n}}function S(e){return{type:f,error:e}}function A(e,t){return{type:p,updates:e,reason:t}}function P(e,t){return{type:u,searchUrl:e,filterObj:t}}function I(e,t,r,o){return{type:m,searchUrl:e,filterObj:t,queryOptions:r,reason:o}}},57579:(e,t,r)=>{"use strict";r.d(t,{Jm:()=>l,AE:()=>s,dm:()=>c,n8:()=>u,BV:()=>p,Cz:()=>d,$A:()=>f,eb:()=>y,v8:()=>m,yY:()=>g,ff:()=>b,S0:()=>h,Q6:()=>E,kb:()=>v,GV:()=>T,LH:()=>O,lG:()=>L,Km:()=>R,pV:()=>_,V5:()=>w,IT:()=>S,VR:()=>A,jv:()=>P,oU:()=>I,Ym:()=>C,uU:()=>F,ke:()=>D,nw:()=>x,A4:()=>N,C2:()=>G,Qe:()=>j,Ij:()=>k,Ko:()=>M,E9:()=>Z,K4:()=>Y,c_:()=>U,uT:()=>B,bS:()=>W,Rz:()=>H,t4:()=>q,_k:()=>V,w2:()=>z,YA:()=>Q,sD:()=>X,Rb:()=>$,fy:()=>J,kr:()=>K,f:()=>ee,Ff:()=>te,Pt:()=>re,ep:()=>oe});var o=r(84110),n=r.n(o);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var l="WIDGETS:INSERT",s="WIDGETS:NEW",c="WIDGETS:EDIT",u="WIDGETS:EDIT_NEW",p="WIDGETS:EDITOR_CHANGE",d="WIDGETS:EDITOR_SETTING_CHANGE",f="WIDGETS:UPDATE_PROPERTY",y="WIDGETS:UPDATE_LAYER",m="WIDGETS:CHANGE_LAYOUT",g="WIDGETS:DELETE",b="WIDGETS:CLEAR_WIDGETS",h="WIDGETS:ADD_DEPENDENCY",E="WIDGETS:REMOVE_DEPENDENCY",v="WIDGETS:LOAD_DEPENDENCIES",T="WIDGETS:RESET_DEPENDENCIES",O="WIDGETS:TOGGLE_CONNECTION",L="WIDGETS:OPEN_FILTER_EDITOR",R="WIDGETS:EXPORT_CSV",_="WIDGETS:EXPORT_IMAGE",w="WIDGETS:WIDGET_SELECTED",S="WIDGETS:NEW_CHART",A="floating",P="dependencySelector",I=/^widgets\["?([^"\]]*)"?\]\.?(.*)$/,C="WIDGET:TOGGLE_COLLAPSE",F="WIDGET:TOGGLE_COLLAPSE_ALL",D="WIDGET:TOGGLE_MAXIMIZE",x="WIDGET:TOGGLE_TRAY",N=function(e){return{type:s,widget:e}},G=function(){return{type:S}},j=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:A;return{type:l,target:t,id:n()(),widget:e}},k=function(e,t,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"replace",n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:A;return{type:f,id:e,target:n,key:t,value:r,mode:o}},M=function(e){return{type:y,layer:e}},Z=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:A;return{type:g,target:t,widget:e}},Y=function(){return{type:b}},U=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:A;return{type:m,allLayouts:t,layout:e,target:r}},B=function(e){return{type:c,widget:e}},W=function(e,t){return{type:u,widget:e,settings:t}},H=function(e,t){return{type:p,key:e,value:t}},q=function(e,t){return{type:d,key:e,value:t}},V=function(e){return{type:v,dependencies:e}},z=function(e,t,r,o){return{type:O,active:e,availableDependencies:t,options:r,target:o}},Q=function(e){return q("step",e)},X=function(e){var t=e.data,r=void 0===t?[]:t,o=e.title;return{type:R,data:r,title:void 0===o?"export":o}},$=function(e){var t=e.widgetDivId;return{type:_,widgetDivId:t}},J=function(){return{type:L}},K=function(e,t){return r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({active:e},t),q("".concat(P),r);var r},ee=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:A;return{type:C,widget:e,target:t}},te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A;return{type:F,target:e}},re=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:A;return{type:D,widget:e,target:t}},oe=function(e){return{type:x,value:e}}},80876:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var Bootstrap=__webpack_require__(30294),Message=__webpack_require__(5346).Z,React=__webpack_require__(24852),RenderTemplate=function RenderTemplate(comp,props){var model=props.model;return eval(comp)};const __WEBPACK_DEFAULT_EXPORT__=RenderTemplate},82571:(module,__unused_webpack_exports,__webpack_require__)=>{function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var r,o=_getPrototypeOf(e);if(t){var n=_getPrototypeOf(this).constructor;r=Reflect.construct(o,arguments,n)}else r=o.apply(this,arguments);return _possibleConstructorReturn(this,r)}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var React=__webpack_require__(24852),PropTypes=__webpack_require__(45697),isEqual=__webpack_require__(31476),_require=__webpack_require__(59286),parseTemplate=_require.parseTemplate,Template=function(_React$Component){_inherits(Template,_React$Component);var _super=_createSuper(Template);function Template(){var _this;_classCallCheck(this,Template);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return _this=_super.call.apply(_super,[this].concat(args)),_defineProperty(_assertThisInitialized(_this),"renderContent",(function(){var model=_this.props.model,props=_this.props;return eval(_this.comp)})),_defineProperty(_assertThisInitialized(_this),"parseTemplate",(function(e){parseTemplate(e,(function(e,t){t?_this.props.onError(t.message):(_this.comp=e,_this.forceUpdate())}))})),_this}return _createClass(Template,[{key:"UNSAFE_componentWillMount",value:function(){this.parseTemplate(this.props.template)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.template!==this.props.template&&(this.comp=null,this.parseTemplate(e.template))}},{key:"shouldComponentUpdate",value:function(e){return!isEqual(e,this.props)}},{key:"render",value:function(){if(this.comp){var e=this.props.renderContent?this.props.renderContent(this.comp,this.props):this.renderContent();return React.isValidElement(e)?e:null}return null}}]),Template}(React.Component);_defineProperty(Template,"propTypes",{template:PropTypes.oneOfType([PropTypes.string,PropTypes.func]),model:PropTypes.object,renderContent:PropTypes.func,onError:PropTypes.func}),_defineProperty(Template,"defaultProps",{template:"",model:{},onError:function(){}}),module.exports=Template},72688:(e,t,r)=>{"use strict";r.d(t,{Z:()=>T});var o=r(24852),n=r.n(o),a=r(45697),i=r.n(a),l=r(38560),s=r(43614),c=r(72986),u=r.n(c);function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e}).apply(this,arguments)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?b(e):t}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(c,e);var t,r,o,a,i=(o=c,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=h(o);if(a){var r=h(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return g(this,e)});function c(){var e;f(this,c);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return E(b(e=i.call.apply(i,[this].concat(r))),"onConfirm",(function(){e.props.onConfirm()})),e}return t=c,(r=[{key:"render",value:function(){var e=this,t=n().createElement("span",{role:"footer"},n().createElement("div",{style:{float:"left"}}),n().createElement(l.Z,{ref:"confirmButton",disabled:this.props.running,className:this.props.className,key:"confirmButton",bsStyle:"primary",bsSize:this.props.buttonSize,onClick:function(){e.onConfirm()}},this.props.running?n().createElement(u(),{spinnerName:"circle",overrideSpinnerClassName:"spinner",noFadeIn:!0}):null,this.props.confirmText),this.props.includeCloseButton?n().createElement(l.Z,{key:"cancelButton",ref:"cancelButton",bsSize:this.props.buttonSize,onClick:this.props.onClose},this.props.cancelText):n().createElement("span",null)),r=this.props.body;return n().createElement(s.Z,d({},this.props.options,{show:this.props.show,onHide:this.props.onClose}),n().createElement(s.Z.Header,{key:"dialogHeader",closeButton:!0},n().createElement(s.Z.Title,null,this.props.titleText)),n().createElement(s.Z.Body,null,r),n().createElement(s.Z.Footer,null,t))}}])&&y(t.prototype,r),c}(n().Component);E(v,"propTypes",{className:i().string,show:i().bool,options:i().object,onConfirm:i().func,onClose:i().func,closeGlyph:i().string,style:i().object,buttonSize:i().string,includeCloseButton:i().bool,body:i().oneOfType([i().string,i().element]),titleText:i().oneOfType([i().string,i().element]),confirmText:i().oneOfType([i().string,i().element]),cancelText:i().oneOfType([i().string,i().element]),running:i().bool}),E(v,"defaultProps",{onConfirm:function(){},onClose:function(){},options:{animation:!1},className:"",closeGlyph:"",style:{},includeCloseButton:!0,body:"",titleText:"Confirm Delete",confirmText:"Delete",cancelText:"Cancel"});const T=v},7472:(e,t,r)=>{"use strict";r.d(t,{Z:()=>_});var o=r(37295),n=r.n(o),a=r(45697),i=r.n(a),l=r(24852),s=r.n(l),c=r(85294),u=r.n(c),p=r(72986),d=r.n(p),f=r(5346);function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){L(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?T(e):t}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function L(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var R=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(l,e);var t,r,o,a,i=(o=l,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=O(o);if(a){var r=O(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return v(this,e)});function l(){var e;b(this,l);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return L(T(e=i.call.apply(i,[this].concat(r))),"renderLoading",(function(){return e.props.maskLoading?s().createElement("div",{style:{width:"100%",height:"100%",position:"absolute",overflow:"visible",margin:"auto",verticalAlign:"center",left:"0",background:"rgba(255, 255, 255, 0.5)",zIndex:2}},s().createElement("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -40%)"}},s().createElement(f.Z,{msgId:"loading"}),s().createElement(d(),{spinnerName:"circle",noFadeIn:!0,overrideSpinnerClassName:"spinner"}))):null})),L(T(e),"renderRole",(function(t){return s().Children.toArray(e.props.children).filter((function(e){return e.props.role===t}))})),L(T(e),"hasRole",(function(t){return s().Children.toArray(e.props.children).filter((function(e){return e.props.role===t})).length>0})),L(T(e),"onClickOut",(function(t){e.props.onClickOut&&e.mask===t.target&&e.props.onClickOut(t)})),e}return t=l,(r=[{key:"render",value:function(){var e=this,t=s().createElement("div",{id:this.props.id,style:g({zIndex:3},this.props.style),className:"".concat(this.props.draggable?"modal-dialog-draggable":""," ").concat(this.props.className," modal-dialog-container")},s().createElement("div",{className:this.props.headerClassName+" draggable-header"},this.renderRole("header")),s().createElement("div",{className:this.props.bodyClassName},this.renderLoading(),this.renderRole("body")),this.hasRole("footer")?s().createElement("div",{className:this.props.footerClassName},this.renderRole("footer")):s().createElement("span",null)),r=this.props.draggable?s().createElement(u(),{defaultPosition:this.props.start,bounds:this.props.bounds,handle:".draggable-header, .draggable-header *"},t):t,o=n()({},this.props.style.display?{display:this.props.style.display}:{},this.props.backgroundStyle);return this.props.modal?s().createElement("div",{ref:function(t){e.mask=t},onClick:this.onClickOut,style:o,className:"fade in modal "+this.props.containerClassName,role:"dialog"},r):r}}])&&h(t.prototype,r),l}(s().Component);L(R,"propTypes",{id:i().string.isRequired,style:i().object,backgroundStyle:i().object,className:i().string,maskLoading:i().bool,containerClassName:i().string,headerClassName:i().string,bodyClassName:i().string,footerClassName:i().string,onClickOut:i().func,modal:i().bool,start:i().object,draggable:i().bool,bounds:i().oneOfType([i().string,i().object])}),L(R,"defaultProps",{style:{},backgroundStyle:{background:"rgba(0,0,0,.5)"},start:{x:0,y:150},className:"modal-dialog modal-content",maskLoading:!1,containerClassName:"",headerClassName:"modal-header",bodyClassName:"modal-body",footerClassName:"modal-footer",modal:!1,draggable:!0,bounds:"parent"});const _=R},69235:(e,t,r)=>{"use strict";r.d(t,{Z:()=>b}),r(61057);var o=r(45697),n=r.n(o),a=r(24852),i=r.n(a),l=r(30294);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?f(e):t}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(s,e);var t,r,o,n,a=(o=s,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=y(o);if(n){var r=y(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return d(this,e)});function s(){var e;c(this,s);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return m(f(e=a.call.apply(a,[this].concat(r))),"onFilter",(function(t){e.props.onFilter(t.target.value)})),m(f(e),"onClear",(function(){e.props.onFilter("")})),e}return t=s,(r=[{key:"render",value:function(){var e=this.props.filterText?i().createElement(l.OverlayTrigger,{placement:"bottom",overlay:i().createElement(l.Tooltip,{id:"mapstore-toc-filter"},this.props.tooltipClear)},i().createElement(l.Glyphicon,{glyph:"1-close",className:"text-primary close-filter",onClick:this.onClear})):i().createElement(l.Glyphicon,{className:"text-primary",glyph:"filter"});return i().createElement(l.FormGroup,{className:"mapstore-filter"},i().createElement(l.InputGroup,null,i().createElement(l.FormControl,{value:this.props.filterText,placeholder:this.props.filterPlaceholder,onChange:this.onFilter,onFocus:this.props.onFocus,type:"text"}),i().createElement(l.InputGroup.Addon,{className:"square-button-md"},this.props.loading?i().createElement("div",{className:"toc-inline-loader"}):e)))}}])&&u(t.prototype,r),s}(i().Component);m(g,"propTypes",{loading:n().bool,filterText:n().string,filterPlaceholder:n().oneOfType([n().object,n().string]),onFilter:n().func,onFocus:n().func,tooltipClear:n().oneOfType([n().object,n().string])}),m(g,"defaultProps",{loading:!1,filterText:"",filterPlaceholder:"",onFilter:function(){},onFocus:function(){},tooltipClear:"Clear"});const b=g},43614:(e,t,r)=>{"use strict";r.d(t,{Z:()=>y});var o=r(37295),n=r.n(o),a=r(30294),i=r(61365);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(i,e);var t,r,o,n,a=(o=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=d(o);if(n){var r=d(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return p(this,e)});function i(){return s(this,i),a.apply(this,arguments)}return t=i,(r=[{key:"handleDialogClick",value:function(e){e.target===e.currentTarget&&this.props.onHide(e)}}])&&c(t.prototype,r),i}(a.Modal);const y=n()((0,i.Z)(f),{Body:a.Modal.Body,Dialog:a.Modal.Dialog,Footer:a.Modal.Footer,Header:a.Modal.Header,Title:a.Modal.Title})},50966:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var o=r(61365),n=r(30294);const a=(0,o.Z)(n.OverlayTrigger)},99534:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var o=r(61365),n=r(97763);const a=(0,o.Z)(n.h_)},61365:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var o=r(24852),n=r.n(o),a=r(37275);function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e}).apply(this,arguments)}const l=function(e){return function(t){return n().createElement(e,i({},t,{container:document.querySelector("."+(a.ZP.getConfigProp("themePrefix")||"ms2")+" > div")||document.body}))}}},15135:(e,t,r)=>{"use strict";r.d(t,{Z:()=>f});var o=r(24852),n=r.n(o),a=r(67076),i=r(30294),l=r(50966),s=r(5346),c=r(10511),u=r.n(c),p=["tooltip","tooltipId","tooltipPosition","tooltipTrigger","keyProp","idDropDown","args"];function d(e,t){if(null==e)return{};var r,o,n=function(e,t){if(null==e)return{};var r,o,n={},a=Object.keys(e);for(o=0;o<a.length;o++)r=a[o],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}const f=(0,a.branch)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.tooltip,r=e.tooltipId;return t||r}),(function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.tooltip,o=t.tooltipId,a=t.tooltipPosition,c=void 0===a?"top":a,u=t.tooltipTrigger,f=t.keyProp,y=t.idDropDown,m=t.args,g=d(t,p);return n().createElement(l.Z,{trigger:u,id:y,key:f,placement:c,overlay:n().createElement(i.Tooltip,{id:"tooltip-"+f},o?n().createElement(s.Z,{msgId:o,msgParams:{data:m}}):r)},n().createElement(e,g))}}),(function(e){return function(t){return n().createElement(e,u()(t,["tooltipId","tooltip"]),t.children)}}))},37430:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>ht});var o=r(45697),n=r.n(o),a=r(24852),i=r.n(a),l=r(71703),s=r(22222),c=r(67076),u=r(30294),p=r(80416),d=r(40512),f=r(90825),y=r(1550),m=r(97395),g=r(75110),b=r(71314),h=r(827),E=r(8316),v=r(7147),T=r(7877),O=r(74621),L=r(38842),R=r(24262),_=r(52259),w=r(86638),S=r(5346),A=r(37295),P=r.n(A),I=r(24273),C=r.n(I),F=r(33716),D=r.n(F),x=r(20721),N=r.n(x),G=r(50542),j=r.n(G),k=r(82904),M=r(57579),Z=r(31273),Y=r(88113),U=r(93152),B=r(59309),W=r(69235);function H(e){return(H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function q(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function V(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function z(e,t){return(z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Q(e,t){return!t||"object"!==H(t)&&"function"!=typeof t?X(e):t}function X(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $(e){return($=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function J(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var K=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&z(e,t)}(l,e);var t,r,o,n,a=(o=l,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=$(o);if(n){var r=$(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Q(this,e)});function l(){var e;q(this,l);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return J(X(e=a.call.apply(a,[this].concat(r))),"renderTitle",(function(){return i().createElement(u.Row,null,i().createElement(u.Col,{xs:12,className:"mapstore-toc-head-title-container text-center no-border"},i().createElement("div",{className:"mapstore-toc-head-title",title:e.props.title},i().createElement(u.Glyphicon,{glyph:"1-map"}),"  ",e.props.title)))})),J(X(e),"renderFilter",(function(){return i().createElement(u.Row,null,i().createElement(u.Col,{xs:12,className:"text-center"},i().createElement(W.Z,{onFocus:e.props.onClear,filterPlaceholder:e.props.filterPlaceholder,tooltipClear:e.props.filterTooltipClear,filterText:e.props.filterText,onFilter:e.props.onFilter})))})),J(X(e),"renderTools",(function(){return i().createElement(u.Row,null,i().createElement(u.Col,{xs:12,className:"text-center"},e.props.toolbar))})),e}return t=l,(r=[{key:"render",value:function(){var e=[this.props.showTools,this.props.showFilter,this.props.showTitle].filter((function(e){return e})),t=e.length>0?" toc-head-sections-"+e.length:" toc-head-sections";return i().createElement("div",{className:"mapstore-toc-head"+t},i().createElement(u.Grid,{fluid:!0},this.props.showTitle?this.renderTitle():null,this.props.showFilter?this.renderFilter():null,this.props.showTools?this.renderTools():null))}}])&&V(t.prototype,r),l}(i().Component);J(K,"propTypes",{title:n().string,filterText:n().string,filterPlaceholder:n().oneOfType([n().object,n().string]),showTitle:n().bool,showFilter:n().oneOfType([n().bool,n().number]),showTools:n().bool,toolbar:n().object,onFilter:n().func,onClear:n().func,filterTooltipClear:n().oneOfType([n().object,n().string])}),J(K,"defaultProps",{title:"",filterText:"",filterPlaceholder:"Filter",showTitle:!0,showFilter:!0,showTools:!0,toolbar:null,onFilter:function(){},onClear:function(){},filterTooltipClear:"Clear"});const ee=K;var te=r(90173),re=r(50966),oe=r(72688),ne=(r(8380),r(80643)),ae=r.n(ne),ie=r(37153),le=r.n(ie),se=r(82571),ce=r.n(se),ue=r(7472),pe=r(99534),de=r(80876),fe=r(97195),ye=r.n(fe),me=r(61239),ge=r(11847),be=r(38560);function he(e){return(he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ee(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function ve(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ee(Object(r),!0).forEach((function(t){we(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ee(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Te(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Oe(e,t){return(Oe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Le(e,t){return!t||"object"!==he(t)&&"function"!=typeof t?Re(e):t}function Re(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _e(e){return(_e=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function we(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Se=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Oe(e,t)}(l,e);var t,r,o,n,a=(o=l,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=_e(o);if(n){var r=_e(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Le(this,e)});function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),we(Re(t=a.call(this,e)),"renderMetadata",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=function(e,r){t.setState({collapsed:ve(ve({},t.state.collapsed),{},we({},e,r))})},a=function(e,r){return i().createElement("div",{style:{display:"flex",flexDirection:"row"}},e,i().createElement(be.Z,{style:{margin:"4px 0 0 4px"},className:"square-button-md no-border",onClick:function(){return n(r,!t.state.collapsed[r])}},i().createElement(u.Glyphicon,{glyph:t.state.collapsed[r]?"plus":"minus"})))},l=function(e,t){return"".concat(e,"@item_").concat(t)},s=ye()(e).filter((function(e){return"references"!==e})).map((function(r){var n,s,c=e[r],u="".concat(o,".").concat(r),p="toc.layerMetadata.".concat(r),d=(0,w.S$)(t.context.messages,p)===p?i().createElement(S.Z,{msgId:"toc.layerMetadata.defaultPropName",msgParams:{propName:r}}):i().createElement(S.Z,{msgId:p}),f=function(e){return i().createElement("tr",null,i().createElement("td",null,d),i().createElement("td",null,e))};if(ae()(c))if(c.length){var y="toc.layerMetadata.itemTitles.".concat(r),m=(0,w.S$)(t.context.messages,y),g=m===y?(0,w.S$)(t.context.messages,"toc.layerMetadata.itemTitles.default"):m,b=c.map((function(e,r){var o=l(u,r);return D()(e)?t.renderMetadata(e,c.length>1?a(i().createElement("h4",null,"".concat(g," #").concat(r+1)),o):null,o):i().createElement("li",{key:r},e)}));n=D()(c[0])?(s=i().createElement("div",null,a(i().createElement("h4",null,d),u),t.state.collapsed[u]?null:i().createElement("div",null,b)),i().createElement("tr",null,i().createElement("td",{colSpan:"2"},s))):f(i().createElement("ul",null,b))}else n=null;else if(le()(c)){var h=(0,me.v)(c),E=(0,ge.K2)(c);n=f(h||E?i().createElement("a",{target:"_blank",rel:"noopener noreferrer",href:E?c:"mailto:".concat(c)},c):c)}return n})).filter((function(e){return!!e}));return i().createElement("div",{style:o?{padding:"8px"}:{}},r,t.state.collapsed[o]?null:i().createElement(u.Table,null,i().createElement("tbody",null,s)))})),t.state={collapsed:{}},t}return t=l,(r=[{key:"renderEmpty",value:function(){return i().createElement("div",null,i().createElement(S.Z,{msgId:"toc.layerMetadata.emptyMetadata"}))}},{key:"render",value:function(){var e=this.props.model;return ye()(e).length?i().createElement("div",{style:{maxHeight:"400px",overflow:"auto"},id:e.identifier},this.renderMetadata(e)):this.renderEmpty()}}])&&Te(t.prototype,r),l}(i().Component);we(Se,"propTypes",{model:n().object}),we(Se,"contextTypes",{messages:n().object}),we(Se,"defaultProps",{model:{}});const Ae=Se;function Pe(e){return(Pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ce(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Fe(e,t){return(Fe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function De(e,t){return!t||"object"!==Pe(t)&&"function"!=typeof t?xe(e):t}function xe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ne(e){return(Ne=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ge(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var je=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Fe(e,t)}(l,e);var t,r,o,n,a=(o=l,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ne(o);if(n){var r=Ne(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return De(this,e)});function l(){var e;Ie(this,l);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return Ge(xe(e=a.call.apply(a,[this].concat(r))),"onDelete",(function(){e.props.hideLayerMetadata()})),Ge(xe(e),"onClose",(function(){e.props.hideLayerMetadata()})),Ge(xe(e),"getTemplate",(function(){var t=e.props.metadataTemplate||Ae;if(ae()(t)||le()(t)){var r=ae()(t)?t.join("\n"):t;return i().createElement(ce(),{model:e.props.layerMetadata.metadataRecord,template:r,renderContent:de.Z})}var o=t;return i().createElement(o,{model:e.props.layerMetadata.metadataRecord})})),Ge(xe(e),"renderBodyTemplate",(function(){return e.props.layerMetadata.maskLoading?null:e.getTemplate()})),e}return t=l,(r=[{key:"render",value:function(){var e=i().createElement("span",{role:"footer"});return this.props.layerMetadata.expanded?i().createElement(pe.Z,null,i().createElement(ue.Z,{maskLoading:this.props.layerMetadata.maskLoading,id:this.props.id,style:this.props.panelStyle,className:this.props.panelClassName},i().createElement("span",{role:"header"},i().createElement("span",{className:"layer-settings-metadata-panel-title"},this.props.layerMetadataPanelTitle),i().createElement("button",{onClick:this.onClose,className:"layer-settings-metadata-panel-close close"},this.props.closeGlyph?i().createElement(u.Glyphicon,{glyph:this.props.closeGlyph}):i().createElement("span",null,"×"))),i().createElement("div",{role:"body",style:{minWidth:"500px"}},this.renderBodyTemplate()),e)):null}}])&&Ce(t.prototype,r),l}(i().Component);Ge(je,"propTypes",{id:n().string,layerMetadata:n().object,metadataTemplate:n().oneOfType([n().string,n().array,n().object,n().func]),hideLayerMetadata:n().func,closeGlyph:n().string,panelStyle:n().object,panelClassName:n().string,maskLoading:n().bool,layerMetadataPanelTitle:n().oneOfType([n().string,n().object])}),Ge(je,"defaultProps",{id:"mapstore-layer-settings-metadata",layerMetadata:{expanded:!1},metadataTemplate:null,closeGlyph:"1-close",panelStyle:{},panelClassName:"toolbar-panel portal-dialog",maskLoading:!0,layerMetadataPanelTitle:""});const ke=je;function Me(e){return(Me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ze(){return(Ze=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e}).apply(this,arguments)}function Ye(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function Ue(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ye(Object(r),!0).forEach((function(t){Qe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ye(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Be(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function We(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function He(e,t){return(He=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function qe(e,t){return!t||"object"!==Me(t)&&"function"!=typeof t?Ve(e):t}function Ve(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ze(e){return(ze=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Qe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Xe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&He(e,t)}(l,e);var t,r,o,n,a=(o=l,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ze(o);if(n){var r=ze(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return qe(this,e)});function l(){var e;Be(this,l);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return Qe(Ve(e=a.call.apply(a,[this].concat(r))),"state",{showDeleteDialog:!1}),Qe(Ve(e),"isNestedGroup",(function(){var t=e.props.selectedGroups.map((function(e){return e.id.split(".")}));return N()(t.reduce((function(e,t){return e[0]===t[0]?t:[!1]}),t[0]))})),Qe(Ve(e),"isLoading",(function(){return N()(e.props.selectedLayers.filter((function(e){return e.loading})))})),Qe(Ve(e),"getStatus",(function(){var t=e.props,r=t.selectedLayers,o=t.selectedGroups,n=e.isNestedGroup(),a=0===r.length&0===o.length?"DESELECT":"";return a=1===r.length&0===o.length?"LAYER":a,a=n?"GROUP":a,a=r.length>1&0===o.length?"LAYERS":a,a=o.length>1&&!n?"GROUPS":a,e.props.selectedLayers.length>0&&e.props.selectedLayers.filter((function(e){return"Error"===e.loadingError})).length===e.props.selectedLayers.length?"".concat(a,"_LOAD_ERROR"):a})),Qe(Ve(e),"getSelectedGroup",(function(){return e.props.selectedGroups.length>0&&e.props.selectedGroups[e.props.selectedGroups.length-1]})),Qe(Ve(e),"getSelectedNodeDepth",(function(){return"DESELECT"===e.getStatus()?0:e.getSelectedGroup().id.split(".").length+1})),Qe(Ve(e),"addLayer",(function(){var t=e.getSelectedGroup();e.props.onToolsActions.onAddLayer(t&&t.id)})),Qe(Ve(e),"addGroup",(function(){var t=e.getSelectedGroup();e.props.onToolsActions.onAddGroup(t&&t.id)})),Qe(Ve(e),"browseData",(function(){e.props.onToolsActions.onBrowseData({url:e.props.selectedLayers[0].search.url||e.props.selectedLayers[0].url,name:e.props.selectedLayers[0].name,id:e.props.selectedLayers[0].id})})),Qe(Ve(e),"download",(function(){var t;e.props.onToolsActions.onDownload({url:(null===(t=e.props.selectedLayers[0].search)||void 0===t?void 0:t.url)||e.props.selectedLayers[0].url,name:e.props.selectedLayers[0].name,id:e.props.selectedLayers[0].id})})),Qe(Ve(e),"checkBbox",(function(){var t=e.props.selectedLayers.filter((function(e){return e.bbox})).map((function(e){return e.bbox})),r=t.length>0?t.reduce((function(e,t){return e.crs===t.crs?e:{crs:"differentCRS"}})):{crs:"differentCRS"};return!!N()(t)&&"differentCRS"!==r.crs&&r.crs})),Qe(Ve(e),"zoomTo",(function(){var t=e.props.selectedLayers.filter((function(e){return e.bbox})).map((function(e){return e.bbox})),r=t.length>1?t.reduce((function(e,t){return{bounds:{maxx:e.bounds.maxx>t.bounds.maxx?e.bounds.maxx:t.bounds.maxx,maxy:e.bounds.maxy>t.bounds.maxy?e.bounds.maxy:t.bounds.maxy,minx:e.bounds.minx<t.bounds.minx?e.bounds.minx:t.bounds.minx,miny:e.bounds.miny<t.bounds.miny?e.bounds.miny:t.bounds.miny},crs:t.crs}}),t[0]):t[0];e.props.onToolsActions.onZoom(r.bounds,r.crs)})),Qe(Ve(e),"showSettings",(function(t){e.props.settings.expanded?e.props.onToolsActions.onHideSettings():"LAYER"===t||"LAYER_LOAD_ERROR"===t?e.props.onToolsActions.onSettings(e.props.selectedLayers[0].id,"layers",{opacity:parseFloat(void 0!==e.props.selectedLayers[0].opacity?e.props.selectedLayers[0].opacity:1)}):"GROUP"===t&&e.props.onToolsActions.onSettings(e.props.selectedGroups[e.props.selectedGroups.length-1].id,"groups",{})})),Qe(Ve(e),"showMetadata",(function(){e.props.layerMetadata.expanded?e.props.onToolsActions.onHideLayerMetadata():e.props.onToolsActions.onGetMetadataRecord(e.props.options.metadataOptions)})),Qe(Ve(e),"removeNodes",(function(){e.props.selectedLayers.forEach((function(t){e.props.onToolsActions.onRemove(t.id,"layers")})),e.props.selectedGroups.forEach((function(t){e.props.onToolsActions.onRemove(t.id,"groups")})),e.props.onToolsActions.onClear(),e.closeDeleteDialog()})),Qe(Ve(e),"reload",(function(){e.props.selectedLayers.forEach((function(t){e.props.onToolsActions.onShow(t.id,{visibility:!0}),e.props.onToolsActions.onReload(t.id)}))})),Qe(Ve(e),"closeDeleteDialog",(function(){e.setState({showDeleteDialog:!1})})),Qe(Ve(e),"displayDeleteDialog",(function(){e.setState({showDeleteDialog:!0})})),e}return t=l,(r=[{key:"render",value:function(){var e=this,t=this.getStatus(),r=this.checkBbox(),o=r&&te.default.defs(r),n=i().createElement(ke,{key:"toollayermetadatamodal",layerMetadata:this.props.layerMetadata,metadataTemplate:this.props.metadataTemplate,hideLayerMetadata:this.props.onToolsActions.onHideLayerMetadata,layerMetadataPanelTitle:this.props.text.layerMetadataPanelTitle});return this.props.activateTool.activateToolsContainer?i().createElement(u.ButtonGroup,null,this.props.activateTool.activateLayerInfoTool&&"DESELECT"===t?i().createElement(re.Z,{key:"layerInfo",placement:"top",overlay:i().createElement(u.Tooltip,{id:"toc-tooltip-layerInfo"},this.props.text.layerInfoTooltip)},i().createElement(be.Z,{key:"layerInfo",bsStyle:"primary",className:"square-button-md",onClick:this.props.onToolsActions.onLayerInfo},i().createElement(u.Glyphicon,{glyph:"layer-info"}))):null,!this.props.activateTool.activateAddLayer||"DESELECT"!==t&&"GROUP"!==t?null:i().createElement(re.Z,{key:"addLayer",placement:"top",overlay:i().createElement(u.Tooltip,{id:"toc-tooltip-addLayer"},"GROUP"===t?this.props.text.addLayerToGroupTooltip:this.props.text.addLayerTooltip)},i().createElement(be.Z,{key:"addLayer",bsStyle:"primary",className:"square-button-md",onClick:this.addLayer},i().createElement(u.Glyphicon,{glyph:"add-layer"}))),this.props.activateTool.activateAddGroup&&("DESELECT"===t||"GROUP"===t)&&this.getSelectedNodeDepth()<=this.props.maxDepth?i().createElement(re.Z,{key:"addGroup",placement:"top",overlay:i().createElement(u.Tooltip,{id:"toc-tooltip-addGroup"},"GROUP"===t?this.props.text.addSubGroupTooltip:this.props.text.addGroupTooltip)},i().createElement(be.Z,{key:"addGroup",bsStyle:"primary",className:"square-button-md",onClick:this.addGroup},i().createElement(u.Glyphicon,{glyph:"add-folder"}))):null,this.props.activateTool.activateZoomTool&&("LAYER"===t||"GROUP"===t||"LAYERS"===t||"GROUPS"===t)&&r?i().createElement(re.Z,{key:"zoomTo",placement:"top",overlay:i().createElement(u.Tooltip,{id:"toc-tooltip-zoomTo"},o?this.props.text.zoomToTooltip[this.props.selectedLayers.length>1?"LAYERS":"LAYER"]:i().createElement(S.Z,{msgId:"toc.epsgNotSupported",msgParams:{epsg:r||" "}}))},i().createElement(be.Z,{bsStyle:"primary",className:"square-button-md",style:o?{opacity:1,cursor:"pointer"}:{opacity:.5,cursor:"default"},onClick:o?this.zoomTo:function(){}},i().createElement(u.Glyphicon,{glyph:"zoom-to"}))):null,!this.props.activateTool.activateSettingsTool||"LAYER"!==t&&"GROUP"!==t&&"LAYER_LOAD_ERROR"!==t||this.props.layerMetadata.expanded||this.props.layerdownload.expanded?null:i().createElement(re.Z,{key:"settings",placement:"top",overlay:i().createElement(u.Tooltip,{id:"toc-tooltip-settings"},this.props.text.settingsTooltip["LAYER_LOAD_ERROR"===t?"LAYER":t])},i().createElement(be.Z,{active:this.props.settings.expanded,bsStyle:this.props.settings.expanded?"success":"primary",className:"square-button-md",onClick:function(){e.showSettings(t)}},i().createElement(u.Glyphicon,{glyph:"wrench"}))),!this.props.activateTool.activateLayerFilterTool||"LAYER"!==t&&"LAYER_LOAD_ERROR"!==t||!this.props.selectedLayers[0].search||this.props.settings.expanded||this.props.layerMetadata.expanded||this.props.layerdownload.expanded?null:i().createElement(re.Z,{key:"queryPanel",placement:"top",overlay:i().createElement(u.Tooltip,{id:"toc-tooltip-layerFilter"},this.props.text.layerFilterTooltip)},i().createElement(be.Z,{bsStyle:"primary",className:"square-button-md",onClick:this.props.onToolsActions.onQueryBuilder},i().createElement(u.Glyphicon,{glyph:"filter-layer"}))),!this.props.activateTool.activateQueryTool||"LAYER"!==t||!this.props.selectedLayers[0].search||this.props.settings.expanded||this.props.layerMetadata.expanded||this.props.layerdownload.expanded?null:i().createElement(re.Z,{key:"featuresGrid",placement:"top",overlay:i().createElement(u.Tooltip,{id:"toc-tooltip-featuresGrid"},this.props.text.featuresGridTooltip)},i().createElement(be.Z,{bsStyle:"primary",className:"square-button-md",onClick:this.browseData},i().createElement(u.Glyphicon,{glyph:"features-grid"}))),(!this.props.activateTool.activateRemoveLayer||"LAYER"!==t&&"LAYERS"!==t&&"LAYER_LOAD_ERROR"!==t&&"LAYERS_LOAD_ERROR"!==t)&&(!this.props.activateTool.activateRemoveGroup||"GROUP"!==t&&"GROUPS"!==t&&"GROUP_LOAD_ERROR"!==t&&"GROUPS_LOAD_ERROR"!==t)||this.props.settings.expanded||this.props.layerMetadata.expanded||this.props.layerdownload.expanded?null:i().createElement(re.Z,{key:"removeNode",placement:"top",overlay:i().createElement(u.Tooltip,{id:"toc-tooltip-trash"},this.props.selectedGroups.length?this.props.text.trashTooltip.GROUP:this.props.text.trashTooltip[this.props.selectedLayers.length>1?"LAYERS":"LAYER"])},i().createElement(be.Z,{active:this.state.showDeleteDialog,bsStyle:this.props.settings.showDeleteDialog?"success":"primary",className:"square-button-md",onClick:this.displayDeleteDialog},i().createElement(u.Glyphicon,{glyph:"trash"}))),!this.isLoading()&&"LAYER_LOAD_ERROR"===t||"LAYERS_LOAD_ERROR"===t?i().createElement(re.Z,{key:"reload",placement:"top",overlay:i().createElement(u.Tooltip,{id:"toc-tooltip-reload"},this.props.text.reloadTooltip[this.props.selectedLayers.length>1?"LAYERS":"LAYER"])},i().createElement(be.Z,{bsStyle:"primary",className:"square-button-md",onClick:this.reload},i().createElement(u.Glyphicon,{glyph:"refresh"}))):null,!this.props.activateTool.activateWidgetTool||"LAYER"!==t||1!==this.props.selectedLayers.length||!this.props.selectedLayers[0].search||"vector"===this.props.selectedLayers[0].search||this.props.settings.expanded||this.props.layerMetadata.expanded||this.props.layerdownload.expanded?null:i().createElement(re.Z,{key:"widgets",placement:"top",overlay:i().createElement(u.Tooltip,{id:"toc-tooltip-widgets"},this.props.text.createWidgetTooltip)},i().createElement(be.Z,{bsStyle:"primary",className:"square-button-md",onClick:this.props.onToolsActions.onNewWidget},i().createElement(u.Glyphicon,{glyph:"stats"}))),!this.props.activateTool.activateDownloadTool||"LAYER"!==t||"wms"!==this.props.selectedLayers[0].type&&!this.props.selectedLayers[0].search||this.props.settings.expanded||this.props.layerMetadata.expanded?null:i().createElement(re.Z,{key:"downloadTool",placement:"top",overlay:i().createElement(u.Tooltip,{id:"toc-tooltip-downloadTool"},this.props.text.downloadToolTooltip)},i().createElement(be.Z,{bsStyle:this.props.layerdownload.expanded?"success":"primary",className:"square-button-md",onClick:this.download},i().createElement(u.Glyphicon,{glyph:"download"}))),!this.props.activateTool.activateMetedataTool||"LAYER"!==t||this.props.settings.expanded||this.props.layerdownload.expanded?null:i().createElement(re.Z,{key:"layerMetadata",placement:"top",overlay:i().createElement(u.Tooltip,{id:"legend-tooltip-metadata"},this.props.text.layerMetadataTooltip)},i().createElement(be.Z,{key:"layer-metadata",bsStyle:this.props.layerMetadata.expanded?"success":"primary",className:"square-button-md",onClick:function(){return e.showMetadata()}},i().createElement(u.Glyphicon,{glyph:"info-sign"}))),this.props.items.filter((function(r){var o=r.selector;return(void 0===o?function(){return!0}:o)(Ue(Ue({},e.props),{},{status:t}))})).map((function(r){var o=r.Component;return i().createElement(o,Ze({},e.props,{status:t}))})),i().createElement(oe.Z,{ref:"removelayer",options:{animation:!1,className:"modal-fixed"},show:this.state.showDeleteDialog,onHide:this.closeDeleteDialog,onClose:this.closeDeleteDialog,onConfirm:this.removeNodes,titleText:this.props.selectedGroups&&this.props.selectedGroups.length?this.props.text.confirmDeleteLayerGroupText:this.props.text.confirmDeleteText,confirmText:this.props.text.confirmDeleteConfirmText,cancelText:this.props.text.confirmDeleteCancelText,body:this.props.selectedGroups&&this.props.selectedGroups.length?this.props.text.confirmDeleteLayerGroupMessage:this.props.text.confirmDeleteMessage}),n):null}}])&&We(t.prototype,r),l}(i().Component);Qe(Xe,"propTypes",{groups:n().array,items:n().array,selectedLayers:n().array,generalInfoFormat:n().string,selectedGroups:n().array,onToolsActions:n().object,text:n().object,activateTool:n().object,options:n().object,style:n().object,settings:n().object,layerMetadata:n().object,layerdownload:n().object,maxDepth:n().number,metadataTemplate:n().oneOfType([n().string,n().array,n().object,n().func])}),Qe(Xe,"defaultProps",{groups:[],items:[],selectedLayers:[],selectedGroups:[],onToolsActions:{onZoom:function(){},onNewWidget:function(){},onBrowseData:function(){},onQueryBuilder:function(){},onUpdate:function(){},onRemove:function(){},onClear:function(){},onSettings:function(){},onUpdateSettings:function(){},onRetrieveLayerData:function(){},onHideSettings:function(){},onReload:function(){},onAddLayer:function(){},onAddGroup:function(){},onDownload:function(){},onGetMetadataRecord:function(){},onHideLayerMetadata:function(){},onShow:function(){},onLayerInfo:function(){}},maxDepth:3,text:{settingsText:"",opacityText:"",elevationText:"",saveText:"",closeText:"",confirmDeleteText:"",confirmDeleteMessage:"",confirmDeleteConfirmText:"",confirmDeleteCancelText:"",createWidgetTooltip:"",addLayerTooltip:"",addLayerToGroupTooltip:"",addGroupTooltip:"",addSubGroupTooltip:"",zoomToTooltip:{LAYER:"",LAYERS:""},settingsTooltip:{LAYER:"",GROUP:""},featuresGridTooltip:"",downloadToolTooltip:"",trashTooltip:{LAYER:"",LAYERS:"",GROUP:""},reloadTooltip:{LAYER:"",LAYERS:""},layerMetadataTooltip:"",layerMetadataPanelTitle:"",layerFilter:"",layerInfoTooltip:""},activateTool:{activateToolsContainer:!0,activateRemoveLayer:!0,activateRemoveGroup:!0,activateZoomTool:!0,activateQueryTool:!0,activateDownloadTool:!0,activateSettingsTool:!0,activateAddLayer:!0,activateAddGroup:!0,includeDeleteButtonInSettings:!1,activateMetedataTool:!0,activateLayerFilterTool:!0,activateLayerInfoTool:!0},options:{modalOptions:{},metadataOptions:{},settingsOptions:{}},style:{chartStyle:{}},settings:{},layerMetadata:{},layerdownload:{},metadataTemplate:null});const $e=Xe;var Je=r(29180),Ke=r(51269),et=r(29423),tt=r(64152);function rt(e){return(rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ot(){return(ot=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e}).apply(this,arguments)}function nt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function at(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function it(e,t){return(it=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function lt(e,t){return!t||"object"!==rt(t)&&"function"!=typeof t?st(e):t}function st(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ct(e){return(ct=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ut(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var pt=function e(t,r){return t.reduce((function(t,o){var n=P()({},o);return n.nodes&&(n=P()({},n,{nodes:e(n.nodes,r)})),r.forEach((function(e){n=e.func(n)?P()({},n,e.options):P()({},n)})),t.push(n),t}),[])},dt=function(e,t,r){return-1!==((D()(e.title)?e.title[r]||e.title.default:e.title)||e.name).toLowerCase().indexOf(t.toLowerCase())},ft=(0,s.P1)([function(e){return e.controls&&e.controls.toolbar&&"toc"===e.controls.toolbar.active},g.Bt,g.jN,b.yn,g.yj,g.lI,h.Od,E.Pz,E.KV,g.NP,g.wA,g.l2,h.Zs,Y.$t,v.PJ,T.us,U.c0,O.np,L.wk],(function(e,t,r,o,n,a,i,l,s,c,u,p,d,f,y,m,g,b,h){return{enabled:e,groups:t,settings:r,swipeSettings:o,layerMetadata:n,layerdownload:a,currentZoomLvl:i&&i.zoom,scales:(0,_.getScales)(i&&i.projection||"EPSG:3857",i&&i.mapOptions&&i.mapOptions.view&&i.mapOptions.view.DPI||null),currentLocale:l,currentLocaleLanguage:s,selectedNodes:c,filterText:u,generalInfoFormat:m,selectedLayers:p.filter((function(e){return N()(c.filter((function(t){return t===e.id})))})),noFilterResults:0===p.filter((function(e){return dt(e,u,l)})).length,updatableLayersCount:p.filter((function(e){return"background"!==e.group&&("wms"===e.type||"wmts"===e.type)})).length,selectedGroups:c.map((function(e){return(0,R.Mk)(t,e)})).filter((function(e){return e&&e.nodes})),mapName:d,filteredGroups:pt(t,[{options:{showComponent:!0},func:function(){return!u}},{options:{loadingError:!0},func:function(e){return N()((e.nodes||[]).filter((function(e){return e.loadingError&&"Warning"!==e.loadingError})))}},{options:{expanded:!0,showComponent:!0},func:function(e){return u&&N()((e.nodes||[]).filter((function(t){return dt(t,u,l)||t.nodes&&N()(e.nodes.filter((function(e){return e.showComponent})))})))}},{options:{showComponent:!1},func:function(e){return N()((e.nodes||[]).filter((function(e){return e.hidden||"annotations"===e.id&&g})))&&1===e.nodes.length}},{options:{showComponent:!1},func:function(e){return"annotations"===e.id&&g}}]),catalogActive:f,activateWidgetTool:y,user:b,isLocalizedLayerStylesEnabled:h}})),yt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&it(e,t)}(l,e);var t,r,o,n,a=(o=l,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ct(o);if(n){var r=ct(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return lt(this,e)});function l(){var e;nt(this,l);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return ut(st(e=a.call.apply(a,[this].concat(r))),"getNoBackgroundLayers",(function(e){return"background"!==e.name})),ut(st(e),"getDefaultGroup",(function(){var t=e.props.groupNodeComponent||Je.Z;return i().createElement(t,ot({onSort:!e.props.filterText&&e.props.activateSortLayer?e.props.onSort:null},e.props.groupOptions,{titleTooltip:e.props.activateTitleTooltip,propertiesChangeHandler:e.props.groupPropertiesChangeHandler,onToggle:e.props.onToggleGroup,style:e.props.groupStyle,groupVisibilityCheckbox:!0,visibilityCheckType:e.props.visibilityCheckType,currentLocale:e.props.currentLocale,selectedNodes:e.props.selectedNodes,onSelect:e.props.activateToolsContainer?e.props.onSelectNode:null}))})),ut(st(e),"getDefaultLayer",(function(){var t=e.props.layerNodeComponent||Ke.Z,r=(e.props.resolutions||(0,_.getResolutions)())[e.props.currentZoomLvl];return i().createElement(t,ot({},e.props.layerOptions,{titleTooltip:e.props.activateTitleTooltip,showFullTitleOnExpand:e.props.showFullTitleOnExpand,onToggle:e.props.onToggleLayer,activateOpacityTool:e.props.activateOpacityTool,onContextMenu:e.props.onContextMenu,propertiesChangeHandler:e.props.layerPropertiesChangeHandler,onSelect:e.props.activateToolsContainer?e.props.onSelectNode:null,visibilityCheckType:e.props.visibilityCheckType,activateLegendTool:e.props.activateLegendTool,currentZoomLvl:e.props.currentZoomLvl,scales:e.props.scales,currentLocale:e.props.currentLocale,selectedNodes:e.props.selectedNodes,filterText:e.props.filterText,onUpdateNode:e.props.updateNode,hideOpacityTooltip:e.props.hideOpacityTooltip,language:e.props.isLocalizedLayerStylesEnabled?e.props.currentLocaleLanguage:null,resolution:r}))})),ut(st(e),"renderTOC",(function(){var t=e.getDefaultGroup(),r=e.getDefaultLayer(),o=[e.props.activateToolsContainer,e.props.activateFilterLayer,e.props.activateMapTitle].filter((function(e){return e})),n=o.length>0?" toc-body-sections-"+o.length:" toc-body-sections";return i().createElement("div",null,i().createElement(ee,{title:e.props.mapName,showTitle:e.props.activateMapTitle,showFilter:e.props.activateFilterLayer&&(e.props.groups.filter((function(e){return(e.nodes||[]).length}))||[]).length,showTools:e.props.activateToolsContainer,onClear:function(){e.props.onSelectNode()},onFilter:e.props.onFilter,filterTooltipClear:i().createElement(S.Z,{msgId:"toc.clearFilter"}),filterPlaceholder:(0,w.S$)(e.context.messages,"toc.filterPlaceholder"),filterText:e.props.filterText,toolbar:i().createElement($e,{items:e.props.items.filter((function(e){return"toolbar"===e.target})),groups:e.props.groups,selectedLayers:e.props.selectedLayers,selectedGroups:e.props.selectedGroups,generalInfoFormat:e.props.generalInfoFormat,settings:e.props.settings,swipeSettings:e.props.swipeSettings,layerMetadata:e.props.layerMetadata,layerdownload:e.props.layerdownload,metadataTemplate:e.props.metadataTemplate,maxDepth:e.props.maxDepth,activateTool:{activateToolsContainer:e.props.activateToolsContainer,activateRemoveLayer:e.props.activateRemoveLayer,activateRemoveGroup:e.props.activateRemoveGroup,activateZoomTool:e.props.activateZoomTool,activateQueryTool:e.props.activateQueryTool,activateDownloadTool:e.props.activateDownloadTool,activateSettingsTool:e.props.activateSettingsTool,activateAddLayer:e.props.activateAddLayerButton&&!e.props.catalogActive,activateAddGroup:e.props.activateAddGroupButton,includeDeleteButtonInSettings:!1,activateMetedataTool:e.props.activateMetedataTool,activateWidgetTool:e.props.activateWidgetTool,activateLayerFilterTool:e.props.activateLayerFilterTool,activateLayerInfoTool:e.props.updatableLayersCount>0&&e.props.activateLayerInfoTool},options:{modalOptions:{},metadataOptions:e.props.metadataOptions,settingsOptions:e.props.settingsOptions},style:{chartStyle:e.props.chartStyle},text:{settingsText:i().createElement(S.Z,{msgId:"layerProperties.windowTitle"}),opacityText:i().createElement(S.Z,{msgId:"opacity"}),elevationText:i().createElement(S.Z,{msgId:"elevation"}),saveText:i().createElement(S.Z,{msgId:"save"}),closeText:i().createElement(S.Z,{msgId:"close"}),confirmDeleteText:i().createElement(S.Z,{msgId:"layerProperties.deleteLayer"}),confirmDeleteMessage:i().createElement(S.Z,{msgId:"layerProperties.deleteLayerMessage"}),confirmDeleteLayerGroupText:i().createElement(S.Z,{msgId:"layerProperties.deleteLayerGroup"}),confirmDeleteLayerGroupMessage:i().createElement(S.Z,{msgId:"layerProperties.deleteLayerGroupMessage"}),confirmDeleteConfirmText:i().createElement(S.Z,{msgId:"layerProperties.delete"}),confirmDeleteCancelText:i().createElement(S.Z,{msgId:"cancel"}),addLayer:i().createElement(S.Z,{msgId:"toc.addLayer"}),addLayerTooltip:i().createElement(S.Z,{msgId:"toc.addLayer"}),addLayerToGroupTooltip:i().createElement(S.Z,{msgId:"toc.addLayerToGroup"}),addGroupTooltip:i().createElement(S.Z,{msgId:"toc.addGroup"}),addSubGroupTooltip:i().createElement(S.Z,{msgId:"toc.addSubGroup"}),createWidgetTooltip:i().createElement(S.Z,{msgId:"toc.createWidget"}),zoomToTooltip:{LAYER:i().createElement(S.Z,{msgId:"toc.toolZoomToLayerTooltip"}),LAYERS:i().createElement(S.Z,{msgId:"toc.toolZoomToLayersTooltip"})},settingsTooltip:{LAYER:i().createElement(S.Z,{msgId:"toc.toolLayerSettingsTooltip"}),GROUP:i().createElement(S.Z,{msgId:"toc.toolGroupSettingsTooltip"})},featuresGridTooltip:i().createElement(S.Z,{msgId:"toc.toolFeaturesGridTooltip"}),downloadToolTooltip:i().createElement(S.Z,{msgId:"toc.toolDownloadTooltip"}),trashTooltip:{LAYER:i().createElement(S.Z,{msgId:"toc.toolTrashLayerTooltip"}),LAYERS:i().createElement(S.Z,{msgId:"toc.toolTrashLayersTooltip"}),GROUP:i().createElement(S.Z,{msgId:"toc.toolTrashGroupTooltip"})},reloadTooltip:{LAYER:i().createElement(S.Z,{msgId:"toc.toolReloadLayerTooltip"}),LAYERS:i().createElement(S.Z,{msgId:"toc.toolReloadLayersTooltip"})},layerMetadataTooltip:i().createElement(S.Z,{msgId:"toc.layerMetadata.toolLayerMetadataTooltip"}),layerMetadataPanelTitle:i().createElement(S.Z,{msgId:"toc.layerMetadata.layerMetadataPanelTitle"}),layerFilterTooltip:i().createElement(S.Z,{msgId:"toc.layerFilterTooltip"}),layerInfoTooltip:i().createElement(S.Z,{msgId:"toc.layerInfoTooltip"})},onToolsActions:{onZoom:e.props.onZoomToExtent,onNewWidget:e.props.onNewWidget,onBrowseData:e.props.onBrowseData,onQueryBuilder:e.props.onQueryBuilder,onDownload:e.props.onDownload,onUpdate:e.props.updateNode,onRemove:e.props.removeNode,onClear:e.props.onSelectNode,onSettings:e.props.onSettings,onUpdateSettings:e.props.updateSettings,onRetrieveLayerData:e.props.retrieveLayerData,onHideSettings:e.props.hideSettings,onReload:e.props.refreshLayerVersion,onAddLayer:e.props.onAddLayer,onAddGroup:e.props.onAddGroup,onGetMetadataRecord:e.props.onGetMetadataRecord,onHideLayerMetadata:e.props.hideLayerMetadata,onShow:e.props.layerPropertiesChangeHandler,onLayerInfo:e.props.onLayerInfo}})}),i().createElement("div",{className:"mapstore-toc"+n},e.props.noFilterResults&&e.props.filterText?i().createElement("div",null,i().createElement("div",{className:"toc-filter-no-results"},i().createElement(S.Z,{msgId:"toc.noFilteredResults"}))):i().createElement(B.Z,{onError:e.props.onError,onSort:!e.props.filterText&&e.props.activateSortLayer?e.props.onSort:null,filter:e.getNoBackgroundLayers,nodes:e.props.filteredGroups},i().createElement(et.Z,{groupElement:t,layerElement:r}))))})),e}return t=l,(r=[{key:"render",value:function(){return this.props.groups?this.renderTOC():i().createElement("div",null)}}])&&at(t.prototype,r),l}(i().Component);ut(yt,"propTypes",{id:n().number,items:n().array,buttonContent:n().node,groups:n().array,settings:n().object,swipeSettings:n().object,layerMetadata:n().object,layerdownload:n().object,metadataTemplate:n().oneOfType([n().string,n().array,n().object,n().func]),refreshMapEnabled:n().bool,groupStyle:n().object,groupPropertiesChangeHandler:n().func,layerPropertiesChangeHandler:n().func,onToggleGroup:n().func,onToggleLayer:n().func,onContextMenu:n().func,onBrowseData:n().func,onQueryBuilder:n().func,onDownload:n().func,onSelectNode:n().func,selectedNodes:n().array,onZoomToExtent:n().func,retrieveLayerData:n().func,onSort:n().func,onSettings:n().func,onRefreshLayer:n().func,onNewWidget:n().func,hideSettings:n().func,updateSettings:n().func,updateNode:n().func,removeNode:n().func,activateTitleTooltip:n().bool,showFullTitleOnExpand:n().bool,activateOpacityTool:n().bool,activateSortLayer:n().bool,activateFilterLayer:n().bool,activateMapTitle:n().bool,activateToolsContainer:n().bool,activateRemoveLayer:n().bool,activateRemoveGroup:n().bool,activateLegendTool:n().bool,activateZoomTool:n().bool,activateQueryTool:n().bool,activateDownloadTool:n().bool,activateSettingsTool:n().bool,activateMetedataTool:n().bool,activateWidgetTool:n().bool,activateLayerInfoTool:n().bool,maxDepth:n().number,visibilityCheckType:n().string,settingsOptions:n().object,chartStyle:n().object,currentZoomLvl:n().number,scales:n().array,layerOptions:n().object,metadataOptions:n().object,spatialOperations:n().array,spatialMethodOptions:n().array,groupOptions:n().object,currentLocale:n().string,currentLocaleLanguage:n().string,onFilter:n().func,filterText:n().string,generalInfoFormat:n().string,selectedLayers:n().array,selectedGroups:n().array,mapName:n().string,filteredGroups:n().array,noFilterResults:n().bool,onAddLayer:n().func,onAddGroup:n().func,onError:n().func,onGetMetadataRecord:n().func,hideLayerMetadata:n().func,activateAddLayerButton:n().bool,activateAddGroupButton:n().bool,activateLayerFilterTool:n().bool,catalogActive:n().bool,refreshLayerVersion:n().func,hideOpacityTooltip:n().bool,layerNodeComponent:n().func,groupNodeComponent:n().func,isLocalizedLayerStylesEnabled:n().bool,onLayerInfo:n().func,onSetSwipeActive:n().func,updatableLayersCount:n().number,onSetSwipeMode:n().func,resolutions:n().func}),ut(yt,"contextTypes",{messages:n().object}),ut(yt,"defaultProps",{items:[],groupPropertiesChangeHandler:function(){},layerPropertiesChangeHandler:function(){},retrieveLayerData:function(){},onToggleGroup:function(){},onToggleLayer:function(){},onContextMenu:function(){},onToggleQuery:function(){},onZoomToExtent:function(){},onSettings:function(){},onRefreshLayer:function(){},onNewWidget:function(){},updateNode:function(){},removeNode:function(){},onSelectNode:function(){},selectedNodes:[],activateOpacityTool:!0,activateTitleTooltip:!0,showFullTitleOnExpand:!1,activateSortLayer:!0,activateFilterLayer:!0,activateMapTitle:!0,activateToolsContainer:!0,activateLegendTool:!0,activateZoomTool:!0,activateSettingsTool:!0,activateMetedataTool:!0,activateRemoveLayer:!0,activateRemoveGroup:!0,activateQueryTool:!0,activateDownloadTool:!0,activateWidgetTool:!1,activateLayerFilterTool:!1,activateLayerInfoTool:!0,maxDepth:3,visibilityCheckType:"glyph",settingsOptions:{includeCloseButton:!1,closeGlyph:"1-close",buttonSize:"small",showFeatureInfoTab:!0},layerOptions:{},metadataOptions:{},groupOptions:{},spatialOperations:[{id:"INTERSECTS",name:"queryform.spatialfilter.operations.intersects"},{id:"BBOX",name:"queryform.spatialfilter.operations.bbox"},{id:"CONTAINS",name:"queryform.spatialfilter.operations.contains"},{id:"WITHIN",name:"queryform.spatialfilter.operations.within"}],spatialMethodOptions:[{id:"Viewport",name:"queryform.spatialfilter.methods.viewport"},{id:"BBOX",name:"queryform.spatialfilter.methods.box"},{id:"Circle",name:"queryform.spatialfilter.methods.circle"},{id:"Polygon",name:"queryform.spatialfilter.methods.poly"}],currentLocale:"en-US",filterText:"",selectedLayers:[],selectedGroups:[],mapName:"",filteredGroups:[],noFilterResults:!1,onAddLayer:function(){},onAddGroup:function(){},onError:function(){},onGetMetadataRecord:function(){},hideLayerMetadata:function(){},activateAddLayerButton:!1,activateAddGroupButton:!1,catalogActive:!1,refreshLayerVersion:function(){},metadataTemplate:null,onLayerInfo:function(){},onSetSwipeMode:function(){}});var mt=(0,c.withPropsOnChange)(["user","addLayersPermissions","activateAddLayerButton","removeLayersPermissions","activateRemoveLayer","sortingPermission","activateRemoveLayer","addGroupsPermissions","activateAddGroupButton","removeGroupsPermissions","activateRemoveGroup","layerInfoToolPermissions","activateLayerInfoTool"],(function(e){var t=e.addLayersPermissions,r=void 0===t||t,o=e.removeLayersPermissions,n=void 0===o||o,a=e.sortingPermissions,i=void 0===a||a,l=e.addGroupsPermissions,s=void 0===l||l,c=e.removeGroupsPermissions,u=void 0===c||c,p=e.layerInfoToolPermissions,d=void 0!==p&&p,f=e.activateAddLayerButton,y=e.activateRemoveLayer,m=e.activateSortLayer,g=e.activateAddGroupButton,b=e.activateRemoveGroup,h=e.activateLayerInfoTool,E=e.user,v=function(e,t){var r=E&&"ADMIN"===E.role||!1;return!(!e&&!r)&&t};return{activateAddLayerButton:v(r,f),activateRemoveLayer:v(n,y),activateSortLayer:v(i,m),activateAddGroupButton:v(s,g),activateRemoveGroup:v(u,b),activateLayerInfoTool:v(d,h)}})),gt=(0,c.branch)((function(e){var t=e.checkPlugins;return void 0===t||t}),(0,c.withPropsOnChange)(["items","activateAddLayerButton","activateAddGroupButton","activateLayerFilterTool","activateSettingsTool","FeatureEditor","activateLayerInfoTool"],(function(e){var t=e.items,r=void 0===t?[]:t,o=e.activateAddLayerButton,n=void 0===o||o,a=e.activateAddGroupButton,i=void 0===a||a,l=e.activateQueryTool,s=void 0===l||l,c=e.activateSettingsTool,u=void 0===c||c,p=e.activateLayerFilterTool,d=void 0===p||p,f=e.activateWidgetTool,y=void 0===f||f,m=e.activateLayerInfoTool,g=void 0===m||m,b=e.activateDownloadTool,h=void 0===b||b;return{activateAddLayerButton:n&&!!j()(r,{name:"MetadataExplorer"})||!1,activateAddGroupButton:i&&!!j()(r,{name:"AddGroup"})||!1,activateSettingsTool:u&&!!j()(r,{name:"TOCItemsSettings"})||!1,activateQueryTool:s&&!!j()(r,{name:"FeatureEditor"})||!1,activateLayerFilterTool:d&&!!j()(r,{name:"FilterLayer"})||!1,activateWidgetTool:y&&!!j()(r,{name:"WidgetBuilder"})&&!!j()(r,{name:"Widgets"}),activateLayerInfoTool:g&&!!j()(r,{name:"LayerInfo"})||!1,activateDownloadTool:h&&!!j()(r,{name:"LayerDownload"})||!1}}))),bt=(0,l.connect)(ft,{groupPropertiesChangeHandler:p.WO,layerPropertiesChangeHandler:p.He,retrieveLayerData:f.k,onToggleGroup:(0,R.$0)("groups",p.bh),onToggleLayer:(0,R.$0)("layers",p.bh),onContextMenu:p.pV,onBrowseData:p.Qr,onQueryBuilder:d.Zq,onDownload:p.LR,onSort:p.Dv,onSettings:p.RP,onZoomToExtent:y.Px,hideSettings:p.sF,updateSettings:p.VP,updateNode:p.tV,removeNode:p.ZF,onSelectNode:p.UG,onFilter:p.F5,onAddLayer:k.pu.bind(null,"metadataexplorer","enabled",!0,"group"),onAddGroup:k.pu.bind(null,"addgroup","enabled",!0,"parent"),onGetMetadataRecord:Z.ky,onError:m.vU,hideLayerMetadata:p.Jh,onNewWidget:function(){return(0,M.A4)()},refreshLayerVersion:p.ct,onLayerInfo:k.Xg.bind(null,"layerinfo","enabled",!0,!1)})((0,c.compose)(mt,gt)(yt));const ht={TOCPlugin:P()(bt,{Toolbar:{name:"toc",position:7,exclusive:!0,panel:!0,help:i().createElement(S.Z,{msgId:"helptexts.layerSwitcher"}),tooltip:"layers",wrap:!0,title:"layers",icon:i().createElement(u.Glyphicon,{glyph:"1-layer"}),priority:1},DrawerMenu:{name:"toc",position:1,glyph:"1-layer",icon:i().createElement("img",{src:C()}),buttonConfig:{buttonClassName:"square-button no-border",tooltip:"toc.layers"},priority:2}}),reducers:{queryform:r(46905).Z,query:r(97301).Z},epics:r(56175).Z(tt.Z)}},97301:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var o=r(95797),n=r(7878),a=r(82904),i=r(37295),l=r.n(i);function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=new Array(t);r<t;r++)o[r]=e[r];return o}var u=function(e){return["STATE_NAME","STATE_ABBR","SUB_REGION","STATE_FIPS"].map((function(t){return{attribute:t,values:e.features.reduce((function(e,r){return-1===e.indexOf(r.properties[t])?[].concat((o=e,function(e){if(Array.isArray(e))return c(e)}(o)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(o)||function(e,t){if(e){if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,t):void 0}}(o)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[r.properties[t]]).sort():e;var o}),[])}})).reduce((function(e,t){return l()(e,s({},t.attribute,t.values.map((function(e){return{id:e,name:e}}))))}),{})},p={featureTypes:{},data:{},result:null,resultError:null,syncWmsFilter:!1,isLayerFilter:!1};const d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case o.S0:return l()({},e,{typeName:t.typeName,url:t.url});case o.u7:return l()({},e,{featureTypes:l()({},e.featureTypes,s({},t.typeName,t.featureType))});case o.lN:return l()({},e,{featureTypes:l()({},e.featureTypes,s({},t.typeName,{error:t.error}))});case o.yz:return l()({},e,{featureLoading:t.isLoading});case o.lj:return l()({},e,{featureLoading:!1,data:l()({},e.data,s({},t.typeName,u(t.feature)))});case o.zW:return l()({},e,{featureLoading:!1,featureTypes:l()({},e.data,s({},t.typeName,{error:t.error}))});case o.Yx:return l()({},e,{isNew:!0,searchUrl:t.searchUrl,filterObj:t.filterObj});case o.VN:return l()({},e,{filterObj:l()({},e.filterObj,t.updates)});case o.Hu:return l()({},e,{isNew:!1,result:t.result,searchUrl:t.searchUrl,filterObj:t.filterObj,resultError:null});case o.VT:return l()({},e,{isNew:!1,result:null,resultError:t.error});case a.l:case n.Eg:return t.skip&&t.skip.indexOf("query")>=0?e:l()({},e,{isNew:!1,result:null,filterObj:null,searchUrl:null});case o.RD:return l()({},e,{result:null,resultError:null});case o._T:return l()({},e,{syncWmsFilter:!e.syncWmsFilter});case o.vO:return l()({},e,{isLayerFilter:!e.isLayerFilter});default:return e}}},46905:(e,t,r)=>{"use strict";r.d(t,{Z:()=>R});var o=r(7878),n=r(4206),a=r(37295),i=r.n(a),l=r(19412),s=r.n(l),c=r(94707),u=r.n(c),p=r(57546),d=r.n(p),f=r(61868),y=["attribute"];function m(e,t){if(null==e)return{};var r,o,n=function(e,t){if(null==e)return{};var r,o,n={},a=Object.keys(e);for(o=0;o<a.length;o++)r=a[o],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)r=a[o],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e){return function(e){if(Array.isArray(e))return h(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return h(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?h(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=new Array(t);r<t;r++)o[r]=e[r];return o}function E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function v(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E(Object(r),!0).forEach((function(t){T(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function T(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var O={searchUrl:null,featureTypeConfigUrl:null,showGeneratedFilter:!1,attributePanelExpanded:!0,spatialPanelExpanded:!0,crossLayerExpanded:!0,showDetailsPanel:!1,groupLevels:5,useMapProjection:!1,toolbarEnabled:!0,groupFields:[{id:1,logic:"OR",index:0}],maxFeaturesWPS:5,filterFields:[],spatialField:{method:null,attribute:"the_geom",operation:"INTERSECTS",geometry:null},simpleFilterFields:[]},L=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=i()({},t,(T(e={},r.fieldName,r.fieldValue),T(e,"type",r.fieldType),e),{fieldOptions:i()({},v({},t.fieldOptions),{currentPage:void 0===r.fieldOptions.currentPage?1:r.fieldOptions.currentPage})});return"attribute"===r.fieldName&&(o.value="string"===r.fieldType?"":null,o.operator="="),"operator"===r.fieldName&&(o.value=null),o};const R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case o.E6:var r={rowId:(new Date).getTime(),groupId:t.groupId,attribute:null,operator:"=",value:null,type:null,fieldOptions:{valuesCount:0,currentPage:1},exception:null};return i()({},e,{filterFields:e.filterFields?[].concat(b(e.filterFields),[r]):[r]});case o.vo:return i()({},e,{filterFields:e.filterFields.filter((function(e){return e.rowId!==t.rowId}))});case o.l1:return i()({},e,{filterFields:e.filterFields.map((function(e){return e.rowId===t.rowId?L(e,t):e}))});case o.o7:return i()({},e,{filterFields:e.filterFields.map((function(e){return e.rowId===t.filterField.rowId?i()({},e,{options:i()({},v({},e.options),T({},e.attribute,t.options))},{fieldOptions:i()({},v({},e.fieldOptions),{valuesCount:t.valuesCount})}):e}))});case o.Sm:return i()({},e,{filterFields:e.filterFields.map((function(e){return e.rowId===t.rowId?i()({},e,{openAutocompleteMenu:t.status}):e}))});case o.D6:return i()({},e,{autocompleteEnabled:t.status});case o.Nr:return i()({},e,{filterFields:e.filterFields.map((function(e){return e.rowId===t.filterField.rowId?i()({},e,{loading:t.status}):e}))});case o.J9:return i()({},e,{filterFields:e.filterFields.map((function(e){return e.rowId===t.rowId?i()({},e,{exception:t.exceptionMessage}):e}))});case o.U:var a={id:(new Date).getTime(),logic:"OR",groupId:t.groupId,index:t.index+1};return i()({},e,{groupFields:e.groupFields?[].concat(b(e.groupFields),[a]):[a]});case o.z8:return i()({},e,{groupFields:e.groupFields.map((function(e){return e.id===t.groupId?i()({},e,{logic:t.logic}):e}))});case o.ql:return i()({},e,{filterFields:e.filterFields.filter((function(e){return e.groupId!==t.groupId})),groupFields:e.groupFields.filter((function(e){return e.id!==t.groupId}))});case o.O_:return i()({},e,{filterFields:e.filterFields.map((function(e){for(var r=0;r<t.attributes.length;r++)if(e.attribute===t.attributes[r].id)return i()({},e,{value:null});return e}))});case o.M$:return i()({},e,{attributePanelExpanded:t.expand});case o.Ug:return i()({},e,{spatialPanelExpanded:t.expand});case o.p5:return i()({},e,{crossLayerExpanded:t.expand});case o.Fz:return i()({},e,{crossLayerFilter:(0,f.t8)(t.key,t.value,e.crossLayerFilter)});case o.Gf:return(0,f.vy)("crossLayerFilter.collectGeometries.queryCollection.filterFields",{rowId:t.rowId,groupId:t.groupId,attribute:null,operator:"=",value:null,type:null,fieldOptions:{valuesCount:0,currentPage:1},exception:null},{rowId:t.rowId},e);case o.nh:return(0,f.t8)("crossLayerFilter.collectGeometries.queryCollection.filterFields",(d()(e,"crossLayerFilter.collectGeometries.queryCollection.filterFields")||[]).map((function(e){return e.rowId===t.rowId?L(e,t):e})),e);case o.Rf:return(0,f.z6)("crossLayerFilter.collectGeometries.queryCollection.filterFields",{rowId:t.rowId},e);case o.WZ:return i()({},e,{crossLayerFilter:{attribute:e.crossLayerFilter&&e.crossLayerFilter.attribute}});case o.bP:var l;return i()({},e,{spatialField:i()({},e.spatialField,(l={},T(l,t.fieldName,t.method),T(l,"geometry",null),l))});case o.d_:return i()({},e,{spatialField:i()({},e.spatialField,{geometry:t.geometry})},{toolbarEnabled:!0});case o.xM:return i()({},e,{spatialField:i()({},e.spatialField,T({},t.fieldName,t.operation))});case o.bl:return i()({},e,{spatialField:i()({},e.spatialField,{attribute:t.attribute}),crossLayerFilter:i()({},e.crossLayerFilter,{attribute:t.attribute})});case n.hZ:return"queryform"===t.owner&&"start"===t.status?i()({},e,{toolbarEnabled:!1}):e;case o.Wi:return i()({},e,{toolbarEnabled:!0,spatialField:i()({},e.spatialField,{value:t.value,collectGeometries:t.collectGeometries,geometry:t.srsName?v(v({},t.geometry),{},{projection:t.srsName}):t.geometry})});case n.pb:return"queryform"===t.owner?i()({},e,{toolbarEnabled:!0,spatialField:i()({},e.spatialField,{collectGeometries:t.collectGeometries,geometry:t.geometry})}):e;case o.PN:var c=i()({},O.spatialField,{attribute:e.spatialField.attribute,value:void 0});return i()({},e,{spatialField:i()({},e.spatialField,c)});case o._M:return i()({},e,{showDetailsPanel:t.show});case o.Eg:var p=i()({},O.spatialField,{attribute:e.spatialField.attribute,value:void 0}),h={attribute:e.crossLayerFilter&&e.crossLayerFilter.attribute};return i()({},e,O,{spatialField:p,crossLayerFilter:h});case o.V1:return i()({},e,{showGeneratedFilter:t.data});case o.cY:return i()({},e,{spatialField:i()({},e.spatialField,{geometry:i()({},e.spatialField.geometry,{distance:t.distance})})});case o.co:return i()({},e,{spatialField:i()({},e.spatialField,{zoneFields:e.spatialField.zoneFields.map((function(e){return e.id===t.id&&t.data.features&&t.data.features.length>0?i()({},e,{values:t.data.features,open:!0,error:null}):e}))})});case o.RD:return i()({},e,{spatialField:i()({},e.spatialField,{zoneFields:e.spatialField.zoneFields.map((function(e){return e.id===t.id?i()({},e,{busy:t.active}):e}))})});case o.uY:var E,R,_=e.spatialField.zoneFields.map((function(e){if(e.id===t.id){if(E=e.multivalue?t.value.value:t.value.value[0],t.value.feature[0]){var r=t.value.feature[0],o=r.geometry_name;if(e.multivalue&&t.value.feature.length>1){for(var n=1;n<t.value.feature.length;n++){var a=t.value.feature[n];a&&(r=s()(r,a))}R={coordinates:r.geometry.coordinates,geometryName:o,geometryType:r.geometry.type}}else R={coordinates:r.geometry.coordinates,geometryName:o,geometryType:r.geometry.type}}return i()({},e,{value:E,open:!1,geometryName:R?R.geometryName:null})}return e.dependson&&t.id===e.dependson.id?i()({},e,{disabled:!1,values:null,value:null,open:!1,dependson:i()({},e.dependson,{value:E})}):e})),w=u()({type:"FeatureCollection",features:t.value.feature});return i()({},e,{spatialField:i()({},e.spatialField,{zoneFields:_,geometry:w&&R?{extent:w,type:R.geometryType,coordinates:R.coordinates}:null})});case o.H8:return i()({},e,{spatialField:i()({},e.spatialField,{zoneFields:e.spatialField.zoneFields.map((function(e){var t=i()({},e,{values:null,value:null,open:!1,error:null});return e.dependson?i()({},t,{disabled:!0,open:!1,value:null,dependson:i()({},e.dependson,{value:null})}):t})),geometry:null})});case o.Hl:var S;return i()({},e,{spatialField:i()({},e.spatialField,{zoneFields:e.spatialField.zoneFields.map((function(e){return e.id===t.id?(S="object"!==g(t.error)?t.error.status&&t.error.statusText&&t.error.data?{status:t.error.status,statusText:t.error.statusText,data:t.error.data}:{message:t.error.message||"unknown error"}:t.error,i()({},e,{error:S,busy:!1})):e}))})});case o.je:var A=e.simpleFilterFields.reduce((function(e,r){return r.fieldId===t.id?e.push(v(v({},r),t.properties)):e.push(r),e}),[]);return v(v({},e),{},{simpleFilterFields:A});case o.go:var P=t.properties.fieldId?t.properties:v(v({},t.properties),{},{fieldId:(new Date).getTime()}),I=e.simpleFilterFields?[].concat(b(e.simpleFilterFields),[P]):[P];return v(v({},e),{},{simpleFilterFields:I});case o._8:return v(v({},e),{},{simpleFilterFields:e.simpleFilterFields.filter((function(e){return e.fieldId!==t.id}))});case o.xd:return v(v({},e),{},{simpleFilterFields:[]});case o.Ef:var C=O.spatialField,F=(C.attribute,m(C,y)),D=i()({},O,{spatialField:v({},F)}),x=t.filter||D,N=x.spatialField,G=x.filterFields,j=x.groupFields,k=x.crossLayerFilter,M=x.attributePanelExpanded,Z=x.spatialPanelExpanded,Y=x.crossLayerExpanded;return v(v({},e),{attributePanelExpanded:M,spatialPanelExpanded:Z,crossLayerExpanded:Y,spatialField:v(v({},N),{},{attribute:N&&N.attribute||e.spatialField&&e.spatialField.attribute}),filterFields:G,groupFields:j,crossLayerFilter:v(v({},k),{},{attribute:k&&k.attribute||e.crossLayerFilter&&e.crossLayerFilter.attribute})});default:return e}}},7147:(e,t,r)=>{"use strict";r.d(t,{Yq:()=>a,Iz:()=>i,QF:()=>l,_d:()=>s,pn:()=>c,lI:()=>u,PJ:()=>p,dH:()=>d,Gd:()=>f,tL:()=>y,R4:()=>m,BP:()=>g});var o=r(57546),n=r.n(o),a=function(e){return function(e,t){return function(t){return n()(t,"controls[".concat(e,"][").concat("enabled","]"))}}(e)},i=function(e){return n()(e,"controls.measure.showCoordinateEditor")},l=function(e){return n()(e,"controls.measure.enabled")},s=function(e){return n()(e,"controls.queryPanel.enabled")},c=function(e){return!!n()(e,"controls.layerdownload.available")},u=function(e){return!!n()(e,"controls.layerdownload.enabled")},p=function(e){return n()(e,"controls.widgetBuilder.available",!1)},d=function(e){return n()(e,"controls.widgetBuilder.enabled")},f=function(e){return n()(e,"controls.layersettings.initialSettings")||{}},y=function(e){return n()(e,"controls.layersettings.originalSettings")||{}},m=function(e){return n()(e,"controls.layersettings.activeTab")||"general"},g=function(e){return n()(e,"controls.drawer.enabled",!1)}},71314:(e,t,r)=>{"use strict";r.d(t,{yn:()=>o,IY:()=>n,wQ:()=>a});var o=function(e){return e.swipe&&e.swipe||{active:!1}},n=function(e){var t;return(null==e||null===(t=e.swipe)||void 0===t?void 0:t.spy)||{radius:80}},a=function(e){var t;return(null==e||null===(t=e.swipe)||void 0===t?void 0:t.swipe)||{direction:"cut-vertical"}}},74851:e=>{"use strict";e.exports=function(e,t){if("string"!=typeof e||"string"!=typeof t)throw new TypeError("Expected the arguments to be of type `string`");if(""===t)return[e];var r=e.indexOf(t);return-1===r?[e]:[e.slice(0,r),e.slice(r+t.length)]}},34088:e=>{e.exports=function(){for(var e=arguments.length,t=[],r=0;r<e;r++)t[r]=arguments[r];if(0!==(t=t.filter((function(e){return null!=e}))).length)return 1===t.length?t[0]:t.reduce((function(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}))}},64240:(e,t,r)=>{(e.exports=r(9252)()).push([e.id,"\n.msgapi #mapstore-layer-settings {\n    min-width: 400px;\n}\n\n.msgapi .portal-dialog {\n    position: absolute;\n}\n\n@media all and (min-width: 635px) {\n    .msgapi .portal-dialog {\n        left: calc(50% - 315px);\n        top: 100px;\n        max-width: 630px;\n        background-color: #fff;\n    }\n}\n\n@media all and (max-width: 634px) {\n    .msgapi .portal-dialog {\n        width: 100%;\n    }\n}\n",""])},31667:(e,t,r)=>{(e.exports=r(9252)()).push([e.id,".msgapi .mapstore-filter input::-ms-clear,\n.msgapi .mapstore-filter input::-ms-reveal {\n  display: none;\n}\n",""])},44020:e=>{"use strict";var t="%[a-f0-9]{2}",r=new RegExp(t,"gi"),o=new RegExp("("+t+")+","gi");function n(e,t){try{return decodeURIComponent(e.join(""))}catch(e){}if(1===e.length)return e;t=t||1;var r=e.slice(0,t),o=e.slice(t);return Array.prototype.concat.call([],n(r),n(o))}function a(e){try{return decodeURIComponent(e)}catch(a){for(var t=e.match(r),o=1;o<t.length;o++)t=(e=n(t,o).join("")).match(r);return e}}e.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var t={"%FE%FF":"��","%FF%FE":"��"},r=o.exec(e);r;){try{t[r[0]]=decodeURIComponent(r[0])}catch(e){var n=a(r[0]);n!==r[0]&&(t[r[0]]=n)}r=o.exec(e)}t["%C2"]="�";for(var i=Object.keys(t),l=0;l<i.length;l++){var s=i[l];e=e.replace(new RegExp(s,"g"),t[s])}return e}(e)}}},8380:(e,t,r)=>{var o=r(64240);"string"==typeof o&&(o=[[e.id,o,""]]),r(14246)(o,{}),o.locals&&(e.exports=o.locals)},61057:(e,t,r)=>{var o=r(31667);"string"==typeof o&&(o=[[e.id,o,""]]),r(14246)(o,{}),o.locals&&(e.exports=o.locals)},19412:(e,t,r)=>{var o=r(98098);e.exports=function(e,t){var r=new o.io.GeoJSONReader,n=r.read(JSON.stringify(e.geometry)),a=r.read(JSON.stringify(t.geometry)),i=n.union(a);return{type:"Feature",geometry:i=(new o.io.GeoJSONWriter).write(i),properties:e.properties}}},24273:e=>{e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3woCDCsUqrUEAAAAAQxJREFUOMvN0iFLw1EUBfCf02Q0LGhQQVZekiU/gTAYImpasMi6VVBhwSCsi0kQbIJFsBoMBjHdpKDJMjBaxM3yhCn7z4HF29695xzuue/wxxofNkwp1crl8kKn03kswowVEEvYx25utdCKiO6vAimlKZxh+cfoCo2IeC0USClVcY7Zgo2fsR4Rd1+NUh95CzdDyDCHm4z9LoAueiMcvpexAy0sZgvzBeQnrEXE/SALM3hHFZcDyJd59pFSmh5koY1b1FDHXl61m7+zjpWMaX+RJvoEGjjAKZawncFwjSM0cYidYTlYxQkCGzmt56hgMyIuRkliJZPKWeAlH+9hpChnkUkc52czIt78y/oEtThIARE8NNwAAAAASUVORK5CYII="}}]);