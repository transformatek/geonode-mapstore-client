(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[6895],{53001:(e,t,r)=>{"use strict";r.d(t,{xT:()=>o,H_:()=>n,Wv:()=>a,gC:()=>i,dG:()=>l,oQ:()=>c,Q2:()=>u,R3:()=>s,Zr:()=>p,Op:()=>d,l$:()=>f,uL:()=>y,zg:()=>m,M3:()=>E,st:()=>v,US:()=>T,$c:()=>g,pW:()=>R,$D:()=>L,ke:()=>h,vw:()=>O,r5:()=>S,X1:()=>A,V3:()=>b,p2:()=>I});var o="BACKGROUND_SELECTOR:ADD_BACKGROUND",n="BACKGROUND_SELECTOR:REMOVE_BACKGROUND",a="BACKGROUND_SELECTOR:SET_CURRENT_BACKGROUND_LAYER",i="BACKGROUND_SELECTOR:BACKGROUND_ADDED",l="BACKGROUND_SELECTOR:BACKGROUND_EDITED",c="BACKGROUND_SELECTOR:ADD_BACKGROUND_PROPERTIES",u="BACKGROUND_SELECTOR:SET_BACKGROUND_MODAL_PARAMS",s="BACKGROUND_SELECTOR:UPDATE_BACKGROUND_THUMBNAIL",p="BACKGROUND_SELECTOR:BACKGROUNDS_CLEAR",d="BACKGROUND_SELECTOR:CREATE_BACKGROUNDS_LIST",f="BACKGROUND_SELECTOR:CLEAR_MODAL_PARAMETERS",y="BACKGROUND_SELECTOR:CONFIRM_DELETE_BACKGROUND_MODAL",m="BACKGROUND_SELECTOR:ALLOW_BACKGROUNDS_DELETION";function E(e){return{type:d,backgrounds:e}}function v(e){return{type:o,source:e}}function T(e){return{type:c,modalParams:e}}function g(e){return{type:u,modalParams:e}}function R(e){return{type:i,layerId:e}}function L(e){return{type:l,layerId:e}}function h(e){return{type:a,layerId:e}}function O(e){return{type:m,allow:e}}function S(e,t){return{type:s,thumbnailData:e,id:t}}function A(e){return{type:n,backgroundId:e}}function b(){return{type:f}}function I(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:y,show:e,layerTitle:t,layerId:r}}},4206:(e,t,r)=>{"use strict";r.d(t,{hZ:()=>o,pb:()=>n,kD:()=>a,DI:()=>i,IC:()=>l,Vw:()=>s,KD:()=>p,uj:()=>d,lo:()=>f,Yf:()=>y,fo:()=>m,PY:()=>E});var o="CHANGE_DRAWING_STATUS",n="DRAW:END_DRAWING",a="DRAW:SET_CURRENT_STYLE",i="DRAW:GEOMETRY_CHANGED",l="DRAW:DRAW_SUPPORT_STOPPED",c="DRAW:FEATURES_SELECTED",u="DRAW:DRAWING_FEATURES";function s(e,t,r,o,n){return{type:i,features:e,owner:t,enableEdit:r,textChanged:o,circleChanged:n}}function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{type:c,features:e}}function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{type:u,features:e}}function f(){return{type:l}}function y(e,t,r,n,a,i){return{type:o,status:e,method:t,owner:r,features:n,options:a,style:i}}function m(e,t){return{type:n,geometry:e,owner:t}}function E(e){return{type:a,currentStyle:e}}},90825:(e,t,r)=>{"use strict";r.d(t,{k:()=>i});var o=r(80416),n=r(67007);r(32420),r(75875),r(8575),r(27418),r(5055);var a=r(24262);function i(e,t){var r=(0,a.Fh)(e);return function(i){return i((0,o.tV)(e.id,"id",{capabilitiesLoading:!0})),n.ZP.getCapabilities(r,t).then((function(t){var r=n.ZP.parseLayerCapabilities(t,e);i(r?(0,o.tV)(e.id,"id",(0,a.IA)(r)):(0,o.tV)(e.id,"id",{capabilitiesLoading:null,capabilities:{error:"error getting capabilities",details:"no layer info"},description:null}))})).catch((function(t){i((0,o.tV)(e.id,"id",{capabilitiesLoading:null,capabilities:{error:"error getting capabilities",details:t},description:null}))}))}}r(27361),r(91175)},40512:(e,t,r)=>{"use strict";function o(){return{type:"LAYER_FILTER:OPEN_QUERY_BUILDER"}}r.d(t,{Zq:()=>o})},21914:(e,t,r)=>{"use strict";r.d(t,{XL:()=>n,km:()=>a,Ih:()=>i,Xw:()=>l,Pn:()=>c,DZ:()=>u,e8:()=>s,E0:()=>p,F9:()=>d,X_:()=>f,pb:()=>y,qb:()=>m,Re:()=>E,ih:()=>v,xy:()=>T,jL:()=>g,oz:()=>R,ph:()=>L,lF:()=>h,gG:()=>O,cb:()=>S,GI:()=>A,B1:()=>b,fv:()=>I,gc:()=>_,zX:()=>C,ZF:()=>D,Zb:()=>N,Fm:()=>G,sV:()=>P,Mn:()=>w,LU:()=>F,XP:()=>M,WU:()=>x,JB:()=>U,g:()=>Z,ws:()=>B,HP:()=>j,aN:()=>k,Pg:()=>W,u0:()=>H,TM:()=>K,PM:()=>q,lK:()=>V,sv:()=>Q,MO:()=>$,oO:()=>X,Mc:()=>z,Zw:()=>J,RA:()=>ee,am:()=>te,ZM:()=>re,wm:()=>oe,Y$:()=>ne});var o=r(47310),n="LOAD_FEATURE_INFO",a="ERROR_FEATURE_INFO",i="EXCEPTIONS_FEATURE_INFO",l="CHANGE_MAPINFO_STATE",c="NEW_MAPINFO_REQUEST",u="PURGE_MAPINFO_RESULTS",s="CHANGE_MAPINFO_FORMAT",p="SHOW_MAPINFO_MARKER",d="HIDE_MAPINFO_MARKER",f="SHOW_REVERSE_GEOCODE",y="HIDE_REVERSE_GEOCODE",m="GET_VECTOR_INFO",E="NO_QUERYABLE_LAYERS",v="CLEAR_WARNING",T="FEATURE_INFO_CLICK",g="IDENTIFY:UPDATE_FEATURE_INFO_CLICK_POINT",R="IDENTIFY:TOGGLE_HIGHLIGHT_FEATURE",L="TOGGLE_MAPINFO_STATE",h="UPDATE_CENTER_TO_MARKER",O="IDENTIFY:CHANGE_PAGE",S="IDENTIFY:CLOSE_IDENTIFY",A="IDENTIFY:CHANGE_FORMAT",b="IDENTIFY:TOGGLE_SHOW_COORD_EDITOR",I="IDENTIFY:EDIT_LAYER_FEATURES",_="IDENTIFY:CURRENT_EDIT_FEATURE_QUERY",C="IDENTIFY:SET_MAP_TRIGGER",D="IDENTIFY:TOGGLE_EMPTY_MESSAGE_GFI",N="IDENTIFY:SET_SHOW_IN_MAP_POPUP";function G(e,t,r,o,a){return{type:n,data:t,reqId:e,requestParams:r,layerMetadata:o,layer:a}}function P(e,t,r,o){return{type:a,error:t,reqId:e,requestParams:r,layerMetadata:o}}function w(e,t,r,o){return{type:i,reqId:e,exceptions:t,requestParams:r,layerMetadata:o}}function F(){return{type:E}}function M(){return{type:v}}function x(e,t){return{type:c,reqId:e,request:t}}function U(e,t,r,o){return{type:m,layer:e,request:t,metadata:r,queryableLayers:o}}function Z(){return{type:u}}function B(e){return{type:s,infoFormat:e}}function j(){return{type:p}}function k(){return{type:d}}function Y(e){return{type:f,reverseGeocodeData:e.data}}function W(e){return function(t){o.Z.reverseGeocode(e).then((function(e){t(Y(e))})).catch((function(e){t(Y(e))}))}}function H(){return{type:y}}function K(){return{type:L}}function q(e){return{type:h,status:e}}function V(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return{type:T,point:e,layer:t,filterNameList:r,overrideParams:o,itemId:n}}function Q(e){return{type:g,point:e}}function $(e){return{type:R,enabled:e}}function X(e){return{type:O,index:e}}var z=function(){return{type:S}},J=function(e){return{type:A,format:e}},ee=function(e){return{type:b,showCoordinateEditor:e}},te=function(e){return{type:I,layer:e}},re=function(e){return{type:_,query:e}},oe=function(e){return{type:C,trigger:e}},ne=function(e){return{type:N,value:e}}},7878:(e,t,r)=>{"use strict";r.d(t,{E6:()=>o,vo:()=>n,l1:()=>a,J9:()=>i,U:()=>l,z8:()=>c,ql:()=>u,O_:()=>s,M$:()=>p,Ug:()=>d,p5:()=>f,Fz:()=>y,WZ:()=>m,bP:()=>E,d_:()=>v,xM:()=>T,bl:()=>g,Wi:()=>R,PN:()=>L,_M:()=>h,Eg:()=>O,V1:()=>S,cY:()=>A,RD:()=>b,Hl:()=>I,co:()=>_,uY:()=>C,H8:()=>D,je:()=>N,go:()=>G,_8:()=>P,xd:()=>w,o7:()=>F,Nr:()=>M,Gf:()=>x,nh:()=>U,Rf:()=>Z,D6:()=>B,Sm:()=>j,Ef:()=>k}),r(75875);var o="ADD_FILTER_FIELD",n="REMOVE_FILTER_FIELD",a="UPDATE_FILTER_FIELD",i="UPDATE_EXCEPTION_FIELD",l="ADD_GROUP_FIELD",c="UPDATE_LOGIC_COMBO",u="REMOVE_GROUP_FIELD",s="CHANGE_CASCADING_VALUE",p="EXPAND_ATTRIBUTE_PANEL",d="EXPAND_SPATIAL_PANEL",f="QUERYFORM:EXPAND_CROSS_LAYER",y="QUERYFORM:SET_CROSS_LAYER_PARAMETER",m="QUERYFORM:RESET_CROSS_LAYER_FILTER",E="SELECT_SPATIAL_METHOD",v="UPDATE_GEOMETRY",T="SELECT_SPATIAL_OPERATION",g="CHANGE_SPATIAL_ATTRIBUTE",R="CHANGE_SPATIAL_FILTER_VALUE",L="REMOVE_SPATIAL_SELECT",h="SHOW_SPATIAL_DETAILS",O="QUERY_FORM_RESET",S="SHOW_GENERATED_FILTER",A="CHANGE_DWITHIN_VALUE",b="ZONE_SEARCH",I="ZONE_SEARCH_ERROR",_="ZONE_FILTER",C="ZONE_CHANGE",D="ZONES_RESET",N="SIMPLE_FILTER_FIELD_UPDATE",G="ADD_SIMPLE_FILTER_FIELD",P="REMOVE_SIMPLE_FILTER_FIELD",w="REMOVE_ALL_SIMPLE_FILTER_FIELDS",F="UPDATE_FILTER_FIELD_OPTIONS",M="LOADING_FILTER_FIELD_OPTIONS",x="QUERYFORM:ADD_CROSS_LAYER_FILTER_FIELD",U="QUERYFORM:UPDATE_CROSS_LAYER_FILTER_FIELD",Z="QUERYFORM:REMOVE_CROSS_LAYER_FILTER_FIELD",B="SET_AUTOCOMPLETE_MODE",j="TOGGLE_AUTOCOMPLETE_MENU",k="QUERYFORM:LOAD_FILTER"},59551:(e,t,r)=>{"use strict";r.d(t,{Z:()=>E});var o=r(8575),n=r(91175),a=r.n(n),i=r(10928),l=r.n(i),c=r(27418),u=r.n(c),s=r(75875),p=r.n(s),d=r(37275),f=r(90183),y=function(e){var t=o.parse(e,!0);return o.format(u()({},t,{search:null},{query:u()({service:"CSW",version:"2.0.2"},t.query,{request:void 0})}))},m={parseUrl:y,getRecordById:function(e){return new Promise((function(t){Promise.all([r.e(9942),r.e(6372)]).then(function(){t(p().get(e).then((function(e){if(e){var t=r(66372).unmarshaller.unmarshalString(e.data);if(t&&t.name&&"GetRecordByIdResponse"===t.name.localPart&&t.value&&t.value.abstractRecord){var o=t.value.abstractRecord[0].value.dcElement;if(o){for(var n={references:[]},a=0;a<o.length;a++){var i=o[a],l=i.name.localPart,c={};c="references"===l&&i.value?{value:i.value.content&&(0,d.$F)(i.value.content[0])||i.value.content||i.value,scheme:i.value.scheme}:i.value.content&&i.value.content[0]||i.value.content||i.value,n[l]&&Array.isArray(n[l])?n[l].push(c):n[l]?n[l]=[n[l],c]:n[l]=c}return{dc:n}}}else if(t&&t.name&&"ExceptionReport"===t.name.localPart)return{error:t.value.exception&&t.value.exception.length&&t.value.exception[0].exceptionText||"GenericError"};return null}return null})))}.bind(null,r)).catch(r.oe)}))},getRecords:function(e,t,o,n){return new Promise((function(i){Promise.all([r.e(9942),r.e(1269)]).then(function(){var c=r(66372),u=c.CSW,s=c.marshaller,m=c.unmarshaller,E=s.marshalString({name:"csw:GetRecords",value:u.getRecords(t,o,n)});i(p().post(y(e),E,{headers:{"Content-Type":"application/xml"}}).then((function(e){if(e){var t=m.unmarshalString(e.data);if(t&&t.name&&"GetRecordsResponse"===t.name.localPart&&t.value&&t.value.searchResults){var r=t.value,o=r.searchResults.abstractRecord||r.searchResults.any,n={numberOfRecordsMatched:r.searchResults.numberOfRecordsMatched,numberOfRecordsReturned:r.searchResults.numberOfRecordsReturned,nextRecord:r.searchResults.nextRecord},i=[];if(o)for(var c=0;c<o.length;c++){var u=o[c].value,s={dateStamp:u.dateStamp&&u.dateStamp.date,fileIdentifier:u.fileIdentifier&&u.fileIdentifier.characterString&&u.fileIdentifier.characterString.value,identificationInfo:u.abstractMDIdentification&&u.abstractMDIdentification.value};if(u.boundingBox){var p,y=void 0,E=void 0;if((p=Array.isArray(u.boundingBox)?a()(u.boundingBox):u.boundingBox)&&p.value){var v,T,g,R,L=null!==(v=null===(T=p.value)||void 0===T?void 0:T.crs)&&void 0!==v?v:"",h=null===(g=L.match(/[\w-]*:[\w-]*:[\w-]*:[\w-]*:[\w-]*:[^:]*:(([\w-]+\s[\w-]+)|[\w-]*)/))||void 0===g?void 0:g[0],O=(0,f.makeNumericEPSG)(null===(R=L.match(/EPSG:[0-9]+/))||void 0===R?void 0:R[0]),S=p.value.lowerCorner,A=p.value.upperCorner,b=O||(0,f.extractCrsFromURN)(h)||l()(L.split(":"));if(b){if("EPSG:"===b.slice(0,5)){if(!(E=(0,f.makeNumericEPSG)(b)))throw new Error('No suitable EPSG numeric conversion found for "'.concat(b,'"'))}else if(!(E=(0,f.makeNumericEPSG)("EPSG:".concat(b))))throw new Error('No suitable EPSG numeric conversion found for "'.concat(b,'"'))}else E="EPSG:4326";"EPSG:4326"===E&&"CRS84"!==b&&"OGC:CRS84"!==b&&(S=[S[1],S[0]],A=[A[1],A[0]]),y=(0,f.makeBboxFromOWS)(S,A)}s.boundingBox={extent:y,crs:E}}var I=u.dcElement;if(I){for(var _={references:[]},C=0;C<I.length;C++){var D=I[C],N=D.name.localPart,G={};G="references"===N&&D.value?{value:D.value.content&&(0,d.$F)(D.value.content[0])||D.value.content||D.value,scheme:D.value.scheme}:D.value.content&&D.value.content[0]||D.value.content||D.value,_[N]&&Array.isArray(_[N])?_[N].push(G):_[N]?_[N]=[_[N],G]:_[N]=G}s.dc=_}i.push(s)}return n.records=i,n}if(t&&t.name&&"ExceptionReport"===t.name.localPart)return{error:t.value.exception&&t.value.exception.length&&t.value.exception[0].exceptionText||"GenericError"}}return null})))}.bind(null,r)).catch(r.oe)}))},textSearch:function(e,t,o,n){return new Promise((function(a){Promise.all([r.e(9942),r.e(1269)]).then(function(){var i=r(84454).Filter,l=null;if(n){var c=i.propertyIsLike("csw:AnyText","%"+n+"%");l=i.filter(c)}a(m.getRecords(e,t,o,l))}.bind(null,r)).catch(r.oe)}))},workspaceSearch:function(e,t,o,n,a){return new Promise((function(i){Promise.all([r.e(9942),r.e(1269)]).then(function(){var l=r(84454).Filter,c=a||"%",u=n&&"%"+n+"%"||"%",s=l.propertyIsLike("identifier",c+":"+u),p=l.filter(s);i(m.getRecords(e,t,o,p))}.bind(null,r)).catch(r.oe)}))},reset:function(){}};const E=m},3475:(e,t,r)=>{"use strict";r.d(t,{Z:()=>g});var o=r(75875),n=r.n(o),a=r(37275),i=r(8575),l=r(27418),c=r.n(l),u=r(5055),s=r.n(u),p=r(84596),d=r.n(p),f=r(90183),y=r(7294),m={},E=function(e){var t=i.parse(e,!0);return i.format(c()({},t,{search:null},{query:c()({SERVICE:"WMTS",VERSION:"1.0.0",REQUEST:"GetCapabilities"},t.query)}))},v=function(e,t,r,o,n){for(var a=e.Capabilities.Contents,i=(0,y.G6)(e),l=(0,y.s5)(e),u=a.TileMatrixSet&&d()(a.TileMatrixSet)||[],s=[],p=u.length,m=0;m<p;m++)s.push((0,f.getEPSGCode)(u[m]["ows:SupportedCRS"]));var E=a.Layer,v=d()(E).filter((function(e){return!o||-1!==e["ows:Identifier"].toLowerCase().indexOf(o.toLowerCase())||e["ows:Title"]&&-1!==e["ows:Title"].toLowerCase().indexOf(o.toLowerCase())}));return{numberOfRecordsMatched:v.length,numberOfRecordsReturned:Math.min(r,v.length),nextRecord:t+Math.min(r,v.length)+1,records:v.filter((function(e,o){return o>=t-1&&o<t-1+r})).map((function(e){return c()({},e,{SRS:s,TileMatrixSet:u,queryable:!!(0,y.b4)(i,"GetFeatureInfo","KVP"),requestEncoding:l,style:(0,y.EN)(e),format:(0,y.JY)(e),GetTileURL:(0,y.b4)(i,"GetTile",l),capabilitiesURL:n})}))}},T={parseUrl:E,getRecords:function(e,t,r,o){var i=m[e];return i&&(new Date).getTime()<i.timestamp+1e3*((0,a.u8)("cacheExpire")||60)?new Promise((function(n){n(v(i.data,t,r,o,e))})):n().get(E(e)).then((function(n){var a;return s().parseString(n.data,{explicitArray:!1},(function(e,t){a=t})),m[e]={timestamp:(new Date).getTime(),data:a},v(a,t,r,o,e)}))},getCapabilities:function(e){var t=m[e];return t&&(new Date).getTime()<t.timestamp+1e3*((0,a.u8)("cacheExpire")||60)?new Promise((function(e){e(t.data)})):n().get(E(e)).then((function(t){var r;return s().parseString(t.data,{explicitArray:!1},(function(e,t){r=t})),m[e]={timestamp:(new Date).getTime(),data:r},r}))},textSearch:function(e,t,r,o){return T.getRecords(e,t,r,o)},reset:function(){Object.keys(m).forEach((function(e){delete m[e]}))}};const g=T},32354:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var o=r(27361),n=r.n(o),a=r(37275),i=function(e,t,r,o){var i=n()(a.ZP.getDefaults(),"initialState.defaultState.catalog.default.staticServices.default_map_backgrounds.backgrounds").filter((function(e){return!o||e.title.indexOf(o)>-1})),l=i.filter((function(e,o){return o>=t-1&&o<r+t-1}));return new Promise((function(e){return e({numberOfRecordsMatched:i.length,numberOfRecordsReturned:l.length,records:l,service:{Name:"Background Provider"}})}))};const l={getRecords:i,reset:function(){},textSearch:function(e,t,r,o){return i(0,t,r,o)}}},5570:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>de});var o=r(45697),n=r.n(o),a=r(5053),i=r.n(a),l=r(89208),c=r(22222),u=r(49848),s=r(30294),p=r(80416),d=r(40512),f=r(90825),y=r(1550),m=r(97395),E=r(75110),v=r(71314),T=r(827),g=r(8316),R=r(7147),L=r(7877),h=r(74621),O=r(38842),S=r(24262),A=r(52259),b=r(86638),I=r(5346),_=r(27418),C=r.n(_),D=r(24273),N=r.n(D),G=r(13218),P=r.n(G),w=r(91175),F=r.n(w),M=r(13311),x=r.n(M),U=r(82904),Z=r(57579),B=r(31273),j=r(88113),k=r(93152),Y=r(59309),W=r(24819),H=r(42678),K=r(29180),q=r(51269),V=r(29423),Q=r(64152);function $(e){return($="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function X(){return(X=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e}).apply(this,arguments)}function z(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function J(e,t){for(var r=0;r<t.length;r++){var o=t[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function ee(e,t){return(ee=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function te(e,t){return!t||"object"!==$(t)&&"function"!=typeof t?re(e):t}function re(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oe(e){return(oe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ne(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ae=function e(t,r){return t.reduce((function(t,o){var n=C()({},o);return n.nodes&&(n=C()({},n,{nodes:e(n.nodes,r)})),r.forEach((function(e){n=e.func(n)?C()({},n,e.options):C()({},n)})),t.push(n),t}),[])},ie=function(e,t,r){return-1!==((P()(e.title)?e.title[r]||e.title.default:e.title)||e.name).toLowerCase().indexOf(t.toLowerCase())},le=(0,c.P1)([function(e){return e.controls&&e.controls.toolbar&&"toc"===e.controls.toolbar.active},E.Bt,E.jN,v.yn,E.yj,E.lI,T.Od,g.Pz,g.KV,E.NP,E.wA,E.l2,T.Zs,j.$t,R.PJ,L.us,k.c0,h.np,O.wk],(function(e,t,r,o,n,a,i,l,c,u,s,p,d,f,y,m,E,v,T){return{enabled:e,groups:t,settings:r,swipeSettings:o,layerMetadata:n,layerdownload:a,currentZoomLvl:i&&i.zoom,scales:(0,A.getScales)(i&&i.projection||"EPSG:3857",i&&i.mapOptions&&i.mapOptions.view&&i.mapOptions.view.DPI||null),currentLocale:l,currentLocaleLanguage:c,selectedNodes:u,filterText:s,generalInfoFormat:m,selectedLayers:p.filter((function(e){return F()(u.filter((function(t){return t===e.id})))})),noFilterResults:0===p.filter((function(e){return ie(e,s,l)})).length,updatableLayersCount:p.filter((function(e){return"background"!==e.group&&("wms"===e.type||"wmts"===e.type)})).length,selectedGroups:u.map((function(e){return(0,S.Mk)(t,e)})).filter((function(e){return e&&e.nodes})),mapName:d,filteredGroups:ae(t,[{options:{showComponent:!0},func:function(){return!s}},{options:{loadingError:!0},func:function(e){return F()((e.nodes||[]).filter((function(e){return e.loadingError&&"Warning"!==e.loadingError})))}},{options:{expanded:!0,showComponent:!0},func:function(e){return s&&F()((e.nodes||[]).filter((function(t){return ie(t,s,l)||t.nodes&&F()(e.nodes.filter((function(e){return e.showComponent})))})))}},{options:{showComponent:!1},func:function(e){return F()((e.nodes||[]).filter((function(e){return e.hidden||"annotations"===e.id&&E})))&&1===e.nodes.length}},{options:{showComponent:!1},func:function(e){return"annotations"===e.id&&E}}]),catalogActive:f,activateWidgetTool:y,user:v,isLocalizedLayerStylesEnabled:T}})),ce=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ee(e,t)}(l,e);var t,r,o,n,a=(o=l,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=oe(o);if(n){var r=oe(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return te(this,e)});function l(){var e;z(this,l);for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return ne(re(e=a.call.apply(a,[this].concat(r))),"getNoBackgroundLayers",(function(e){return"background"!==e.name})),ne(re(e),"getDefaultGroup",(function(){var t=e.props.groupNodeComponent||K.Z;return i().createElement(t,X({onSort:!e.props.filterText&&e.props.activateSortLayer?e.props.onSort:null},e.props.groupOptions,{titleTooltip:e.props.activateTitleTooltip,propertiesChangeHandler:e.props.groupPropertiesChangeHandler,onToggle:e.props.onToggleGroup,style:e.props.groupStyle,groupVisibilityCheckbox:!0,visibilityCheckType:e.props.visibilityCheckType,currentLocale:e.props.currentLocale,selectedNodes:e.props.selectedNodes,onSelect:e.props.activateToolsContainer?e.props.onSelectNode:null}))})),ne(re(e),"getDefaultLayer",(function(){var t=e.props.layerNodeComponent||q.Z,r=(e.props.resolutions||(0,A.getResolutions)())[e.props.currentZoomLvl];return i().createElement(t,X({},e.props.layerOptions,{titleTooltip:e.props.activateTitleTooltip,showFullTitleOnExpand:e.props.showFullTitleOnExpand,onToggle:e.props.onToggleLayer,activateOpacityTool:e.props.activateOpacityTool,onContextMenu:e.props.onContextMenu,propertiesChangeHandler:e.props.layerPropertiesChangeHandler,onSelect:e.props.activateToolsContainer?e.props.onSelectNode:null,visibilityCheckType:e.props.visibilityCheckType,activateLegendTool:e.props.activateLegendTool,currentZoomLvl:e.props.currentZoomLvl,scales:e.props.scales,currentLocale:e.props.currentLocale,selectedNodes:e.props.selectedNodes,filterText:e.props.filterText,onUpdateNode:e.props.updateNode,hideOpacityTooltip:e.props.hideOpacityTooltip,language:e.props.isLocalizedLayerStylesEnabled?e.props.currentLocaleLanguage:null,resolution:r}))})),ne(re(e),"renderTOC",(function(){var t=e.getDefaultGroup(),r=e.getDefaultLayer(),o=[e.props.activateToolsContainer,e.props.activateFilterLayer,e.props.activateMapTitle].filter((function(e){return e})),n=o.length>0?" toc-body-sections-"+o.length:" toc-body-sections";return i().createElement("div",null,i().createElement(W.Z,{title:e.props.mapName,showTitle:e.props.activateMapTitle,showFilter:e.props.activateFilterLayer&&(e.props.groups.filter((function(e){return(e.nodes||[]).length}))||[]).length,showTools:e.props.activateToolsContainer,onClear:function(){e.props.onSelectNode()},onFilter:e.props.onFilter,filterTooltipClear:i().createElement(I.Z,{msgId:"toc.clearFilter"}),filterPlaceholder:(0,b.S$)(e.context.messages,"toc.filterPlaceholder"),filterText:e.props.filterText,toolbar:i().createElement(H.Z,{items:e.props.items.filter((function(e){return"toolbar"===e.target})),groups:e.props.groups,selectedLayers:e.props.selectedLayers,selectedGroups:e.props.selectedGroups,generalInfoFormat:e.props.generalInfoFormat,settings:e.props.settings,swipeSettings:e.props.swipeSettings,layerMetadata:e.props.layerMetadata,layerdownload:e.props.layerdownload,metadataTemplate:e.props.metadataTemplate,maxDepth:e.props.maxDepth,activateTool:{activateToolsContainer:e.props.activateToolsContainer,activateRemoveLayer:e.props.activateRemoveLayer,activateRemoveGroup:e.props.activateRemoveGroup,activateZoomTool:e.props.activateZoomTool,activateQueryTool:e.props.activateQueryTool,activateDownloadTool:e.props.activateDownloadTool,activateSettingsTool:e.props.activateSettingsTool,activateAddLayer:e.props.activateAddLayerButton&&!e.props.catalogActive,activateAddGroup:e.props.activateAddGroupButton,includeDeleteButtonInSettings:!1,activateMetedataTool:e.props.activateMetedataTool,activateWidgetTool:e.props.activateWidgetTool,activateLayerFilterTool:e.props.activateLayerFilterTool,activateLayerInfoTool:e.props.updatableLayersCount>0&&e.props.activateLayerInfoTool},options:{modalOptions:{},metadataOptions:e.props.metadataOptions,settingsOptions:e.props.settingsOptions},style:{chartStyle:e.props.chartStyle},text:{settingsText:i().createElement(I.Z,{msgId:"layerProperties.windowTitle"}),opacityText:i().createElement(I.Z,{msgId:"opacity"}),elevationText:i().createElement(I.Z,{msgId:"elevation"}),saveText:i().createElement(I.Z,{msgId:"save"}),closeText:i().createElement(I.Z,{msgId:"close"}),confirmDeleteText:i().createElement(I.Z,{msgId:"layerProperties.deleteLayer"}),confirmDeleteMessage:i().createElement(I.Z,{msgId:"layerProperties.deleteLayerMessage"}),confirmDeleteLayerGroupText:i().createElement(I.Z,{msgId:"layerProperties.deleteLayerGroup"}),confirmDeleteLayerGroupMessage:i().createElement(I.Z,{msgId:"layerProperties.deleteLayerGroupMessage"}),confirmDeleteConfirmText:i().createElement(I.Z,{msgId:"layerProperties.delete"}),confirmDeleteCancelText:i().createElement(I.Z,{msgId:"cancel"}),addLayer:i().createElement(I.Z,{msgId:"toc.addLayer"}),addLayerTooltip:i().createElement(I.Z,{msgId:"toc.addLayer"}),addLayerToGroupTooltip:i().createElement(I.Z,{msgId:"toc.addLayerToGroup"}),addGroupTooltip:i().createElement(I.Z,{msgId:"toc.addGroup"}),addSubGroupTooltip:i().createElement(I.Z,{msgId:"toc.addSubGroup"}),createWidgetTooltip:i().createElement(I.Z,{msgId:"toc.createWidget"}),zoomToTooltip:{LAYER:i().createElement(I.Z,{msgId:"toc.toolZoomToLayerTooltip"}),LAYERS:i().createElement(I.Z,{msgId:"toc.toolZoomToLayersTooltip"})},settingsTooltip:{LAYER:i().createElement(I.Z,{msgId:"toc.toolLayerSettingsTooltip"}),GROUP:i().createElement(I.Z,{msgId:"toc.toolGroupSettingsTooltip"})},featuresGridTooltip:i().createElement(I.Z,{msgId:"toc.toolFeaturesGridTooltip"}),downloadToolTooltip:i().createElement(I.Z,{msgId:"toc.toolDownloadTooltip"}),trashTooltip:{LAYER:i().createElement(I.Z,{msgId:"toc.toolTrashLayerTooltip"}),LAYERS:i().createElement(I.Z,{msgId:"toc.toolTrashLayersTooltip"}),GROUP:i().createElement(I.Z,{msgId:"toc.toolTrashGroupTooltip"})},reloadTooltip:{LAYER:i().createElement(I.Z,{msgId:"toc.toolReloadLayerTooltip"}),LAYERS:i().createElement(I.Z,{msgId:"toc.toolReloadLayersTooltip"})},layerMetadataTooltip:i().createElement(I.Z,{msgId:"toc.layerMetadata.toolLayerMetadataTooltip"}),layerMetadataPanelTitle:i().createElement(I.Z,{msgId:"toc.layerMetadata.layerMetadataPanelTitle"}),layerFilterTooltip:i().createElement(I.Z,{msgId:"toc.layerFilterTooltip"}),layerInfoTooltip:i().createElement(I.Z,{msgId:"toc.layerInfoTooltip"})},onToolsActions:{onZoom:e.props.onZoomToExtent,onNewWidget:e.props.onNewWidget,onBrowseData:e.props.onBrowseData,onQueryBuilder:e.props.onQueryBuilder,onDownload:e.props.onDownload,onUpdate:e.props.updateNode,onRemove:e.props.removeNode,onClear:e.props.onSelectNode,onSettings:e.props.onSettings,onUpdateSettings:e.props.updateSettings,onRetrieveLayerData:e.props.retrieveLayerData,onHideSettings:e.props.hideSettings,onReload:e.props.refreshLayerVersion,onAddLayer:e.props.onAddLayer,onAddGroup:e.props.onAddGroup,onGetMetadataRecord:e.props.onGetMetadataRecord,onHideLayerMetadata:e.props.hideLayerMetadata,onShow:e.props.layerPropertiesChangeHandler,onLayerInfo:e.props.onLayerInfo}})}),i().createElement("div",{className:"mapstore-toc"+n},e.props.noFilterResults&&e.props.filterText?i().createElement("div",null,i().createElement("div",{className:"toc-filter-no-results"},i().createElement(I.Z,{msgId:"toc.noFilteredResults"}))):i().createElement(Y.Z,{onError:e.props.onError,onSort:!e.props.filterText&&e.props.activateSortLayer?e.props.onSort:null,filter:e.getNoBackgroundLayers,nodes:e.props.filteredGroups},i().createElement(V.Z,{groupElement:t,layerElement:r}))))})),e}return t=l,(r=[{key:"render",value:function(){return this.props.groups?this.renderTOC():i().createElement("div",null)}}])&&J(t.prototype,r),l}(i().Component);ne(ce,"propTypes",{id:n().number,items:n().array,buttonContent:n().node,groups:n().array,settings:n().object,swipeSettings:n().object,layerMetadata:n().object,layerdownload:n().object,metadataTemplate:n().oneOfType([n().string,n().array,n().object,n().func]),refreshMapEnabled:n().bool,groupStyle:n().object,groupPropertiesChangeHandler:n().func,layerPropertiesChangeHandler:n().func,onToggleGroup:n().func,onToggleLayer:n().func,onContextMenu:n().func,onBrowseData:n().func,onQueryBuilder:n().func,onDownload:n().func,onSelectNode:n().func,selectedNodes:n().array,onZoomToExtent:n().func,retrieveLayerData:n().func,onSort:n().func,onSettings:n().func,onRefreshLayer:n().func,onNewWidget:n().func,hideSettings:n().func,updateSettings:n().func,updateNode:n().func,removeNode:n().func,activateTitleTooltip:n().bool,showFullTitleOnExpand:n().bool,activateOpacityTool:n().bool,activateSortLayer:n().bool,activateFilterLayer:n().bool,activateMapTitle:n().bool,activateToolsContainer:n().bool,activateRemoveLayer:n().bool,activateRemoveGroup:n().bool,activateLegendTool:n().bool,activateZoomTool:n().bool,activateQueryTool:n().bool,activateDownloadTool:n().bool,activateSettingsTool:n().bool,activateMetedataTool:n().bool,activateWidgetTool:n().bool,activateLayerInfoTool:n().bool,maxDepth:n().number,visibilityCheckType:n().string,settingsOptions:n().object,chartStyle:n().object,currentZoomLvl:n().number,scales:n().array,layerOptions:n().object,metadataOptions:n().object,spatialOperations:n().array,spatialMethodOptions:n().array,groupOptions:n().object,currentLocale:n().string,currentLocaleLanguage:n().string,onFilter:n().func,filterText:n().string,generalInfoFormat:n().string,selectedLayers:n().array,selectedGroups:n().array,mapName:n().string,filteredGroups:n().array,noFilterResults:n().bool,onAddLayer:n().func,onAddGroup:n().func,onError:n().func,onGetMetadataRecord:n().func,hideLayerMetadata:n().func,activateAddLayerButton:n().bool,activateAddGroupButton:n().bool,activateLayerFilterTool:n().bool,catalogActive:n().bool,refreshLayerVersion:n().func,hideOpacityTooltip:n().bool,layerNodeComponent:n().func,groupNodeComponent:n().func,isLocalizedLayerStylesEnabled:n().bool,onLayerInfo:n().func,onSetSwipeActive:n().func,updatableLayersCount:n().number,onSetSwipeMode:n().func,resolutions:n().func}),ne(ce,"contextTypes",{messages:n().object}),ne(ce,"defaultProps",{items:[],groupPropertiesChangeHandler:function(){},layerPropertiesChangeHandler:function(){},retrieveLayerData:function(){},onToggleGroup:function(){},onToggleLayer:function(){},onContextMenu:function(){},onToggleQuery:function(){},onZoomToExtent:function(){},onSettings:function(){},onRefreshLayer:function(){},onNewWidget:function(){},updateNode:function(){},removeNode:function(){},onSelectNode:function(){},selectedNodes:[],activateOpacityTool:!0,activateTitleTooltip:!0,showFullTitleOnExpand:!1,activateSortLayer:!0,activateFilterLayer:!0,activateMapTitle:!0,activateToolsContainer:!0,activateLegendTool:!0,activateZoomTool:!0,activateSettingsTool:!0,activateMetedataTool:!0,activateRemoveLayer:!0,activateRemoveGroup:!0,activateQueryTool:!0,activateDownloadTool:!0,activateWidgetTool:!1,activateLayerFilterTool:!1,activateLayerInfoTool:!0,maxDepth:3,visibilityCheckType:"glyph",settingsOptions:{includeCloseButton:!1,closeGlyph:"1-close",buttonSize:"small",showFeatureInfoTab:!0},layerOptions:{},metadataOptions:{},groupOptions:{},spatialOperations:[{id:"INTERSECTS",name:"queryform.spatialfilter.operations.intersects"},{id:"BBOX",name:"queryform.spatialfilter.operations.bbox"},{id:"CONTAINS",name:"queryform.spatialfilter.operations.contains"},{id:"WITHIN",name:"queryform.spatialfilter.operations.within"}],spatialMethodOptions:[{id:"Viewport",name:"queryform.spatialfilter.methods.viewport"},{id:"BBOX",name:"queryform.spatialfilter.methods.box"},{id:"Circle",name:"queryform.spatialfilter.methods.circle"},{id:"Polygon",name:"queryform.spatialfilter.methods.poly"}],currentLocale:"en-US",filterText:"",selectedLayers:[],selectedGroups:[],mapName:"",filteredGroups:[],noFilterResults:!1,onAddLayer:function(){},onAddGroup:function(){},onError:function(){},onGetMetadataRecord:function(){},hideLayerMetadata:function(){},activateAddLayerButton:!1,activateAddGroupButton:!1,catalogActive:!1,refreshLayerVersion:function(){},metadataTemplate:null,onLayerInfo:function(){},onSetSwipeMode:function(){}});var ue=(0,u.withPropsOnChange)(["user","addLayersPermissions","activateAddLayerButton","removeLayersPermissions","activateRemoveLayer","sortingPermission","activateRemoveLayer","addGroupsPermissions","activateAddGroupButton","removeGroupsPermissions","activateRemoveGroup","layerInfoToolPermissions","activateLayerInfoTool"],(function(e){var t=e.addLayersPermissions,r=void 0===t||t,o=e.removeLayersPermissions,n=void 0===o||o,a=e.sortingPermissions,i=void 0===a||a,l=e.addGroupsPermissions,c=void 0===l||l,u=e.removeGroupsPermissions,s=void 0===u||u,p=e.layerInfoToolPermissions,d=void 0!==p&&p,f=e.activateAddLayerButton,y=e.activateRemoveLayer,m=e.activateSortLayer,E=e.activateAddGroupButton,v=e.activateRemoveGroup,T=e.activateLayerInfoTool,g=e.user,R=function(e,t){var r=g&&"ADMIN"===g.role||!1;return!(!e&&!r)&&t};return{activateAddLayerButton:R(r,f),activateRemoveLayer:R(n,y),activateSortLayer:R(i,m),activateAddGroupButton:R(c,E),activateRemoveGroup:R(s,v),activateLayerInfoTool:R(d,T)}})),se=(0,u.branch)((function(e){var t=e.checkPlugins;return void 0===t||t}),(0,u.withPropsOnChange)(["items","activateAddLayerButton","activateAddGroupButton","activateLayerFilterTool","activateSettingsTool","FeatureEditor","activateLayerInfoTool"],(function(e){var t=e.items,r=void 0===t?[]:t,o=e.activateAddLayerButton,n=void 0===o||o,a=e.activateAddGroupButton,i=void 0===a||a,l=e.activateQueryTool,c=void 0===l||l,u=e.activateSettingsTool,s=void 0===u||u,p=e.activateLayerFilterTool,d=void 0===p||p,f=e.activateWidgetTool,y=void 0===f||f,m=e.activateLayerInfoTool,E=void 0===m||m,v=e.activateDownloadTool,T=void 0===v||v;return{activateAddLayerButton:n&&!!x()(r,{name:"MetadataExplorer"})||!1,activateAddGroupButton:i&&!!x()(r,{name:"AddGroup"})||!1,activateSettingsTool:s&&!!x()(r,{name:"TOCItemsSettings"})||!1,activateQueryTool:c&&!!x()(r,{name:"FeatureEditor"})||!1,activateLayerFilterTool:d&&!!x()(r,{name:"FilterLayer"})||!1,activateWidgetTool:y&&!!x()(r,{name:"WidgetBuilder"})&&!!x()(r,{name:"Widgets"}),activateLayerInfoTool:E&&!!x()(r,{name:"LayerInfo"})||!1,activateDownloadTool:T&&!!x()(r,{name:"LayerDownload"})||!1}}))),pe=(0,l.connect)(le,{groupPropertiesChangeHandler:p.WO,layerPropertiesChangeHandler:p.He,retrieveLayerData:f.k,onToggleGroup:(0,S.$0)("groups",p.bh),onToggleLayer:(0,S.$0)("layers",p.bh),onContextMenu:p.pV,onBrowseData:p.Qr,onQueryBuilder:d.Zq,onDownload:p.LR,onSort:p.Dv,onSettings:p.RP,onZoomToExtent:y.Px,hideSettings:p.sF,updateSettings:p.VP,updateNode:p.tV,removeNode:p.ZF,onSelectNode:p.UG,onFilter:p.F5,onAddLayer:U.pu.bind(null,"metadataexplorer","enabled",!0,"group"),onAddGroup:U.pu.bind(null,"addgroup","enabled",!0,"parent"),onGetMetadataRecord:B.ky,onError:m.vU,hideLayerMetadata:p.Jh,onNewWidget:function(){return(0,Z.A4)()},refreshLayerVersion:p.ct,onLayerInfo:U.Xg.bind(null,"layerinfo","enabled",!0,!1)})((0,u.compose)(ue,se)(ce));const de={TOCPlugin:C()(pe,{Toolbar:{name:"toc",position:7,exclusive:!0,panel:!0,help:i().createElement(I.Z,{msgId:"helptexts.layerSwitcher"}),tooltip:"layers",wrap:!0,title:"layers",icon:i().createElement(s.Glyphicon,{glyph:"1-layer"}),priority:1},DrawerMenu:{name:"toc",position:1,glyph:"1-layer",icon:i().createElement("img",{src:N()}),buttonConfig:{buttonClassName:"square-button no-border",tooltip:"toc.layers"},priority:2}}),reducers:{queryform:r(46905).Z,query:r(97301).Z},epics:r(56175).Z(Q.Z)}},71314:(e,t,r)=>{"use strict";r.d(t,{yn:()=>o});var o=function(e){return e.swipe&&e.swipe||{active:!1}}},93201:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});var o=r(64721),n=r.n(o),a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e.split("?")[0].split("@");if(t.length>1){var r=t[t.length-1];if(n()(["png","png8","jpeg","vnd.jpeg-png","gif"],r))return r}return null}},11847:(e,t,r)=>{"use strict";r.d(t,{vl:()=>i,K2:()=>l,Nw:()=>c}),r(8575),r(1469),r(47037),r(18446),r(89734);var o=r(13311),n=r.n(o),a=r(64210),i=function(e){return a.parse(e)},l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:/^(http(s{0,1}):\/\/)+?[\w.-]+(?:\.[\w\.-]+)+[\w\-\._~:/?#[\]@!\$&'\(\)\*\+,;=.]+$/,r=new RegExp(t);return r.test(e)},c=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:/^(http(s{0,1}):\/\/)+?[\w.\-{}]+(?:\.[\w\.-]+)+[\w\-\._~\/\;\.\%\:\&\=\?{}]+$/,o=new RegExp(r),a=o.test(e);if(!a)return!1;if(a&&!t)return!0;if(a&&t){var i=/\{(.*?)\}/.test(e);return 0===t.filter((function(e){return n()(i,e)})).length}return!1}},64210:(e,t,r)=>{"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function n(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||a(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){if(e){if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=new Array(t);r<t;r++)o[r]=e[r];return o}var l=r(88951),c=r(44020),u=r(74851);function s(e,t){return t.encode?t.strict?l(e):encodeURIComponent(e):e}function p(e,t){return t.decode?c(e):e}function d(e){return Array.isArray(e)?e.sort():"object"===o(e)?d(Object.keys(e)).sort((function(e,t){return Number(e)-Number(t)})).map((function(t){return e[t]})):e}function f(e){var t=e.indexOf("#");return-1!==t&&(e=e.slice(0,t)),e}function y(e){var t=(e=f(e)).indexOf("?");return-1===t?"":e.slice(t+1)}function m(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&"string"==typeof e&&""!==e.trim()?e=Number(e):!t.parseBooleans||null===e||"true"!==e.toLowerCase()&&"false"!==e.toLowerCase()||(e="true"===e.toLowerCase()),e}function E(e,t){var r=function(e){var t;switch(e.arrayFormat){case"index":return function(e,r,o){t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===o[e]&&(o[e]={}),o[e][t[1]]=r):o[e]=r};case"bracket":return function(e,r,o){t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==o[e]?o[e]=[].concat(o[e],r):o[e]=[r]:o[e]=r};case"comma":return function(e,t,r){var o="string"==typeof t&&t.split("").indexOf(",")>-1?t.split(","):t;r[e]=o};default:return function(e,t,r){void 0!==r[e]?r[e]=[].concat(r[e],t):r[e]=t}}}(t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",parseNumbers:!1,parseBooleans:!1},t)),n=Object.create(null);if("string"!=typeof e)return n;if(!(e=e.trim().replace(/^[?#&]/,"")))return n;var i,l,c,s=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=a(e))){r&&(e=r);var o=0,n=function(){};return{s:n,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,l=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return l=e.done,e},e:function(e){c=!0,i=e},f:function(){try{l||null==r.return||r.return()}finally{if(c)throw i}}}}(e.split("&"));try{for(s.s();!(i=s.n()).done;){var f=i.value,y=(l=u(t.decode?f.replace(/\+/g," "):f,"="),c=2,function(e){if(Array.isArray(e))return e}(l)||function(e,t){var r=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=r){var o,n,a=[],i=!0,l=!1;try{for(r=r.call(e);!(i=(o=r.next()).done)&&(a.push(o.value),!t||a.length!==t);i=!0);}catch(e){l=!0,n=e}finally{try{i||null==r.return||r.return()}finally{if(l)throw n}}return a}}(l,c)||a(l,c)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),E=y[0],v=y[1];v=void 0===v?null:p(v,t),r(p(E,t),v,n)}}catch(e){s.e(e)}finally{s.f()}for(var T=0,g=Object.keys(n);T<g.length;T++){var R=g[T],L=n[R];if("object"===o(L)&&null!==L)for(var h=0,O=Object.keys(L);h<O.length;h++){var S=O[h];L[S]=m(L[S],t)}else n[R]=m(L,t)}return!1===t.sort?n:(!0===t.sort?Object.keys(n).sort():Object.keys(n).sort(t.sort)).reduce((function(e,t){var r=n[t];return Boolean(r)&&"object"===o(r)&&!Array.isArray(r)?e[t]=d(r):e[t]=r,e}),Object.create(null))}t.extract=y,t.parse=E,t.stringify=function(e,t){if(!e)return"";var r=function(e){switch(e.arrayFormat){case"index":return function(t){return function(r,o){var a=r.length;return void 0===o||e.skipNull&&null===o?r:[].concat(n(r),null===o?[[s(t,e),"[",a,"]"].join("")]:[[s(t,e),"[",s(a,e),"]=",s(o,e)].join("")])}};case"bracket":return function(t){return function(r,o){return void 0===o||e.skipNull&&null===o?r:[].concat(n(r),null===o?[[s(t,e),"[]"].join("")]:[[s(t,e),"[]=",s(o,e)].join("")])}};case"comma":return function(t){return function(r,o){return null==o||0===o.length?r:0===r.length?[[s(t,e),"=",s(o,e)].join("")]:[[r,s(o,e)].join(",")]}};default:return function(t){return function(r,o){return void 0===o||e.skipNull&&null===o?r:[].concat(n(r),null===o?[s(t,e)]:[[s(t,e),"=",s(o,e)].join("")])}}}}(t=Object.assign({encode:!0,strict:!0,arrayFormat:"none"},t)),o=Object.assign({},e);if(t.skipNull)for(var a=0,i=Object.keys(o);a<i.length;a++){var l=i[a];void 0!==o[l]&&null!==o[l]||delete o[l]}var c=Object.keys(o);return!1!==t.sort&&c.sort(t.sort),c.map((function(o){var n=e[o];return void 0===n?"":null===n?s(o,t):Array.isArray(n)?n.reduce(r(o),[]).join("&"):s(o,t)+"="+s(n,t)})).filter((function(e){return e.length>0})).join("&")},t.parseUrl=function(e,t){return{url:f(e).split("?")[0]||"",query:E(y(e),t)}}},74851:e=>{"use strict";e.exports=function(e,t){if("string"!=typeof e||"string"!=typeof t)throw new TypeError("Expected the arguments to be of type `string`");if(""===t)return[e];var r=e.indexOf(t);return-1===r?[e]:[e.slice(0,r),e.slice(r+t.length)]}},88951:e=>{"use strict";e.exports=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,(function(e){return"%".concat(e.charCodeAt(0).toString(16).toUpperCase())}))}},44020:e=>{"use strict";var t="%[a-f0-9]{2}",r=new RegExp(t,"gi"),o=new RegExp("("+t+")+","gi");function n(e,t){try{return decodeURIComponent(e.join(""))}catch(e){}if(1===e.length)return e;t=t||1;var r=e.slice(0,t),o=e.slice(t);return Array.prototype.concat.call([],n(r),n(o))}function a(e){try{return decodeURIComponent(e)}catch(a){for(var t=e.match(r),o=1;o<t.length;o++)t=(e=n(t,o).join("")).match(r);return e}}e.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var t={"%FE%FF":"��","%FF%FE":"��"},r=o.exec(e);r;){try{t[r[0]]=decodeURIComponent(r[0])}catch(e){var n=a(r[0]);n!==r[0]&&(t[r[0]]=n)}r=o.exec(e)}t["%C2"]="�";for(var i=Object.keys(t),l=0;l<i.length;l++){var c=i[l];e=e.replace(new RegExp(c,"g"),t[c])}return e}(e)}}},93220:(e,t,r)=>{var o=r(13866)(r(3674));e.exports=o}}]);