(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[4935,4226,6882],{5615:(e,t,r)=>{var n={"./CRSSelector":18790,"./CRSSelector.jsx":18790,"./MousePosition":42454,"./MousePosition.jsx":42454,"./MousePositionLabelDD":59560,"./MousePositionLabelDD.jsx":59560,"./MousePositionLabelDM":84848,"./MousePositionLabelDM.jsx":84848,"./MousePositionLabelDMS":47461,"./MousePositionLabelDMS.jsx":47461,"./MousePositionLabelDMSNW":95762,"./MousePositionLabelDMSNW.jsx":95762,"./MousePositionLabelYX":54717,"./MousePositionLabelYX.jsx":54717,"./__tests__/CRSSelector-test":71188,"./__tests__/CRSSelector-test.js":71188,"./__tests__/MousePosition-test":93528,"./__tests__/MousePosition-test.js":93528,"./__tests__/MousePositionLabelDM-test":22922,"./__tests__/MousePositionLabelDM-test.js":22922,"./__tests__/MousePositionLabelDMS-test":53389,"./__tests__/MousePositionLabelDMS-test.js":53389,"./__tests__/MousePositionLabelDMSNW-test":53884,"./__tests__/MousePositionLabelDMSNW-test.js":53884,"./mousePosition.css":94889};function o(e){var t=i(e);return r(t)}function i(e){if(!r.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}o.keys=function(){return Object.keys(n)},o.resolve=i,e.exports=o,o.id=5615},86450:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});var n=r(5053);const o=(e,t)=>{const[o,i]=(0,n.useState)(!1),[a,l]=(0,n.useState)(null),c=(0,n.useRef)();return(0,n.useEffect)((()=>(e&&!c.current&&(i(!1),l(null),r(87376)("./"+e+"/"+t).then((e=>{c.current=e.default,i(!0)})).catch((e=>{l(e)}))),()=>{})),[e]),[o,c.current,a]}},87376:(e,t,r)=>{var n={"./hooks/useMapTool":[86450],"./hooks/useMapTool.js":[86450],"./leaflet/locate":[33965,3965],"./leaflet/locate.js":[33965,3965],"./openlayers/locate":[18037,336,3645,4438],"./openlayers/locate.js":[18037,336,3645,4438]};function o(e){if(!r.o(n,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=n[e],o=t[0];return Promise.all(t.slice(1).map(r.e)).then((()=>r(o)))}o.keys=()=>Object.keys(n),o.id=87376,e.exports=o},55927:(e,t,r)=>{"use strict";r.d(t,{R4:()=>n,E9:()=>o});var n="DASHBOARD:DASHBOARD_RESET",o="DASHBOARD:DASHBOARD_LOADED"},90825:(e,t,r)=>{"use strict";r.d(t,{H:()=>h,k:()=>O});var n=r(80416),o=r(67007),i=r(32420),a=r(75875),l=r.n(a),c=r(8575),s=r(27418),u=r.n(s),p=r(5055),f=r.n(p);const d=function(e,t){var r=c.parse(e,!0),n=c.format(u()({},r,{query:u()({service:"WCS",version:"1.1.0",identifiers:t,request:"DescribeCoverage"},r.query)}));return l().get(n).then((function(e){var t;return f().parseString(e.data,{explicitArray:!1},(function(e,r){t=r})),t}))};var m=r(24262),y=r(27361),b=r.n(y),g=r(91175),v=r.n(g);function h(e,t,r){return function(a){return o.ZP.describeLayer(e,t.name,r).then((function(r){return r&&"WFS"===r.owsType?i._c(e,r.name).then((function(e){var o=b()(e,"complexType[0].complexContent.extension.sequence.element"),i=v()(o&&o.filter((function(e){return"the_geom"===e.name||0===e.type.prefix.indexOf("gml")})));return i=i&&i.type.localPart,r.geometryType=i&&i.split("PropertyType")[0],a((0,n.tV)(t.id,"id",{describeLayer:r,describeFeatureType:e}))})).catch((function(){return a((0,n.tV)(t.id,"id",{describeLayer:r||{error:"no describe feature found"}}))})):(r&&"WCS"===r.owsType&&d(e,r.name).then((function(e){var o=b()(e,"wcs:CoverageDescriptions.wcs:CoverageDescription.wcs:Range.wcs:Field.wcs:Axis.wcs:AvailableKeys.wcs:Key");r.bands=o&&"string"==typeof o?["1"]:o.map((function(e,t){return t+1+""})),a((0,n.tV)(t.id,"id",{describeLayer:r,describeCoverage:e}))})).catch((function(){return a((0,n.tV)(t.id,"id",{describeLayer:r||{error:"no describe coverage found"}}))})),a((0,n.tV)(t.id,"id",{describeLayer:r||{error:"no describe Layer found"}})))})).catch((function(e){return a((0,n.tV)(t.id,"id",{describeLayer:{error:e.status}}))}))}}function O(e,t){var r=(0,m.Fh)(e);return function(i){return i((0,n.tV)(e.id,"id",{capabilitiesLoading:!0})),o.ZP.getCapabilities(r,t).then((function(t){var r=o.ZP.parseLayerCapabilities(t,e);i(r?(0,n.tV)(e.id,"id",(0,m.IA)(r)):(0,n.tV)(e.id,"id",{capabilitiesLoading:null,capabilities:{error:"error getting capabilities",details:"no layer info"},description:null}))})).catch((function(t){i((0,n.tV)(e.id,"id",{capabilitiesLoading:null,capabilities:{error:"error getting capabilities",details:t},description:null}))}))}}},7878:(e,t,r)=>{"use strict";r.d(t,{E6:()=>a,vo:()=>l,l1:()=>c,J9:()=>s,U:()=>u,z8:()=>p,ql:()=>f,O_:()=>d,M$:()=>m,Ug:()=>y,p5:()=>b,Fz:()=>g,WZ:()=>v,bP:()=>h,On:()=>O,d_:()=>w,xM:()=>E,bl:()=>S,Wi:()=>P,PN:()=>j,_M:()=>C,Wm:()=>x,Eg:()=>T,V1:()=>k,cY:()=>I,RD:()=>A,Hl:()=>F,co:()=>D,uY:()=>R,H8:()=>N,je:()=>M,go:()=>L,_8:()=>_,xd:()=>Z,o7:()=>B,Nr:()=>z,Gf:()=>G,nh:()=>U,Rf:()=>W,D6:()=>V,Sm:()=>q,Ef:()=>H,jW:()=>$,kQ:()=>K,JG:()=>Y,js:()=>X,q$:()=>Q,OZ:()=>J,Nc:()=>ee,NV:()=>te,I5:()=>re,QL:()=>ne,I:()=>oe,ku:()=>ie,EU:()=>ae,IV:()=>le,HT:()=>ce,lg:()=>se,ds:()=>ue,VF:()=>pe,DD:()=>fe,uo:()=>de,Ry:()=>me,ZH:()=>ye,AQ:()=>be,yC:()=>ge,F:()=>ve,mc:()=>he,uM:()=>we,eJ:()=>Ee,uP:()=>Se,N5:()=>Pe,bn:()=>je,Bm:()=>Ce,F2:()=>xe,jR:()=>Te,$J:()=>ke});var n=r(75875),o=r.n(n);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var a="ADD_FILTER_FIELD",l="REMOVE_FILTER_FIELD",c="UPDATE_FILTER_FIELD",s="UPDATE_EXCEPTION_FIELD",u="ADD_GROUP_FIELD",p="UPDATE_LOGIC_COMBO",f="REMOVE_GROUP_FIELD",d="CHANGE_CASCADING_VALUE",m="EXPAND_ATTRIBUTE_PANEL",y="EXPAND_SPATIAL_PANEL",b="QUERYFORM:EXPAND_CROSS_LAYER",g="QUERYFORM:SET_CROSS_LAYER_PARAMETER",v="QUERYFORM:RESET_CROSS_LAYER_FILTER",h="SELECT_SPATIAL_METHOD",O="SELECT_VIEWPORT_SPATIAL_METHOD",w="UPDATE_GEOMETRY",E="SELECT_SPATIAL_OPERATION",S="CHANGE_SPATIAL_ATTRIBUTE",P="CHANGE_SPATIAL_FILTER_VALUE",j="REMOVE_SPATIAL_SELECT",C="SHOW_SPATIAL_DETAILS",x="QUERY_FORM_SEARCH",T="QUERY_FORM_RESET",k="SHOW_GENERATED_FILTER",I="CHANGE_DWITHIN_VALUE",A="ZONE_SEARCH",F="ZONE_SEARCH_ERROR",D="ZONE_FILTER",R="ZONE_CHANGE",N="ZONES_RESET",M="SIMPLE_FILTER_FIELD_UPDATE",L="ADD_SIMPLE_FILTER_FIELD",_="REMOVE_SIMPLE_FILTER_FIELD",Z="REMOVE_ALL_SIMPLE_FILTER_FIELDS",B="UPDATE_FILTER_FIELD_OPTIONS",z="LOADING_FILTER_FIELD_OPTIONS",G="QUERYFORM:ADD_CROSS_LAYER_FILTER_FIELD",U="QUERYFORM:UPDATE_CROSS_LAYER_FILTER_FIELD",W="QUERYFORM:REMOVE_CROSS_LAYER_FILTER_FIELD",V="SET_AUTOCOMPLETE_MODE",q="TOGGLE_AUTOCOMPLETE_MENU",H="QUERYFORM:LOAD_FILTER";function $(e){return{type:a,groupId:e}}function K(e,t){return{type:u,groupId:e,index:t}}function Y(e){return{type:l,rowId:e}}function X(e,t){return{type:q,rowId:e,status:t}}function Q(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return{type:c,rowId:e,fieldName:t,fieldValue:r,fieldType:n,fieldOptions:o}}function J(e,t){return{type:s,rowId:e,exceptionMessage:t}}function ee(e,t){return{type:p,groupId:e,logic:t}}function te(e){return{type:V,status:e}}function re(e){return{type:f,groupId:e}}function ne(e){return{type:d,attributes:e}}function oe(e){return{type:m,expand:e}}function ie(e){return{type:y,expand:e}}function ae(e){return{type:b,expand:e}}function le(e,t){return{type:g,key:e,value:t}}function ce(e,t){return{type:h,fieldName:t,method:e}}function se(){return{type:O}}function ue(e){return{type:w,geometry:e}}function pe(e,t){return{type:E,fieldName:t,operation:e}}function fe(e){return{type:S,attribute:e}}function de(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.feature,r=e.srsName,n=e.collectGeometries,o=e.style,i=e.options,a=e.value;return{type:P,value:a,collectGeometries:n,options:i,geometry:t&&t.geometry,feature:t,srsName:r,style:o}}function me(){return{type:j}}function ye(e){return{type:C,show:e}}function be(e){return{type:I,distance:e}}function ge(e,t){return{type:x,searchUrl:e,filterObj:t}}function ve(e){return{type:H,filter:e}}function he(e){return{type:T,skip:e}}function Oe(e,t){return{type:F,error:e,id:t}}function we(e,t){return{type:A,active:e,id:t}}function Ee(e,t,r){return function(n){return o().post(e,t,{timeout:1e4,headers:{Accept:"application/json","Content-Type":"text/plain"}}).then((function(o){var a=o.data;if("object"!==i(a))try{a=JSON.parse(a)}catch(o){n(Oe("Search result broken ("+e+":   "+t+"): "+o.message,r))}n(function(e,t){return{type:D,data:e,id:t}}(a,r)),n(we(!1,r))})).catch((function(e){n(Oe(e,r))}))}}function Se(e,t){return{type:R,id:e,value:t}}function Pe(e){return{type:G,rowId:(new Date).getTime(),groupId:e}}function je(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return{type:U,rowId:e,fieldName:t,fieldValue:r,fieldType:n,fieldOptions:o}}function Ce(e){return{type:W,rowId:e}}function xe(){return{type:v}}function Te(e,t){return{type:z,status:e,filterField:t}}function ke(e,t,r){return{type:B,filterField:e,options:t,valuesCount:r}}},57579:(e,t,r)=>{"use strict";r.d(t,{Jm:()=>l,AE:()=>c,dm:()=>s,n8:()=>u,BV:()=>p,Cz:()=>f,$A:()=>d,eb:()=>m,v8:()=>y,yY:()=>b,ff:()=>g,S0:()=>v,Q6:()=>h,kb:()=>O,GV:()=>w,LH:()=>E,lG:()=>S,Km:()=>P,pV:()=>j,V5:()=>C,IT:()=>x,VR:()=>T,jv:()=>k,oU:()=>I,Ym:()=>A,uU:()=>F,ke:()=>D,nw:()=>R,A4:()=>N,C2:()=>M,Qe:()=>L,Ij:()=>_,Ko:()=>Z,E9:()=>B,K4:()=>z,c_:()=>G,uT:()=>U,bS:()=>W,Rz:()=>V,t4:()=>q,_k:()=>H,w2:()=>$,YA:()=>K,sD:()=>Y,Rb:()=>X,fy:()=>Q,kr:()=>J,f:()=>ee,Ff:()=>te,Pt:()=>re,ep:()=>ne});var n=r(24261),o=r.n(n);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var l="WIDGETS:INSERT",c="WIDGETS:NEW",s="WIDGETS:EDIT",u="WIDGETS:EDIT_NEW",p="WIDGETS:EDITOR_CHANGE",f="WIDGETS:EDITOR_SETTING_CHANGE",d="WIDGETS:UPDATE_PROPERTY",m="WIDGETS:UPDATE_LAYER",y="WIDGETS:CHANGE_LAYOUT",b="WIDGETS:DELETE",g="WIDGETS:CLEAR_WIDGETS",v="WIDGETS:ADD_DEPENDENCY",h="WIDGETS:REMOVE_DEPENDENCY",O="WIDGETS:LOAD_DEPENDENCIES",w="WIDGETS:RESET_DEPENDENCIES",E="WIDGETS:TOGGLE_CONNECTION",S="WIDGETS:OPEN_FILTER_EDITOR",P="WIDGETS:EXPORT_CSV",j="WIDGETS:EXPORT_IMAGE",C="WIDGETS:WIDGET_SELECTED",x="WIDGETS:NEW_CHART",T="floating",k="dependencySelector",I=/^widgets\["?([^"\]]*)"?\]\.?(.*)$/,A="WIDGET:TOGGLE_COLLAPSE",F="WIDGET:TOGGLE_COLLAPSE_ALL",D="WIDGET:TOGGLE_MAXIMIZE",R="WIDGET:TOGGLE_TRAY",N=function(e){return{type:c,widget:e}},M=function(){return{type:x}},L=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:T;return{type:l,target:t,id:o()(),widget:e}},_=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"replace",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:T;return{type:d,id:e,target:o,key:t,value:r,mode:n}},Z=function(e){return{type:m,layer:e}},B=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:T;return{type:b,target:t,widget:e}},z=function(){return{type:g}},G=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:T;return{type:y,allLayouts:t,layout:e,target:r}},U=function(e){return{type:s,widget:e}},W=function(e,t){return{type:u,widget:e,settings:t}},V=function(e,t){return{type:p,key:e,value:t}},q=function(e,t){return{type:f,key:e,value:t}},H=function(e){return{type:O,dependencies:e}},$=function(e,t,r,n){return{type:E,active:e,availableDependencies:t,options:r,target:n}},K=function(e){return q("step",e)},Y=function(e){var t=e.data,r=void 0===t?[]:t,n=e.title;return{type:P,data:r,title:void 0===n?"export":n}},X=function(e){var t=e.widgetDivId;return{type:j,widgetDivId:t}},Q=function(){return{type:S}},J=function(e,t){return r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({active:e},t),q("".concat(k),r);var r},ee=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:T;return{type:A,widget:e,target:t}},te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T;return{type:F,target:e}},re=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:T;return{type:D,widget:e,target:t}},ne=function(e){return{type:R,value:e}}},78795:(e,t,r)=>{"use strict";r.d(t,{Z:()=>R});var n=r(11847),o=r(8575),i=r(89734),a=r.n(i),l=r(91175),c=r.n(l),s=r(84596),u=r.n(s),p=r(81763),f=r.n(p),d=r(47037),m=r.n(d),y=r(44908),b=r.n(y),g=r(27418),v=r.n(g),h=r(65792),O=r.n(h),w=r(24262);function E(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function S(e){return function(e){if(Array.isArray(e))return P(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return P(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?P(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var j=b()(Object.keys(O().brewer).map((function(e){return e.toLocaleLowerCase()}))).map((function(e){return{name:e,colors:e}})),C=[{name:"red",colors:["#000","#f00"]},{name:"green",colors:["#000","#008000","#0f0"]},{name:"blue",colors:["#000","#00f"]},{name:"gray",colors:["#333","#eee"]},{name:"jet",colors:["#00f","#ff0","#f00"]}].concat(S(j)),x=function(e,t,r,n){var o=e?c()((e.thematic.colors||e.thematic.additionalColors||[]).filter((function(e){return e.name===t})))||c()(C.filter((function(e){return e.name===t}))):n?c()([n].concat(S(C)).filter((function(e){return e.name===t}))):c()(C.filter((function(e){return e.name===t})));return o&&(m()(o.colors)||o.colors.length>=2)?{ramp:"custom",colors:O().scale(o.colors).colors(r).join(",")}:{ramp:t}},T=function(e,t){var r=e.thematic&&e.thematic.params||[],n=e.thematic&&e.thematic.fieldAsParam&&["field"]||[];return Object.keys(t).reduce((function(o,i){return function(e,t){return function(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).filter((function(t){return t.field===e})).length>0}(e,t)}(i,[].concat(S(r),S(n)))?v()(o,function(e,t,r){return{viewparams:(e?e+";":"")+t+":"+r}}(o.viewparams,i,t[i])):"ramp"===i?v()(o,x(e,t[i],t.intervals||5)):"classification"===i?v()(o,(a=t[i])?{customClasses:a.reduce((function(e,t){return[].concat(S(e),[t.min+","+t.max+","+t.color])}),[]).join(";")}:{}):"attribute"===i?v()(o,{attribute:e.thematic&&e.thematic.fieldAsParam?t[i]:t.field}):"field"===i&&e.thematic&&!e.thematic.fieldAsParam?o:"strokeWeight"!==i||t.strokeOn?"strokeOn"===i?o:v()(o,E({},i,t[i])):v()(o,E({},i,-1));var a}),{})},k=function(e){return v()({protocol:e.protocol,hostname:e.domain},e.port?{port:e.port}:{})},I=function(e){return e.reduce((function(e,t){return f()(t)?t:e}),null)},A=function(e){return e.PolygonSymbolizer?"Polygon":e.LineSymbolizer?"LineString":e.PointSymbolizer?"Point":null},F=function(e){return e.PolygonSymbolizer?e.PolygonSymbolizer.Fill&&e.PolygonSymbolizer.Fill.CssParameter&&e.PolygonSymbolizer.Fill.CssParameter.$||"#808080":e.LineSymbolizer?e.LineSymbolizer.Stroke&&e.LineSymbolizer.Stroke.CssParameter&&e.LineSymbolizer.Stroke.CssParameter.$||"#808080":e.PointSymbolizer&&e.PointSymbolizer.Graphic&&e.PointSymbolizer.Graphic.Mark&&e.PointSymbolizer.Graphic.Mark.Fill&&e.PointSymbolizer.Graphic.Mark.Fill.CssParameter&&e.PointSymbolizer.Graphic.Mark.Fill.CssParameter.$||"#808080"},D={getStyleService:function(e,t){var r=(0,n.ij)((0,w.Hi)(e));return o.format(v()(k(r),{pathname:r.applicationRootPath+"/rest/sldservice/"+e.name+"/classify.xml",query:v()({},T(e,t),{fullSLD:!0})}))},getCapabilitiesUrl:function(e){var t=(0,n.ij)((0,w.Hi)(e));return o.format(v()(k(t),{pathname:t.applicationRootPath+"/rest/sldservice/capabilities.json"}))},getStyleMetadataService:function(e,t){var r=(0,n.ij)((0,w.Hi)(e));return o.format(v()(k(r),{pathname:r.applicationRootPath+"/rest/sldservice/"+e.name+"/classify.json",query:t}))},getStyleParameters:function(e,t){return{SLD:D.getStyleService(e,t),viewparams:T(e,t).viewparams}},getMetadataParameters:function(e,t){return T(e,t)},getFieldsService:function(e){var t=(0,n.ij)((0,w.Hi)(e)),r=e.thematic&&e.thematic.datatable||e.name;return o.format(v()(k(t),{pathname:t.applicationRootPath+"/rest/sldservice/"+r+"/attributes.json"}))},readFields:function(e){return a()(u()(e.Attributes.Attribute||[]).filter((function(e){return t=e.type,-1!==["Integer","Long","Double","Float","BigDecimal"].indexOf(t);var t})).map((function(e){return{name:e.name,type:(e.type,"number")}})),(function(e){return e.name}))},readClassification:function(e){!function(e){if(!e||!e.Rules||!e.Rules.Rule)throw new Error("toc.thematic.invalid_object");u()(e.Rules.Rule).forEach((function(e){if(!e.PolygonSymbolizer&&!e.LineSymbolizer&&!e.PointSymbolizer)throw new Error("toc.thematic.invalid_geometry")}))}(e);var t=u()(e.Rules.Rule||[]);return t.map((function(e,r){var n,o,i,a;return{title:e.Title,color:F(e),type:A(e),min:I([e.Filter.And&&(e.Filter.And.PropertyIsGreaterThanOrEqualTo||e.Filter.And.PropertyIsGreaterThan).Literal,e.Filter.PropertyIsEqualTo&&e.Filter.PropertyIsEqualTo.Literal,r===t.length-1&&(null==e||null===(n=e.Filter)||void 0===n||null===(o=n.PropertyIsGreaterThanOrEqualTo)||void 0===o?void 0:o.Literal)]),max:I([e.Filter.And&&(e.Filter.And.PropertyIsLessThanOrEqualTo||e.Filter.And.PropertyIsLessThan).Literal,e.Filter.PropertyIsEqualTo&&e.Filter.PropertyIsEqualTo.Literal,0===r&&(null==e||null===(i=e.Filter)||void 0===i||null===(a=i.PropertyIsLessThan)||void 0===a?void 0:a.Literal)])}}))||[]},readRasterClassification:function(e){var t,r,n,o;return((null===(r=u()(null==e||null===(t=e.Rules)||void 0===t?void 0:t.Rule)[0])||void 0===r||null===(n=r.RasterSymbolizer)||void 0===n||null===(o=n.ColorMap)||void 0===o?void 0:o.ColorMapEntry)||[]).map((function(e){return{color:e["@color"],opacity:void 0===e["@opacity"]?1:e["@opacity"],label:e["@label"],quantity:parseFloat(e["@quantity"])}}))},methods:["equalInterval","quantile","jenks"],getThematicParameters:function(e){return e.map((function(e){return e.type&&D.standardParams[e.type]&&v()({},D.standardParams[e.type],e)||e}))},standardParams:{aggregate:{title:"toc.thematic.classification_aggregate",defaultValue:"sum",values:[{name:"toc.thematic.values.sum",value:"sum"},{name:"toc.thematic.values.avg",value:"avg"},{name:"toc.thematic.values.count",value:"count"},{name:"toc.thematic.values.min",value:"min"},{name:"toc.thematic.values.max",value:"max"}]}},getColor:x,getColors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,o=t?t.thematic.colors||[].concat(S(e),S(t.thematic.additionalColors||[])):n?[n].concat(S(e)):S(e);return o.map((function(e){return!m()(e.colors)&&e.colors.length>=r?e:v()({},e,{colors:O().scale(e.colors).colors(r)})}))},hasThematicStyle:function(e){return!!(e&&e.params&&e.params.SLD)},removeThematicStyle:function(e){e.SLD,e.viewparams;var t=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["SLD","viewparams"]);return v()({},t,{SLD:null,viewparams:null})},defaultParams:{attribute:"",intervals:5,method:"equalInterval",ramp:"red",field:"",open:!1,strokeWeight:.2,strokeColor:"#ff0000",strokeOn:!1}};const R=D},8954:(e,t,r)=>{"use strict";r.d(t,{eb:()=>v,IW:()=>h,DG:()=>O});var n=r(18446),o=r.n(n),i=r(75875),a=r.n(i),l=r(9082),c=r(78795);function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){p(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var d=["equalInterval","quantile","jenks","standardDeviation"],m=["equalInterval","quantile","jenks"],y={};function b(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e};return t.map((function(t){return t.ruleId===e?r(t):t}))}var g=function(e){var t=e.baseUrl,r=e.styleService,n=null!=r&&r.isStatic?r.baseUrl:t;if(y[n])return new Promise((function(e){return e(y[n])}));var o=c.Z.getCapabilitiesUrl({url:n});return(null!=r&&r.isStatic?new Promise((function(e){return e(r)})):l.ZP.getStyleService({baseUrl:n})).then((function(e){return a().get(o).then((function(t){var r=t.data;return[e,r]})).catch((function(){return[e,null]}))})).then((function(e){var t,r,o,i,a,l,c,s,p,b,g,v=(g=2,function(e){if(Array.isArray(e))return e}(b=e)||function(e,t){var r=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=r){var n,o,i=[],a=!0,l=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(l)throw o}}return i}}(b,g)||function(e,t){if(e){if("string"==typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(e,t):void 0}}(b,g)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),h=v[0],O=v[1],w=u(u({},h),{},{classificationMethods:O?(t=O,r=(t||{}).capabilities,o=void 0===r?{}:r,i=o.vector,a=void 0===i?{}:i,l=o.raster,c=void 0===l?{}:l,s=a.classifications||[],p=c.classifications||[],{vector:s.filter((function(e){return-1!==d.indexOf(e)})),raster:p.filter((function(e){return-1!==d.indexOf(e)}))}):{vector:m,raster:m}});return y[n]=w,w}))};function v(e){var t=e.baseUrl,r=e.styleService;return g({baseUrl:t,styleService:r})}function h(e){var t=e.values,r=e.properties,n=e.rules,i=e.layer,l=["intervals","method","reverse","attribute","ramp"],s=u(u({},r),t),f=r.ruleId;if(void 0!==t.ramp&&t.ramp!==r.ramp&&"customInterval"===(null==s?void 0:s.method)&&!t.classification){var d=c.Z.getColor(void 0,t.ramp,s.intervals).colors.split(",");return new Promise((function(e){return e(b(f,n,(function(e){return u(u(u({},e),s),{},{classification:s.classification.map((function(e,t){return u(u({},e),{},{color:d[t]})})),errorId:void 0})})))}))}var m=l.reduce((function(e,t){return u(u({},e),{},p({},t,r[t]))}),{}),y=l.reduce((function(e,t){return u(u({},e),{},p({},t,s[t]))}),{});if(!l.find((function(e){return void 0===s[e]}))&&!o()(m,y)&&"custom"!==(null==t?void 0:t.ramp)&&"customInterval"!==(null==s?void 0:s.method)){var g="custom"===s.ramp&&s.classification.length>0&&{name:"custom",colors:s.classification.map((function(e){return e.color}))},v=c.Z.getColor(void 0,s.ramp,s.intervals,g);return a().get(c.Z.getStyleMetadataService(i,u({intervals:s.intervals,method:s.method,attribute:s.attribute,reverse:s.reverse},v))).then((function(e){var r=e.data;return b(f,n,(function(e){return u(u(u({},e),t),{},{classification:c.Z.readClassification(r),errorId:void 0})}))})).catch((function(){return b(f,n,(function(e){return u(u(u({},e),t),{},{errorId:"styleeditor.classificationError"})}))}))}return new Promise((function(e){return e(b(f,n,(function(e){return u(u(u({},e),t),{},{errorId:void 0})})))}))}function O(e){var t=e.values,r=e.properties,n=e.rules,i=e.layer,l=["intervals","continuous","method","reverse","ramp"],s=u(u({},r),t),f=r.ruleId,d=l.reduce((function(e,t){return u(u({},e),{},p({},t,r[t]))}),{}),m=l.reduce((function(e,t){return u(u({},e),{},p({},t,s[t]))}),{});if(!l.find((function(e){return void 0===s[e]}))&&!o()(d,m)){var y="custom"===s.ramp&&s.classification.length>0&&{name:"custom",colors:s.classification.map((function(e){return e.color}))},g=c.Z.getColor(void 0,s.ramp,s.intervals,y);return a().get(c.Z.getStyleMetadataService(i,u({intervals:s.intervals,continuous:s.continuous,method:s.method,reverse:s.reverse},g))).then((function(e){var r=e.data;return b(f,n,(function(e){return u(u(u({},e),t),{},{classification:c.Z.readRasterClassification(r),errorId:void 0})}))})).catch((function(){return b(f,n,(function(e){return u(u(u({},e),t),{},{errorId:"styleeditor.classificationRasterError"})}))}))}return new Promise((function(e){return e(b(f,n,(function(e){return u(u(u({},e),t),{},{errorId:void 0})})))}))}},9082:(e,t,r)=>{"use strict";r.d(t,{ZP:()=>F});var n=r(75875),o=r.n(n),i=r(27418),a=r.n(i),l=r(27361),c=r.n(l),s=r(67523),u=r.n(s),p=r(68929),f=r.n(p);function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var m={},y=function(e){return e.map((function(e){return u()(e,(function(e,t){return f()(t)}))}))},b=r(91175),g=r.n(b),v=r(84596),h=r.n(v),O=r(99009);function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E(Object(r),!0).forEach((function(t){P(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function P(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var j=[{regex:/gt-css/,format:"css"}],C={css:"application/vnd.geoserver.geocss+css",sld:"application/vnd.ogc.sld+xml",sldse:"application/vnd.ogc.se+xml",zip:"application/zip"},x=function(e,t){return"sld"===e?t&&t.version&&"1.1.0"===t.version?C.sldse:C.sld:C[e]||C.sld},T=function(e,t){var r=e.options,n=void 0===r?{}:r,o=e.format,i=e.baseUrl,a=e.name,l=e.workspace,c=e.languageVersion,s=t?{name:encodeURIComponent(a)}:{};return{options:S(S({},n),{},{params:S(S({},n.params),s),headers:S(S({},n.headers||{}),{},{"Content-Type":x(o,c)})}),url:"".concat(i,"rest/").concat(l&&"workspaces/".concat(l,"/")||"","styles").concat(t?".json":"/".concat(encodeURIComponent(a)))}},k=function(e){var t=e.geoserverBaseUrl,r=e.workspace,n=e.name,o=e.format,i=void 0===o?"json":o;return"".concat(t,"rest/").concat(r&&"workspaces/".concat(r,"/")||"","styles/","".concat(encodeURIComponent(n),".").concat(i))},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=h()((null==e?void 0:e.entry)||[]);return t.reduce((function(e,t){return S(S({},e),{},P({},t["@key"],t.$))}),{})},A=function(e){var t=e.baseUrl,r=e.styleName,n=e.metadata,i=k(S(S({},(0,O.$N)(r)),{},{geoserverBaseUrl:t}));return o().get(i).then((function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.data,a=void 0===r?{}:r;return o().put(i,{style:S(S({},a.style),{},{metadata:S(S({},I(null===(e=a.style)||void 0===e?void 0:e.metadata)),n)})})}))};const F={saveStyle:function(e,t,r,n){var i=e+"styles/"+encodeURI(t),l=a()({},n);return l.headers=a()({},l.headers,{"Content-Type":"application/vnd.ogc.sld+xml"}),o().put(i,r,l)},getStyleService:function(e){var t=e.baseUrl;return function(e){var t=e.baseUrl;return m[t]?new Promise((function(e){return e(m[t])})):o().all([o().get("".concat(t,"rest/about/version"),{"Content-Type":"application/json"}).then((function(e){var t=e.data;return c()(t,"about.resource")})).catch((function(){return null})),o().get("".concat(t,"rest/about/manifest"),{"Content-Type":"application/json"}).then((function(e){var t=e.data;return c()(t,"about.resource")})).catch((function(){return null})),o().get("".concat(t,"rest/fonts"),{"Content-Type":"application/json"}).then((function(e){var t=e.data;return c()(t,"fonts")})).catch((function(){return null}))]).then((function(e){var r,n,o=(n=3,function(e){if(Array.isArray(e))return e}(r=e)||function(e,t){var r=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=r){var n,o,i=[],a=!0,l=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(l)throw o}}return i}}(r,n)||function(e,t){if(e){if("string"==typeof e)return d(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?d(e,t):void 0}}(r,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=o[0],a=o[1],l=o[2],c={version:i&&y(i),manifest:a&&y(a),fonts:l};return i&&a?(m[t]=c,m[t]):c}))}({baseUrl:t}).then((function(e){var r=e.version,n=e.manifest,o=e.fonts,i=void 0===o?[]:o;if(!r)return null;var a,l=(n||[]).map((function(e){var t=e.name;return g()(j.filter((function(e){var r=e.regex;return t.match(r)})).map((function(e){return e.format})))})).filter((function(e){return e})),c=g()(r.filter((function(e){var t=e.name;return"geoserver"===(void 0===t?"":t).toLowerCase()})))||{};return{baseUrl:t,version:c.version,formats:[].concat((a=l,function(e){if(Array.isArray(e))return w(e)}(a)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(a)||function(e,t){if(e){if("string"==typeof e)return w(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?w(e,t):void 0}}(a)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),["sld"]),availableUrls:[],fonts:i}}))},getStyle:function(e){var t=e.options,r=e.format,n=e.baseUrl,i=e.styleName,a=(0,O.$N)(i),l=a.name,c=a.workspace,s=T({options:t,format:r,baseUrl:n,name:l,workspace:c});return o().get(s.url,s.options)},createStyle:function(e){var t=e.baseUrl,r=e.code,n=e.options,i=e.format,a=void 0===i?"sld":i,l=e.styleName,c=e.languageVersion,s=e.metadata,u=(0,O.$N)(l),p=u.name,f=u.workspace,d=T({options:n,format:a,baseUrl:t,name:p,workspace:f,languageVersion:c},!0);return o().post(d.url,r,d.options).then((function(){return s?A({baseUrl:t,styleName:l,metadata:s}).then((function(){return null})).catch((function(){return null})):null}))},updateStyle:function(e){var t=e.baseUrl,r=e.code,n=e.options,i=e.format,a=void 0===i?"sld":i,l=e.styleName,c=e.languageVersion,s=e.metadata,u=(0,O.$N)(l),p=u.name,f=u.workspace,d=T({options:n,format:a,baseUrl:t,name:p,workspace:f,languageVersion:c});return o().put(d.url,r,d.options).then((function(){return s?A({baseUrl:t,styleName:l,metadata:s}).then((function(){return null})).catch((function(){return null})):null}))},deleteStyle:function(e){var t=e.baseUrl,r=e.options,n=e.format,i=void 0===n?"sld":n,a=e.styleName,l=(0,O.$N)(a),c=l.name,s=l.workspace,u=T({options:r,format:i,baseUrl:t,name:c,workspace:s});return o().delete(u.url,u.options)},getStylesInfo:function(e){var t=e.baseUrl,r=e.styles,n=void 0===r?[]:r,i=[],l=n.length;return new Promise((function(e){n&&0!==n.length?n.forEach((function(r,c){var s=r.name;return o().get(k(S(S({},(0,O.$N)(s)),{},{geoserverBaseUrl:t}))).then((function(t){var r=t.data;i[c]=a()({},n[c],r&&r.style&&S(S(S({},r.style),r.style.metadata&&{metadata:I(r.style.metadata)}),{},{name:(0,O.U_)(r.style)})||{}),0==--l&&e(i.filter((function(e){return e})))})).catch((function(){i[c]=a()({},n[c]),0==--l&&e(i.filter((function(e){return e})))}))})):e([])}))},getStyleCodeByName:function(e){var t=e.baseUrl,r=e.styleName,n=e.options,i=(0,O.$N)(r),a=i.name,l=i.workspace,c=k({name:a,workspace:l,geoserverBaseUrl:t});return o().get(c,n).then((function(e){return e.data&&e.data.style&&e.data.style.name?o().get(k({workspace:l,geoserverBaseUrl:t,name:e.data.style.name,format:(r=e.data.style.filename,r.split(".").pop())})).then((function(t){var r=t.data;return S(S({},e.data.style),{},{code:r})})):null;var r}))},updateStyleMetadata:A}},40797:(e,t,r)=>{"use strict";r.d(t,{v0:()=>a,k9:()=>l,ZP:()=>s});var n=r(53329),o=r(15402),i=r(5346),a=i.Z,l=o.Z,c=n.Z;const s={Message:i.Z,HTML:l,DateFormat:c}},87427:(e,t,r)=>{"use strict";r.d(t,{kZ:()=>b,bR:()=>g});var n=r(1469),o=r.n(n),i=r(18446),a=r.n(i),l=r(23560),c=r.n(l),s=r(14293),u=r.n(s),p=r(49848);function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){m(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var y=(0,p.compose)((0,p.withState)("alertModal","onShowAlertModal",!1),(0,p.withState)("showEditor","onShowEditor",!1)),b=(0,p.compose)((0,p.withHandlers)({onClose:function(e){var t=e.onUpdateInitialSettings,r=void 0===t?function(){}:t,n=e.onUpdateOriginalSettings,i=void 0===n?function(){}:n,l=e.onUpdateNode,s=void 0===l?function(){}:l,u=e.originalSettings,p=e.settings,f=e.onHideSettings,y=void 0===f?function(){}:f,b=e.onShowAlertModal,g=void 0===b?function(){}:b;return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=Object.keys(p.options).reduce((function(e,t){return d(d({},e),{},m({},t,"opacity"!==t||u[t]?u[t]:1))}),{});a()(n,p.options)||e?(o()(t)&&t.forEach((function(e){c()(e)&&e()})),s(p.node,p.nodeType,d(d({},p.options),u)),y(),g(!1),i({}),r({})):g(!0)}},onSave:function(e){var t=e.onUpdateInitialSettings,r=void 0===t?function(){}:t,n=e.onUpdateOriginalSettings,i=void 0===n?function(){}:n,a=e.onHideSettings,l=void 0===a?function(){}:a,s=e.onShowAlertModal,u=void 0===s?function(){}:s;return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];o()(e)&&e.forEach((function(e){c()(e)&&e()})),l(),u(!1),i({}),r({})}}}),(0,p.lifecycle)({UNSAFE_componentWillMount:function(){var e=this.props,t=e.element,r=void 0===t?{}:t,n=e.onUpdateOriginalSettings,o=void 0===n?function(){}:n,i=e.onUpdateInitialSettings,a=void 0===i?function(){}:i;o({}),a(d({},r))},componentWillReceiveProps:function(e){var t=this.props,r=t.settings,n=void 0===r?{}:r,o=t.onRetrieveLayerData,i=void 0===o?function(){}:o;!n.expanded&&e.settings&&e.settings.expanded&&u()(e.element.description)&&"wms"===e.element.type&&i(e.element)},componentWillUpdate:function(e){var t=this.props,r=t.initialActiveTab,n=void 0===r?"general":r,o=t.settings,i=void 0===o?{}:o,a=t.onUpdateOriginalSettings,l=void 0===a?function(){}:a,c=t.onUpdateInitialSettings,s=void 0===c?function(){}:c,u=t.onSetTab,p=void 0===u?function(){}:u;!i.expanded&&e.settings&&e.settings.expanded&&(l({}),s(d({},e.element)),p(n))}})),g=(0,p.compose)(y,b)},28315:(e,t,r)=>{"use strict";r.d(t,{Z:()=>g});var n=r(5053),o=r.n(n),i=r(43143),a=r(12226),l=r(82110);function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var f=o().lazy((function(){return Promise.all([r.e(7042),r.e(6111)]).then(r.bind(r,36111))})),d={base:190,range:0,s:.95,v:.63},m=function(e,t){var r=t.base,n=t.range,o=p(t,["base","range"]);return((0,i.qH)(r,n,e+1,o)||[0]).slice(1)};function y(e){var t=e.type,r=e.isModeBarVisible;switch(t){case"pie":return{t:r?20:5,b:5,l:2,r:2,pad:4};default:return{l:5,r:5,b:30,t:r?20:5,pad:4}}}function b(e){var t=e.series,r=void 0===t?[]:t,n=e.cartesian,o=e.type,i=e.yAxis,a=e.xAxisAngle,l=e.xAxisOpts,c=void 0===l?{}:l,s=e.yAxisOpts,u=void 0===s?{}:s,p=e.data,f=void 0===p?[]:p,y=e.autoColorOptions,b=void 0===y?d:y;switch(o){case"pie":return{colorway:m(f.length,b)};default:return{colorway:m(r.length,b),yaxis:{type:null==u?void 0:u.type,automargin:!0,tickformat:null==u?void 0:u.format,tickprefix:null==u?void 0:u.tickPrefix,ticksuffix:null==u?void 0:u.tickSuffix,showticklabels:!0===i,showgrid:n},xaxis:{showgrid:n,type:null==c?void 0:c.type,showticklabels:!(null!=c&&c.hide),nticks:c.nTicks,automargin:!0,tickangle:null!=a?a:"auto"}}}}const g=function(e){var t=e.onInitialized,r=function(e){var t=e.xAxis,r=e.series,n=void 0===r?[]:r,o=e.yAxisLabel,i=e.type,l=void 0===i?"line":i,c=e.height,u=e.width,p=e.legend,f=null==t?void 0:t.dataKey,d=u>350;return{layout:s(s({showlegend:p},b(s({},e))),{},{margin:y(s(s({},e),{},{isModeBarVisible:d})),autosize:!1,automargin:!1,height:c,width:u}),data:n.map((function(t){var r=t.dataKey;return s({type:l,name:o||r},function(e){var t=e.type,r=e.xDataKey,n=e.yDataKey,o=e.data,i=e.formula,l=o.map((function(e){return e[r]})),c=o.map((function(e){return e[n]}));switch(t){case"pie":return{textposition:"inside",values:c,labels:l};default:return i&&(c=c.map((function(e){var t=e;try{return(0,a.B)(i,{value:t})}catch(t){return e}}))),{x:l,y:c}}}(s(s({},e),{},{xDataKey:f,yDataKey:r})))})),config:{displayModeBar:d,modeBarButtonsToRemove:["lasso2d","select2d","hoverCompareCartesian","hoverClosestCartesian","hoverClosestPie"],displaylogo:!1}}}(p(e,["onInitialized"])),i=r.data,c=r.layout,u=r.config;return o().createElement(n.Suspense,{fallback:o().createElement(l.Z,null)},o().createElement(f,{onInitialized:t,data:i,layout:c,config:u}))}},30029:(e,t,r)=>{"use strict";r.d(t,{Z:()=>h});var n=r(5053),o=r.n(n),i=r(45697),a=r.n(i),l=r(5346);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m,y,b,g={width:"100%",height:"100%",textAlign:"center",verticalAlign:"center"},v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(c,e);var t,r,n,i,a=(n=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=d(n);if(i){var r=d(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return f(this,e)});function c(){return s(this,c),a.apply(this,arguments)}return t=c,(r=[{key:"render",value:function(){return this.props.loading?o().createElement("div",{style:g},o().createElement(l.Z,{msgId:"loading"})):this.props.children?this.props.children:o().createElement("div",{style:g},o().createElement(l.Z,{msgId:"featuregrid.noFeaturesAvailable"}))}}])&&u(t.prototype,r),c}(o().PureComponent);m=v,y="propTypes",b={loading:a().bool},y in m?Object.defineProperty(m,y,{value:b,enumerable:!0,configurable:!0,writable:!0}):m[y]=b;const h=v},93358:(e,t,r)=>{"use strict";r.d(t,{Z:()=>Ge});var n=r(45697),o=r.n(n),i=r(5053),a=r.n(i),l=r(96958),c=r(622),s=r(21709),u=r.n(s),p=r(64386),f=r.n(p);function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?g(e):t}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=v(n);if(o){var r=v(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return b(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),h(g(t=i.call(this,e)),"scrollListener",(function(){t.props.isFocused||(t.scroll=t.canvas.scrollTop);var e=Math.ceil(t.canvas.clientHeight/t.props.rowHeight),r=Math.floor(t.canvas.scrollTop/t.props.rowHeight),n=r+e;t.props.onGridScroll&&t.props.onGridScroll({firstRowIdx:r,lastRowIdx:n})})),h(g(t),"setCanvasListener",(function(){t.canvas=f().findDOMNode(g(t)).querySelector(".react-grid-Canvas"),t.canvas&&t.canvas.addEventListener("scroll",t.scrollListener)})),t}return t=a,(r=[{key:"componentDidMount",value:function(){this.setCanvasListener(),this.props.displayFilters&&this.onToggleFilter()}},{key:"componentWillUnmount",value:function(){this.canvas&&(this.canvas.removeEventListener("scroll",this.scrollListener),this.canvas=null),this.props.displayFilters&&this.onToggleFilter()}},{key:"componentDidUpdate",value:function(e){var t=this.props,r=t.virtualScroll,n=t.displayFilters,o=t.scrollToTopCounter;e.displayFilters!==n&&this.onToggleFilter(),r&&(this.canvas&&this.canvas!==f().findDOMNode(this).querySelector(".react-grid-Canvas")&&(this.canvas.removeEventListener("scroll",this.scrollListener),this.setCanvasListener()),this.canvas||this.setCanvasListener(),this.canvas&&e.isFocused&&!this.props.isFocused?this.canvas.scrollTop=this.scroll:this.canvas&&this.props.minHeight!==e.minHeight&&this.scrollListener(),!this.props.isFocused&&this.canvas&&(this.scroll=this.canvas.scrollTop),o!==e.scrollToTopCounter&&this.canvas&&(this.canvas.scrollTop=0))}}])&&m(t.prototype,r),a}(u());h(O,"propTypes",{displayFilters:o().bool});const w=O;var E=r(49848),S=r(89255);function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function j(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach((function(t){C(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function C(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function x(){return(x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var T=(0,E.branch)((function(e){return e.virtualScroll}),(0,E.compose)((0,E.mapPropsStream)((function(e){var t=(0,E.createEventHandler)(),r=t.handler,n=t.stream;return e.combineLatest(n.throttle((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return S.Observable.timer(e)})).scan((function(e){return e+1}),0).map((function(e){return{scrollToTopCounter:e}})).startWith({}),(function(e,t){return j(j(j({},e),t),{},{scrollToTop:r})}))})),(0,E.withHandlers)({onGridSort:function(e){var t=e.onGridSort,r=void 0===t?function(){}:t,n=e.scrollToTop,o=void 0===n?function(){}:n;return function(){return o(0),r.apply(void 0,arguments)}},onAddFilter:function(e){var t=e.onAddFilter,r=void 0===t?function(){}:t,n=e.scrollToTop,o=void 0===n?function(){}:n;return function(){o(1e3),r.apply(void 0,arguments)}}})))(w),k=r(14293),I=r.n(k),A=r(95344),F=r.n(A),D=r(73849),R=r(78819),N=r(43148),M=r(76364),L=r(37275),_=r(1469),Z=r.n(_),B=r(58857),z=r(49902);function G(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function U(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?G(Object(r),!0).forEach((function(t){W(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):G(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function W(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}(0,E.setObservableConfig)(B.Z);var V=(0,E.mapPropsStreamWithConfig)(B.Z)((function(e){return e.take(1).switchMap((function(t){return t.autocompleteStreamFactory(e)})).combineLatest(e,(function(e,t){return{data:Z()(e&&e.fetchedData&&e.fetchedData.values)?e.fetchedData.values.map((function(e){return{label:e,value:e}})):[],valuesCount:e&&e.fetchedData&&e.fetchedData.size,currentPage:t&&t.currentPage,maxFeatures:t&&t.maxFeatures,select:t&&t.select,focus:t&&t.focus,loadNextPage:t&&t.loadNextPage,loadPrevPage:t&&t.loadPrevPage,toggle:t&&t.toggle,change:t.change,open:t.open,selected:t&&t.selected,value:t.value,busy:e.busy}}))}))((function(e){var t=e.open,r=e.toggle,n=e.select,o=e.focus,i=e.change,l=e.value,c=e.valuesCount,s=e.loadNextPage,u=e.loadPrevPage,p=e.maxFeatures,f=e.currentPage,d=e.busy,m=e.data,y=e.loading,b=void 0!==y&&y,g=Math.ceil(c/p);return a().createElement(z.Z,{pagination:{firstPage:1===f,lastPage:f===g,paginated:!0,loadPrevPage:u,loadNextPage:s},busy:d,dropUp:!1,data:m,open:t,onFocus:o,onToggle:r,onChange:i,onSelect:n,selectedValue:l,loading:b})})),q=(0,E.compose)((0,E.withStateHandlers)((function(e){return{delayDebounce:0,performFetch:!1,open:!1,currentPage:1,maxFeatures:5,url:e.url,typeName:e.typeName,value:e.value,attribute:e.column&&e.column.key,autocompleteStreamFactory:e.autocompleteStreamFactory}}),{select:function(e){return function(){return U(U({},e),{},{selected:!0})}},change:function(e){return function(t){if(e.selected&&e.changingPage)return U(U({},e),{},{delayDebounce:e.selected?0:500,selected:!1,changingPage:!1,performFetch:!(e.selected&&!e.changingPage),value:e.value,currentPage:e.changingPage?e.currentPage:1});var r="string"==typeof t?t:t.value;return U(U({},e),{},{delayDebounce:e.selected?0:500,selected:!1,changingPage:!1,performFetch:!(e.selected&&!e.changingPage),value:r,currentPage:e.changingPage?e.currentPage:1})}},focus:function(e){return function(t){return t&&0===t.length&&""===e.value?U(U({},e),{},{delayDebounce:0,currentPage:1,performFetch:!0,isToggled:!1,open:!0}):e}},toggle:function(e){return function(){return U(U({},e),{},{open:!!e.changingPage||!e.open})}},loadNextPage:function(e){return function(){return U(U({},e),{},{currentPage:e.currentPage+1,performFetch:!0,changingPage:!0,delayDebounce:0,value:e.value})}},loadPrevPage:function(e){return function(){return U(U({},e),{},{currentPage:e.currentPage-1,performFetch:!0,changingPage:!0,delayDebounce:0,value:e.value})}}}))(V);function H(e){return(H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $(){return($=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function K(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Y(e,t){return(Y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function X(e,t){return!t||"object"!==H(t)&&"function"!=typeof t?Q(e):t}function Q(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function J(e,t,r){return(J="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ee(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function ee(e){return(ee=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function te(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var re=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Y(e,t)}(l,e);var t,r,n,o,i=(n=l,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ee(n);if(o){var r=ee(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return X(this,e)});function l(e){var t,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(r=i.call(this,e)).validate=function(e){try{return r.props.isValid(e[r.props.column&&r.props.column.key])}catch(e){return!1}},r.getValue=function(){return J((t=Q(r),ee(l.prototype)),"getValue",t).call(t)},r}return t=l,(r=[{key:"render",value:function(){return a().createElement(q,$({},this.props,{url:L.ZP.getParsedUrl(this.props.url,{outputFormat:"json"}),filter:"contains",autocompleteStreamFactory:M.Vd}))}}])&&K(t.prototype,r),l}(R.Z);te(re,"propTypes",{column:o().object,dataType:o().string,inputProps:o().object,isValid:o().func,onBlur:o().func,autocompleteStreamFactory:o().func,url:o().string,typeName:o().string,value:o().string}),te(re,"defaultProps",{isValid:function(){return!0},dataType:"string"});const ne=re;var oe=r(82994);function ie(){return(ie=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var ae={defaultEditor:function(e){return a().createElement(R.Z,e)},int:function(e){return a().createElement(N.Z,ie({dataType:"int",inputProps:{step:1,type:"number"}},e))},number:function(e){return a().createElement(N.Z,ie({dataType:"number",inputProps:{step:1,type:"number"}},e))},string:function(e){return e.autocompleteEnabled?a().createElement(ne,ie({dataType:"string"},e)):a().createElement(R.Z,ie({dataType:"string"},e))},boolean:function(e){return a().createElement(oe.Z,ie({dataType:"string"},e,{value:e.value&&e.value.toString(),filter:!1,values:["true","false"]}))}},le=(0,E.withState)("value","onValueChange",(function(e){return e.value})),ce=r(18027),se=r(47361);function ue(e){return function(e){if(Array.isArray(e))return pe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return pe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?pe(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pe(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function fe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function de(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?fe(Object(r),!0).forEach((function(t){me(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function me(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const ye=(0,E.compose)((0,E.defaultProps)({sortable:!0,autocompleteEnabled:!1,initPlugin:function(){},url:"",typeName:"",enableColumnFilters:!1,columns:[],features:[],newFeatures:[],select:[],changes:{},focusOnEdit:!1,editors:function(e,t){return ae[e]?ae[e](t):ae.defaultEditor(t)},dataStreamFactory:function(e){var t=(0,E.createEventHandler)(),r=t.handler,n=t.stream;return function(e){return e.distinctUntilChanged((function(e,t){var r=e.features,n=e.pages,o=e.isFocused,i=t.features,a=t.pages,l=t.isFocused;return r===i&&o===l&&n===a})).switchMap((function(e){var t=e.size,r=e.pageEvents,n=e.isFocused,o=e.pages,i=e.pagination,a=e.vsOverScan,c=void 0===a?20:a,s=e.scrollDebounce,u=void 0===s?50:s;return e.onGridScroll$.debounceTime(u).filter((function(){return!n})).map((function(e){for(var r=e.firstRowIdx,n=e.lastRowIdx,a=r-c<0?0:r-c,s=n+c>i.totalFeatures-1?i.totalFeatures-1:n+c,u=Math.floor(a/t),p=Math.floor(s/t),f=!1,d=u;d<=p&&!f;d++)-1===(0,l.t3)(d*t,o,t)&&(f=!0);return f&&{startPage:u,endPage:p}})).filter((function(e){return e})).do((function(e){return r.moreFeatures(e)}))}))}(e.filter((function(e){return e.virtualScroll})).map((function(e){return de(de({},e),{},{onGridScroll$:n})}))).startWith({}).map((function(e){return de(de({},e),{},{onGridScroll:r})}))},virtualScroll:!0}),(0,E.withPropsOnChange)("showDragHandle",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.showDragHandle,r=void 0===t||t;return{className:r?"feature-grid-drag-handle-show":"feature-grid-drag-handle-hide"}})),(0,E.withPropsOnChange)(["enableColumnFilters"],(function(e){return{displayFilters:e.enableColumnFilters}})),(0,E.withPropsOnChange)(["editingAllowedRoles","virtualScroll"],(function(e){return{editingAllowedRoles:e.editingAllowedRoles,initPlugin:e.initPlugin}})),(0,E.withPropsOnChange)(["autocompleteEnabled"],(function(e){return{autocompleteEnabled:e.autocompleteEnabled}})),(0,E.withPropsOnChange)(["url"],(function(e){return{url:e.url}})),(0,E.withPropsOnChange)(["typeName"],(function(e){return{typeName:e.typeName}})),(0,E.withPropsOnChange)(["features","newFeatures","changes"],(function(e){return{rows:(e.newFeatures?[].concat(ue(e.newFeatures),ue(e.features)):e.features).filter(e.focusOnEdit?(0,l.ek)(e.changes&&Object.keys(e.changes).length>0,e.newFeatures,e.changes):function(){return!0}).map((function(t){return(0,l.Qc)(t,e.changes)})).map((function(e){var t;return de(de({},e),{},(me(t={},"_!_id_!_",e.id),me(t,"get",(function(t){return"geometry"===t||"_new"===t?e[t]:e.properties&&e.properties[t]})),t))}))}})),(0,E.withPropsOnChange)(["newFeatures","changes","focusOnEdit"],(function(e){return{isFocused:e.focusOnEdit&&(e.changes&&Object.keys(e.changes).length>0||e.newFeatures&&e.newFeatures.length>0)}})),(0,E.withPropsOnChange)(["features","newFeatures","isFocused","virtualScroll","pagination"],(function(e){return{rowsCount:(e.isFocused||!e.virtualScroll)&&e.rows&&e.rows.length||e.pagination&&e.pagination.totalFeatures||0}})),(0,E.withHandlers)({rowGetter:function(e){return e.virtualScroll&&function(t){return(0,l.WQ)(t,e.rows,e.pages,e.size)}||function(t){return(0,l.dM)(t,e.rows)}}}),(0,E.withPropsOnChange)(["describeFeatureType","columnSettings","tools","actionOpts","mode","isFocused","sortable"],(function(e){var t=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.localType,n=void 0===r?"":r,o=arguments.length>1?arguments[1]:void 0;return e.filterRenderers&&e.filterRenderers[o]?e.filterRenderers[o]:le((0,ce.Q)(n))};return{columns:(0,l.Sc)(e.tools,e.rowGetter,e.describeFeatureType,e.actionOpts,t).concat((0,l.AV)(e.describeFeatureType,e.columnSettings,{editable:"EDIT"===e.mode,sortable:e.sortable&&!e.isFocused,defaultSize:e.defaultSize},{getEditor:function(t){var r={onTemporaryChanges:e.gridEvents&&e.gridEvents.onTemporaryChanges,autocompleteEnabled:e.autocompleteEnabled,url:e.url,typeName:e.typeName},n={attribute:t.name,url:e.url,typeName:e.typeName},o=e.customEditorsOptions&&e.customEditorsOptions.rules||[],i={type:t.localType,generalProps:r,props:e},a=F().getCustomEditor(n,o,i);return I()(a)?e.editors(t.localType,r):a},getFilterRenderer:t,getFormatter:function(e){return function(e){return"boolean"===e.localType?function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).value;return I()(e)?null:a().createElement("span",null,e.toString())}:["int","number"].includes(e.localType)?function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).value;return I()(e)?null:a().createElement(se.Z,{value:e,numberParams:{maximumFractionDigits:17}})}:null}(e)}}))}})),(0,E.withPropsOnChange)(["gridOpts","describeFeatureType","actionOpts","mode","select","columns"],(function(e){var t=(0,l.a3)(e.gridEvents,e.rowGetter,e.describeFeatureType,e.actionOpts,e.columns),r=t.onRowsSelected,n=void 0===r?function(){}:r,o=t.onRowsDeselected,i=void 0===o?function(){}:o,a=t.onRowsToggled,c=void 0===a?function(){}:a,s=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(t,["onRowsSelected","onRowsDeselected","onRowsToggled"]),u=e.gridOpts;return u=de(de({},u),{},{enableCellSelect:"EDIT"===e.mode,rowSelection:{showCheckbox:"EDIT"===e.mode,selectBy:{keys:{rowKey:"_!_id_!_",values:e.select.map((function(e){return e.id}))}},onRowsSelected:n,onRowsDeselected:i}}),s.onRowClick=function(e,t){e>=0&&c([{rowIdx:e,row:t}])},de(de({},s),u)})),D.Z);function be(e){return(be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ge(){return(ge=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function ve(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function he(e,t){return(he=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Oe(e,t){return!t||"object"!==be(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function we(e){return(we=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ee(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Se=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&he(e,t)}(l,e);var t,r,n,o,i=(n=l,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=we(n);if(o){var r=we(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Oe(this,e)});function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(t=i.call(this,e)).setScrollLeft=function(e){return t.refs.cell.setScrollLeft(e)},t}return t=l,(r=[{key:"render",value:function(){var e=this.context.isProperty(this.props.column.key),t=this.props.rowData._new&&e||this.context.isModified(this.props.rowData.id,this.props.column.key),r=!e||this.context.isValid(this.props.rowData.get(this.props.column.key),this.props.column.key),n=(t?["modified"]:[]).concat(r?[]:["invalid"]).join(" ");return a().createElement(s.Cell,ge({},this.props,{ref:"cell",className:n}))}}])&&ve(t.prototype,r),l}(a().Component);Ee(Se,"propTypes",{value:o().any,rowData:o().object,column:o().object}),Ee(Se,"contextTypes",{isModified:o().func,isProperty:o().func,isValid:o().func}),Ee(Se,"defaultProps",{value:null,rowData:{},column:{}});const Pe=Se;function je(e){return(je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ce(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function xe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Te(e,t){return(Te=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ke(e,t){return!t||"object"!==je(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ie(e){return(Ie=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ae(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Fe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Te(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ie(n);if(o){var r=Ie(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return ke(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).setScrollLeft=function(e){return t.refs.row.setScrollLeft(e)},t}return t=a,(r=[{key:"render",value:function(){return this.props.renderBaseRow(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ce(Object(r),!0).forEach((function(t){Ae(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ce(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({extraClasses:"empty_row"===this.props.row.id?"empty-row":"",cellRenderer:Pe},this.props))}}])&&xe(t.prototype,r),a}(a().Component);Ae(Fe,"propTypes",{columns:o().array,row:o().object,renderBaseRow:o().func.isRequired});const De=Fe;function Re(e){return(Re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ne(){return(Ne=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Me(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Le(e,t){return(Le=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _e(e,t){return!t||"object"!==Re(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ze(e){return(Ze=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Be(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ze=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Le(e,t)}(c,e);var t,r,n,o,i=(n=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ze(n);if(o){var r=Ze(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return _e(this,e)});function c(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),i.call(this,e)}return t=c,(r=[{key:"componentDidMount",value:function(){this.props.initPlugin({virtualScroll:this.props.virtualScroll,editingAllowedRoles:this.props.editingAllowedRoles,maxStoredPages:this.props.maxStoredPages})}},{key:"getChildContext",value:function(){var e=this;return{isModified:function(t,r){return e.props.changes.hasOwnProperty(t)&&e.props.changes[t].hasOwnProperty(r)},isProperty:function(t){return"geometry"===t||(0,l.IC)(t,e.props.describeFeatureType)},isValid:function(t,r){return!e.props.describeFeatureType||(0,l.wT)(t,r,e.props.describeFeatureType)}}}},{key:"render",value:function(){var e=this.props.gridComponent;return a().createElement(e,Ne({rowRenderer:De},this.props))}}])&&Me(t.prototype,r),c}(a().PureComponent);Be(ze,"propTypes",{autocompleteEnabled:o().bool,editingAllowedRoles:o().array,gridOpts:o().object,changes:o().object,selectBy:o().object,customEditorsOptions:o().object,features:o().array,showDragHandle:o().bool,gridComponent:o().func,describeFeatureType:o().object,columnSettings:o().object,gridOptions:o().object,actionOpts:o().object,initPlugin:o().func,tools:o().array,gridEvents:o().object,virtualScroll:o().bool,maxStoredPages:o().number}),Be(ze,"childContextTypes",{isModified:o().func,isValid:o().func,isProperty:o().func}),Be(ze,"defaultProps",{editingAllowedRoles:["ADMIN"],initPlugin:function(){},autocompleteEnabled:!1,gridComponent:function(e){return a().createElement(c.Z,null,(function(t){var r=t.width,n=t.height;return a().createElement("div",{className:e.className},a().createElement(T,x({},e,{minHeight:n,minWidth:r,enableCellAutoFocus:!1})))}))},changes:{},gridEvents:{},gridOpts:{},describeFeatureType:{},columnSettings:{},features:[],tools:[],showDragHandle:!1,virtualScroll:!1,maxStoredPages:5});const Ge=ye(ze)},78819:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var n=r(45697),o=r.n(n);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(p,e);var t,r,n,o,i=(n=p,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=u(n);if(o){var r=u(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return s(this,e)});function p(){return a(this,p),i.apply(this,arguments)}return t=p,(r=[{key:"componentDidMount",value:function(){var e,t;null===(e=(t=this.props).onTemporaryChanges)||void 0===e||e.call(t,!0)}},{key:"componentWillUnmount",value:function(){var e,t;null===(e=(t=this.props).onTemporaryChanges)||void 0===e||e.call(t,!1)}}])&&l(t.prototype,r),p}(r(21709).editors.SimpleTextEditor);p(f,"propTypes",{onTemporaryChanges:o().func}),p(f,"defaultProps",{onTemporaryChanges:function(){}});const d=f},82994:(e,t,r)=>{"use strict";r.d(t,{Z:()=>I});var n=r(5053),o=r.n(n),i=r(45697),a=r.n(i),l=r(78819),c=r(49902),s=r(49848);function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){f(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const d=(0,s.compose)((0,s.withStateHandlers)((function(e){return{open:!1,currentPage:1,value:e.value,data:e.data,textValue:e.textValue,textLabel:e.textLabel}}),{select:function(e){return function(){return p(p({},e),{},{selected:!0})}},change:function(e){return function(t){if(e.selected&&e.changingPage)return p(p({},e),{},{selected:!1,changingPage:!1,value:e.value,currentPage:e.changingPage?e.currentPage:1});var r="string"==typeof t?t:t.value;return p(p({},e),{},{selected:!1,changingPage:!1,value:r,currentPage:e.changingPage?e.currentPage:1})}},focus:function(e){return function(t){return t&&0===t.length&&""===e.value?p(p({},e),{},{currentPage:1,isToggled:!1,open:!0}):e}},toggle:function(e){return function(){return p(p({},e),{},{open:!!e.changingPage||!e.open})}}}))((function(e){var t=e.toggle,r=e.select,n=e.focus,i=e.change,a=e.value,l=e.busy,s=e.data,u=e.loading,p=void 0!==u&&u,f=e.filter,d=e.open;return o().createElement(c.Z,{pagination:{paginated:!1},onFocus:n,onToggle:t,onChange:i,onSelect:r,selectedValue:a,dropUp:!1,busy:l,data:s,open:d,loading:p,filter:f})}));var m=function(e){var t=e.oldValue,r=e.changedValue,n=e.data;return e.allowEmpty&&""===r?"":-1!==n.indexOf(r)?r:t},y=r(91175),b=r.n(y),g=r(27418),v=r.n(g);function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(){return(O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function w(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function E(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function P(e,t){return!t||"object"!==h(t)&&"function"!=typeof t?j(e):t}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(e,t,r){return(C="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=x(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function T(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var k=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(l,e);var t,r,n,i,a=(n=l,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=x(n);if(i){var r=x(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return P(this,e)});function l(e){var t,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(r=a.call(this,e)).validate=function(e){try{return r.props.isValid(e[r.props.column&&r.props.column.key])}catch(e){return!1}},r.getValueByLabel=function(e){try{return r.props.values[r.props.labels.indexOf(e)]}catch(t){return e}},r.getValue=function(){var e=C((t=j(r),x(l.prototype)),"getValue",t).call(t);return r.props.forceSelection?T({},r.props.column.key,m({oldValue:r.props.defaultOption,changedValue:r.getValueByLabel(e[r.props.column&&r.props.column.key]),data:r.props.values,allowEmpty:r.props.allowEmpty})):r.props.allowEmpty?e:T({},r.props.column.key,m({oldValue:r.props.defaultOption,changedValue:r.getValueByLabel(e[r.props.column&&r.props.column.key]),data:r.props.values,allowEmpty:r.props.allowEmpty}))},r}return t=l,(r=[{key:"render",value:function(){var e=this,t=[];this.props.values&&this.props.labels&&this.props.values.lenght===this.props.labels.lenght?this.props.values.forEach((function(r,n){t.push({label:e.props.labels[n],value:r})})):t=this.props.values.map((function(e){return{label:e,value:e}}));var r=v()({},function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?w(Object(r),!0).forEach((function(t){T(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):w(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},this.props),{data:t,defaultOption:this.props.defaultOption||b()(this.props.values)});return o().createElement(d,O({},r,{filter:this.props.filter}))}}])&&E(t.prototype,r),l}(l.Z);T(k,"propTypes",{column:a().object,dataType:a().string,defaultOption:a().string,forceSelection:a().bool,allowEmpty:a().bool,inputProps:a().object,isValid:a().func,onBlur:a().func,typeName:a().string,url:a().string,value:a().string,filter:a().string,values:a().array,labels:a().array}),T(k,"defaultProps",{isValid:function(){return!0},dataType:"string",filter:"contains",values:[],forceSelection:!0,allowEmpty:!0});const I=k},43148:(e,t,r)=>{"use strict";r.d(t,{Z:()=>h});var n=r(5053),o=r.n(n),i=r(45697),a=r.n(i),l=r(81763),c=r.n(l),s=r(73333);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?y(e):t}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var v={int:function(e){return parseInt(e,10)},number:function(e){return parseFloat(e,10)}},h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(l,e);var t,r,n,i,a=(n=l,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=b(n);if(i){var r=b(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return m(this,e)});function l(e){var t,r,n,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),g(y(i=a.call(this,e)),"state",{inputText:""}),g(y(i),"validateTextValue",(function(e){if(!v[i.props.dataType])return!1;try{var t=v[i.props.dataType](e);return i.validateNumberValue(t)}catch(e){return!1}})),g(y(i),"validateNumberValue",(function(e){return c()(e)&&!isNaN(e)&&(!c()(i.props.minValue)||i.props.minValue<=e)&&(!c()(i.props.maxValue)||i.props.maxValue>=e)})),i.state={inputText:null!==(t=null===(r=e.value)||void 0===r||null===(n=r.toString)||void 0===n?void 0:n.call(r))&&void 0!==t?t:""},i.inputRef=o().createRef(),i}return t=l,(r=[{key:"componentDidMount",value:function(){var e,t;null===(e=(t=this.props).onTemporaryChanges)||void 0===e||e.call(t,!0)}},{key:"componentWillUnmount",value:function(){var e,t;null===(e=(t=this.props).onTemporaryChanges)||void 0===e||e.call(t,!1)}},{key:"getValue",value:function(){try{var e=v[this.props.dataType](this.state.inputText);return g({},this.props.column.key,this.validateNumberValue(e)?e:this.props.value)}catch(e){return g({},this.props.column.key,this.props.value)}}},{key:"getInputNode",value:function(){return this.inputRef.current}},{key:"render",value:function(){var e=this;return o().createElement(s.Z,p({},this.props.inputProps,{style:!this.state.validated||this.state.isValid?{}:{borderColor:"red"},value:this.state.inputText,ref:function(t){e.inputRef=t},type:"number",min:this.props.minValue,max:this.props.maxValue,className:"form-control",defaultValue:this.props.value,onChange:function(t){e.setState({inputText:t,isValid:e.validateTextValue(t),validated:!0})}}))}}])&&f(t.prototype,r),l}(o().Component);g(h,"propTypes",{value:a().oneOfType([a().string,a().number]),inputProps:a().object,dataType:a().string,minValue:a().number,maxValue:a().number,column:a().object,onTemporaryChanges:a().func}),g(h,"defaultProps",{dataType:"number",column:{}})},89808:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>h});var n=r(5053),o=r.n(n),i=r(82994),a=r(43148),l=r(45697),c=r.n(l);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?m(e):t}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(l,e);var t,r,n,i,a=(n=l,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=y(n);if(i){var r=y(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return d(this,e)});function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),b(m(t=a.call(this,e)),"state",{inputText:""}),b(m(t),"validateValue",(function(e){return!t.props.formatRegex||new RegExp(t.props.formatRegex).test(e)})),t.state={inputText:e.value},t.inputRef=o().createRef(),t}return t=l,(r=[{key:"componentDidMount",value:function(){var e,t;null===(e=(t=this.props).onTemporaryChanges)||void 0===e||e.call(t,!0)}},{key:"componentWillUnmount",value:function(){var e,t;null===(e=(t=this.props).onTemporaryChanges)||void 0===e||e.call(t,!1)}},{key:"getValue",value:function(){return b({},this.props.column.key,this.validateValue(this.state.inputText)?this.state.inputText:this.props.value)}},{key:"getInputNode",value:function(){return this.inputRef.current}},{key:"render",value:function(){var e=this;return o().createElement("input",u({},this.props.inputProps,{style:!this.state.validated||this.state.isValid?{}:{borderColor:"red"},value:this.state.inputText,ref:this.inputRef,className:"form-control",defaultValue:this.props.value,onChange:function(t){e.setState({inputText:t.target.value,isValid:e.validateValue(t.target.value),validated:!0})}}))}}])&&p(t.prototype,r),l}(o().Component);function v(){return(v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}b(g,"propTypes",{value:c().string,inputProps:c().object,dataType:c().string,column:c().object,formatRegex:c().string,onTemporaryChanges:c().func}),b(g,"defaultProps",{dataType:"string",column:{}});const h={DropDownEditor:{string:function(e){return o().createElement(i.Z,v({dataType:"string"},e))}},NumberEditor:{int:function(e){return o().createElement(a.Z,v({dataType:"int"},e))},number:function(e){return o().createElement(a.Z,v({dataType:"number"},e))}},FormatEditor:{string:function(e){return o().createElement(g,v({dataType:"string"},e))}}}},18027:(e,t,r)=>{"use strict";r.d(t,{Q:()=>je});var n=r(49848),o=r(5053),i=r.n(o),a=r(45697),l=r.n(a),c=r(69175),s=r(30381),u=r.n(s),p=r(29202),f=r(78681),d=r.n(f),m=r(30294),y=r(47960),b=r.n(y),g=r(50966);function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e,t){return!t||"object"!==v(t)&&"function"!=typeof t?S(e):t}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function j(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var C=function(e){for(var t=u()().startOf("day"),r=u()().startOf("day").add(1,"d"),n=[],o=t.date();t.date()===o&&t.isBefore(r);)n.push({date:t.toDate(),label:t.format("LT")}),t=t.add(e||30,"m");return n},x=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(l,e);var t,r,n,o,a=(n=l,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=P(n);if(o){var r=P(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return E(this,e)});function l(){var e;h(this,l);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return j(S(e=a.call.apply(a,[this].concat(r))),"state",{focusedItemIndex:0,times:[]}),j(S(e),"handleKeyDown",(function(t){var r=t.key,n=e.state,o=n.focusedItemIndex,i=n.times;if("Enter"===r){var a=i[o];e.props.onSelect(a),t.preventDefault()}else if("ArrowDown"===r){t.preventDefault();var l=o+1;e.scrollDown(l),l<i.length&&e.setState({focusedItemIndex:l})}else if("ArrowUp"===r){t.preventDefault();var c=o-1;e.scrollUp(c),c>-1&&e.setState({focusedItemIndex:c})}})),j(S(e),"scrollDown",(function(t){var r=e.itemsRef[t];r&&r.offsetTop>e.listRef.offsetHeight&&(e.listRef.scrollTop=r.offsetTop-e.listRef.offsetTop)})),j(S(e),"scrollUp",(function(t){var r=e.itemsRef[t];if(r){var n=e.listRef.scrollTop,o=r.offsetTop;n&&o<n&&(e.listRef.scrollTop=r.offsetTop-e.listRef.offsetTop)}})),j(S(e),"attachListRef",(function(t){return e.listRef=t})),j(S(e),"itemsRef",{}),e}return t=l,(r=[{key:"componentDidMount",value:function(){this.setState({times:C()})}},{key:"render",value:function(){var e=this,t=this.state,r=t.focusedItemIndex,n=t.times;return i().createElement("ul",{id:"rw_1_time_listbox",style:{position:"relative"},ref:this.attachListRef,tabIndex:"0",className:"rw-list",role:"listbox","aria-labelledby":"rw_1_input","aria-live":"false","aria-hidden":"true","aria-activedescendant":"rw_1_time_listbox__option__11"},n.map((function(t,n){return i().createElement("li",{key:t.label,onMouseDown:e.props.onMouseDown,onClick:function(){return e.props.onSelect(t)},ref:function(t){e.itemsRef[n]=t},role:"option",tabIndex:"0","aria-selected":"false",className:"rw-list-option ".concat(r===n?"rw-state-focus":""),id:"rw_1_time_listbox__option__0"},t.label)})))}}])&&O(t.prototype,r),l}(o.Component);j(x,"propTypes",{onSelect:l().func,onMouseDown:l().func}),j(x,"defaultProps",{onSelect:function(){},onMouseDown:function(){}});const T=x;function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function I(){return(I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function A(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function F(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function D(e,t){return(D=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function R(e,t){return!t||"object"!==k(t)&&"function"!=typeof t?N(e):t}function N(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function M(e){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function L(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}d()(u());var _="function"==typeof u()().locale?"locale":"lang";function Z(e,t,r){return e?u()(t,r)[_](e):u()(t,r)}var B=function(e,t){var r=u()(e);return r.hours(t.getHours()).minute(t.getMinutes()).seconds(t.getSeconds()).milliseconds(t.getMilliseconds()),r.toDate()},z=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&D(e,t)}(l,e);var t,r,n,o,a=(n=l,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=M(n);if(o){var r=M(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return R(this,e)});function l(){var e;A(this,l);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return L(N(e=a.call.apply(a,[this].concat(r))),"state",{open:"",focused:!1,inputValue:"",operator:"",date:null}),L(N(e),"getFormat",(function(){var t=e.props,r=t.format,n=t.time,o=t.calendar;return r||(!n&&o?"L":n&&!o?"LT":"lll")})),L(N(e),"renderInput",(function(t,r,n,o,a,l,c){return n?i().createElement(g.Z,{placement:"top",overlay:i().createElement(m.Tooltip,{id:"tooltip"},n)},i().createElement("input",{type:"text",id:"rw_1_input",role:"combobox",onBlur:e.handleInputBlur,placeholder:o,"aria-expanded":l||c,"aria-haspopup":"true","aria-busy":"false","aria-owns":"rw_1_cal rw_1_time_listbox",tabIndex:a,autoComplete:"off",value:"".concat(r).concat(t),className:"rw-input",onChange:e.handleValueChange})):i().createElement("input",{type:"text",id:"rw_1_input",role:"combobox",onBlur:e.handleInputBlur,placeholder:o,"aria-expanded":l||c,"aria-haspopup":"true","aria-busy":"false","aria-owns":"rw_1_cal rw_1_time_listbox",tabIndex:a,autoComplete:"off",value:"".concat(r).concat(t),className:"rw-input",onChange:e.handleValueChange})})),L(N(e),"inputFlush",!1),L(N(e),"ignoreBlur",!1),L(N(e),"handleWidgetFocus",(function(){e.setState({focused:!0}),e.ignoreBlur=!1})),L(N(e),"handleWidgetBlur",(function(){e.ignoreBlur||e.setState({open:"",focused:!1})})),L(N(e),"handleMouseDown",(function(){e.ignoreBlur=!0})),L(N(e),"toggleCalendar",(function(){e.setState((function(e){return{open:"date"!==e.open?"date":""}}))})),L(N(e),"toggleTime",(function(){e.setState((function(e){return{open:"time"!==e.open?"time":""}}))})),L(N(e),"handleInputBlur",(function(){if(e.inputFlush){var t=e.parse(e.state.inputValue),r=e.format(t);e.setState({inputValue:r,date:t}),e.inputFlush=!1,e.props.onChange(t,"".concat(e.state.operator).concat(r))}})),L(N(e),"setDateFromValueProp",(function(t,r){if(b()(t)){var n=e.format(t);e.setState((function(e){return{date:t,inputValue:n,operator:r||e.operator}}))}})),L(N(e),"parse",(function(t){var r=e.props.culture,n=e.getFormat();if(t){var o=Z(r,t,n);if(o.isValid())return o.toDate()}return null})),L(N(e),"format",(function(t){if(!t)return"";var r=e.props.culture,n=e.getFormat(),o=Z(r,t);return o.isValid()?o.format(n):""})),L(N(e),"close",(function(){e.setState({open:""})})),L(N(e),"open",(function(){var t=e.props,r=t.calendar,n=t.time;return!r&&n?e.setState({open:"time"}):r&&!n?e.setState({open:"date"}):""})),L(N(e),"handleKeyDown",(function(t){var r=e.state.open,n="time"===r,o="date"===r;if(!t.defaultPrevented)if("Escape"!==t.key){if(t.altKey&&"ArrowDown"===t.key)return t.preventDefault(),void e.open();if(t.altKey&&"ArrowUp"===t.key)return t.preventDefault(),void e.close();if(n&&e.timeRef.handleKeyDown(t),o&&e.calRef.refs.inner.handleKeyDown(t),!n&&!o&&"Enter"===t.key){var i=e.parse(e.state.inputValue),a=e.format(i);e.setState({inputValue:a,date:i}),e.inputFlush=!1,e.props.onChange(i,"".concat(e.state.operator).concat(a))}}else e.close()})),L(N(e),"handleValueChange",(function(t){var r=t.target.value,n=/\s*(!==|!=|<>|<=|>=|===|==|=|<|>)?(.*)/.exec(r);e.setState({inputValue:n[2],operator:n[1]||""}),e.inputFlush=!0})),L(N(e),"handleCalendarChange",(function(t){var r=B(t,new Date),n=e.format(r);e.setState({date:r,inputValue:n,open:""}),e.props.onChange(r,"".concat(e.state.operator).concat(n))})),L(N(e),"handleTimeSelect",(function(t){var r=e.state.date||new Date,n=B(r,t.date),o=e.format(n);e.setState({date:n,inputValue:o,open:""}),e.props.onChange(n,"".concat(e.state.operator).concat(o))})),L(N(e),"attachTimeRef",(function(t){return e.timeRef=t})),L(N(e),"attachCalRef",(function(t){return e.calRef=t})),e}return t=l,(r=[{key:"componentDidMount",value:function(){var e=this.props,t=e.value,r=e.operator;this.setDateFromValueProp(t,r)}},{key:"componentDidUpdate",value:function(e){if(e.value!==this.props.value||e.operator!==this.props.operator){var t=this.props,r=t.value,n=t.operator;this.setDateFromValueProp(r,n)}}},{key:"render",value:function(){var e=this,t=this.state,r=t.open,n=t.inputValue,o=t.operator,a=t.focused,l=this.props,c=l.calendar,s=l.time,u=l.toolTip,f=l.placeholder,d=l.tabIndex,m=Object.keys(this.props).reduce((function(t,r){return["placeholder","calendar","time","onChange","value"].includes(r)||(t[r]=e.props[r]),t}),{}),y="date"===r,b="time"===r;return i().createElement("div",{tabIndex:"-1",onKeyDown:this.handleKeyDown,onBlur:this.handleWidgetBlur,onFocus:this.handleWidgetFocus,className:"rw-datetimepicker rw-widget ".concat(c&&s?"rw-has-both":""," ").concat(c||s?"":"rw-has-neither"," ").concat(a?"rw-state-focus":"")},this.renderInput(n,o,u,f,d,y,b),c||s?i().createElement("span",{className:"rw-select"},c?i().createElement("button",{tabIndex:"-1",title:"Select Date",type:"button","aria-disabled":"false","aria-label":"Select Date",className:"rw-btn-calendar rw-btn",onClick:this.toggleCalendar},i().createElement("span",{"aria-hidden":"true",className:"rw-i rw-i-calendar"})):"",s?i().createElement("button",{tabIndex:"-1",title:"Select Time",type:"button","aria-disabled":"false","aria-label":"Select Time",className:"rw-btn-time rw-btn",onClick:this.toggleTime},i().createElement("span",{"aria-hidden":"true",className:"rw-i rw-i-clock-o"})):""):"",i().createElement("div",{className:"rw-popup-container rw-popup-animating",style:{display:b?"block":"none",overflow:b?"visible":"hidden",height:"216px"}},i().createElement("div",{className:"rw-popup rw-widget",style:{transform:b?"translateY(0)":"translateY(-100%)",position:b?"":"absolute"}},i().createElement(T,I({ref:this.attachTimeRef,onMouseDown:this.handleMouseDown},m,{onClose:this.close,onSelect:this.handleTimeSelect})))),i().createElement("div",{className:"rw-calendar-popup rw-popup-container ".concat(y?"":"rw-popup-animating"),style:{display:y?"block":"none",overflow:y?"visible":"hidden",height:"375px"}},i().createElement("div",{className:"rw-popup",style:{transform:y?"translateY(0)":"translateY(-100%)",padding:"0",borderRadius:"4px",position:y?"":"absolute"}},i().createElement(p.Calendar,I({tabIndex:"-1",ref:this.attachCalRef,onMouseDown:this.handleMouseDown,onChange:this.handleCalendarChange},m)))))}}])&&F(t.prototype,r),l}(o.Component);L(z,"propTypes",{format:l().string,type:l().string,placeholder:l().string,onChange:l().func,calendar:l().bool,time:l().bool,value:l().any,operator:l().string,culture:l().string,toolTip:l().string,tabIndex:l().string}),L(z,"defaultProps",{placeholder:"Type date...",calendar:!0,time:!0,onChange:function(){},value:null});const G=z;var U=r(86638),W=r(55237);function V(e){return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function q(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function H(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function $(e,t){return($=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function K(e,t){return!t||"object"!==V(t)&&"function"!=typeof t?Y(e):t}function Y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function X(e){return(X=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Q(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var J=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$(e,t)}(l,e);var t,r,n,o,a=(n=l,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=X(n);if(o){var r=X(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return K(this,e)});function l(){var e;q(this,l);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Q(Y(e=a.call.apply(a,[this].concat(r))),"renderInput",(function(){if(!1===e.props.column.filterable)return i().createElement("span",null);var t=(0,U.S$)(e.context.messages,e.props.placeholderMsgId)||"Search",r="header-filter-"+e.props.column.key;return i().createElement("input",{disabled:e.props.disabled,key:r,type:"text",className:"form-control input-sm",placeholder:t,value:e.props.value,onChange:e.handleChange})})),Q(Y(e),"renderTooltip",(function(t){return e.props.tooltipMsgId&&(0,U.S$)(e.context.messages,e.props.tooltipMsgId)?i().createElement(g.Z,{placement:"top",overlay:i().createElement(m.Tooltip,{id:"tooltip"},(0,U.S$)(e.context.messages,e.props.tooltipMsgId))},t):t})),Q(Y(e),"handleChange",(function(t){var r=t.target.value;e.props.onChange({value:r,attribute:e.props.column&&e.props.column.key})})),e}return t=l,(r=[{key:"render",value:function(){var e="header-filter--"+this.props.column.key;return i().createElement("div",{key:e,className:"form-group".concat(this.props.valid?"":" has-error")},this.renderTooltip(this.renderInput()))}}])&&H(t.prototype,r),l}(i().PureComponent);Q(J,"propTypes",{valid:l().bool,disabled:l().bool,onChange:l().func.isRequired,value:l().any,column:l().object,placeholderMsgId:l().string,tooltipMsgId:l().string}),Q(J,"contextTypes",{messages:l().object}),Q(J,"defaultProps",{value:"",valid:!0,onChange:function(){},column:{},placeholderMsgId:"featuregrid.filter.placeholders.default"});const ee=J;var te=r(43146);function re(e){return(re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ne(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function oe(e,t){return(oe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ie(e,t){return!t||"object"!==re(t)&&"function"!=typeof t?ae(e):t}function ae(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function le(e){return(le=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ce(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r(42490);var se=(0,te.Z)({dateProp:"value",dateTypeProp:"type",setDateProp:"onChange"})(G),ue=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&oe(e,t)}(o,e);var t,r,n=(t=o,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,n=le(t);if(r){var o=le(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return ie(this,e)});function o(){var e;ne(this,o);for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return ce(ae(e=n.call.apply(n,[this].concat(r))),"renderInput",(function(){if(!1===e.props.column.filterable)return i().createElement("span",null);var t,r=(0,W.V$)(e.context.locale,e.props.type),n=(0,U.S$)(e.context.messages,e.props.placeholderMsgId)||"Insert date",o=e.props.intl&&e.props.intl.formatMessage({id:"".concat(e.props.tooltipMsgId)},{format:r})||"Insert date in ".concat(r," format"),a="header-filter-"+e.props.column.key;t=e.props.value&&null===e.props.value.startDate||!e.props.value?null:e.props.value&&e.props.value.startDate||e.props.value;var l=e.props.value?t:null,c=e.props.value&&e.props.value.operator;return i().createElement(se,{key:a,disabled:e.props.disabled,format:r,placeholder:n,value:l,toolTip:o,operator:c,type:e.props.type,time:"date-time"===e.props.type||"time"===e.props.type,calendar:"date-time"===e.props.type||"date"===e.props.type,onChange:function(t,r){return e.handleChange(t,r)}})})),ce(ae(e),"handleChange",(function(t,r){e.props.onChange({value:t,stringValue:r,attribute:e.props.column&&e.props.column.name})})),e}return o}(ee);ce(ue,"propTypes",{type:l().string,disabled:l().boolean,onChange:l().func,intl:c.intlShape}),ce(ue,"contextTypes",{messages:l().object,locale:l().string}),ce(ue,"defaultProps",{value:null,type:"date-time",column:{},placeholderMsgId:"featuregrid.filter.placeholders.default"});const pe=(0,n.getContext)({intl:c.intlShape})(ue),fe=(0,n.compose)((0,n.defaultProps)({onValueChange:function(){},value:null}),(0,n.withHandlers)({onChange:function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.value,n=t.attribute,o=t.stringValue,i=/\s*(!==|!=|<>|<=|>=|===|==|=|<|>)?(.*)/.exec(o),a=i[1],l=i[1]||"=";"!=="===a|"!="===a?l="<>":"==="===a|"=="===a&&(l="="),e.onValueChange(r),e.onChange({value:{startDate:r,operator:a},operator:l,type:e.type,attribute:n})}}}),(0,n.defaultProps)({placeholderMsgId:"featuregrid.filter.placeholders.date",tooltipMsgId:"featuregrid.filter.tooltips.date"}))(pe),de=(0,n.compose)((0,n.defaultProps)({onValueChange:function(){}}),(0,n.withHandlers)({onChange:function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.value,n=t.attribute;e.onValueChange(r),e.onChange({value:r,operator:"=",type:e.type,attribute:n})}}}))(ee);var me=r(5346);const ye=function(e){var t=e.value,r=e.filterEnabled,n=void 0!==r&&r,o=e.filterDeactivated,a=void 0!==o&&o,l=e.column,c=void 0===l?{}:l,s=e.tooltipPlace,u=void 0===s?"top":s,p=e.tooltipDisabled,f=void 0===p?"featuregrid.filter.tooltips.geometry.disabled":p,d=e.tooltipEnabled,y=void 0===d?"featuregrid.filter.tooltips.geometry.enabled":d,b=e.tooltipApplied,v=void 0===b?"featuregrid.filter.tooltips.geometry.applied":b,h=e.onChange,O=void 0===h?function(){}:h,w=a?void 0:n&&t?v:n&&!t?y:f,E=i().createElement("div",{className:"featuregrid-geometry-filter".concat(n?" filter-enabled":"").concat(a?" filter-deactivated":""),onClick:a?function(){}:function(){O({enabled:!n,type:"geometry",attribute:c.geometryPropName})}},i().createElement(m.Glyphicon,{glyph:t?"remove-sign":"map-marker"}));return w?i().createElement(g.Z,{placement:u,overlay:i().createElement(m.Tooltip,{id:"gofull-tooltip"},i().createElement(me.Z,{msgId:w}))},E):E};var be=r(92742),ge=r.n(be),ve=r(6557),he=r.n(ve),Oe=r(96958),we=/\,/;const Ee=(0,n.compose)((0,n.defaultProps)({onValueChange:function(){}}),(0,n.withState)("valid","setValid",!0),(0,n.withHandlers)({onChange:function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.value,n=t.attribute;if(e.onValueChange(r),we.exec(r)){var o=(null==r?void 0:r.split(",").filter(he()))||[],i=o.reduce((function(e,t){var r=(0,Oe.Cf)(t).newVal;return e&&!(isNaN(r)&&""!==ge()(t))}),!0);e.setValid(i),e.onChange({value:r,rawValue:r,operator:"=",type:"number",attribute:n})}else{var a=(0,Oe.Cf)(r,"number"),l=a.operator,c=a.newVal;isNaN(c)&&""!==ge()(r)?e.setValid(!1):e.setValid(!0),e.onChange({value:isNaN(c)?void 0:c,rawValue:r,operator:l,type:"number",attribute:n})}}}}),(0,n.defaultProps)({placeholderMsgId:"featuregrid.filter.placeholders.number",tooltipMsgId:"featuregrid.filter.tooltips.number"}))(ee),Se=(0,n.compose)((0,n.defaultProps)({onValueChange:function(){},placeholderMsgId:"featuregrid.filter.placeholders.string"}),(0,n.withHandlers)({onChange:function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.value,n=t.attribute;e.onValueChange(r),e.onChange({rawValue:r,value:ge()(r)?ge()(r):void 0,operator:"ilike",type:"string",attribute:n})}}}))(ee);var Pe={defaultFilter:function(e){return(0,n.withProps)((function(){return{type:e}}))(de)},string:function(){return Se},number:function(){return Ee},int:function(){return Ee},date:function(){return(0,n.withProps)((function(){return{type:"date"}}))(fe)},time:function(){return(0,n.withProps)((function(){return{type:"time"}}))(fe)},"date-time":function(){return(0,n.withProps)((function(){return{type:"date-time"}}))(fe)},geometry:function(){return ye}},je=function(e,t){return Pe[e]?Pe[e](e,t):Pe.defaultFilter(e,t)}},42872:(e,t,r)=>{"use strict";r.d(t,{Z:()=>N});var n=r(5053),o=r.n(n),i=r(45697),a=r.n(i),l=r(88798),c=r(15402),s=r(5346),u=r(30294);function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?b(e):t}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(l,e);var t,r,n,i,a=(n=l,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=g(n);if(i){var r=g(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return y(this,e)});function l(){var e;f(this,l);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return v(b(e=a.call.apply(a,[this].concat(r))),"onTouchStart",(function(t){var r=t.touches[0];e.startX=r.pageX,e.startY=r.pageY,e.setState({scrolling:!1})})),v(b(e),"onTouchMove",(function(t){var r=t.touches[0],n=t.currentTarget;if(e.state.scrolling)t.stopPropagation();else if(Math.abs(e.startY-r.pageY)>Math.abs(e.startX-r.pageX))t.stopPropagation();else{var o=e.startX<r.pageX?"left":"right";(n&&"left"===o&&n.clientWidth<n.scrollWidth&&0!==n.scrollLeft||n&&"right"===o&&n.clientWidth+n.scrollLeft!==n.scrollWidth)&&(e.setState({scrolling:!0}),t.stopPropagation())}})),v(b(e),"onTouchEnd",(function(){e.setState({scrolling:!1})})),v(b(e),"renderPage",(function(){var t="function"==typeof e.props.viewers?e.props.viewers:e.props.viewers[e.props.format];return t?o().createElement(t,{response:e.props.response,layer:e.props.layer}):null})),e}return t=l,(r=[{key:"render",value:function(){return o().createElement("div",{style:{width:"100%",height:"100%",overflowX:"auto"},onTouchMove:this.onTouchMove,onTouchStart:this.onTouchStart,onTouchEnd:this.onTouchEnd},this.renderPage())}}])&&d(t.prototype,r),l}(o().Component);v(h,"propTypes",{format:a().string,viewers:a().oneOfType([a().func,a().object]),response:a().oneOfType([a().string,a().object,a().node]),layer:a().object});var O=r(41609),w=r.n(O),E=r(31351),S=r.n(E),P=r(2870);function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function C(){return(C=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function x(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function T(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function I(e,t){return!t||"object"!==j(t)&&"function"!=typeof t?A(e):t}function A(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function F(e){return(F=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function D(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var R=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(p,e);var t,r,n,i,a=(n=p,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=F(n);if(i){var r=F(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return I(this,e)});function p(){var e;x(this,p);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return D(A(e=a.call.apply(a,[this].concat(r))),"getResponseProperties",(function(){var t=e.props.validator(e.props.format),r=e.props.responses.map((function(e){return void 0===e?{}:e})),n=t.getValidResponses(r),o=t.getNoValidResponses(e.props.responses),i=e.props.requests.length===o.length;return{validResponses:n,currResponse:e.getCurrentResponse(n[e.props.index]),emptyResponses:i,invalidResponses:o}})),D(A(e),"getCurrentResponse",(function(t){return e.props.validator(e.props.format).getValidResponses([t])})),D(A(e),"renderEmptyLayers",(function(){var t=e.getResponseProperties(),r=t.invalidResponses,n=t.emptyResponses;if(0===e.props.missingResponses&&n)return null;var i=0!==r.length;if(e.props.renderEmpty||(i=i&&0===e.props.missingResponses),i){var a=r.map((function(e){return e.layerMetadata.title}));return e.props.showEmptyMessageGFI?o().createElement(u.Alert,{bsStyle:"info"},o().createElement(s.Z,{msgId:"noInfoForLayers"}),o().createElement("b",null,a.join(", "))):null}return null})),D(A(e),"renderPage",(function(t){var r=e.props.viewers[e.props.format];return r?o().createElement(r,{response:t}):null})),D(A(e),"renderEmptyPages",(function(){var t=e.getResponseProperties().emptyResponses;return 0===e.props.missingResponses&&t?o().createElement(u.Alert,{bsStyle:"danger"},o().createElement("h4",null,o().createElement(c.Z,{msgId:"noFeatureInfo"}))):null})),D(A(e),"renderPages",(function(){var t=e.getResponseProperties().validResponses;return t.map((function(r,n){var i,a,c=r.response,s=r.layerMetadata,p=(0,P.Q)(r,e.props),f=e.props.header;return null!=s&&null!==(i=s.viewer)&&void 0!==i&&i.type&&(a=(0,l.gA)(s.viewer.type)),o().createElement(u.Panel,{eventKey:n,key:n,collapsible:e.props.collapsible,header:f?o().createElement("span",null,o().createElement(f,C({size:t.length},e.props.headerOptions,s,{index:e.props.index,onNext:function(){return e.props.onNext()},onPrevious:function(){return e.props.onPrevious()}}))):null,style:e.props.style},o().createElement(h,{response:c,format:p,viewers:a||e.props.viewers,layer:s}))}))})),D(A(e),"containerStyle",(function(t){return w()(t)&&e.props.isMobile?{height:"100%"}:{display:w()(t)?"none":"block"}})),e}return t=p,(r=[{key:"shouldComponentUpdate",value:function(e){return e.responses!==this.props.responses||e.missingResponses!==this.props.missingResponses||e.index!==this.props.index}},{key:"render",value:function(){var e=this,t=this.props.container,r=this.getResponseProperties(),n=r.currResponse,i=r.emptyResponses,a=[this.renderEmptyLayers(),o().createElement(t,C({},this.props.containerProps,{onChangeIndex:function(t){e.props.setIndex(t)},ref:"container",index:this.props.index||0,key:"swiper",style:this.containerStyle(n),className:"swipeable-view"}),this.renderPages())];return a=this.props.isMobile?a:S()(a),o().createElement("div",{className:"mapstore-identify-viewer"},i?this.renderEmptyPages():a.map((function(e){return e})))}}])&&T(t.prototype,r),p}(o().Component);D(R,"propTypes",{format:a().string,collapsible:a().bool,requests:a().array,responses:a().array,missingResponses:a().number,container:a().oneOfType([a().object,a().func]),header:a().oneOfType([a().object,a().func]),headerOptions:a().object,validator:a().func,viewers:a().object,style:a().object,containerProps:a().object,index:a().number,onNext:a().func,onPrevious:a().func,onUpdateIndex:a().func,setIndex:a().func,showEmptyMessageGFI:a().bool,renderEmpty:a().bool,loaded:a().bool,isMobile:a().bool}),D(R,"defaultProps",{format:(0,l.wR)(),responses:[],requests:[],missingResponses:0,collapsible:!1,headerOptions:{},container:u.Accordion,validator:l.Te,viewers:(0,l.Qm)(),style:{position:"relative",marginBottom:0},containerProps:{},showEmptyMessageGFI:!0,renderEmpty:!1,onNext:function(){},onPrevious:function(){},setIndex:function(){},isMobile:!1});const N=R},79870:(e,t,r)=>{"use strict";r.d(t,{Z:()=>v});var n=r(45697),o=r.n(n),i=r(5053),a=r.n(i),l=r(30294),c=r(38560);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?m(e):t}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(s,e);var t,r,n,o,i=(n=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=y(n);if(o){var r=y(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return d(this,e)});function s(){var e;u(this,s);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return b(m(e=i.call.apply(i,[this].concat(r))),"renderLeftButton",(function(){var t=0===e.props.index;return e.props.useButtons?a().createElement(c.Z,{ref:"left",disabled:t,className:e.props.btnClassName||"square-button-md no-border",onClick:function(){e.props.onPrevious()}},a().createElement(l.Glyphicon,{glyph:"back"})):a().createElement("a",{ref:"left",disabled:t,className:e.props.btnClassName||"square-button-md",onClick:function(){e.props.onPrevious()}},a().createElement(l.Glyphicon,{glyph:"back"}))})),b(m(e),"renderRightButton",(function(){var t=e.props.index===e.props.size-1;return e.props.useButtons?a().createElement(c.Z,{ref:"right",disabled:t,className:e.props.btnClassName||"square-button-md no-border",onClick:function(){e.props.onNext()}},a().createElement(l.Glyphicon,{glyph:"next"})):a().createElement("a",{ref:"right",disabled:t,className:e.props.btnClassName||"square-button-md",onClick:function(){e.props.onNext()}},a().createElement(l.Glyphicon,{glyph:"next"}))})),e}return t=s,(r=[{key:"componentWillUnmount",value:function(){this.interval&&clearInterval(this.interval)}},{key:"render",value:function(){return a().createElement("div",{className:"ms-identify-swipe-header"},this.props.size>1&&a().createElement("div",{className:"ms-identify-swipe-header-arrow"},this.renderLeftButton()),a().createElement("div",{className:"ms-identify-swipe-header-title"},this.props.title),this.props.size>1&&a().createElement("div",{className:"ms-identify-swipe-header-arrow"},this.renderRightButton()))}}])&&p(t.prototype,r),s}(a().Component);b(g,"propTypes",{title:o().string,index:o().number,size:o().number,container:o().oneOfType([o().object,o().func]),useButtons:o().bool,onPrevious:o().func,onNext:o().func,btnClassName:o().string}),b(g,"defaultProps",{useButtons:!0});const v=g},11196:(e,t,r)=>{"use strict";r.d(t,{mI:()=>i,Yy:()=>a});var n=r(49848),o=r(88798),i=(0,n.withHandlers)({onNext:function(e){var t=e.index,r=void 0===t?0:t,n=e.setIndex,o=void 0===n?function(){}:n,i=e.validResponses,a=void 0===i?[]:i;return function(){o(Math.min(a.length-1,r+1))}},onPrevious:function(e){var t=e.index,r=e.setIndex,n=void 0===r?function(){}:r;return function(){n(Math.max(0,t-1))}}}),a=(0,n.defaultProps)({format:(0,o.wR)(),validator:o.Te})},48384:(e,t,r)=>{"use strict";r.d(t,{Z:()=>g});var n=r(5053),o=r.n(n),i=r(45697),a=r.n(i);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d,m,y,b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(l,e);var t,r,n,i,a=(n=l,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=f(n);if(i){var r=f(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return p(this,e)});function l(){return c(this,l),a.apply(this,arguments)}return t=l,(r=[{key:"render",value:function(){var e=this.props.item;return e.pagination?o().createElement("span",null,e[this.props.textField]," ",e.pagination," "):o().createElement("span",null,e[this.props.textField])}}])&&s(t.prototype,r),l}(o().Component);d=b,m="propTypes",y={item:a().object,textField:a().string,valueField:a().string},m in d?Object.defineProperty(d,m,{value:y,enumerable:!0,configurable:!0,writable:!0}):d[m]=y;const g=b},18790:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>O});var n=r(45697),o=r.n(n),i=r(5053),a=r.n(i),l=r(30294),c=r(64386),s=r.n(c),u=r(90183);function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?b(e):t}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(c,e);var t,r,n,o,i=(n=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=g(n);if(o){var r=g(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return y(this,e)});function c(){var e;f(this,c);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return v(b(e=i.call.apply(i,[this].concat(r))),"launchNewCRSAction",(function(t){if(e.props.useRawInput)e.props.onCRSChange(t.target.value);else{var r=s().findDOMNode(b(e)).getElementsByTagName("select").item(0);e.props.onCRSChange(r.value)}})),e}return t=c,(r=[{key:"render",value:function(){var e,t,r=[],n={};for(var o in Object.keys(this.props.availableCRS).length&&(n=(0,u.filterCRSList)(this.props.availableCRS,this.props.filterAllowedCRS,this.props.additionalCRS,this.props.projectionDefs)),n)n.hasOwnProperty(o)&&(e=o,t=n[o].label,r.push(a().createElement("option",{value:e,key:e},t)));return this.props.enabled&&this.props.useRawInput?a().createElement("select",{id:this.props.id,value:this.props.crs,onChange:this.launchNewCRSAction,bsSize:"small"},r):this.props.enabled&&!this.props.useRawInput?a().createElement(l.FormGroup,null,a().createElement(l.ControlLabel,null,this.props.label),a().createElement(l.FormControl,{componentClass:"select",id:this.props.id,value:this.props.crs,onChange:this.launchNewCRSAction,bsSize:"small"},r)):null}}])&&d(t.prototype,r),c}(a().Component);v(h,"propTypes",{id:o().string,label:o().oneOfType([o().func,o().string,o().object]),availableCRS:o().object,filterAllowedCRS:o().array,projectionDefs:o().array,additionalCRS:o().object,crs:o().string,enabled:o().bool,onCRSChange:o().func,useRawInput:o().bool}),v(h,"defaultProps",{id:"mapstore-crsselector",availableCRS:(0,u.getAvailableCRS)(),crs:null,onCRSChange:function(){},enabled:!1,useRawInput:!1});const O=h},42454:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>T});var n=r(45697),o=r.n(n),i=r(5053),a=r.n(i),l=r(90173),c=r(30294),s=r(5249),u=r.n(s),p=r(90183),f=r(47461),d=r(54717),m=r(18790),y=r(5346),b=r(81763),g=r.n(b),v=r(38560);function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e,t){return!t||"object"!==h(t)&&"function"!=typeof t?P(e):t}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function C(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r(94889);var x=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(s,e);var t,r,n,o,i=(n=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=j(n);if(o){var r=j(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return S(this,e)});function s(){var e;O(this,s);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return C(P(e=i.call.apply(i,[this].concat(r))),"getPosition",(function(){var t=e.props.mousePosition?e.props.mousePosition:[null,null],r=t.x,n=t.y,o=t.z;if(r||n){if(l.default.defs(e.props.mousePosition.crs)!==l.default.defs(e.props.crs)){var i=(0,p.reproject)([r,n],e.props.mousePosition.crs,e.props.crs);r=i.x,n=i.y}}else{var a={x:0,y:0,z:o};r=a.x,n=a.y}return"degrees"===(0,p.getUnits)(e.props.crs)?{lat:n,lng:r,z:o}:{x:r,y:n,z:o}})),C(P(e),"getTemplateComponent",(function(){return"degrees"===(0,p.getUnits)(e.props.crs)?e.props.degreesTemplate:e.props.projectedTemplate})),e}return t=s,(r=[{key:"render",value:function(){var e=this.props.mousePosition?this.getTemplateComponent():null;if(this.props.enabled){var t=this.getPosition();return a().createElement("div",{id:this.props.id,style:this.props.style},a().createElement("span",{className:"mapstore-mouse-coordinates"},this.props.showLabels?a().createElement("label",null,a().createElement(y.Z,{msgId:"mouseCoordinates"})):null,e?a().createElement(e,{position:t}):a().createElement("h5",null,a().createElement(c.Label,{bsSize:"lg",bsStyle:"info"},"...",a().createElement("span",null)))),this.props.copyToClipboardEnabled&&a().createElement(u(),{text:JSON.stringify(t),onCopy:this.props.onCopy},a().createElement(v.Z,{bsSize:this.props.btnSize},a().createElement(c.Glyphicon,{glyph:this.props.glyphicon}))),this.props.showElevation?a().createElement("span",{className:"mapstore-mouse-elevation"},this.props.showLabels?a().createElement("label",null,a().createElement(y.Z,{msgId:"mousePositionElevation"})):null,a().createElement("h5",null,this.props.elevationTemplate(t.z))):null,this.props.showCRS?this.props.crsTemplate(this.props.crs):null,this.props.editCRS?a().createElement(m.default,{projectionDefs:this.props.projectionDefs,filterAllowedCRS:this.props.filterAllowedCRS,additionalCRS:this.props.additionalCRS,label:this.props.showLabels?a().createElement("label",null,a().createElement(y.Z,{msgId:"mousePositionCRS"})):null,crs:this.props.crs,enabled:!0,onCRSChange:this.props.onCRSChange}):null,this.props.showToggle?this.props.toggle:null)}return this.props.showToggle?a().createElement("div",{id:this.props.id,style:this.props.style},this.props.toggle):null}}])&&w(t.prototype,r),s}(a().Component);C(x,"propTypes",{id:o().string,mousePosition:o().object,crs:o().string,enabled:o().bool,showCRS:o().bool,editCRS:o().bool,filterAllowedCRS:o().array,projectionDefs:o().array,additionalCRS:o().object,degreesTemplate:o().oneOfType([o().object,o().func]),projectedTemplate:o().oneOfType([o().object,o().func]),crsTemplate:o().oneOfType([o().object,o().func]),elevationTemplate:o().oneOfType([o().object,o().func]),style:o().object,copyToClipboardEnabled:o().bool,glyphicon:o().string,btnSize:o().oneOf(["large","medium","small","xsmall"]),onCopy:o().func,onCRSChange:o().func,toggle:o().object,showLabels:o().bool,showToggle:o().bool,showElevation:o().bool}),C(x,"defaultProps",{id:"mapstore-mouseposition",mousePosition:null,crs:"EPSG:4326",enabled:!0,showCRS:!1,editCRS:!1,degreesTemplate:f.default,projectedTemplate:d.default,crsTemplate:function(e){return a().createElement("span",{className:"mouseposition-crs"},e)},elevationTemplate:function(e){return g()(e)?a().createElement("span",{className:"mouseposition-elevation"},e," m"):a().createElement(y.Z,{msgId:"mousePositionNoElevation"})},style:{},copyToClipboardEnabled:!1,glyphicon:"paste",btnSize:"xsmall",onCopy:function(){},onCRSChange:function(){},toggle:a().createElement("div",null),showLabels:!1,showToggle:!1,showElevation:!1});const T=x},59560:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>h});var n=r(45697),o=r.n(n),i=r(5053),a=r.n(i),l=r(30294),c=r(47361);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var y,b,g,v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(s,e);var t,r,n,o,i=(n=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=m(n);if(o){var r=m(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return d(this,e)});function s(){return u(this,s),i.apply(this,arguments)}return t=s,(r=[{key:"render",value:function(){return a().createElement("h5",null,a().createElement(l.Label,{bsSize:"lg",bsStyle:"info"},a().createElement("span",null,"Lat: "),a().createElement(c.Z,{key:"latD",numberParams:{style:"decimal",minimumIntegerDigits:2,maximumFractionDigits:6,minimumFractionDigits:6},value:this.props.position.lat}),a().createElement("span",null,"° Lng: "),a().createElement(c.Z,{key:"lngD",numberParams:{style:"decimal",minimumIntegerDigits:3,maximumFractionDigits:6,minimumFractionDigits:6},value:this.props.position.lng}),a().createElement("span",null,"° ")))}}])&&p(t.prototype,r),s}(a().Component);y=v,b="propTypes",g={position:o().shape({lng:o().number,lat:o().number})},b in y?Object.defineProperty(y,b,{value:g,enumerable:!0,configurable:!0,writable:!0}):y[b]=g;const h=v},84848:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>w});var n=r(14293),o=r.n(n),i=r(45697),a=r.n(i),l=r(5053),c=r.n(l),s=r(30294),u=r(90183),p=r(47361);function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?g(e):t}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(l,e);var t,r,n,i,a=(n=l,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=v(n);if(i){var r=v(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return b(this,e)});function l(){var e;d(this,l);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return h(g(e=a.call.apply(a,[this].concat(r))),"getPositionValues",(function(e){var t=e||[null,null],r=t.lng,n=t.lat,o=n%1*60,i=r%1*60;return{lat:n,latM:Math.abs(o),lng:r,lngM:Math.abs(i)}})),e}return t=l,(r=[{key:"render",value:function(){var e=this.getPositionValues(this.props.position),t={style:"decimal",minimumIntegerDigits:2,maximumFractionDigits:0},r={style:"decimal",minimumIntegerDigits:2,maximumFractionDigits:3,minimumFractionDigits:3},n={style:"decimal",minimumIntegerDigits:3,maximumFractionDigits:0};return c().createElement("h5",null,c().createElement(s.Label,{bsSize:"lg",bsStyle:"info"},c().createElement("span",null,"Lat: "),c().createElement(p.Z,{key:"latD",numberParams:t,value:o()(e.lat)?e.lat:(0,u.roundCoord)({roundingBehaviour:"floor",value:e.lat,maximumFractionDigits:t.maximumFractionDigits})}),c().createElement("span",null,"° "),c().createElement(p.Z,{key:"latM",numberParams:r,value:e.latM}),c().createElement("span",null,"' "),c().createElement("span",null,"Lng: "),c().createElement(p.Z,{key:"lngD",numberParams:n,value:o()(e.lng)?e.lng:(0,u.roundCoord)({roundingBehaviour:"floor",value:e.lng,maximumFractionDigits:n.maximumFractionDigits})}),c().createElement("span",null,"° "),c().createElement(p.Z,{key:"lngM",numberParams:r,value:e.lngM}),c().createElement("span",null,"' ")))}}])&&m(t.prototype,r),l}(c().Component);h(O,"propTypes",{position:a().shape({lng:a().number,lat:a().number})});const w=O},47461:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>h});var n=r(45697),o=r.n(n),i=r(5053),a=r.n(i),l=r(30294),c=r(90183),s=r(47361);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?y(e):t}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(u,e);var t,r,n,o,i=(n=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=b(n);if(o){var r=b(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return m(this,e)});function u(){var e;p(this,u);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return g(y(e=i.call.apply(i,[this].concat(r))),"getPositionValues",(function(e){var t=e||[null,null],r=t.lng,n=t.lat,o=n%1*60,i=r%1*60,a=o%1*60,l=i%1*60;return{lat:Math.trunc(n),latM:Math.abs(o),latS:Math.abs(a),lng:Math.trunc(r),lngM:Math.abs(i),lngS:Math.abs(l)}})),e}return t=u,(r=[{key:"render",value:function(){var e=this.props.position||{},t=e.lng,r=e.lat,n=this.getPositionValues(this.props.position),o=t<0?"-":"",i=r<0?"-":"",u={style:"decimal",minimumIntegerDigits:2,maximumFractionDigits:0},p={style:"decimal",minimumIntegerDigits:2,maximumFractionDigits:2,minimumFractionDigits:2};return a().createElement("h5",null,a().createElement(l.Label,{bsSize:"lg",bsStyle:"info"},a().createElement("span",null,"Lat: ",i),a().createElement(s.Z,{key:"latD",numberParams:u,value:Math.abs(n.lat)}),a().createElement("span",null,"° "),a().createElement(s.Z,{key:"latM",numberParams:u,value:(0,c.roundCoord)({roundingBehaviour:"floor",value:n.latM,maximumFractionDigits:u.maximumFractionDigits})}),a().createElement("span",null,"' "),a().createElement(s.Z,{key:"latS",numberParams:p,value:n.latS}),a().createElement("span",null,"''"),a().createElement("span",{className:"mouseposition-separator"}),a().createElement("span",null," Lng: ",o),a().createElement(s.Z,{key:"lngD",numberParams:{style:"decimal",minimumIntegerDigits:3,maximumFractionDigits:0},value:Math.abs(n.lng)}),a().createElement("span",null,"° "),a().createElement(s.Z,{key:"lngM",numberParams:u,value:(0,c.roundCoord)({roundingBehaviour:"floor",value:n.lngM,maximumFractionDigits:u.maximumFractionDigits})}),a().createElement("span",null,"' "),a().createElement(s.Z,{key:"lngS",numberParams:p,value:n.lngS}),a().createElement("span",null,"''")))}}])&&f(t.prototype,r),u}(a().Component);g(v,"propTypes",{position:o().shape({lng:o().number,lat:o().number})});const h=v},95762:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>h});var n=r(45697),o=r.n(n),i=r(5053),a=r.n(i),l=r(30294),c=r(90183),s=r(47361);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?y(e):t}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(u,e);var t,r,n,o,i=(n=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=b(n);if(o){var r=b(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return m(this,e)});function u(){var e;p(this,u);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return g(y(e=i.call.apply(i,[this].concat(r))),"getPositionValues",(function(e){var t=e||[null,null],r=t.lng,n=t.lat,o=n%1*60,i=r%1*60,a=o%1*60,l=i%1*60;return{lat:n,latM:Math.abs(o),latS:Math.abs(a),lng:r,lngM:Math.abs(i),lngS:Math.abs(l)}})),e}return t=u,(r=[{key:"render",value:function(){var e=this.getPositionValues(this.props.position),t={style:"decimal",minimumIntegerDigits:2,maximumFractionDigits:0},r={style:"decimal",minimumIntegerDigits:2,maximumFractionDigits:2,minimumFractionDigits:2},n={style:"decimal",minimumIntegerDigits:3,maximumFractionDigits:0};return a().createElement("h5",null,a().createElement(l.Label,{bsSize:"lg",bsStyle:"info"},a().createElement(s.Z,{key:"latD",numberParams:t,value:(0,c.roundCoord)({roundingBehaviour:"floor",value:Math.abs(e.lat),maximumFractionDigits:t.maximumFractionDigits})}),a().createElement("span",null,"° "),a().createElement(s.Z,{key:"latM",numberParams:t,value:(0,c.roundCoord)({roundingBehaviour:"floor",value:e.latM,maximumFractionDigits:t.maximumFractionDigits})}),a().createElement("span",null,"' "),a().createElement(s.Z,{key:"latS",numberParams:r,value:e.latS}),a().createElement("span",null,"'' ",e.lat>0?"N":"S"," "),a().createElement(s.Z,{key:"lngD",numberParams:n,value:(0,c.roundCoord)({roundingBehaviour:"floor",value:Math.abs(e.lng),maximumFractionDigits:n.maximumFractionDigits})}),a().createElement("span",null,"° "),a().createElement(s.Z,{key:"lngM",numberParams:t,value:(0,c.roundCoord)({roundingBehaviour:"floor",value:e.lngM,maximumFractionDigits:t.maximumFractionDigits})}),a().createElement("span",null,"' "),a().createElement(s.Z,{key:"lngS",numberParams:r,value:e.lngS}),a().createElement("span",null,"'' ",e.lng>0?"E":"W")))}}])&&f(t.prototype,r),u}(a().Component);g(v,"propTypes",{position:o().shape({lng:o().number,lat:o().number})});const h=v},54717:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>h});var n=r(45697),o=r.n(n),i=r(5053),a=r.n(i),l=r(30294),c=r(47361);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var y,b,g,v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(s,e);var t,r,n,o,i=(n=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=m(n);if(o){var r=m(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return d(this,e)});function s(){return u(this,s),i.apply(this,arguments)}return t=s,(r=[{key:"render",value:function(){var e={style:"decimal",minimumIntegerDigits:2,maximumFractionDigits:2,minimumFractionDigits:2};return a().createElement("h5",null,a().createElement(l.Label,{bsSize:"lg",bsStyle:"info"},a().createElement("span",null,"X: "),a().createElement(c.Z,{key:"x",numberParams:e,value:this.props.position.x}),a().createElement("span",{className:"mouseposition-separator"}),a().createElement("span",null," Y: "),a().createElement(c.Z,{key:"y",numberParams:e,value:this.props.position.y})))}}])&&p(t.prototype,r),s}(a().Component);y=v,b="propTypes",g={position:o().shape({x:o().number,y:o().number})},b in y?Object.defineProperty(y,b,{value:g,enumerable:!0,configurable:!0,writable:!0}):y[b]=g;const h=v},71188:(e,t,r)=>{"use strict";r.r(t);var n=r(20898),o=r.n(n),i=r(5053),a=r.n(i),l=r(64386),c=r.n(l),s=r(18790),u=r(80752),p=r.n(u);function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var d={availableCRS:{"EPSG:4326":{label:"EPSG:4326"}},filterAllowedCRS:["EPSG:4326"],additionalCRS:{},projectionDefs:[]};describe("CRSSelector",(function(){beforeEach((function(e){document.body.innerHTML='<div id="container"></div>',setTimeout(e)})),afterEach((function(e){c().unmountComponentAtNode(document.getElementById("container")),document.body.innerHTML="",setTimeout(e)})),it("checks default",(function(){var e=c().render(a().createElement(s.default,f({enabled:!0},d)),document.getElementById("container"));o()(e).toExist();var t=c().findDOMNode(e);o()(t).toExist();var r=t.getElementsByTagName("select").item(0).childNodes;o()(r.length).toBe(1)})),it("checks if a change of the combo fires the proper action",(function(){var e,t=c().render(a().createElement(s.default,f({enabled:!0},d,{onCRSChange:function(t){e=t}})),document.getElementById("container")),r=c().findDOMNode(t).getElementsByTagName("select").item(0);r.value="EPSG:4326",p().Simulate.change(r,{target:{value:"EPSG:4326"}}),o()(e).toBe("EPSG:4326")}))}))},93528:(e,t,r)=>{"use strict";r.r(t);var n=r(20898),o=r.n(n),i=r(45697),a=r.n(i),l=r(5053),c=r.n(l),s=r(64386),u=r.n(s),p=r(42454);function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}describe("MousePosition",(function(){beforeEach((function(e){document.body.innerHTML='<div id="container"></div>',setTimeout(e)})),afterEach((function(e){u().unmountComponentAtNode(document.getElementById("container")),document.body.innerHTML="",setTimeout(e)})),it("checks enabled",(function(){var e=u().render(c().createElement(p.default,{enabled:!0,mousePosition:{x:1,y:1,crs:"EPSG:4326"}}),document.getElementById("container"));o()(e).toExist();var t=u().findDOMNode(e);o()(t).toExist(),o()(t.id).toExist();var r=t.getElementsByTagName("button");o()(r).toExist(),o()(r.length).toBe(0)})),it("checks disabled",(function(){var e=u().render(c().createElement(p.default,{enabled:!1,mousePosition:{x:1,y:1,crs:"EPSG:4326"}}),document.getElementById("container"));o()(e).toExist();var t=u().findDOMNode(e);o()(t).toNotExist()})),it("checks no position",(function(){var e=u().render(c().createElement(p.default,{enabled:!0}),document.getElementById("container"));o()(e).toExist();var t=u().findDOMNode(e);o()(t).toExist(),o()(-1!==t.innerText.indexOf("...")).toBe(!0)})),it("checks no elevation",(function(){var e=u().render(c().createElement(p.default,{enabled:!0}),document.getElementById("container"));o()(e).toExist();var t=u().findDOMNode(e);o()(t).toExist(),o()(t.getElementsByClassName("mapstore-mouse-elevation").length).toBe(0)})),it("checks elevation enabled",(function(){var e=u().render(c().createElement(p.default,{enabled:!0,showElevation:!0,mousePosition:{x:11,y:12,z:13,crs:"EPSG:4326"}}),document.getElementById("container"));o()(e).toExist();var t=u().findDOMNode(e);o()(t).toExist(),o()(t.getElementsByClassName("mapstore-mouse-elevation").length).toBe(1),o()(t.innerHTML).toContain("13")})),it("checks default templates degrees",(function(){var e=u().render(c().createElement(p.default,{enabled:!0,mousePosition:{x:1,y:1,crs:"EPSG:4326"}}),document.getElementById("container"));o()(e).toExist();var t=u().findDOMNode(e);o()(t).toExist(),o()(t.innerHTML).toContain("Lat:"),o()(t.innerHTML).toContain("Lng:")})),it("checks default templates meters",(function(){var e=u().render(c().createElement(p.default,{enabled:!0,crs:"EPSG:3857",mousePosition:{x:1,y:1,crs:"EPSG:4326"}}),document.getElementById("container"));o()(e).toExist();var t=u().findDOMNode(e);o()(t).toExist(),o()(t.innerHTML).toContain("Y:"),o()(t.innerHTML).toContain("X:")})),it("checks custom template",(function(){var e,t,r,n=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=g(n);if(o){var r=g(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return b(this,e)});function a(){return d(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"render",value:function(){return c().createElement("div",null,this.props.position.lng,",",this.props.position.lat)}}])&&m(t.prototype,r),a}(c().Component);e=n,t="propTypes",r={position:a().object},t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r;var i=u().render(c().createElement(p.default,{degreesTemplate:n,enabled:!0,mousePosition:{x:11,y:12,crs:"EPSG:4326"}}),document.getElementById("container"));o()(i).toExist();var l=u().findDOMNode(i);o()(l).toExist(),o()(l.innerHTML).toContain("11"),o()(l.innerHTML).toContain("12")})),it("checks custom elevation template",(function(){var e=u().render(c().createElement(p.default,{elevationTemplate:function(e){return c().createElement("div",null,"Z: ",e)},showElevation:!0,enabled:!0,mousePosition:{x:11,y:12,z:13,crs:"EPSG:4326"}}),document.getElementById("container"));o()(e).toExist();var t=u().findDOMNode(e);o()(t).toExist(),o()(t.innerHTML).toContain("Z:"),o()(t.innerHTML).toContain("13")})),it("checks copy to clipboard enabled",(function(){var e=u().render(c().createElement(p.default,{enabled:!0,mousePosition:{x:1,y:1,crs:"EPSG:4326"},copyToClipboardEnabled:!0}),document.getElementById("container"));o()(e).toExist();var t=u().findDOMNode(e);o()(t).toExist(),o()(t.id).toExist();var r=t.getElementsByTagName("button");o()(r).toExist(),o()(r.length).toBe(1)})),it("checks copy to clipboard action",(function(){var e={onCopy:function(){}},t=o().spyOn(e,"onCopy"),r=u().render(c().createElement(p.default,{enabled:!0,mousePosition:{x:1,y:1,crs:"EPSG:4326"},copyToClipboardEnabled:!0,onCopy:e.onCopy}),document.getElementById("container")),n=u().findDOMNode(r).getElementsByTagName("button")[0];o().spyOn(window,"prompt").andReturn(!0),n.click(),o()(t.calls.length).toBe(1)})),it("checks lat ang lag value",(function(){var e={onCopy:function(){}},t=o().spyOn(e,"onCopy"),r=u().render(c().createElement(p.default,{enabled:!0,mousePosition:{x:Math.floor(1.1),y:Math.floor(1.2),crs:"EPSG:4326"},copyToClipboardEnabled:!0,onCopy:e.onCopy}),document.getElementById("container")),n=u().findDOMNode(r).getElementsByTagName("button")[0];o().spyOn(window,"prompt").andReturn(!0),n.click(),o()(t.calls.length).toBe(1)}))}))},22922:(e,t,r)=>{"use strict";r.r(t);var n=r(20898),o=r.n(n),i=r(5053),a=r.n(i),l=r(64386),c=r.n(l),s=r(84848),u=r(80752),p=r.n(u),f=r(69175);describe("MousePositionLabelDM",(function(){beforeEach((function(e){document.body.innerHTML='<div id="container"></div>',setTimeout(e)})),afterEach((function(e){c().unmountComponentAtNode(document.getElementById("container")),document.body.innerHTML="",setTimeout(e)})),it("checks default",(function(){var e=c().render(a().createElement(s.default,null),document.getElementById("container"));o()(e).toExist();var t=c().findDOMNode(e);o()(t).toExist(),o()(t.textContent).toBe("Lat: ° ' Lng: ° ' ");var r=p().scryRenderedDOMComponentsWithTag(e,"span");o()(r.length).toBe(11),o()(r[1].textContent).toBe("Lat: "),o()(r[2].textContent).toBe(""),o()(r[3].textContent).toBe("° "),o()(r[4].textContent).toBe(""),o()(r[5].textContent).toBe("' "),o()(r[6].textContent).toBe("Lng: "),o()(r[7].textContent).toBe(""),o()(r[8].textContent).toBe("° "),o()(r[9].textContent).toBe(""),o()(r[10].textContent).toBe("' ")})),it("a position with defaults",(function(){var e=c().render(a().createElement(f.IntlProvider,null,a().createElement(s.default,{position:{lng:28.3,lat:13.5333333}})),document.getElementById("container"));o()(e).toExist();var t=c().findDOMNode(e);o()(t).toExist(),o()(t.textContent).toBe("Lat: 13° 32.000' Lng: 028° 18.000' ")})),it("position with no rounding but flooring of latD and lngD",(function(){var e=c().render(a().createElement(f.IntlProvider,null,a().createElement(s.default,{position:{lng:10.475013256072998,lat:43.70726776739903}})),document.getElementById("container"));o()(e).toExist();var t=c().findDOMNode(e);o()(t).toExist(),o()(t.textContent).toBe("Lat: 43° 42.436' Lng: 010° 28.501' ")}))}))},53389:(e,t,r)=>{"use strict";r.r(t);var n=r(20898),o=r.n(n),i=r(5053),a=r.n(i),l=r(64386),c=r.n(l),s=r(47461),u=r(80752),p=r.n(u),f=r(69175);describe("MousePositionLabelDMS",(function(){beforeEach((function(e){document.body.innerHTML='<div id="container"></div>',setTimeout(e)})),afterEach((function(e){c().unmountComponentAtNode(document.getElementById("container")),document.body.innerHTML="",setTimeout(e)})),it("checks default",(function(){var e=c().render(a().createElement(s.default,null),document.getElementById("container"));o()(e).toExist();var t=c().findDOMNode(e);o()(t).toExist(),o()(t.textContent).toBe("Lat: ° ' '' Lng: ° ' ''");var r=p().scryRenderedDOMComponentsWithTag(e,"span");o()(r.length).toBe(16),o()(r[1].textContent).toBe("Lat: "),o()(r[2].textContent).toBe(""),o()(r[3].textContent).toBe("° "),o()(r[4].textContent).toBe(""),o()(r[5].textContent).toBe("' "),o()(r[6].textContent).toBe(""),o()(r[7].textContent).toBe("''"),o()(r[8].className).toBe("mouseposition-separator"),o()(r[9].textContent).toBe(" Lng: "),o()(r[10].textContent).toBe(""),o()(r[11].textContent).toBe("° "),o()(r[12].textContent).toBe(""),o()(r[13].textContent).toBe("' "),o()(r[14].textContent).toBe(""),o()(r[15].textContent).toBe("''")})),it("a position with defaults",(function(){var e=c().render(a().createElement(f.IntlProvider,null,a().createElement(s.default,{position:{lng:28.3,lat:13.5333333}})),document.getElementById("container"));o()(e).toExist();var t=c().findDOMNode(e);o()(t).toExist(),o()(t.textContent).toBe("Lat: 13° 31' 60.00'' Lng: 028° 18' 00.00''")})),it("position with no rounding but trunc of latD and lngD",(function(){var e=c().render(a().createElement(f.IntlProvider,null,a().createElement(s.default,{position:{lng:10.475013256072998,lat:43.70726776739903}})),document.getElementById("container"));o()(e).toExist();var t=c().findDOMNode(e);o()(t).toExist(),o()(t.textContent).toBe("Lat: 43° 42' 26.16'' Lng: 010° 28' 30.05''")})),it("position with negative lat and lng correctly truncated ladD e lngD",(function(){var e=c().render(a().createElement(f.IntlProvider,null,a().createElement(s.default,{position:{lng:-.006,lat:-.006}})),document.getElementById("container"));o()(e).toExist();var t=c().findDOMNode(e);o()(t).toExist(),o()(t.textContent).toBe("Lat: -00° 00' 21.60'' Lng: -000° 00' 21.60''")})),it("test sign changes when crossing greenwich meridian and equator parallel and latD lngD are 0",(function(){var e=c().render(a().createElement(f.IntlProvider,null,a().createElement(s.default,{position:{lng:-.006,lat:-.006}})),document.getElementById("container"));o()(e).toExist();var t=c().findDOMNode(e);o()(t).toExist(),o()(t.textContent).toBe("Lat: -00° 00' 21.60'' Lng: -000° 00' 21.60''");var r=c().render(a().createElement(f.IntlProvider,null,a().createElement(s.default,{position:{lng:.006,lat:.006}})),document.getElementById("container"));o()(r).toExist();var n=c().findDOMNode(r);o()(n).toExist(),o()(n.textContent).toBe("Lat: 00° 00' 21.60'' Lng: 000° 00' 21.60''")}))}))},53884:(e,t,r)=>{"use strict";r.r(t);var n=r(20898),o=r.n(n),i=r(5053),a=r.n(i),l=r(64386),c=r.n(l),s=r(95762),u=r(80752),p=r.n(u),f=r(69175);describe("MousePositionLabelDMSNW",(function(){beforeEach((function(e){document.body.innerHTML='<div id="container"></div>',setTimeout(e)})),afterEach((function(e){c().unmountComponentAtNode(document.getElementById("container")),document.body.innerHTML="",setTimeout(e)})),it("checks default",(function(){var e=c().render(a().createElement(s.default,null),document.getElementById("container"));o()(e).toExist();var t=c().findDOMNode(e);o()(t).toExist(),o()(t.textContent).toBe("° ' '' S ° ' '' W");var r=p().scryRenderedDOMComponentsWithTag(e,"span");o()(r.length).toBe(13),o()(r[1].innerText).toBe(""),o()(r[2].innerText).toBe("° "),o()(r[3].innerText).toBe(""),o()(r[4].innerText).toBe("' "),o()(r[5].innerText).toBe(""),o()(r[6].innerText).toBe("'' S "),o()(r[7].innerText).toBe(""),o()(r[8].innerText).toBe("° "),o()(r[9].innerText).toBe(""),o()(r[10].innerText).toBe("' "),o()(r[11].innerText).toBe(""),o()(r[12].innerText).toBe("'' W")})),it("a position with defaults",(function(){var e=c().render(a().createElement(f.IntlProvider,null,a().createElement(s.default,{position:{lng:28.3,lat:13.5333333}})),document.getElementById("container"));o()(e).toExist();var t=c().findDOMNode(e);o()(t).toExist(),o()(t.textContent).toBe("13° 31' 60.00'' N 028° 18' 00.00'' E")})),it("position with no rounding but flooring of latD and lngD",(function(){var e=c().render(a().createElement(f.IntlProvider,null,a().createElement(s.default,{position:{lng:10.475013256072998,lat:43.70726776739903}})),document.getElementById("container"));o()(e).toExist();var t=c().findDOMNode(e);o()(t).toExist(),o()(t.textContent).toBe("43° 42' 26.16'' N 010° 28' 30.05'' E")}))}))},32425:(e,t,r)=>{"use strict";r.d(t,{Z:()=>f});var n=r(45697),o=r.n(n),i=r(5053),a=r.n(i);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var u=function(e){return e>100?"full":e>40?"medium":"small"},p=function(e){var t=e.size,r=e.style,n=void 0===r?{}:r,o=e.className,i=e.hidden;return a().createElement("div",{className:o,style:c({width:t,height:t,overflow:"hidden"},n)},!i&&a().createElement("div",{className:"mapstore-".concat(u(t),"-size-loader")}))};p.propTypes={size:o().number,className:o().string,style:o().object};const f=p},82110:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var n=r(5053),o=r.n(n),i=r(622),a=r(32425);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const u=function(e){var t=e.width,r=e.height,n=e.className,l=void 0===n?"loader-container":n,s=e.contentStyle,u=void 0===s?{}:s;return o().createElement("div",{className:l},o().createElement(i.Z,null,(function(e){var n=e.width,i=void 0===n?200:n,l=e.height,s=void 0===l?200:l,p=t||(s>0?Math.min(i,s):i),f=r||(s>0?Math.min(i,s):i),d=Math.min(p,f);return o().createElement(a.Z,{size:d,style:c({padding:d/10,margin:"auto",display:"flex"},u)})})))}},76424:(e,t,r)=>{"use strict";r.d(t,{Z:()=>f});var n=r(5053),o=r.n(n),i=r(13218),a=r.n(i),l=r(32425);function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}const f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.body,r=e.caption,n=e.infoExtra,i=e.className,c=void 0===i?"":i,u=e.description,f=e.fullText,d=e.onClick,m=void 0===d?function(){}:d,y=e.onMouseEnter,b=void 0===y?function(){}:y,g=e.onMouseLeave,v=void 0===g?function(){}:g,h=e.preview,O=e.selected,w=e.size,E=e.style,S=void 0===E?{}:E,P=e.stylePreview,j=void 0===P?{}:P,C=e.styleTools,x=void 0===C?{}:C,T=e.title,k=e.loading,I=e.dragSymbol,A=void 0===I?"+":I,F=e.tools,D=p(e,["body","caption","infoExtra","className","description","fullText","onClick","onMouseEnter","onMouseLeave","preview","selected","size","style","stylePreview","styleTools","title","loading","dragSymbol","tools"]);return o().createElement("div",{className:"mapstore-side-card".concat(O?" selected":"").concat(w?" ms-"+w:"").concat(c?" ".concat(c):"").concat(f?" full-text":""),onClick:function(e){return m(s({title:T,preview:h,description:u,caption:r,tools:F},D),e)},onMouseEnter:b,onMouseLeave:v,style:S},o().createElement("div",{className:"ms-head"},D.isDraggable&&D.connectDragSource&&D.connectDragSource(o().createElement("div",{className:"mapstore-side-card-tool text-center"},o().createElement("div",{style:{width:10,overflow:"hidden"}},A))),h&&o().createElement("div",{className:"mapstore-side-preview",style:j},h),o().createElement("div",{className:"mapstore-side-card-container"},o().createElement("div",{className:"mapstore-side-card-inner"},o().createElement("div",{className:"mapstore-side-card-left-container"},o().createElement("div",{className:"mapstore-side-card-info"},T&&o().createElement("div",{className:"mapstore-side-card-title"},o().createElement("span",null,T)),u&&o().createElement("div",{className:"mapstore-side-card-desc"},a()(u)?u:o().createElement("span",null,u)),r&&o().createElement("div",{className:"mapstore-side-card-caption"},o().createElement("span",null,r))),n),o().createElement("div",{className:"mapstore-side-card-right-container"},o().createElement("div",{className:"mapstore-side-card-tool text-center",style:x},F),"sm"!==w&&o().createElement("div",{className:"mapstore-side-card-loading"},o().createElement(l.Z,{className:"mapstore-side-card-loader",size:12,hidden:!k})))))),t&&o().createElement("div",{className:"ms-body"},t))}},38064:(e,t,r)=>{"use strict";r.d(t,{Z:()=>v});var n=r(45697),o=r.n(n),i=r(5053),a=r.n(i),l=r(30294),c=r(76424);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(s,e);var t,r,n,o,i=(n=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=y(n);if(o){var r=y(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return m(this,e)});function s(){return p(this,s),i.apply(this,arguments)}return t=s,(r=[{key:"render",value:function(){var e=this.props,t=e.cardComponent,r=e.items,n=e.colProps,o=e.onItemClick,i=e.size,s=t||c.Z;return a().createElement("div",{className:"msSideGrid"+(this.props.className?" "+this.props.className:"")},a().createElement(l.Row,{className:"items-list"},r.map((function(e,t){return a().createElement(l.Col,u({key:e.id||t},n),a().createElement(s,u({onClick:function(){return o(e)},size:i},e)))}))))}}])&&f(t.prototype,r),s}(a().Component);b(g,"propTypes",{size:o().string,onItemClick:o().func,colProps:o().object,items:o().array,cardComponent:o().oneOfType([o().string,o().func]),className:o().string}),b(g,"defaultProps",{size:"",onItemClick:function(){},colProps:{xs:12},className:"",items:[]});const v=g},49902:(e,t,r)=>{"use strict";r.d(t,{Z:()=>E});var n=r(45697),o=r.n(n),i=r(5053),a=r.n(i),l=r(29202),c=r(30294),s=r(86638),u=r(50966),p=r(48384);function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?v(e):t}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function O(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(p,e);var t,r,n,o,i=(n=p,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=h(n);if(o){var r=h(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return g(this,e)});function p(){var e;m(this,p);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return O(v(e=i.call.apply(i,[this].concat(r))),"renderWithTooltip",(function(t){if(e.props.tooltip.customizedTooltip){var r=e.props.tooltip.customizedTooltip;return a().createElement(r,null,t)}var n=a().createElement(c.Tooltip,{id:e.props.tooltip.id},e.props.tooltip.message);return a().createElement(u.Z,{key:e.props.tooltip.overlayTriggerKey,placement:e.props.tooltip.placement,overlay:n},t)})),O(v(e),"renderPagination",(function(){var t=e.props.pagination.firstPage,r=e.props.pagination.lastPage;return a().createElement("div",{className:"autocomplete-toolbar"},!t&&a().createElement(c.Glyphicon,{className:e.props.prevPageIcon,glyph:e.props.prevPageIcon,onClick:function(t){e.props.stopPropagation&&t.stopPropagation(),e.props.pagination.loadPrevPage()}}),!r&&a().createElement(c.Glyphicon,{className:e.props.nextPageIcon,glyph:e.props.nextPageIcon,onClick:function(t){e.props.stopPropagation&&t.stopPropagation(),e.props.pagination.loadNextPage()}}))})),O(v(e),"renderField",(function(){var t,r={emptyList:(0,s.S$)(e.context.messages,"queryform.attributefilter.autocomplete.emptyList"),open:(0,s.S$)(e.context.messages,"queryform.attributefilter.autocomplete.open"),emptyFilter:(0,s.S$)(e.context.messages,"queryform.attributefilter.autocomplete.emptyFilter")},n=[];e.props.data&&e.props.data.length>0&&(n=e.props.data.map((function(e){return e}))),e.props.pagination&&e.props.pagination.paginated&&n.length>0&&n.push((O(t={},e.props.textField,""),O(t,e.props.valueField,""),O(t,"disabled",!0),O(t,"pagination",e.renderPagination()),t));var o=e.props.loading?[]:n,i=e.props.itemComponent,c=a().createElement(l.Combobox,{placeholder:e.props.placeholder,dropUp:e.props.dropUp,busy:e.props.busy,data:o,disabled:e.props.disabled,itemComponent:function(t){return a().createElement(i,d({textField:e.props.textField,valueField:e.props.valueField},t))},messages:e.props.messages||r,open:e.props.open,filter:e.props.filter,onChange:function(t){return e.props.onChange(t)},onFocus:function(){return e.props.onFocus(e.props.data)},onSelect:function(t){return e.props.onSelect(t)},onToggle:function(t){return e.props.onToggle(t)},textField:e.props.textField,valueField:e.props.valueField,value:e.props.selectedValue});return e.props.tooltip&&e.props.tooltip.enabled?e.renderWithTooltip(c):c})),e}return t=p,(r=[{key:"render",value:function(){var e=this.props,t=e.selectedValue,r=e.disabled,n=e.onReset,o=e.label,i=e.clearable,l=o?a().createElement("label",null,o):a().createElement("span",null);return a().createElement("div",{className:"autocompleteField"},l,i?a().createElement("div",{className:"rw-combo-clearable ".concat(r?"disabled":"")},this.renderField(),a().createElement("span",{className:"rw-combo-clear ".concat(t?"":"hidden"),onClick:n},"x")):this.renderField())}}])&&y(t.prototype,r),p}(a().Component);O(w,"propTypes",{busy:o().bool,data:o().array,disabled:o().bool,dropUp:o().bool,itemComponent:o().oneOfType([o().object,o().func]),label:o().string,loading:o().bool,filter:o().oneOfType([o().string,o().bool]),messages:o().object,onChange:o().func,onFocus:o().func,onSelect:o().func,onToggle:o().func,open:o().bool,pagination:o().object,nextPageIcon:o().string,prevPageIcon:o().string,selectedValue:o().string,textField:o().string,tooltip:o().object,valueField:o().string,placeholder:o().string,stopPropagation:o().bool,clearable:o().bool,onReset:o().func}),O(w,"contextTypes",{messages:o().object}),O(w,"defaultProps",{stopPropagation:!1,dropUp:!1,itemComponent:p.Z,loading:!1,label:null,filter:"",pagination:{paginated:!0,firstPage:!1,lastPage:!1,loadPrevPage:function(){},loadNextPage:function(){}},nextPageIcon:"chevron-right",prevPageIcon:"chevron-left",onFocus:function(){},onToggle:function(){},onChange:function(){},onSelect:function(){},onReset:function(){},textField:"label",tooltip:{customizedTooltip:void 0,enabled:!1,id:"",message:void 0,overlayTriggerKey:"",placement:"top"},valueField:"value",clearable:!1});const E=w},12610:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(5053),o=r.n(n),i=r(49848),a=r(57557),l=r.n(a),c=r(15135);const s=(0,i.branch)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.disabled,r=e.noTooltipWhenDisabled,n=void 0!==r&&r;return!(n&&t)}),c.Z,(function(e){return function(t){return o().createElement(e,l()(t,["tooltipId","tooltip","noTooltipWhenDisabled"]),t.children)}}))},73014:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(5053),o=r.n(n),i=r(49848),a=r(82110);function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var c=function(e){var t=e.loading,r=e.isLoading;return t||r&&("function"==typeof r?r():!0===r)};const s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.Z;return(0,i.branch)(e,(function(){return function(e){var n=e.loaderProps;return o().createElement(r,l({},t,n))}}))}},17252:(e,t,r)=>{"use strict";r.d(t,{Z:()=>h});var n=r(5053),o=r.n(n),i=r(49848),a=r(45697),l=r.n(a),c=r(57557),s=r.n(c),u=r(30294),p=r(50966);function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const h=(0,i.branch)((function(e){return e.popover}),(function(e){var t,r;return r=t=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(f,t);var r,n,a,l,c=(a=f,l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=g(a);if(l){var r=g(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return b(this,e)});function f(){return d(this,f),c.apply(this,arguments)}return r=f,(n=[{key:"renderPopover",value:function(){return o().createElement(u.Popover,s()(this.props.popover,["trigger","placement","text"]),this.props.popover.text)}},{key:"renderContent",value:function(){var t=(0,i.toClass)(e);return o().createElement(t,s()(this.props,["popover"]))}},{key:"render",value:function(){var e=!0===this.props.popover.trigger?["hover","focus"]:this.props.popover.trigger;return o().createElement("span",null,o().createElement(p.Z,{trigger:e,placement:this.props.popover.placement,overlay:this.renderPopover()},this.renderContent()))}}])&&m(r.prototype,n),f}(o().Component),v(t,"propTypes",{popover:l().object}),v(t,"defaultProps",{popover:{trigger:!0}}),r}))},73849:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var n=r(49848),o=r(58857),i=r(89255);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s=(0,n.mapPropsStreamWithConfig)(o.Z);const u=(0,n.compose)((0,n.defaultProps)({dataStreamFactory:function(){return i.Observable.of({})}}),s((function(e){return e.take(1).switchMap((function(t){return t.dataStreamFactory(e.startWith(t),t)})).combineLatest(e,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return l(l({},t),e)}))})))},43146:(e,t,r)=>{"use strict";r.d(t,{Z:()=>f});var n=r(49848),o=r(47037),i=r.n(o),a=r(47960),l=r.n(a),c=r(30381),s=r.n(c),u=r(55237);function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dateTypeProp,r=void 0===t?"type":t,o=e.dateProp,a=void 0===o?"date":o,c=e.setDateProp,f=void 0===c?"onSetDate":c;return(0,n.compose)((0,n.withPropsOnChange)([a],(function(e){var t,n=e[a],o=e[r],c=e.useUTCOffset,f=void 0===c||c,d=n,m="1970-01-01",y="00:00:00";!l()(n)&&i()(n)&&("time"===o&&(d=new Date("".concat(m,"T").concat(n))),"date"===o&&(-1!==n.indexOf("Z")&&(d=n.substr(0,n.length-1)),d=new Date("".concat(d,"T").concat(y,"Z"))),"date-time"===o&&(d=new Date(n)));var b=d;if(d){switch(o){case"time":y=(0,u.kN)(d);break;case"date":m=(0,u.oD)(d);break;default:y=(0,u.kN)(d),m=(0,u.oD)(d)}(b=new Date("".concat(m,"T").concat(y,"Z"))).setUTCMilliseconds(d.getUTCMilliseconds());var g=f?(0,u.$4)(b):0;b=new Date(b.getTime()+g)}return p(t={},a,b),p(t,"defaultCurrentDate","date-time"===o?s()().startOf("day").toDate():void 0),t})),(0,n.withHandlers)(p({},f,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e[f],n=e[r],o=e.useUTCOffset,i=void 0===o||o;return function(e,r){if(e){var o=new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds())),a=i?(0,u.$4)(e):0,l=new Date(o.getTime()-a);switch(n){case"time":l="".concat((0,u.kN)(l),"Z");break;case"date":l="".concat((0,u.oD)(l),"Z")}t(l,r)}else t(null)}}))))}},80717:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(5053),o=r.n(n),i=r(36786),a=r.n(i),l=r(30294),c=r(90085);function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function u(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}const p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.buttons,r=void 0===t?[]:t,n=e.btnGroupProps,i=void 0===n?{}:n,p=e.btnDefaultProps,f=void 0===p?{}:p,d=e.transitionProps,m=void 0===d?{transitionName:"toolbar-btn-transition",transitionEnterTimeout:300,transitionLeaveTimeout:300}:d,y=function(){return r.map((function(e,t){var r=e.visible,n=void 0===r||r,i=e.Element,a=e.renderButton,l=u(e,["visible","Element","renderButton"]);return n?a||i&&o().createElement(i,s({key:l.key||t},l))||o().createElement(c.Z,s({key:l.key||t},f,l)):null}))};return o().createElement(l.ButtonGroup,i,m?o().createElement(a(),m,y()):y())}},90085:(e,t,r)=>{"use strict";r.d(t,{Z:()=>b});var n=r(5053),o=r.n(n),i=r(49848),a=r(5346),l=r(57557),c=r.n(l),s=r(30294),u=r(32425),p=r(12610),f=r(17252),d=r(38560);function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function y(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}const b=(0,i.compose)(p.Z,f.Z)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.glyph,r=e.loading,n=e.text,i=void 0===n?"":n,l=e.textId,p=e.glyphClassName,f=void 0===p?"":p,b=e.loaderProps,g=void 0===b?{}:b,v=e.children,h=y(e,["glyph","loading","text","textId","glyphClassName","loaderProps","children"]);return o().createElement(d.Z,c()(h,["pullRight","confirmNo","confirmYes"]),t&&!r?o().createElement(s.Glyphicon,{glyph:t,className:f}):null,l?o().createElement(a.Z,{msgId:l}):i,r?o().createElement(u.Z,m({className:"ms-loader".concat(h.bsStyle&&" ms-loader-"+h.bsStyle||"").concat(h.bsSize&&" ms-loader-"+h.bsSize||"")},g)):null,v)}))},95246:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(91175),o=r.n(n);function i(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var u={short:"number",float:"number",double:"number",long:"number",decimal:"number",int:"number"};function p(e){var t=e.Pos;e.registerHelper("hint","geocss",(function(r){var n=r.getCursor(),a=r.getTokenAt(n),l=r.getLineTokens(n.line),s=l&&o()(l.filter((function(e){var t=e.type,r=e.start;return"property"===t&&r<a.start})).map((function(e){return e.string}))),p=e.innerMode(r.getMode(),a.state);if("geocss"!==p.mode.name)return null;var f=a.start,d=n.ch,m=a.string.slice(0,d-f);/[^\w$_-]/.test(m)&&(m="",f=d=n.ch);var y=e.resolveMode("text/geocss")||{},b=y.propertyKeywords,g=y.pseudoProperties,v=y.envKeywords,h=(e.getMode({},"text/geocss")||{}).hintProperties,O={},w=!1,E=p.state.state;"pseudo"===E||"variable-3"===a.type?O=c({},g):"prop"===E?(w=!0,O=b&&b[s]&&b[s].values&&c({},b[s].values)||{}):"variable-2"===a.type?O=c({},v):"filter"===a.type?(w=!0,O=c({},h)):"block"!==E&&"maybeprop"!==E||(O=c({},b));var S=Object.keys(O).reduce((function(e,t){var r=!m||0===t.lastIndexOf(m,0);return[].concat(i(e),i(r&&[t]||[]))}),[]);return(S=0===S.length&&w?Object.keys(O).reduce((function(e,t){return[].concat(i(e),[t])}),[]):i(S)).length>0?{list:S.map((function(e){return{text:e,displayText:e,render:function(e,t,r){var n,o,i=document.createElement("span"),a=(o=(n=O[r.displayText]||{}).localPart,("gml"===n.prefix?"geometry":u[o])||o||"");i.innerHTML=a&&'{<span class="cm-desc">'.concat(a,"</span>} ")||"";var l=document.createElement("span");l.innerText=r.displayText,e.appendChild(i),e.appendChild(l)}}})),from:t(n.line,f),to:t(n.line,d)}:null}))}},40021:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(10240),o=r.n(n),i=r(92742),a=r.n(i);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}const p=function(e){e.defineMode("geocss",(function(t){var r,n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=t.indentUnit,c=i.propertyKeywords&&i||e.resolveMode("text/geocss"),s=c.propertyKeywords,p=void 0===s?{}:s,f=c.colorKeywords,d=void 0===f?{}:f,m=c.valueKeywords,y=void 0===m?{}:m,b=c.logicKeywords,g=void 0===b?{}:b,v=c.allowNested,h={},O=function(e,t){return r=t,e},w=function(e){return function(t,r){for(var n=!1,o=t.next();o;){if(o===e&&!n){")"===e&&t.backUp(1);break}n=!n&&"\\"===o,o=t.next()}return(o===e||!n&&")"!==e)&&(r.tokenize=null),O("string","string")}},E=function(e,t){for(var r=!1,n=e.next();n;){if(r&&"/"===n){t.tokenize=null;break}r="*"===n,n=e.next()}return["comment","comment"]},S=function(e,t){var r=e.next();if("@"===r)return e.eat("{")?[null,"interpolation"]:e.match(/^(sd|scale)\b/)?["filter",null]:(e.eatWhile(/[\w\\\-]/),e.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"]);if("/"===r)return e.eat("*")?(t.tokenize=E,E(e,t)):["operator","operator"];if('"'===r||"'"===r)return t.tokenize=w(r),t.tokenize(e,t);if("#"===r)return e.eatWhile(/[\w\\\-]/),O("atom","hash");if(/\d/.test(r)||"."===r&&e.eat(/\d/))return e.eatWhile(/[\w.%]/),O("number","unit");if("-"===r){if(/[\d.]/.test(e.peek()))return e.eatWhile(/[\w.%]/),O("number","unit");if(e.match(/^-[\w\\\-]+/))return e.eatWhile(/[\w\\\-]/),e.match(/^\s*:/,!1)?O("variable-2","variable-definition"):O("variable-2","variable");if(e.match(/^\w+-/))return O("meta","meta")}else{if(/[,+>*\/]/.test(r))return O(null,"select-op");if("."===r&&e.match(/^-?[_a-z][_a-z0-9-]*/i))return O("qualifier","qualifier");if(/[:;{}\[\]\(\)]/.test(r))return O(null,r);if(/[\w\\\-]/.test(r))return e.eatWhile(/[\w\\\-]/),O("property","word")}return O(null,null)};function P(e,t,r){this.type=e,this.indent=t,this.prev=r}var j=function(e,t,r,n){return e.context=new P(r,t.indentation()+(!1===n?0:l),e.context),r},C=function(e){return e.context.prev&&(e.context=e.context.prev),e.context.type},x=function(e,t,r){return h[r.context.type](e,t,r)},T=function(e,t,r,n){for(var o=n||1;o>0;o--)r.context=r.context.prev;return x(e,t,r)},k=function(e){var t=e.current().toLowerCase();n=y.hasOwnProperty(t)?"atom":d.hasOwnProperty(t)?"keyword":"variable"};return h.top=function(e,t,r){if("{"===e)return j(r,t,"block");if("}"===e&&r.context.prev)return C(r);if("hash"===e)n="builtin";else if("word"===e)n="tag";else{if("variable-definition"===e)return"maybeprop";if("interpolation"===e)return j(r,t,"interpolation");if(":"===e)return"pseudo";if(v&&"("===e)return j(r,t,"parens")}return r.context.type},h.block=function(e,t,r){if("word"===e){var i=t.current().toLowerCase();return p.hasOwnProperty(i)?(n="property","maybeprop"):g.hasOwnProperty(a()(i))?(n="logic","maybeprop"):o()(a()(t.string),"[")?(n="filter","maybeprop"):(n+=" error","maybeprop")}return"meta"===e?"block":v||"hash"!==e&&"qualifier"!==e?h.top(e,t,r):(n="error","block")},h.maybeprop=function(e,t,r){return":"===e?j(r,t,"prop"):x(e,t,r)},h.prop=function(e,t,r){if(";"===e)return C(r);if("{"===e&&v)return j(r,t,"propBlock");if("}"===e||"{"===e)return T(e,t,r);if("("===e)return j(r,t,"parens");if("hash"!==e||/^#([0-9a-fA-f]{3,4}|[0-9a-fA-f]{6}|[0-9a-fA-f]{8})$/.test(t.current())){if("word"===e)k(t);else if("interpolation"===e)return j(r,t,"interpolation")}else n+=" error";return"prop"},h.propBlock=function(e,t,r){return"}"===e?C(r):"word"===e?(n="property","maybeprop"):r.context.type},h.parens=function(e,t,r){return"{"===e||"}"===e?T(e,t,r):")"===e?C(r):"("===e?j(r,t,"parens"):"interpolation"===e?j(r,t,"interpolation"):("word"===e&&k(t),"parens")},h.pseudo=function(e,t,o){return"word"===e?(n="variable-3",o.context.type):x(r,t,o)},h.at=function(e,t,r){return";"===e?C(r):"{"===e||"}"===e?T(e,t,r):("word"===e?n="tag":"hash"===e&&(n="builtin"),"at")},h.interpolation=function(e,t,r){return"}"===e?C(r):"{"===e||";"===e?T(e,t,r):("word"===e?n="variable":"variable"!==e&&"("!==e&&")"!==e&&(n="error"),"interpolation")},{startState:function(e){return{tokenize:null,state:"top",stateArg:null,context:new P("block",e||0,null)}},token:function(e,t){if(!t.tokenize&&e.eatSpace())return null;var o=(t.tokenize||S)(e,t);return o&&"object"===u(o)&&(r=o[1],o=o[0]),n=o,t.state=h[t.state](r,e,t),n},indent:function(e,t){var r=e.context,n=t&&t.charAt(0),o=r.indent;return"prop"!==r.type||"}"!==n&&")"!==n||(r=r.prev),r.prev&&("}"!==n||"block"!==r.type&&"top"!==r.type&&"interpolation"!==r.type?(")"===n&&"parens"===r.type||"{"===n&&("at"===r.type||"atBlock"===r.type))&&(o=Math.max(0,r.indent-l),r=r.prev):o=(r=r.prev).indent),o},electricChars:"}",blockCommentStart:"/*",blockCommentEnd:"*/",fold:"brace"}}));var t={colorKeywords:["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],valueKeywords:["round"],pseudoProperties:["mark","shield","stroke","fill","symbol","nth-mark","nth-shield","nth-stroke","nth-fill","nth-symbol"],logicKeywords:["and","or"]};e.defineMIME("text/geocss",c(c({},Object.keys(t).reduce((function(e,r){return c(c({},e),{},s({},r,t[r].reduce((function(e,t){return c(c({},e),{},s({},t,!0))}),{})))}),{})),{},{propertyKeywords:{mark:{values:{"symbol(circle)":!0}},"mark-composite":!0,"mark-mime":!0,"mark-geometry":!0,"mark-size":!0,"mark-rotation":!0,"mark-label-obstacle":!0,"mark-anchor":!0,"mark-offset":!0,"z-index":!0,stroke:!0,"stroke-composite":!0,"stroke-geometry":!0,"stroke-offset":!0,"stroke-mime":!0,"stroke-opacity":!0,"stroke-width":!0,"stroke-size":!0,"stroke-rotation":!0,"stroke-linecap":!0,"stroke-linejoin":!0,"stroke-dasharray":!0,"stroke-dashoffset":!0,"stroke-repeat":!0,"stroke-label-obstacle":!0,fill:!0,"fill-composite":!0,"fill-geometry":!0,"fill-mime":!0,"fill-opacity":!0,"fill-size":!0,"fill-rotation":!0,"fill-label-obstacle":!0,"graphic-margin":!0,random:!0,"random-seed":!0,"random-rotation":!0,"random-symbol-count":!0,"random-tile-size":!0,"fill-random":!0,"fill-random-seed":!0,"fill-random-rotation":!0,"fill-random-symbol-count":!0,"fill-random-tile-size":!0,label:!0,"label-geometry":!0,"label-anchor":!0,"label-offset":!0,"label-rotation":!0,"label-z-index":!0,shield:!0,"shield-mime":!0,"font-family":!0,"font-fill":!0,"font-style":!0,"font-weight":!0,"font-size":!0,"halo-radius":!0,"halo-color":!0,"halo-opacity":!0,"label-padding":!0,"label-group":!0,"label-max-displacement":!0,"label-min-group-distance":!0,"label-repeat":!0,"label-all-group":!0,"label-remove-overlaps":!0,"label-allow-overruns":!0,"label-follow-line":!0,"label-max-angle-delta":!0,"label-auto-wrap":!0,"label-force-ltr":!0,"label-conflict-resolution":!0,"label-fit-goodness":!0,"label-priority":!0,"shield-resize":!0,"shield-margin":!0,"label-underline-text":!0,"label-strikethrough-text":!0,"label-char-spacing":!0,"label-word-spacing":!0,"raster-channels":!0,"raster-composite":!0,"raster-geometry":!0,"raster-opacity":!0,"raster-contrast-enhancement":!0,"raster-contrast-enhancement-algorithm":!0,"raster-contrast-enhancement-min":!0,"raster-contrast-enhancement-max":!0,"raster-gamma":!0,"raster-z-index":!0,"raster-color-map":!0,"raster-color-map-type":!0,composite:!0,"composite-base":!0,geometry:!0,"sort-by":!0,"sort-by-group":!0,transform:!0,size:!0,rotation:!0},envKeywords:{sd:{localPart:"env"},scale:{localPart:"env"}},allowNested:!0,name:"geocss"}))}},12425:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n=(0,r(49848).withState)("confirmDelete","toggleDeleteConfirm",!1)},30881:(e,t,r)=>{"use strict";r.d(t,{Z:()=>E});var n=r(13311),o=r.n(n),i=r(41609),a=r.n(i),l=r(49848),c=r(90183),s=r(47805),u=r(89291),p=r(2245),f=r.n(p),d=r(89737),m=r(70956);function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){g(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function g(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function v(e){return function(e){if(Array.isArray(e))return h(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return h(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?h(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var O=function(e,t){var r=(0,m.Z5)(e,t),n=o()(Object.keys(r||{}),(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"cql_filter"===e.toLowerCase()}));return r&&n&&r[n]},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.layerFilter;return t};const E=(0,l.compose)((0,l.withPropsOnChange)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mapSync,r=e.geomProp,n=e.dependencies,o=void 0===n?{}:n,i=e.layer,a=e.quickFilters,l=e.options,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2?arguments[2]:void 0;return t!==c.mapSync||o.viewport!==(c.dependencies&&c.dependencies.viewport)||o.quickFilters!==(c.dependencies&&c.dependencies.quickFilters)||o.options!==(c.dependencies&&c.dependencies.options)||r!==c.geomProp||s!==c.filter||l!==c.options||a!==c.quickFilters||O(i,o)!==O(c.layer,c.dependencies)||w(i)!==w(c.layer)}),(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mapSync,r=e.geomProp,n=void 0===r?"the_geom":r,o=e.dependencies,i=void 0===o?{}:o,l=e.filter,p=e.layer,y=e.quickFilters,h=e.options,w=i.viewport,E=f()({gmlVersion:"3.1.1"}),S=(0,d.Z)(E),P=E.filter,j=E.property,C=E.and,x=p||{},T=x.layerFilter,k={},I={},A=(0,m.r$)(l,y,h);if(!t)return{filter:!a()(A)||T?P(C.apply(void 0,v(T&&!T.disabled?(0,s.toOGCFilterParts)(T,"1.1.0","ogc"):[]).concat(v(A?(0,s.toOGCFilterParts)(A,"1.1.0","ogc"):[])))):void 0};if(p&&i&&i.quickFilters&&i.layer&&p.name===i.layer.name&&(A=b(b({},A),(0,m.r$)(A,i.quickFilters,i.options))),p&&i&&i.filter&&i.layer&&p.name===i.layer.name&&(A=b(b({},A),(0,s.composeAttributeFilters)([A,i.filter]))),i.viewport){var F=Object.keys(w.bounds).reduce((function(e,t){return b(b({},e),{},g({},t,parseFloat(w.bounds[t])))}),{});k=(0,c.getViewportGeometry)(F,w.crs);var D=O(p,i);return I=D?[S((0,u.read)(D))]:[],{filter:P(C.apply(void 0,v(I).concat(v(T&&!T.disabled?(0,s.toOGCFilterParts)(T,"1.1.0","ogc"):[]),v(A?(0,s.toOGCFilterParts)(A,"1.1.0","ogc"):[]),[j(n).intersects(k)])))}}return{filter:P(C.apply(void 0,v(T?(0,s.toOGCFilterParts)(T,"1.1.0","ogc"):[]).concat(v(A?(0,s.toOGCFilterParts)(A,"1.1.0","ogc"):[]))))}})))},8488:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var n=r(49848),o=r(70956),i=r(13311),a=r.n(i);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const u=(0,n.compose)((0,n.withPropsOnChange)(["dependencies","options"],(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dependencies,r=void 0===t?{}:t,n=e.options,i=e.layer,l=void 0===i?{}:i,s=(0,o.Z5)(l,r),u=a()(Object.keys(s||{}),(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"viewparams"===e.toLowerCase()})),p=s&&u&&s[u];return{options:p?c(c({},n),{},{viewParams:p}):n}})))},73339:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var n=r(49848),o=r(78718),i=r.n(o);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s=function e(t,r,n){return t?Object.keys(t).reduce((function(o,a){return"dependenciesMap"===a&&r[t[a]]&&r[t.mapSync]&&r[t[a]][a]&&-1===r[t[a]][a].indexOf(n)?l(l({},o),i()(e(r[t[a]],r,n),["options","layer","quickFilters","filter","dependenciesMap"])):l(l({},o),{},c({},a,r[t[a]]))}),{}):r};const u=(0,n.withProps)((function(e){var t=e.dependenciesMap,r=e.dependencies,n=e.id;return{dependencies:t?s(t,r,n):r,dependenciesMap:t}}))},39837:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var n=r(82030),o=r(99707);const i=(0,n.Z)((function(e){var t=e.data,r=void 0===t?[]:t;return!r||0===r.length}),(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mapSync,r=e.iconFit;return{iconFit:r,messageId:t?"widgets.errors.nodatainviewport":"widgets.errors.nodata",glyph:"stats"}}),o.Z)},46173:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(5053),o=r.n(n),i=r(82030),a=r(5346);function l(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const c=function(){var e,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return(0,i.Z)((function(e){var t=e.layers;return 0===(void 0===t?[]:t).length}),(l(e={},t?"tooltip":"title",o().createElement(a.Z,{msgId:"widgets.errors.noLegend"})),l(e,"description",!t&&o().createElement(a.Z,{msgId:"widgets.errors.noLegendDescription"})),e))}},42415:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var n=r(5053),o=r.n(n),i=r(5346),a=r(82030),l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"ECONNABORTED"===e.code?o().createElement(i.Z,{msgId:"widgets.errors.timeoutExpired"}):e.message?o().createElement(i.Z,{msgId:"widgets.errors.genericErrorWithMessage",msgParams:{message:e.message}}):o().createElement(i.Z,{msgId:"widgets.errors.genericError"})};const c=(0,a.Z)((function(e){return e.error}),(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.error,r=e.iconFit;return{glyph:"warning-sign",iconFit:r,tooltip:l(t)}}))},13314:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(49848),o=r(27361),i=r.n(o),a=r(12425),l=r(39860),c=r(52259);const s=(0,n.compose)((0,n.withProps)((function(e){var t=e.dependencies,r=void 0===t?{}:t,n=e.dependenciesMap;return{layers:r[(void 0===n?{}:n).layers]||r.layers||[],scales:(0,c.getScales)(r.projection||r.viewport&&r.viewport.crs||"EPSG:3857",i()(r,"mapOptions.view.DPI")),currentZoomLvl:r.zoom}})),(0,n.withProps)((function(e){var t=e.layers;return{layers:(void 0===t?[]:t).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"background"!==e.group&&!1!==e.visibility&&"vector"!==e.type}))}})),a.Z,(0,l.tR)(),(0,l.E6)(),(0,l.um)())},87017:(e,t,r)=>{"use strict";r.d(t,{Z:()=>T});var n=r(14293),o=r.n(n),i=r(13218),a=r.n(i),l=r(49848),c=r(89255),s=r(65633),u=r(24262),p=r(73849);function f(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?f(Object(r),!0).forEach((function(t){m(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function m(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.AggregationResults,r=void 0===t?[]:t,n=e.GroupByAttributes,i=void 0===n?[]:n,l=e.AggregationAttribute,c=e.AggregationFunctions;return r.map((function(e){return d(d({},i.reduce((function(t,r,n){var i=e[n];if(a()(i)){if(o()(i.time))throw new Error("Unknown response format from server");i=new Date(i.time).toISOString()}return d(d({},t),{},m({},r,i))}),{})),{},m({},"".concat(c[0],"(").concat(l,")"),e[e.length-1]))})).sort((function(e,t){var r=parseFloat(e[i]),n=parseFloat(t[i]);return isNaN(r)||isNaN(n)?e<t?-1:e>t?1:0:r-n}))},b=function(e){return e.filter((function(e){var t=e.layer,r=void 0===t?{}:t,n=e.options;return r.name&&(0,u.ZA)(r)&&n&&n.aggregateFunction&&n.aggregationAttribute&&n.groupByAttributes})).distinctUntilChanged((function(e,t){var r=e.layer,n=void 0===r?{}:r,o=e.options,i=void 0===o?{}:o,a=e.filter;return t.layer&&n.name===t.layer.name&&n.loadingError===t.layer.loadingError&&function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.aggregateFunction===t.aggregateFunction&&e.aggregationAttribute===t.aggregationAttribute&&e.groupByAttributes===t.groupByAttributes&&e.viewParams===t.viewParams}(i,t.options)&&a===t.filter})).switchMap((function(e){var t=e.layer,r=void 0===t?{}:t,n=e.options,o=e.filter,i=e.onLoad,a=void 0===i?function(){}:i,l=e.onLoadError,p=void 0===l?function(){}:l;return(0,s.Z)((0,u.ZA)(r),d(d({featureType:r.name},n),{},{filter:o}),{timeout:15e3}).map((function(e){return{loading:!1,isAnimationActive:!1,error:void 0,data:y(e),series:[{dataKey:"".concat(e.AggregationFunctions[0],"(").concat(e.AggregationAttribute,")")}],xAxis:{dataKey:e.GroupByAttributes[0]}}})).do(a).catch((function(e){return c.Observable.of({loading:!1,error:e,data:[]}).do(p)})).startWith({loading:!0})}))};const g=(0,l.compose)((0,l.withProps)((function(){return{dataStreamFactory:b}})),p.Z);var v=r(84596),h=r.n(v),O=r(89734),w=r.n(O),E=r(86850);function S(e){return function(e){if(Array.isArray(e))return P(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return P(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?P(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.features,r=arguments.length>1?arguments[1]:void 0,n=r.groupByAttributes;return w()(t.map((function(e){return e.properties})),n)},C=function(e){return e.filter((function(e){var t=e.layer,r=void 0===t?{}:t,n=e.options;return r.name&&(0,u.Tt)(r)&&n&&n.aggregationAttribute&&n.groupByAttributes})).distinctUntilChanged((function(e,t){var r=e.layer,n=void 0===r?{}:r,o=e.options,i=void 0===o?{}:o,a=e.filter;return t.layer&&n.name===t.layer.name&&n.loadingError===t.layer.loadingError&&function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.aggregateFunction===t.aggregateFunction&&e.aggregationAttribute===t.aggregationAttribute&&e.groupByAttributes===t.groupByAttributes&&e.viewParams===t.viewParams}(i,t.options)&&a===t.filter})).switchMap((function(e){var t=e.layer,r=void 0===t?{}:t,n=e.options,o=e.filter,i=e.onLoad,a=void 0===i?function(){}:i,l=e.onLoadError,s=void 0===l?function(){}:l;return(0,E.Mc)(r,o,{propertyName:[].concat(S(h()(n.aggregationAttribute)),S(h()(n.groupByAttributes)))}).map((function(e){return{loading:!1,isAnimationActive:!1,error:void 0,data:j(e,n),series:[{dataKey:n.aggregationAttribute}],xAxis:{dataKey:n.groupByAttributes}}})).do(a).catch((function(e){return c.Observable.of({loading:!1,error:e,data:[]}).do(s)})).startWith({loading:!0})}))};const x=(0,l.compose)((0,l.withProps)((function(){return{dataStreamFactory:C}})),p.Z),T=(0,l.branch)((function(e){var t=e.options,r=void 0===t?{}:t;return!r.aggregateFunction||"None"===r.aggregateFunction}),x,g)},39860:(e,t,r)=>{"use strict";r.d(t,{E6:()=>A,tR:()=>k,AV:()=>I,G5:()=>T,um:()=>F});var n=r(49848);function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var a=(0,n.compose)((0,n.withProps)((function(e){var t,r=e.maximized,n=void 0===r?{}:r,o=e.widgetTools,a=void 0===o?[]:o,l=e.toggleMaximize,c=void 0===l?function(){}:l,s=e.dataGrid,u=void 0===s?{}:s,p=e.toolsOptions;return{widgetTools:(void 0===p?{}:p).showMaximize?[].concat((t=a,function(e){if(Array.isArray(e))return i(e)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[{glyph:n.widget?"resize-small":"resize-full",target:"icons",tooltipId:"widgets.widget.menu.".concat(n.widget?"minimize":"maximize"),tooltipPosition:"right",visible:!u.static,onClick:function(){return c()}}]):a}})));function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var p=r(5053),f=r.n(p),d=r(80717),m=function(e){return"icons"===e.target},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.filter(m).length>0};function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var g=r(30294),v=r(5346),h=r(15135);function O(e){return function(e){if(Array.isArray(e))return w(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return w(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?w(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var E=function(e){var t=e.target,r=e.visible;return(void 0===r||r)&&"menu"===t},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.filter(E).length>0},P=(0,h.Z)(g.MenuItem);function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var C=function(e){return"tools"===e.target},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.filter(C).length>0},T=function(){return(0,n.compose)((0,n.withProps)((function(e){var t,r=e.maximized,n=void 0===r?{}:r,o=e.widgetTools,i=void 0===o?[]:o,a=e.toolsOptions,l=void 0===a?{}:a,c=e.canEdit,u=e.updateProperty,p=void 0===u?function(){}:u,f=e.hide,d=void 0!==f&&f;return{widgetTools:l.showHide?[].concat((t=i,function(e){if(Array.isArray(e))return s(e)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[{glyph:"lock",target:"menu",active:d,textId:d?"widgets.widget.menu.unhide":"widgets.widget.menu.hide",tooltipId:d?"widgets.widget.menu.unhideDescription":"widgets.widget.menu.hideDescription",visible:!n.widget&&c,onClick:function(){return p("hide",!d)}}]):i}})))},k=function(){return(0,n.withProps)((function(e){var t,r=e.widgetTools,n=void 0===r?[]:r,o=e.dataGrid,i=void 0===o?{}:o,a=e.canEdit,c=e.onEdit,s=void 0===c?function(){}:c,u=e.toggleDeleteConfirm,p=void 0===u?function(){}:u;return{widgetTools:a?[].concat((t=n,function(e){if(Array.isArray(e))return l(e)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[{glyph:"pencil",target:"menu",visible:a&&!i.static,textId:"widgets.widget.menu.edit",onClick:function(){return s()}},{glyph:"trash",target:"menu",visible:a&&!i.static,textId:"widgets.widget.menu.delete",onClick:function(){return p(!0)}}]):n}}))},I=function(){return(0,n.withProps)((function(e){var t,r=e.widgetTools,n=void 0===r?[]:r,o=e.data,i=e.title,a=e.exportCSV,l=void 0===a?function(){}:a;return{widgetTools:[].concat((t=n,function(e){if(Array.isArray(e))return c(e)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[{glyph:"download",glyphClassName:"exportCSV",target:"menu",textId:"widgets.widget.menu.downloadData",disabled:!o||!o.length,onClick:function(){return l({data:o,title:i})}}])}}))},A=function(){return(0,n.compose)((0,n.compose)((0,n.withProps)((function(e){var t,r=e.maximized,n=void 0===r?{}:r,o=e.widgetTools,i=void 0===o?[]:o,a=e.toolsOptions,l=void 0===a?{}:a,c=e.updateProperty,s=void 0===c?function(){}:c,p=e.dataGrid,f=void 0===p?{}:p;return{widgetTools:l.showPin?[].concat((t=i,function(e){if(Array.isArray(e))return u(e)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[{glyph:"pushpin",bsStyle:f.static&&"primary",glyphClassName:f.static?"active":void 0,tooltipId:f.static?"widgets.widget.menu.unpin":"widgets.widget.menu.pin",target:"icons",visible:!n.widget,onClick:function(){return s("dataGrid.static",!f.static)}}]):i}}))),(0,n.compose)((0,n.withProps)((function(e){var t,r=e.maximized,n=void 0===r?{}:r,i=e.widgetTools,a=void 0===i?[]:i,l=e.dataGrid,c=void 0===l?{}:l,s=e.toggleCollapse,u=void 0===s?function(){}:s,p=e.toolsOptions;return{widgetTools:(void 0===p?{}:p).showCollapse?[].concat((t=a,function(e){if(Array.isArray(e))return o(e)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return o(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[{glyph:"minus",target:"icons",tooltipId:"widgets.widget.menu.collapse",visible:!n.widget&&!c.static,onClick:function(){return u()}}]):a}}))),a,(0,n.compose)((0,n.withProps)((function(e){var t,r=e.widgetTools,n=void 0===r?[]:r,o=e.title,i=e.description,a=e.widgetType;return{widgetTools:i&&"text"!==a?[].concat((t=n,function(e){if(Array.isArray(e))return b(e)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return b(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?b(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[{glyph:"question-sign",popover:{title:o,trigger:!0,text:i},target:"icons"}]):n}}))))},F=function(){return(0,n.compose)((0,n.compose)((0,n.withPropsOnChange)(["topLeftItems","widgetTools"],(function(e){var t,r=e.topLeftItems,n=void 0===r?[]:r,o=e.widgetTools;return{topLeftItems:x(o)?[].concat((t=n,function(e){if(Array.isArray(e))return j(e)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return j(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?j(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[f().createElement(d.Z,{btnGroupProps:{style:{position:"absolute",left:14}},btnDefaultProps:{className:"no-border",bsSize:"small",bsStyle:"link",style:{paddingLeft:4,paddingRight:4}},buttons:o.filter(C)})]):n}}))),(0,n.compose)((0,n.withPropsOnChange)(["icons","widgetTools"],(function(e){var t=e.icons,r=void 0===t?[]:t,n=e.widgetTools;return{icons:y(n)?f().createElement(d.Z,{btnDefaultProps:{className:"no-border",bsSize:"xs",bsStyle:"link"},buttons:n.filter(m)}):r}}))),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.className,r=void 0===t?"widget-menu":t,o=e.menuIcon,i=void 0===o?"option-vertical":o;return(0,n.withProps)((function(e){var t=e.widgetTools,n=e.topRightItems,o=void 0===n?[]:n;return{topRightItems:S(t)?[].concat(O(o),[f().createElement(g.ButtonToolbar,null,f().createElement(g.DropdownButton,{pullRight:!0,bsStyle:"default",className:r,title:f().createElement(g.Glyphicon,{glyph:i}),noCaret:!0,id:"dropdown-no-caret"},t.filter(E).map((function(e,t){var r=e.onClick,n=void 0===r?function(){}:r,o=e.disabled,i=void 0!==o&&o,a=e.glyph,l=e.glyphClassName,c=e.text,s=e.textId,u=e.tooltipId,p=e.active;return f().createElement(P,{active:p,tooltipId:u,onSelect:n,disabled:i,eventKey:t},f().createElement(g.Glyphicon,{className:l,glyph:a}),s?f().createElement(v.Z,{msgId:s}):c)}))))]):o}}))}())}},70956:(e,t,r)=>{"use strict";r.d(t,{Z5:()=>b,r$:()=>g});var n=r(13311),o=r.n(n),i=r(27361),a=r.n(i),l=r(41609),c=r.n(l),s=r(54061),u=r.n(s),p=r(96958),f=r(47805);function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var b=function(e,t){return e&&e.id&&a()(o()(t.layers||[],{id:e.id}),"params",{})},g=function(e,t,r){var n=t&&r&&Object.keys(t).filter((function(e){return o()(r.propertyName,(function(t){return t===e}))})).reduce((function(e,r){return m(m({},e),{},y({},r,t[r]))}),{}),i=u()(n,(function(e,t,r){return(0,p.dJ)(m({attribute:r},t),e)}),{});if(!c()(e)||!c()(i)){var a=(0,f.composeAttributeFilters)([e,i],void 0,null==e?void 0:e.spatialFieldOperator);return m(m({},e),a)}return{}}},25382:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(89255),o=r(86850),i=r(24262);const a=function(e){return e.distinctUntilChanged((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.layer,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.layer;return(0,i.Tt)(t)===(0,i.Tt)(n)&&t.loadingError===n.loadingError})).switchMap((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.layer;return(0,o.v$)({layer:t}).map((function(e){return{describeFeatureType:e.data,loading:!1,error:void 0}})).catch((function(e){return n.Observable.of({loading:!1,error:e})}))}))}},39589:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var n=r(49848),o=r(65633),i=r(73849),a=r(89255),l=r(24262);function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.AggregationResults,r=void 0===t?[]:t,n=e.GroupByAttributes,o=void 0===n?[]:n,i=e.AggregationAttribute,a=e.AggregationFunctions;return r.map((function(e){return s(s({},o.reduce((function(t,r,n){return s(s({},t),{},u({},r,e[n]))}),{})),{},u({},"".concat(a[0],"(").concat(i,")"),e[e.length-1]))}))},f=function(e){return e.filter((function(e){var t=e.layer,r=void 0===t?{}:t,n=e.options;return r.name&&(0,l.ZA)(r)&&n&&n.aggregateFunction&&n.aggregationAttribute})).distinctUntilChanged((function(e,t){var r=e.layer,n=void 0===r?{}:r,o=e.options,i=void 0===o?{}:o,a=e.filter;return t.layer&&n.name===t.layer.name&&n.loadingError===t.layer.loadingError&&function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.aggregateFunction===t.aggregateFunction&&e.aggregationAttribute===t.aggregationAttribute&&e.viewParams===t.viewParams}(i,t.options)&&a===t.filter})).switchMap((function(e){var t=e.layer,r=void 0===t?{}:t,n=e.options,i=e.filter,c=e.onLoad,u=void 0===c?function(){}:c,f=e.onLoadError,d=void 0===f?function(){}:f;return(0,o.Z)((0,l.ZA)(r),s(s({featureType:r.name},n),{},{filter:i}),{timeout:15e3}).map((function(e){return{loading:!1,isAnimationActive:!1,error:void 0,data:p(e),series:[{dataKey:"".concat(e.AggregationFunctions[0],"(").concat(e.AggregationAttribute,")")}]}})).do(u).catch((function(e){return a.Observable.of({loading:!1,error:e,data:[]}).do(d)})).startWith({loading:!0})}))};const d=(0,n.compose)((0,n.withProps)((function(){return{dataStreamFactory:f}})),i.Z)},80844:(e,t,r)=>{"use strict";r.d(t,{Z:()=>O});var n=r(73014),o=r(42415),i=r(39837),a=r(47361),l=r(49848),c=r(27361),s=r.n(c),u=r(14298),p=r(5053),f=r.n(p);function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function g(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var v=(0,n.Z)(),h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.value,r=void 0===t?"":t,n=e.uom,o=void 0===n?"":n,i=g(e,["value","uom"]);return f().createElement(u.iF,b({mode:"single",forceSingleModeWidth:!1,max:500,throttle:20},i),f().createElement(a.Z,{value:r}),f().createElement("span",{style:{fontSize:"75%"}},o))};const O=(0,l.compose)(v,o.Z,i.Z)((function(e){var t=e.series,r=void 0===t?[]:t,n=e.data,o=void 0===n?[]:n,i=e.options,a=void 0===i?{}:i,l=e.style,c=void 0===l?{width:"100%",height:"100%",transform:"translate(-50%, -50%)",position:"absolute",display:"inline",padding:"1%",top:"50%",left:"50%"}:l;return f().createElement("div",{className:"counter-widget-view"},r.map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dataKey,r=arguments.length>1?arguments[1]:void 0;return f().createElement(h,{key:t,uom:s()(a,"seriesOptions[".concat(r,"].uom")),value:o[0][t],style:m({textAlign:"center"},c)})})))}))},43716:(e,t,r)=>{"use strict";r.d(t,{Z:()=>Pt});var n=r(5053),o=r.n(n),i=r(49848),a=r(12425),l=r(39860);function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}const s=(0,i.compose)(a.Z,(0,i.compose)((0,i.withState)("showTable","setShowTable",!1),(0,i.withHandlers)({toggleTableView:function(e){var t=e.setShowTable,r=e.showTable;return function(){return t(!r)}}}),(0,i.withProps)((function(e){var t,r=e.widgetTools,n=void 0===r?[]:r,o=e.toggleTableView,i=void 0===o?function(){}:o;return{widgetTools:[].concat((t=n,function(e){if(Array.isArray(e))return c(e)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[{glyph:"features-grid",target:"menu",textId:"widgets.widget.menu.showChartData",onClick:function(){return i()}}])}}))),(0,l.tR)(),(0,l.AV)(),(0,l.E6)(),(0,i.branch)((function(e){return!e.showTable}),(0,l.um)())),u=(0,i.compose)(a.Z,(0,l.tR)(),(0,l.E6)(),(0,l.um)());var p=r(27361),f=r.n(p);function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const b=(0,i.compose)((0,i.withPropsOnChange)(["gridEvents"],(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.gridEvents,r=void 0===t?{}:t,n=e.updateProperty,o=void 0===n?function(){}:n;return{gridEvents:m(m({},r),{},{onAddFilter:function(e){return o("quickFilters.".concat(e.attribute),e)},onColumnResize:function(e,t,r,n,i,a){return o('options.columnSettings["'.concat(f()(a.filter((function(e){return!e.hide}))[e],"name"),'"].width'),t)}})}})),a.Z,(0,l.tR)(),(0,l.E6)(),(0,l.um)(),(0,i.withPropsOnChange)(["gridEvents"],(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.gridEvents,r=void 0===t?{}:t,n=e.updateProperty,o=void 0===n?function(){}:n;return{gridEvents:m(m({},r),{},{onGridSort:function(e,t){return o("sortOptions",{sortBy:e,sortOrder:t})}})}})));var g=r(13314);const v=(0,i.compose)(a.Z,(0,l.tR)(),(0,l.G5)(),(0,l.E6)(),(0,l.um)()),h=(0,i.compose)(a.Z,(0,l.tR)(),(0,l.E6)(),(0,l.um)());var O=r(87017),w=r(39589),E=r(64721),S=r.n(E),P=r(82492),j=r.n(P),C=r(78889),x=r(73849),T=r(25382),k=r(89255),I=r(86850);const A=function(e){return e.switchMap((function(e){var t=e.layer,r=void 0===t?{}:t,n=e.options,o=void 0===n?{}:n,i=e.filter,a=e.onLoad,l=void 0===a?function(){}:a,c=e.onLoadError,s=void 0===c?function(){}:c;return(0,I.Mc)(r,i,{timeout:15e3,params:{propertyName:o.propertyName,viewParams:o.viewParams}}).map((function(){return{loading:!1,error:void 0}})).do((function(e){return l({features:e.features,pagination:{totalFeatures:e.totalFeatures}})})).catch((function(e){return k.Observable.of({loading:!1,error:e,data:[]}).do(s)}))}))};function F(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function D(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?F(Object(r),!0).forEach((function(t){R(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function R(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r(89255);const N=function(e){return e.filter((function(e){var t=e.layer;return(void 0===t?{}:t).name})).distinctUntilChanged((function(e,t){var r=e.layer,n=void 0===r?{}:r,o=e.options,i=void 0===o?{}:o,a=e.filter,l=e.sortOptions;return t.layer&&n.name===t.layer.name&&n.loadingError===t.layer.loadingError&&function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.propertyName===t.propertyName&&e.viewParams===t.viewParams}(i,t.options)&&a===t.filter&&function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.sortBy===t.sortBy&&e.sortOrder===t.sortOrder}(l,t.sortOptions)})).map((function(e){return D(D({},e),{},{features:[],pages:[],pagination:{}})}))};var M=r(96958);function L(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?L(Object(r),!0).forEach((function(t){Z(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):L(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Z(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const B=function(e){return function(t){return t.switchMap((function(t){var r=t.layer,n=void 0===r?{}:r,o=t.size,i=void 0===o?20:o,a=t.maxStoredPages,l=void 0===a?5:a,c=t.filter,s=t.options,u=void 0===s?{}:s,p=t.sortOptions,f=t.pages,d=t.features,m=void 0===d?[]:d,y=t.onLoad,b=void 0===y?function(){}:y,g=t.onLoadError,v=void 0===g?function(){}:g;return e.switchMap((function(e,t){var r=e.pagesRange,o=e.pagination,a=void 0===o?{}:o;return function(e){if(null==e)throw new TypeError("Cannot destructure undefined")}(t),(0,I.Mc)(n,c,_(_({},(0,M.S9)(r,f,i)),{},{sortOptions:p,timeout:15e3,totalFeatures:a.totalFeatures,propertyName:u.propertyName,viewParams:u.viewParams})).do((function(e){return b(_(_({},(0,M.f1)(e,r,{pages:f,features:m},_(_({},(0,M.S9)(r,f,i)),{},{size:i,maxStoredPages:l}))),{},{pagination:{totalFeatures:e.totalFeatures}}))})).map((function(){return{loading:!1}})).catch((function(e){return k.Observable.of({loading:!1,error:e}).do(v)})).startWith({loading:!0})}))}))}};function z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function G(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?z(Object(r),!0).forEach((function(t){U(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):z(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function U(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var W=function(e){var t=(0,i.createEventHandler)(),r=t.handler,n=t.stream;return(0,T.Z)(e).combineLatest(function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return N(e).let(r?B(t.withLatestFrom(e.map((function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).pagination;return{pagination:void 0===e?{}:e}})),(function(e,t){return G({pagesRange:e},t)}))):A).startWith({})}(e,n.startWith({startPage:0,endPage:1})),(function(e,t){return G(G(G({},e),t),{},{pageEvents:{moreFeatures:r,onPageChange:function(){}}})})).startWith({loading:!0})};const V=(0,i.compose)((0,i.defaultProps)({virtualScroll:!0,size:20,maxStoredPages:5}),(0,i.withStateHandlers)({pages:[],features:[],pagination:{}},{setData:function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.pages,r=e.features,n=e.pagination;return{pages:t,features:r,pagination:n,error:void 0}}}}),(0,i.withHandlers)({onLoad:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.setData,r=void 0===t?function(){}:t,n=e.onLoad,o=void 0===n?function(){}:n;return function(){r.apply(void 0,arguments),o.apply(void 0,arguments)}}}),(0,i.withProps)((function(){return{dataStreamFactory:W}})),x.Z,(0,i.withProps)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,r=void 0===t?{}:t,n=e.describeFeatureType,o=e.columnSettings,i=void 0===o?{}:o;return{columnSettings:j()(n?(0,C.getFeatureTypeProperties)(n).filter((function(e){return!S()(r.propertyName||[],e.name)})).reduce((function(e,t){return G(G({},e),{},U({},t.name,{hide:!0}))}),{}):{},r.columnSettings||{},i)}})));var q=r(30881),H=r(8488),$=r(73339),K=r(5055),Y=r.n(K),X=r(41609),Q=r.n(X),J=r(18446),ee=r.n(J),te=r(70956),re=r(99767),ne=r(27835),oe=function(e){var t=e.wfsGetFeature;return(0,ne.Uh)("gs:Bounds",[(0,re.qP)("features",(0,re.fA)("text/xml","http://geoserver/wfs","POST",t))],(0,re.DK)((0,re.En)("bounds","application/json")))};var ie=r(47805),ae=r(24262),le=r(61868),ce=r(52259);function se(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ue(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?se(Object(r),!0).forEach((function(t){pe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):se(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function pe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const fe=(0,i.compose)((0,i.branch)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mapSync,r=e.dependencies;return t&&(!Q()(r.quickFilters)||!Q()(r.filter))}),(0,i.compose)((0,i.withPropsOnChange)(["id"],(function(e){var t=e.hookRegister;return{hookRegister:(void 0===t?null:t)||(0,ce.createRegisterHooks)()}})),(0,i.mapPropsStream)((function(e){return e.distinctUntilChanged((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ee()(e.dependencies.quickFilters,t.dependencies.quickFilters)&&ee()(e.dependencies.filter,t.dependencies.filter)&&ee()(e.dependencies.layer,t.dependencies.layer)})).debounceTime(500).switchMap((function(e){var t=e.mapSync,r=e.dependencies,n=void 0===r?{}:r,o=e.filter,i=e.hookRegister;if(!t||Q()(n.layer))return k.Observable.of({loading:!1});var a={};n.quickFilters&&(a=ue(ue({},a),(0,te.r$)(o,n.quickFilters,n.options))),n.filter&&(a=ue(ue({},a),(0,ie.composeAttributeFilters)([a,n.filter])));var l=n&&n.layer&&n.layer.name;if(!Q()(a)){a=ue(ue({},a),{},{options:ue(ue({},a.options||{}),{},{noSchemaLocation:!0})});var c=(0,ie.toOGCFilter)(l,a,"1.1.0");return function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(0,ne.mG)(e,oe(t),{},r)}((0,ae.ZA)(n.layer),{wfsGetFeature:c}).switchMap((function(e){var t,r,n;if(Y().parseString(e,{explicitArray:!1},(function(e,o){t=o["ows:BoundingBox"],r=t["ows:LowerCorner"].split(" "),n=t["ows:UpperCorner"].split(" ")})),"0.0 0.0"===t["ows:LowerCorner"]&&"-1.0 -1.0"===t["ows:UpperCorner"])return k.Observable.of({loading:!1});var o={minx:parseFloat(r[0]),miny:parseFloat(r[1]),maxx:parseFloat(n[0]),maxy:parseFloat(n[1])},a=i.getHook(ce.ZOOM_TO_EXTENT_HOOK);return a&&a(o,{crs:"EPSG:4326",maxZoom:21}),k.Observable.of({loading:!1})})).startWith({loading:!0}).catch((function(e){return k.Observable.of({error:"error getting bounds from filter",details:e})}))}return k.Observable.of({loading:!1})})).combineLatest(e,(function(e){var t=e.loading,r=void 0!==t&&t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,le.t8)("loading",r,n)}))})))));var de=r(13311),me=r.n(de),ye=r(43378);function be(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ge(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?be(Object(r),!0).forEach((function(t){ve(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):be(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ve(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const he=(0,i.compose)((0,i.withPropsOnChange)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mapSync,r=e.dependencies,n=void 0===r?{}:r,o=e.map,i=void 0===o?{}:o,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=arguments.length>2?arguments[2]:void 0;return t!==a.mapSync||!ee()(n,a.dependencies)||!ee()(i,a.map)||l!==a.filter}),(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mapSync,r=e.dependencies,n=void 0===r?{}:r,o=e.filter,i=void 0===o?{}:o,a=e.map,l=void 0===a?{layers:[]}:a,c=n&&n.layer&&n.layer.name,s=me()(l.layers,{name:c})||{},u={},p={},f=void 0;return t&&!Q()(s)&&(n.quickFilters&&(u=ge(ge({},u),(0,te.r$)(i,n.quickFilters,n.options))),n.filter&&(u=ge(ge({},u),(0,ie.composeAttributeFilters)([u,n.filter]))),!Q()(u)&&(0,ie.toCQLFilter)(u))?(f=(0,ie.toCQLFilter)(u),p=(0,le.cc)(!1,ge(ge({},s),{},{params:(0,ye.v)({params:{CQL_FILTER:f}},s&&s.params&&s.params.CQL_FILTER)}),{name:c},l.layers),{map:ge(ge({},l),{},{layers:p})}):(p=l.layers.map((function(e){return ge(ge({},e),{},{params:ge(ge({},e.params),{},{CQL_FILTER:void 0})})})),{map:ge(ge({},l),{},{layers:p})})}))),Oe=function(e){return(0,i.branch)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.mapSync;return t}),(0,i.withPropsOnChange)((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.mapSync,n=t.dependencies,o=void 0===n?{}:n,a=arguments.length>1?arguments[1]:void 0,l=a.mapSync,c=a.dependencies;return c&&(0,i.shallowEqual)(o[e],c[e])||r===l}),(function(t){var r=t.map,n=t.mapSync,o=t.dependencies,i=void 0===o?{}:o;return{mapStateSource:"__dependency_system__",map:i[e]&&n?(0,le.t8)(e,i[e],r):r}})))};var we=r(30294);function Ee(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Se(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ee(Object(r),!0).forEach((function(t){Pe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ee(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Pe(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function je(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}const Ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data,r=void 0===t?[]:t,n=je(e,["data"]),i=Object.keys(r.reduce((function(e,t){return Se(Se({},e),t)}),{}));return o().createElement("div",{className:"mapstore-widget-table"},o().createElement(we.Table,{striped:!0},o().createElement("thead",null,o().createElement("tr",null,i.map((function(e,t){return o().createElement("th",null,t+1===i.length&&n.yAxisLabel?n.yAxisLabel:t>0?"".concat(e):e)})))),o().createElement("tbody",null,r.map((function(e){return o().createElement("tr",null,i.map((function(t){return o().createElement("td",null,e[t])})))})))))};var xe=r(622),Te=r(73014),ke=r(42415),Ie=r(39837),Ae=r(28315),Fe=(0,Te.Z)()((0,ke.Z)((0,Ie.Z)(Ae.Z)));const De=function(e){return o().createElement("div",{className:"mapstore-widget-chart"},o().createElement(xe.Z,null,o().createElement(Fe,e)))};var Re=r(5346),Ne=r(65539),Me=r(72688);const Le=function(e){var t=e.id,r=e.title,n=e.confirmDelete,i=void 0!==n&&n,a=e.className,l=e.isDraggable,c=void 0===l||l,s=e.toggleDeleteConfirm,u=void 0===s?function(){}:s,p=e.onDelete,f=void 0===p?function(){}:p,d=e.icons,m=e.topLeftItems,y=e.topRightItems,b=e.headerStyle,g=void 0===b?{}:b,v=e.children;return o().createElement("div",{className:"mapstore-widget-card",id:t},o().createElement(Ne.Z,{className:a,header:o().createElement("div",{style:g,className:"mapstore-widget-info ".concat(c?"draggableHandle":"")},o().createElement("div",{className:"mapstore-widget-header"},o().createElement("span",{className:"widget-icons"},d),m,o().createElement("span",{className:"widget-title"},r),o().createElement("span",{className:"mapstore-widget-options"},y)))},v),i?o().createElement(Me.Z,{confirmText:o().createElement(Re.Z,{msgId:"widgets.widget.menu.delete"}),titleText:o().createElement(Re.Z,{msgId:"widgets.widget.menu.delete"}),body:o().createElement(Re.Z,{msgId:"widgets.widget.menu.confirmDelete"}),show:i,onClose:function(){return u(!1)},onConfirm:function(){return f(t)}}):null)};function _e(){return(_e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var Ze=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.showTable,r=e.toggleTableView,n=void 0===r?function(){}:r;return t?o().createElement(we.Glyphicon,{onClick:function(){n()},glyph:"arrow-left pull-left"}):null};var Be=r(82030),ze=r(99707),Ge=(0,Be.Z)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.text;return!t}),(function(){return{glyph:"sheet",messageId:"widgets.errors.notext"}}),ze.Z)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.text;return o().createElement("div",{className:"mapstore-widget-default-content ql-editor",dangerouslySetInnerHTML:{__html:t}})})),Ue=r(57557),We=r.n(Ue),Ve=r(75480),qe=r(92936);function He(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function $e(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?He(Object(r),!0).forEach((function(t){Ke(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):He(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ke(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ye=(0,i.withHandlers)({onMapViewChanges:function(e){var t=e.updateProperty,r=void 0===t?function(){}:t;return function(e){e.layers;var t=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["layers"]);return r("map",t,"merge")}}})(qe.Z),Xe=r(18027);function Qe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Je(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Qe(Object(r),!0).forEach((function(t){et(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Qe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function et(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var tt=(0,i.compose)((0,i.mapPropsStream)((function(e){return e.combineLatest(e.pluck("quickFilterStream$").distinctUntilChanged().switchMap((function(e){return e})).startWith(void 0),(function(e,t){var r=t&&e.options&&me()(e.options.propertyName,(function(t){return t===e.attributeName}))&&t[e.attributeName]||{},n=r&&(r.rawValue||r.value);return Je(Je({},e),{},{value:n})}))}))),rt=function(e){var t=e.options,r=e.localType,n=e.attributeName,o=e.quickFilterStream$;return(0,i.compose)((0,i.withProps)({quickFilterStream$:o,attributeName:n,options:t}),tt)((0,Xe.Q)(r,{name:n}))},nt=(0,i.compose)((0,i.mapPropsStream)((function(e){return e.map((function(t){return Je(Je({},t),{},{quickFilterStream$:e.pluck("quickFilters").distinctUntilChanged()})}))}))),ot=(0,i.compose)(nt,(0,i.withPropsOnChange)(["describeFeatureType","options"],(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.describeFeatureType,r=e.options,n=e.quickFilterStream$;return t?{filterRenderers:(0,M.Lo)(t).reduce((function(e,t){var o=t.localType,i=t.name,a=rt({options:r,localType:o,attributeName:i,quickFilterStream$:n});return Je(Je({},e),{},et({},i,a))}),{})}:{}}))),it=r(30029),at=r(93358),lt=(0,ke.Z)((0,Te.Z)((function(e){return!e.describeFeatureType}))(at.Z));const ct=ot((function(e){var t=e.id,r=e.title,n=e.loading,i=e.confirmDelete,a=void 0!==i&&i,l=e.enableColumnFilters,c=void 0!==l&&l,s=e.headerStyle,u=e.icons,p=e.topRightItems,f=e.toggleDeleteConfirm,d=void 0===f?function(){}:f,m=e.onDelete,y=void 0===m?function(){}:m,b=e.gridEvents,g=void 0===b?function(){}:b,v=e.pageEvents,h=void 0===v?{moreFeatures:function(){}}:v,O=e.describeFeatureType,w=e.filterRenderers,E=e.columnSettings,S=e.features,P=e.size,j=e.pages,C=e.error,x=e.pagination,T=void 0===x?{}:x,k=e.dataGrid,I=void 0===k?{}:k,A=e.virtualScroll,F=void 0===A||A;return o().createElement(Le,{id:"widget-chart-".concat(t),title:r,headerStyle:s,icons:u,isDraggable:I.isDraggable,confirmDelete:a,onDelete:y,toggleDeleteConfirm:d,topRightItems:p},o().createElement(Ne.Z,{footer:T.totalFeatures?o().createElement("div",{style:{height:"30px",overflow:"hidden"}},n?o().createElement("span",{style:{float:"right"}},o().createElement(Ve.Z,null)):null,void 0===C&&o().createElement("span",{style:{float:"left",margin:"5px"}},o().createElement(Re.Z,{msgId:"featuregrid.resultInfoVirtual",msgParams:{total:T.totalFeatures}}))):null},o().createElement(lt,{emptyRowsView:function(){return o().createElement(it.Z,{loading:n},o().createElement(ze.Z,{messageId:"featuregrid.noFeaturesAvailable",glyph:"features-grid"}))},gridEvents:g,sortable:!0,defaultSize:!1,columnSettings:E,pageEvents:h,virtualScroll:F,enableColumnFilters:c,filterRenderers:w,features:S,pages:j,error:C,size:P,rowKey:"id",describeFeatureType:O,pagination:T})))}));var st=r(80844);function ut(){return(ut=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var pt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.showTable,r=e.toggleTableView,n=void 0===r?function(){}:r;return t?o().createElement(we.Glyphicon,{onClick:function(){n()},glyph:"arrow-left pull-left"}):null},ft=r(46173),dt=r(70919);function mt(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var yt=(0,ft.Z)()(dt.Z),bt=(0,i.compose)($.Z,q.Z,H.Z,O.Z,s)((function(e){var t=e.id,r=e.title,n=e.description,i=e.headerStyle,a=e.data,l=void 0===a?[]:a,c=e.series,s=void 0===c?[]:c,u=e.loading,p=e.icons,f=e.showTable,d=e.topRightItems,m=e.confirmDelete,y=void 0!==m&&m,b=e.dataGrid,g=void 0===b?{}:b,v=e.onDelete,h=void 0===v?function(){}:v,O=e.toggleTableView,w=void 0===O?function(){}:O,E=e.toggleDeleteConfirm,S=void 0===E?function(){}:E,P=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["id","title","description","headerStyle","data","series","loading","icons","showTable","topRightItems","confirmDelete","dataGrid","onDelete","toggleTableView","toggleDeleteConfirm"]);return o().createElement(Le,{id:"widget-chart-".concat(t),headerStyle:i,isDraggable:g.isDraggable,title:r,icons:p,topLeftItems:Ze({loading:u,title:r,description:n,showTable:f,toggleTableView:w}),confirmDelete:y,onDelete:h,toggleDeleteConfirm:S,topRightItems:d},f?o().createElement(Ce,_e({data:l},P)):o().createElement(De,_e({id:t,isAnimationActive:!u,loading:u,data:l,series:s,iconFit:!0},P)))})),gt=(0,i.compose)(v)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.toggleDeleteConfirm,r=void 0===t?function(){}:t,n=e.icons,i=e.topLeftItems,a=e.id,l=e.title,c=e.text,s=e.headerStyle,u=e.topRightItems,p=e.dataGrid,f=void 0===p?{}:p,d=e.confirmDelete,m=void 0!==d&&d,y=e.onDelete,b=void 0===y?function(){}:y;return o().createElement(Le,{id:"widget-text-".concat(a),title:l,confirmDelete:m,onDelete:b,toggleDeleteConfirm:r,headerStyle:s,isDraggable:f.isDraggable,icons:n,topLeftItems:i,topRightItems:u},o().createElement(Ge,{text:c}))})),vt=(0,i.compose)($.Z,he,Oe("center"),Oe("zoom"),fe,h)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.updateProperty,r=void 0===t?function(){}:t,n=e.toggleDeleteConfirm,i=void 0===n?function(){}:n,a=e.id,l=e.title,c=e.map,s=e.icons,u=e.hookRegister,p=e.mapStateSource,f=e.topRightItems,d=e.confirmDelete,m=void 0!==d&&d,y=e.loading,b=void 0!==y&&y,g=e.dataGrid,v=void 0===g?{}:g,h=e.onDelete,O=void 0===h?function(){}:h,w=e.headerStyle,E=e.env,S=c.size,P=S.height,j=S.width,C=c.mapInfoControl,x=P>400&&j>400&&C;return o().createElement(Le,{id:"widget-text-".concat(a),title:l,confirmDelete:m,onDelete:O,toggleDeleteConfirm:i,headerStyle:w,icons:s,topRightItems:f,isDraggable:v.isDraggable},o().createElement(Ne.Z,{footer:o().createElement("div",{style:{height:"30px",overflow:"hidden"}},b?o().createElement("span",{style:{float:"right"}},o().createElement(Ve.Z,null)):null)},o().createElement(Ye,{tools:x?["popup"]:[],updateProperty:r,id:a,map:$e({},We()(c,"mapStateSource")),mapStateSource:p,hookRegister:u,layers:c&&c.layers,options:{style:{margin:10,height:"calc(100% - 20px)"}},env:E})))})),ht=(0,i.compose)($.Z,H.Z,q.Z,V,b)(ct),Ot=(0,i.compose)($.Z,q.Z,H.Z,w.Z,u)((function(e){var t=e.id,r=e.title,n=e.description,i=e.data,a=void 0===i?[]:i,l=e.series,c=void 0===l?[]:l,s=e.loading,u=e.showTable,p=e.confirmDelete,f=void 0!==p&&p,d=e.headerStyle,m=e.icons,y=e.topRightItems,b=e.dataGrid,g=void 0===b?{}:b,v=e.toggleTableView,h=void 0===v?function(){}:v,O=e.toggleDeleteConfirm,w=void 0===O?function(){}:O,E=e.onDelete,S=void 0===E?function(){}:E,P=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["id","title","description","data","series","loading","showTable","confirmDelete","headerStyle","icons","topRightItems","dataGrid","toggleTableView","toggleDeleteConfirm","onDelete"]);return o().createElement(Le,{className:"counter-widget",id:"widget-chart-".concat(t),title:r,isDraggable:g.isDraggable,icons:m,topLeftItems:pt({loading:s,title:r,description:n,showTable:u,toggleTableView:h}),confirmDelete:f,onDelete:S,toggleDeleteConfirm:w,headerStyle:d,topRightItems:y},o().createElement(st.Z,ut({id:t,isAnimationActive:!s,loading:s,data:a,series:c,iconFit:!0},P)))})),wt=(0,i.compose)($.Z,g.Z)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.toggleDeleteConfirm,r=void 0===t?function(){}:t,n=e.id,i=e.title,a=e.icons,l=e.headerStyle,c=e.confirmDelete,s=void 0!==c&&c,u=e.topRightItems,p=e.dataGrid,f=void 0===p?{}:p,d=e.onDelete,m=void 0===d?function(){}:d,y=mt(e,["toggleDeleteConfirm","id","title","icons","headerStyle","confirmDelete","topRightItems","dataGrid","onDelete"]);return o().createElement(Le,{id:"widget-text-".concat(n),title:i,confirmDelete:s,onDelete:m,toggleDeleteConfirm:r,headerStyle:l,icons:a,topRightItems:u,isDraggable:f.isDraggable},o().createElement(yt,y))}));function Et(){return(Et=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function St(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}const Pt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dependencies,r=e.toggleCollapse,n=void 0===r?function(){}:r,i=e.exportCSV,a=void 0===i?function(){}:i,l=e.exportImage,c=void 0===l?function(){}:l,s=e.onDelete,u=void 0===s?function(){}:s,p=e.onEdit,f=void 0===p?function(){}:p,d=St(e,["dependencies","toggleCollapse","exportCSV","exportImage","onDelete","onEdit"]);return"text"===d.widgetType?o().createElement(gt,Et({},d,{toggleCollapse:n,onDelete:u,onEdit:f})):"table"===d.widgetType?o().createElement(ht,Et({},d,{toggleCollapse:n,exportCSV:a,dependencies:t,onDelete:u,onEdit:f})):"counter"===d.widgetType?o().createElement(Ot,Et({},d,{toggleCollapse:n,dependencies:t,onDelete:u,onEdit:f})):"map"===d.widgetType?o().createElement(vt,Et({},d,{toggleCollapse:n,dependencies:t,onDelete:u,onEdit:f})):"legend"===d.widgetType?o().createElement(wt,Et({},d,{toggleCollapse:n,dependencies:t,onDelete:u,onEdit:f})):o().createElement(bt,Et({},d,{toggleCollapse:n,exportCSV:a,dependencies:t,exportImage:c,onDelete:u,onEdit:f}))}},70919:(e,t,r)=>{"use strict";r.d(t,{Z:()=>g});var n=r(5053),o=r.n(n),i=r(14293),a=r.n(i),l=r(13218),c=r.n(l),s=r(38064),u=r(30294),p=r(1036),f=r(62770);function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){b(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function b(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const g=function(e){var t=e.layers,r=void 0===t?[]:t,n=e.onChange,i=void 0===n?function(){}:n,l=e.legendProps,m=void 0===l?{}:l,b=e.currentZoomLvl,g=e.disableOpacitySlider,v=void 0===g||g,h=e.disableVisibility,O=void 0===h||h,w=e.scales,E=e.language,S=e.currentLocale;return o().createElement(s.Z,{className:"compact-legend-grid",size:"sm",items:r.map((function(e){return{title:e.title&&c()(e.title)&&(e.title[S]||e.title.default)||e.title,preview:O?null:o().createElement(u.Glyphicon,{className:"text-primary",glyph:e.visibility?"eye-open":"eye-close"}),style:{opacity:e.visibility?1:.4},body:e.visibility?o().createElement("div",null,o().createElement(u.Grid,{fluid:!0},o().createElement(u.Row,null,o().createElement(u.Col,{xs:12,className:"ms-legend-container"},o().createElement(f.Z,d({node:y({},e),currentZoomLvl:b,scales:w,language:E},m))))),!v&&o().createElement("div",{className:"mapstore-slider",onClick:function(e){e.stopPropagation()}},o().createElement(p.Z,{disabled:!e.visibility,start:[a()(e.opacity)?100:Math.round(100*e.opacity)],range:{min:0,max:100},onChange:function(t){return i(e.id,"layers",{opacity:parseFloat((t[0]/100).toFixed(2))})}}))):null}}))})}},92936:(e,t,r)=>{"use strict";r.d(t,{Z:()=>d});var n=r(49848),o=r(7848),i=r(91812),a=r(37981),l=r(57068),c=r(19180),s=r(69705),u=r(63721),p=r(61928),f=r(19983);const d=(0,n.compose)(s.Z,(0,i.Z)(0),o.Z,f.Z,c.Z,u.dY,u.yM,a.Z,l.e)(p.Z)},99707:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(5053),o=r.n(n),i=r(30294),a=r(45697),l=r(5346);function c(e){var t=e.glyph,r=void 0===t?"info-sign":t,n=e.messageId;return o().createElement("div",{className:"ms-widget-empty-message"},o().createElement(i.Glyphicon,{glyph:r}),"  ",o().createElement(l.Z,{msgId:n}))}c.propTypes={messageId:a.PropTypes.string,glyph:a.PropTypes.string};const s=c},74226:(e,t,r)=>{"use strict";r.d(t,{ZP:()=>w});var n=r(89255),o=r(24261),i=r.n(o),a=r(62192),l=r(8797),c=r(89602),s=r(80416),u=r(58767),p=r(82904),f=r(33528),d=r(21914),m=r(7147),y=r(97266),b=r(1550),g=r(42780);function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){O(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function O(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const w={addAnnotationFromMeasureEpic:function(e){return e.ofType(c.XX).switchMap((function(e){var t=e.features,r=e.textLabels,o=e.uom,l=e.save,s=e.properties||{},f=s.id,d=void 0===f?i()():f,m=s.visibility,y=void 0===m||m,b=h(h({},(0,a.tL)(t,r,o,d,"Annotations created from measurements",u.Eo)),{},{newFeature:l,visibility:y});return n.Observable.of((0,p.Xi)("annotations",null),(0,g.A9)(),(0,c.el)("exportToAnnotation",!1),(0,g.yg)(b))}))},addAsLayerEpic:function(e){return e.ofType(c.Wt).switchMap((function(e){var t=e.features,r=e.textLabels,o=e.uom,l=(0,a.tL)(t,r,o,i()());return n.Observable.of((0,s.A4)({type:"vector",id:i()(),name:"Measurements",hideLoading:!0,features:[l],visibility:!0}))}))},openMeasureEpic:function(e,t){return e.ofType(p.At).filter((function(e){return"measure"===e.control&&e.value&&(0,m.Iz)(t.getState())})).switchMap((function(){return n.Observable.of((0,f.YV)(),(0,d.g)(),(0,d.aN)())}))},closeMeasureEpics:function(e,t){return e.ofType(p.kM).filter((function(e){return"measure"===e.control&&!(0,m.QF)(t.getState())})).switchMap((function(){return n.Observable.of((0,g.Rx)())}))},setMeasureStateFromAnnotationEpic:function(e,t){return e.ofType(c.ES).switchMap((function(e){var r,o,i=e.features,l=e.properties,s=(0,y.on)(t.getState())===(null===(r=(0,a.k2)(i))||void 0===r?void 0:r[0]);return n.Observable.of(!s&&(0,c.Bd)({geomType:null===(o=(0,a.k2)(i))||void 0===o?void 0:o[0]}),(0,p.Xg)("measure","enabled",!0),(0,p.Xg)("annotations","enabled",!1),(0,g.r1)(l.id,!1))}))},addCoordinatesEpic:function(e,t){var r=t.getState,o=void 0===r?function(){}:r;return e.ofType(b.TR).filter((function(){var e=o().controls.measure,t=e.showCoordinateEditor,r=e.enabled;return t&&r})).switchMap((function(e){var t,r,i,a=e.point,s=(null===(t=o())||void 0===t?void 0:t.measurement)||{},u=s.currentFeature,p=s.features,f=void 0===p?[]:p,d=s.geomType,m=(null==a?void 0:a.latlng)||{},y=m.lng,b=m.lat,g=(null===(r=f[u])||void 0===r||null===(i=r.geometry)||void 0===i?void 0:i.coordinates)||[],v=void 0!==(g="Polygon"===d?g[0]:g)?g.findIndex((function(e){return!(0,l.wd)(e)})):-1;return-1!==v?((g=g.map((function(e){return{lon:e[0],lat:e[1]}})))[v]={lon:y,lat:b},n.Observable.of((0,c.dD)(g))):n.Observable.empty()}))}}},94943:(e,t,r)=>{"use strict";r.d(t,{ZP:()=>$});var n=r(89255),o=r(27361),i=r.n(o),a=r(91175),l=r.n(a),c=r(1469),s=r.n(c),u=r(41106),p=r.n(u),f=r(97395),d=r(80416),m=r(60604),y=r(90825),b=r(80833),g=r(82904),v=r(24262),h=r(96909),O=r(9082),w=r(75875),E=r.n(w),S=r(19155),P=r.n(S),j=r(84596),C=r.n(j),x=r(99009);function T(e){return function(e){if(Array.isArray(e))return k(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return k(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?k(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function A(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?I(Object(r),!0).forEach((function(t){F(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function F(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const D=function(e){var t=e.baseUrl,r=e.layerName,n=e.styles,o=void 0===n?[]:n,i=e.options,a=void 0===i?{}:i,l=(0,x.$N)(r),c=l.name,s=l.workspace,u="".concat(t,"rest/").concat(s&&"workspaces/".concat(s,"/")||"","layers/").concat(c,".json");return E().get(u,a).then((function(e){var t=e.data.layer||{},r=t.styles&&t.styles.style&&C()(t.styles.style)||[],n=o.map((function(e){return e.name})),i=r.filter((function(e){var t=e.name;return-1===n.indexOf(t)}));return{layer:A(A({},t),{},{styles:{"@class":"linked-hash-set",style:i}})}})).then((function(e){return E().put(u,e).then((function(){return e}))}))},R=function(e){var t=e.baseUrl,r=e.layerName,n=e.styles,o=void 0===n?[]:n,i=e.options,a=void 0===i?{}:i,l=(0,x.$N)(r),c=l.name,s=l.workspace,u="".concat(t,"rest/").concat(s&&"workspaces/".concat(s,"/")||"","layers/").concat(c,".json");return E().get(u,a).then((function(e){var t=e.data.layer||{},r=t.styles&&t.styles.style&&C()(t.styles.style)||[];return{layer:A(A({},t),{},{styles:{"@class":"linked-hash-set",style:[].concat(T(r),T(o))}})}})).then((function(e){return E().put(u,e).then((function(){return e}))}))},N=function(e){var t=e.baseUrl,r=e.layerName,n=e.styleName,o=e.options,i=void 0===o?{}:o,a=(0,x.$N)(r),l=a.name,c=a.workspace,s="".concat(t,"rest/").concat(c&&"workspaces/".concat(c,"/")||"","layers/").concat(l,".json");return E().get(s,i).then((function(e){var t=e.data.layer||{},r=t.styles&&t.styles.style&&C()(t.styles.style)||[],o=t.defaultStyle||{},i=P()([o].concat(T(r)),"name");return{layer:A(A({},t),{},{defaultStyle:{name:n},styles:{"@class":"linked-hash-set",style:i}})}})).then((function(e){return E().put(s,e).then((function(){return e}))}))};var M=r(93222),L=r(75110),_=r(7147),Z=r(8954);function B(e){return function(e){if(Array.isArray(e))return z(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return z(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?z(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function G(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function U(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?G(Object(r),!0).forEach((function(t){W(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):G(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function W(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var V=function(e){var t=e.status,r=e.styleName,o=e.baseUrl;return"edit"===t?n.Observable.defer((function(){return O.ZP.getStyleCodeByName({baseUrl:o,styleName:r})})).switchMap((function(e){return n.Observable.of((0,h.FU)({languageVersion:e.languageVersion,code:e.code,templateId:"",format:e.format,init:!0}))})).catch((function(e){return n.Observable.of((0,h.Fe)("edit",e))})):n.Observable.empty()},q=function(e){var t=e.styleName,r=e.baseUrl,o=e.onSuccess$,i=e.onError$;return n.Observable.defer((function(){return O.ZP.deleteStyle({baseUrl:r,styleName:t})})).switchMap((function(){return o||n.Observable.empty()})).catch((function(){return i||n.Observable.empty()}))},H=function(e){var t=e.baseUrl,r=e.update,o=e.code,i=e.format,a=e.styleName,l=e.status,c=e.languageVersion,u=e.options,p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return n.Observable.defer((function(){return O.ZP[r?"updateStyle":"createStyle"]({baseUrl:t,code:o,format:i,styleName:a,languageVersion:c,options:u})})).switchMap((function(){var e;return s()(p)&&(e=n.Observable).of.apply(e,[(0,h.Wm)()].concat(B(p)))||p})).catch((function(e){var t;return(t=n.Observable).of.apply(t,[(0,h.Fe)(l,e),(0,h.Wm)()].concat(B(f)))})).startWith((0,h.pt)(l))};const $={toggleStyleEditorEpic:function(e,t){return e.ofType(h.vZ).filter((function(){return!(0,M.aN)(t.getState())})).switchMap((function(e){var r=t.getState(),o=(0,L.jN)(r),a=!!i()(o,"options.availableStyles");if(!e.enabled)return function(e){var t=(0,M.gc)(e),r=(0,M.Z0)(e).baseUrl,o=void 0===r?"":r;return n.Observable.of((0,h.l1)(),(0,m.fU)({owner:x.s1})).merge(t?q({styleName:t,baseUrl:o}):n.Observable.empty())}(r);if((0,M.ji)(r)&&a)return n.Observable.empty();var l=e.layer||(0,L.Iz)(r);if(!l||l&&!l.url)return n.Observable.empty();var c=(0,v.Nd)(l);if(!c)return l.availableStyles?n.Observable.of((0,d.Xy)({availableStyles:l.availableStyles}),(0,h.Wm)()):(0,b.kB)(l).switchMap((function(e){var t=(0,v.IA)(e);return t.availableStyles?n.Observable.of((0,d.Xy)({availableStyles:t.availableStyles}),(0,d.tV)(l.id,"layer",U({},t)),(0,h.Wm)()):n.Observable.of((0,h.Fe)("availableStyles",{status:401}),(0,h.Wm)())})).startWith((0,h.pt)("global"));var s=l.url.split(c),u="".concat(s[0]).concat(c),p=(0,M.Z0)(r);return n.Observable.defer((function(){return(0,Z.eb)({baseUrl:u,styleService:p})})).switchMap((function(e){var t,r=[(0,h.E0)(e)];return(t=(0,b.kB)(l).switchMap((function(e){var t=(0,v.IA)(e);return t.availableStyles?n.Observable.defer((function(){return O.ZP.getStylesInfo({baseUrl:u,styles:t&&t.availableStyles||[]})})).switchMap((function(e){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return n.Observable.of((0,m.W)(l.id,x.s1,"override",{}),(0,d.Xy)({availableStyles:e}),(0,d.tV)(l.id,"layer",U(U({},t),{},{availableStyles:e})),(0,h.Wm)())}(e)})):n.Observable.of((0,h.Fe)("availableStyles",{status:401}),(0,h.Wm)())}))).startWith.apply(t,r).catch((function(e){var t=-1!==e.message.indexOf("could not be unmarshalled")?"parsingCapabilities":"global";return n.Observable.of((0,h.Fe)(t,e),(0,h.Wm)())}))})).startWith((0,h.pt)("global"),(0,h.l1)())}))},updateLayerOnStatusChangeEpic:function(e,t){return e.ofType(h.g$).filter((function(e){return!!e.status})).switchMap((function(r){var o=t.getState(),i=(0,M.Vf)(o),a=i&&i.params||{},l=i&&!i.describeFeatureType&&(0,y.H)(i.url,i,{query:a}),c=(0,M.i7)(o)||i.availableStyles&&i.availableStyles[0]&&i.availableStyles[0].name,s=(0,M.Ri)(o),u=(0,M.Z0)(o).baseUrl,p=void 0===u?"":u;return l&&function(e,t){var r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return!0},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){};return(r=n.Observable).of.apply(r,[(0,h.pt)("global")].concat(B(i))).merge(e.ofType(d.K$).filter((function(){var e=(0,L.Iz)(t.getState());return o(e)})).switchMap((function(){var e=(0,L.Iz)(t.getState());return a(e)})).catch((function(e){return n.Observable.of((0,h.Fe)("global",e),(0,h.Wm)())})).takeUntil(e.ofType(h.E2)))}(e,t,(function(e){return e&&e.describeLayer}),[l],(function(e){return n.Observable.concat(V({status:r.status,styleName:c,baseUrl:p}),n.Observable.of((0,h.xR)(!(e&&e.describeLayer&&401===e.describeLayer.error)),(0,h.bB)({editorType:s.msEditorType||"textarea",styleJSON:s.msStyleJSON}),(0,h.Wm)()))}))||n.Observable.concat(V({status:r.status,styleName:c,baseUrl:p}),n.Observable.of((0,h.bB)({editorType:s.msEditorType||"textarea",styleJSON:s.msStyleJSON})))}))},updateTemporaryStyleEpic:function(e,t){return e.ofType(h.TB,h.DX).switchMap((function(e){var r=t.getState(),n=(0,M.gc)(r),o=(0,M.Vf)(r),i=(0,x.$N)(o.name).workspace,a=e.format&&e.format!==(0,M.iB)(r),l=n||"".concat(i?"".concat(i,":"):"").concat((0,x.Vi)()),c=e.format||(0,M.iB)(r),s=(0,M.ex)(r),u=(0,M.Z0)(r).baseUrl,p=void 0===u?"":u,d=(0,M.j5)(r),y="sld"===c&&(e.code||"").match(/version=\"1\.1\.0\"/)&&{version:"1.1.0"}||e.format&&!e.languageVersion&&{version:"1.0.0"}||e.languageVersion||{version:"1.0.0"},b=d.version!==y.version?{params:{raw:!0}}:{},g=y,v=function(t){return H({update:!0,code:e.code,format:c,styleName:t,status:s,baseUrl:p,languageVersion:g,options:b},[(0,m.B1)(x.s1,[{style:t,_v_:Date.now(),singleTile:!0}]),(0,h.k5)({temporaryId:t,templateId:e.templateId||"",code:e.code,format:c,init:e.init,languageVersion:g})],"edit"===s?[]:[(0,f.vU)({title:"styleeditor.updateTmpErrorTitle",message:"styleeditor.updateTmpStyleErrorMessage",uid:"updateTmpStyleError",autoDismiss:5})])},O=("css"===c?"* { stroke: #888888; }":"sld"===c&&'<?xml version="1.0" encoding="ISO-8859-1"?>\n<StyledLayerDescriptor version="1.0.0"\n\t\txsi:schemaLocation="http://www.opengis.net/sld StyledLayerDescriptor.xsd"\n\t\txmlns="http://www.opengis.net/sld"\n\t\txmlns:ogc="http://www.opengis.net/ogc"\n\t\txmlns:xlink="http://www.w3.org/1999/xlink"\n\t\txmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">\n\n\t<NamedLayer>\n\t\t<Name>Default Style</Name>\n\t\t<UserStyle>\n\t\t\t<Title>${styleTitle}</Title>\n\t\t\t<Abstract>${styleAbstract}</Abstract>\n\t\t\t<FeatureTypeStyle>\n\t\t\t\t<Rule>\n\t\t\t\t\t<Name>Rule Name</Name>\n\t\t\t\t\t<Title>Rule Title</Title>\n\t\t\t\t\t<Abstract>Rule Abstract</Abstract>\n\t\t\t\t\t<LineSymbolizer>\n\t\t\t\t\t\t<Stroke>\n\t\t\t\t\t\t\t<CssParameter name="stroke">#0000FF</CssParameter>\n\t\t\t\t\t\t</Stroke>\n\t\t\t\t\t\t</LineSymbolizer>\n\t\t\t\t\t<PointSymbolizer>\n\t\t\t\t\t\t<Graphic>\n\t\t\t\t\t\t\t<Mark>\n\t\t\t\t\t\t\t\t<WellKnownName>square</WellKnownName>\n\t\t\t\t\t\t\t\t<Fill>\n\t\t\t\t\t\t\t\t\t<CssParameter name="fill">#FF0000</CssParameter>\n\t\t\t\t\t\t\t\t</Fill>\n\t\t\t\t\t\t\t</Mark>\n\t\t\t\t\t\t</Graphic>\n\t\t\t\t\t</PointSymbolizer>\n\t\t\t\t\t</Rule>\n\t\t\t\t</FeatureTypeStyle>\n\t\t\t</UserStyle>\n\t\t</NamedLayer>\n\t</StyledLayerDescriptor>\n')||"",w=function(e){return H({code:O,format:c,styleName:e,status:s,baseUrl:p},v(e),[(0,f.vU)({title:"styleeditor.createTmpErrorTitle",message:"styleeditor.createTmpStyleErrorMessage",uid:"createTmpStyleError",autoDismiss:5}),(0,h.k5)({temporaryId:null,templateId:"",code:"",format:"",init:"",languageVersion:null})])};return a&&n&&q({styleName:n,baseUrl:p,onSuccess$:w("".concat(i?"".concat(i,":"):"").concat((0,x.Vi)())),onError$:v(l)})||n&&v(l)||w(l)}))},createStyleEpic:function(e,t){return e.ofType(h.vA).switchMap((function(e){var r=t.getState(),o=(0,M.gB)(r),i=(0,M.Vf)(r),a=(0,x.$N)(i.name).workspace,c="".concat(a?"".concat(a,":"):"").concat((0,x.nK)(e.settings)),s=(0,M.iB)(r),u=e.settings||{},y=u.title,b=void 0===y?"":y,g=u._abstract,v=void 0===g?"":g,w=(0,M.Z0)(r).baseUrl,E=void 0===w?"":w,S=U({title:b,description:v},{msStyleJSON:null,msEditorType:"visual"});return n.Observable.defer((function(){return O.ZP.createStyle({baseUrl:E,code:p()(o)({styleTitle:b,styleAbstract:v}),format:s,styleName:c,metadata:S})})).switchMap((function(){return n.Observable.of((0,m.B1)(x.s1,[{}]),(0,d.Xy)({style:c||""},!0),(0,h.Nf)(""),(0,h.Wm)()).merge(function(e){var t=e.baseUrl,r=e.layer,o=e.styleName,i=e.format,a=e.title,c=e._abstract,s=e.metadata;return n.Observable.defer((function(){return R({baseUrl:t,layerName:r.name,styles:[{name:o}]})})).switchMap((function(){var e=U({filename:"".concat(o,".").concat(i),format:i,name:o,title:a,_abstract:c},s&&{metadata:s}),t=l()(r.availableStyles),u=r.availableStyles&&[t,e].concat(B(r.availableStyles.filter((function(e,t){return t>0}))))||[e];return n.Observable.of((0,d.Xy)({availableStyles:u},!0),(0,h.Wm)())})).catch((function(){return n.Observable.of((0,h.Wm)())})).startWith((0,h.pt)("global"))}({layer:i,styleName:c,format:s,title:b,_abstract:v,baseUrl:E,metadata:S}))})).catch((function(e){return n.Observable.of((0,h.Fe)("",e),(0,h.Wm)(),(0,f.vU)({title:"styleeditor.createStyleErrorTitle",message:"styleeditor.createStyleErrorMessage",uid:"createStyleError",autoDismiss:5}))})).startWith((0,h.pt)(""))}))},updateStyleCodeEpic:function(e,t){return e.ofType(h.ch).switchMap((function(){var e=t.getState(),r=(0,M.iB)(e),o=(0,M.j5)(e),i=(0,M.gB)(e),a=(0,M.i7)(e),l=(0,M.gc)(e),c=(0,M.Vf)(e),s=(0,M.Z0)(e).baseUrl,u=void 0===s?"":s,p=(0,M.WW)(e)||{},m={msStyleJSON:p.styleJSON||null,msEditorType:p.editorType},y=(c.availableStyles||[]).map((function(e){return e.name===a?U(U({},e),{},{metadata:U(U({},e.metadata),m)}):e}));return n.Observable.defer((function(){return O.ZP.updateStyle({baseUrl:u,code:i,format:r,styleName:a,languageVersion:o,options:{params:{raw:!0}},metadata:m})})).switchMap((function(){return n.Observable.of((0,h.Wm)(),(0,d.tV)(c.id,"layer",{_v_:Date.now(),availableStyles:y}),(0,d.Xy)({availableStyles:y}),(0,h.k5)({temporaryId:l,templateId:"",code:i,format:r,init:!0,languageVersion:o}),(0,f.Vp)({title:"styleeditor.savedStyleTitle",message:"styleeditor.savedStyleMessage",uid:"savedStyleTitle",autoDismiss:5}))})).catch((function(e){return n.Observable.of((0,h.Fe)("global",e),(0,h.Wm)(),(0,f.vU)({title:"styleeditor.updateStyleErrorTitle",message:"styleeditor.updateStyleErrorMessage",uid:"updateStyleError",autoDismiss:5}))})).startWith((0,h.pt)("global"))}))},deleteStyleEpic:function(e,t){return e.ofType(h.j1).filter((function(e){return!!e.styleName})).switchMap((function(e){var r=e.styleName,o=t.getState(),i=(0,M.Vf)(o),a=(0,M.Z0)(o).baseUrl,l=void 0===a?"":a,c=(0,_.tL)(o),s=(0,_.Gd)(o);return n.Observable.defer((function(){return D({baseUrl:l,layerName:i.name,styles:[{name:r}]})})).switchMap((function(){var e=i.availableStyles&&i.availableStyles.filter((function(e){return e.name!==r}))||[];return n.Observable.concat(n.Observable.of((0,d.Xy)({style:"",availableStyles:e},!0),(0,h.Wm)(),(0,g.Xg)("layersettings","originalSettings",U(U({},c),{},{style:""})),(0,g.Xg)("layersettings","initialSettings",U(U({},s),{},{style:""}))),q({styleName:r,baseUrl:l,onSuccess$:n.Observable.of((0,f.Vp)({title:"styleeditor.deletedStyleSuccessTitle",message:"styleeditor.deletedStyleSuccessMessage",uid:"deletedStyleSuccess",autoDismiss:5})),onError$:n.Observable.of((0,f.vU)({title:"styleeditor.deletedStyleErrorTitle",message:"styleeditor.deletedStyleErrorMessage",uid:"deletedStyleError",autoDismiss:5}))}))})).catch((function(){return n.Observable.of((0,h.Wm)())})).startWith((function(){return n.Observable.of((0,h.pt)("global"))}))}))},setDefaultStyleEpic:function(e,t){return e.ofType(h.rb).switchMap((function(){var e=t.getState(),r=(0,M.Z0)(e).baseUrl,o=void 0===r?"":r,i=(0,M.Vf)(e),a=(0,M.i7)(e);return n.Observable.defer((function(){return N({baseUrl:o,layerName:i.name,styleName:a})})).switchMap((function(){var e=i.availableStyles.filter((function(e){var t=e.name;return a===t})),t=i.availableStyles.filter((function(e){var t=e.name;return a!==t})),r=[].concat(B(e),B(t));return n.Observable.of((0,d.Xy)({availableStyles:r},!0),(0,f.Vp)({title:"styleeditor.setDefaultStyleSuccessTitle",message:"styleeditor.setDefaultStyleSuccessMessage",uid:"setDefaultStyleSuccess",autoDismiss:5}),(0,h.Wm)())})).startWith((0,h.pt)("global")).catch((function(){return n.Observable.of((0,f.vU)({title:"styleeditor.setDefaultStyleErrorTitle",message:"styleeditor.setDefaultStyleErrorMessage",uid:"setDefaultStyleError",autoDismiss:5}),(0,h.Wm)())}))}))}}},88395:(e,t,r)=>{"use strict";r.d(t,{ZP:()=>B});var n=r(89255),o=r(66654),i=r.n(o),a=r(18721),l=r.n(a),c=r(27361),s=r.n(c),u=r(64721),p=r.n(u),f=r(18446),d=r.n(f),m=r(57557),y=r.n(m),b=r(14176),g=r.n(b),v=r(57579),h=r(81808),O=r(25958),w=r(80416),E=r(75110),S=r(24684),P=r(69293),j=r(55927),C=r(87392),x=r(78598),T=r(89077),k=r(17542),I=r.n(k),A=r(59425),F=r.n(A);function D(e){return function(e){if(Array.isArray(e))return R(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return R(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?R(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function N(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function M(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?N(Object(r),!0).forEach((function(t){L(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):N(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function L(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var _=function(e){return e.ofType(P.WC,P.a3,P.W5).startWith({type:h.ok}).switchMap((function(t){return t.type===P.WC?n.Observable.never():e})).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type;return t===C.nk}))},Z=function(e,t,r,o){return n.Observable.of((0,v.Rz)("mapSync",e),(0,v.Rz)("dependenciesMap",function(e,t,r){var n,o=r.dependenciesMap,a=r.mappings,l=["layer","filter","quickFilters","options"],c=["layers","viewport","zoom","center"],s=(v.oU.exec(t)||[])[1],u=g()(o,(function(e){return-1===e.indexOf(s)})),f=Object.keys(a).filter((function(e){return void 0!==a[e]})).reduce((function(e,r){return!i()(t,"map")&&p()(l,r)?M(M({},e),{},L({},r,"".concat(t,".").concat(a[r]))):i()(t,"map")?p()(c,r)?M(M({},e),{},L({},r,"map"===t?a[r]:"".concat(t,".").concat(a[r]))):M(M({},e),{},L({},r,"".concat(t.replace(".map",""),".").concat(a[r]))):e}),{});return e?M(M(M({},u),f),{},(L(n={},"dependenciesMap","".concat(t.replace(".map",""),".dependenciesMap")),L(n,"mapSync","".concat(t.replace(".map",""),".mapSync")),n)):y()(u,[Object.keys(a)])}(e,t,r)))};const B={exportWidgetData:function(e){return e.ofType(v.Km).do((function(e){var t=e.data,r=void 0===t?[]:t,n=e.title,o=void 0===n?"data":n;return I().json2csv(r,(function(e,t){return e?null:(0,x.saveAs)(new Blob([t],{type:"text/csv"}),o+".csv")}))})).filter((function(){return!1}))},alignDependenciesToWidgets:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.getState,n=void 0===r?function(){}:r;return e.ofType(h.ok,j.E9,v.Jm).map((function(){return(0,O.jx)(n())})).pluck("availableDependencies").distinctUntilChanged((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return d()(D(e),D(t))})).map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,v._k)(e.reduce((function(e,t){var r,n,o=t.replace(".map","");return i()(t,"map")?M(M({},e),{},(L(r={},"".concat(o,".dependenciesMap"),"".concat(o,".dependenciesMap")),L(r,"".concat(o,".mapSync"),"".concat(o,".mapSync")),L(r,"map"===t?"viewport":"".concat(t,".viewport"),"".concat(t,".bbox")),L(r,"map"===t?"center":"".concat(t,".center"),"".concat(t,".center")),L(r,"map"===t?"zoom":"".concat(t,".zoom"),"".concat(t,".zoom")),L(r,"map"===t?"layers":"".concat(t,".layers"),"map"===t?"layers.flat":"".concat(t,".layers")),r)):M(M({},e),{},(L(n={},"".concat(t,".filter"),"".concat(t,".filter")),L(n,"".concat(t,".quickFilters"),"".concat(t,".quickFilters")),L(n,"".concat(o,".dependenciesMap"),"".concat(o,".dependenciesMap")),L(n,"".concat(o,".mapSync"),"".concat(o,".mapSync")),L(n,"".concat(t,".layer"),"".concat(t,".layer")),L(n,"".concat(t,".options"),"".concat(t,".options")),n))}),{}))}))},toggleWidgetConnectFlow:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.getState,o=void 0===r?function(){}:r;return e.ofType(v.LH).switchMap((function(t){var r=t.active,i=t.availableDependencies,a=void 0===i?[]:i,l=t.options;return r&&a.length>0?1===a.length?Z(r,a[0],l):n.Observable.of((0,v.kr)(r,{availableDependencies:a})).merge(e.ofType(v.V5).filter((function(){return(0,O.xI)(o())})).switchMap((function(e){var t=e.widget,i=s()((0,O.r0)(o()),"availableDependencies").filter((function(e){return(v.oU.exec(e)||[])[1]===t.id}));return Z(r,i[0],l,t.dependeciesMap).concat(n.Observable.of((0,v.kr)(!1,{})))})).takeUntil(e.ofType(C.nk).merge(e.filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type,r=e.key;return t===v.Cz&&r===v.jv}))))):Z(r,a[0],l)}))},clearWidgetsOnLocationChange:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.getState,o=void 0===r?function(){}:r;return e.ofType(h.ok).switchMap((function(){var t=(0,S.F)(o()).split("/"),r=t[t.length-1];return e.let(_).filter((function(){var e=(0,S.F)(o()).split("/");return e[e.length-1]!==r})).switchMap((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.payload,r=void 0===t?{}:t;return r&&r.location&&r.location.pathname?n.Observable.of((0,v.K4)()):n.Observable.empty()}))}))},exportWidgetImage:function(e){return e.ofType(v.pV).do((function(e){var t,r,n=e.widgetDivId,o=e.title,i=void 0===o?"data":o,a=document.createElement("canvas"),l=document.querySelector("#".concat(n," .recharts-wrapper svg")),c=l.outerHTML?l.outerHTML:(t=l,(r=document.createElement("div")).appendChild(t.cloneNode(!0)),r.innerHTML);F()(a,c,{renderCallback:function(){var e=a.getContext("2d");e.globalCompositeOperation="destination-over",e.fillStyle="#fff",e.fillRect(0,0,a.width,a.height),(0,T.RP)(a.toDataURL("image/jpeg",1),"".concat(i,".jpg"),"image/jpeg")}})})).filter((function(){return!1}))},updateLayerOnLayerPropertiesChange:function(e,t){return e.ofType(w.yS).switchMap((function(e){var r,o=e.layer,i=e.newProperties,a=t.getState(),c=(0,E.CA)(a,o);return(r=n.Observable).of.apply(r,D(l()(i,"layerFilter")&&c?[(0,v.Ko)(c)]:[]))}))},updateLayerOnLoadingErrorChange:function(e,t){return e.ofType(w.x9,w.vs).groupBy((function(e){return e.layerId})).map((function(e){return e.switchMap((function(e){var r,o=e.layerId,i=t.getState(),a=(0,E.CA)(i,o);return(r=n.Observable).of.apply(r,D(a&&a.previousLoadingError!==a.loadingError?[(0,v.Ko)(a)]:[]))}))})).mergeAll()}}},76364:(e,t,r)=>{"use strict";r.d(t,{Vd:()=>O,Vj:()=>w});var n=r(8575),o=r(66654),i=r.n(o),a=r(91175),l=r.n(a),c=r(14293),s=r.n(c),u=r(27418),p=r.n(u),f=r(89255),d=r(15047),m=r(75875),y=r.n(m),b=r(84069);function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function v(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var h=function(e){var t=e.searchText,r=void 0===t?"":t,n=e.queriableAttributes,o=void 0===n?[]:n,i=e.predicate,a=void 0===i?"ILIKE":i,c=l()(o),u=r.toLowerCase(),p="strToLowerCase(".concat(c,") ").concat(a," '%").concat(u,"%'");return s()(c)?"":"("+p+")"},O=function(e){return e.distinctUntilChanged((function(e){var t=e.value,r=e.currentPage,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return!(n.value!==t||n.currentPage!==r)})).throttle((function(e){return f.Observable.timer(e.delayDebounce||0)})).merge(e.debounce((function(e){return f.Observable.timer(e.delayDebounce||0)}))).distinctUntilChanged().switchMap((function(e){if(e.performFetch){var t=(0,b.getWpsPayload)({attribute:e.attribute,layerName:e.typeName,maxFeatures:e.maxFeatures,startIndex:(e.currentPage-1)*e.maxFeatures,value:e.value});return f.Observable.fromPromise(y().post(e.url,t,{timeout:6e4,headers:{Accept:"application/json","Content-Type":"application/xml"}}).then((function(e){return{fetchedData:e.data,busy:!1}}))).catch((function(){return f.Observable.of({fetchedData:{values:[],size:0},busy:!1})})).startWith({busy:!0})}return f.Observable.of({fetchedData:{values:[],size:0},busy:!1})})).startWith({})},w=function(e){return f.Observable.merge(e.distinctUntilChanged((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.value,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.value;return t===n})).debounce((function(e){return f.Observable.timer(e.delayDebounce||0)})),e.distinctUntilChanged((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.filterProps,r=e.currentPage,n=arguments.length>1?arguments[1]:void 0,o=n.filterProps,i=n.currentPage;return t===o&&r===i}))).switchMap((function(e){if(e.performFetch){var t=n.parse(e.url,!0),r="";(i()(t.pathname,"wfs")||i()(t.pathname,"wms")||i()(t.pathname,"ows")||i()(t.pathname,"wps"))&&(r=t.pathname.replace(/(wms|ows|wps|wfs)$/,"wfs")),t.query&&t.query.service&&delete t.query.service;var o=n.format(p()({},t,{search:null,pathname:r})),a=p()({},function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){v(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({url:o,typeName:e.filterProps&&e.filterProps.typeName||"",predicate:e.filterProps&&e.filterProps.predicate||"ILIKE",blacklist:e.filterProps&&e.filterProps.blacklist||[],maxFeatures:e.filterProps&&e.filterProps.maxFeatures||3,queriableAttributes:e.filterProps&&e.filterProps.queriableAttributes||[],returnFullData:!0,startIndex:((e.currentPage||1)-1)*(e.filterProps&&e.filterProps.maxFeatures||3),outputFormat:"application/json",staticFilter:"",fromTextToFilter:h,item:{},timeout:6e4,headers:{Accept:"application/json","Content-Type":"application/xml"},srsName:e.filterProps&&e.filterProps.srsName||"EPSG:4326"},t.query));return f.Observable.fromPromise(d.b.Utils.getService("wfs")(e.value,a).then((function(t){return{fetchedData:{values:t.features.map((function(e){return e.properties})),size:t.totalFeatures,features:t.features,crs:e.filterProps&&e.filterProps.srsName||"EPSG:4326"},busy:!1}}))).catch((function(){return f.Observable.of({fetchedData:{values:[],size:0,features:[]},busy:!1})})).startWith({busy:!0})}return f.Observable.of({fetchedData:{values:[],size:0,features:[]},busy:!1})})).startWith({})}},86850:(e,t,r)=>{"use strict";r.d(t,{Mc:()=>R,v$:()=>N,ED:()=>M});var n=r(8575),o=r(84596),i=r.n(o),a=r(14293),l=r.n(a),c=r(13218),s=r.n(c),u=r(89255),p=r(5055),f=r(7526),d=r(75875),m=r.n(d),y=r(47805),b=r(24262),g=r(10284),v=r(39156);function h(e){return function(e){if(Array.isArray(e))return O(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return O(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?O(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(Object(r),!0).forEach((function(t){j(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function j(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var C=r.n(v)()({wfsVersion:"1.1.0"}),x=C.getFeature,T=C.query,k=C.sortBy,I=C.propertyName,A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.totalFeatures,r=e.features,n=E(e,["totalFeatures","features"]),o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=o.startIndex,a=arguments.length>2?arguments[2]:void 0;return a>t&&a===i+r.length&&t===r.length?P(P({},n),{},{features:r,totalFeatures:a}):P(P({},n),{},{features:r,totalFeatures:t})},F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e.pagination||!l()(t.startIndex)&&!l()(t.maxFeatures)&&{startIndex:t.startIndex,maxFeatures:t.maxFeatures}},D=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=(0,y.getWFSFilterData)(t,r),i=n.parse(e,!0),a=s()(i.query)?i.query:{};a.service="WFS",a.outputFormat="json";var l=n.format({protocol:i.protocol,host:i.host,pathname:i.pathname,query:a});return u.Observable.defer((function(){return m().post(l,o,{timeout:6e4,headers:{Accept:"application/json","Content-Type":"application/json"}})})).let(g.oB).map((function(e){return A(e.data,F(t,r),r.totalFeatures)}))},R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.search,r=void 0===t?{}:t,n=e.url,o=e.name,a=arguments.length>1?arguments[1]:void 0,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},c=l.sortOptions,s=l.propertyName,u=E(l,["sortOptions","propertyName"]);return D(r.url||n,a&&"object"===w(a)?P(P({},a),{},{typeName:o||a.typeName}):x(T(o,[].concat(h(c?[k(c.sortBy,c.sortOrder)]:[]),h(s?[I(s)]:[]),h(a?i()(a):[]))),u),u).catch((function(e){if("OGCError"===e.name&&"NoApplicableCode"===e.code&&!c&&s&&s[0])return D(r.url||n,a&&"object"===w(a)?P(P({},a),{},{typeName:o||a.typeName}):x(T(o,[k(s[0])].concat(h(s?[I(s)]:[]),h(a?i()(a):[]))),u),u);throw e}))},N=function(e){var t=e.layer;return u.Observable.defer((function(){return m().get(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,r=e.search,o=void 0===r?{}:r,i=e.url,a=e.describeFeatureTypeURL,l=n.parse(a||o.url||i,!0);return n.format(P(P({},l),{},{search:void 0,query:P(P({},l.query),{},{service:"WFS",version:"1.1.0",typeName:t,outputFormat:"application/json",request:"DescribeFeatureType"})}))}(t))})).let(g.oB)},M=function(e){var t=e.layer;return u.Observable.defer((function(){return m().get(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name,r=e.search,o=void 0===r?{}:r,i=e.url,a=(0,b.Fh)({name:t,url:o&&o.url||i}),l=n.parse(a,!0);return n.format(P(P({},l),{},{search:void 0,query:P(P({},l.query),{},{service:"WFS",version:"1.1.1",request:"GetCapabilities"})}))}(t))})).let(g.oB).switchMap((function(e){return u.Observable.bindNodeCallback((function(e,t){return(0,p.parseString)(e,{tagNameProcessors:[f.stripPrefix],explicitArray:!1,mergeAttrs:!0},t)}))(e.data)}))}},65633:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var n=r(84596),o=r.n(n),i=r(99767),a=r(27835);function l(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var s=function(e){var t=e.featureType,r=e.aggregationAttribute,n=e.groupByAttributes,c=void 0===n?[]:n,s=e.aggregateFunction,u=e.viewParams,p=e.filter,f=void 0===p?"":p,d="<wfs:GetFeature ".concat(u?'viewParams="'.concat(u,'"'):"",' outputFormat="GML2" service="WFS" version="1.0.0">')+'<wfs:Query typeName="'.concat(t,'">').concat(f,"</wfs:Query></wfs:GetFeature>");return(0,a.Uh)("gs:Aggregate",[(0,i.qP)("features",(0,i.fA)("text/xml","http://geoserver/wfs","POST",d)),(0,i.qP)("aggregationAttribute",(0,i.XA)((0,i.gN)(r)))].concat(l(o()(s).map((function(e){return(0,i.qP)("function",(0,i.XA)((0,i.gN)(e)))}))),[(0,i.qP)("singlePass",(0,i.XA)((0,i.gN)("false")))],l(o()(c).map((function(e){return(0,i.qP)("groupByAttributes",(0,i.XA)((0,i.gN)(e)))})))),(0,i.DK)((0,i.En)("result","application/json")))};const u=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return(0,a.mG)(e,s(t),{},r)}},99767:(e,t,r)=>{"use strict";r.d(t,{qP:()=>s,XA:()=>u,fA:()=>p,gN:()=>f,p5:()=>d,Rr:()=>m,DK:()=>y,En:()=>b,Tr:()=>g,t$:()=>v,XJ:()=>h,Dx:()=>O,Jy:()=>w});var n=r(8575),o=r(66654),i=r.n(o);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s=function(e,t){return"<wps:Input>"+"<ows:Identifier>".concat(e,"</ows:Identifier>")+t+"</wps:Input>"},u=function(e){return"<wps:Data>".concat(e,"</wps:Data>")},p=function(e,t,r,n){return'<wps:Reference mimeType="'.concat(e,'" xlink:href="').concat(t,'" method="').concat(r,'"').concat("POST"===r?"":"/",">")+("POST"===r?"<wps:Body>".concat(n,"</wps:Body></wps:Reference>"):"")},f=function(e){return"<wps:LiteralData>".concat(e,"</wps:LiteralData>")},d=function(e,t,r){return"<wps:ComplexData".concat(t?' mimeType="'.concat(t,'"'):"").concat(r?' encoding="'.concat(r,'"'):"",">").concat(e,"</wps:ComplexData>")},m=function(e){return"<![CDATA[".concat(e,"]]>")},y=function(e){return"<wps:ResponseForm>".concat(e,"</wps:ResponseForm>")},b=function(e,t){return"<wps:RawDataOutput".concat(t?' mimeType="'.concat(t,'"'):"",">")+"<ows:Identifier>".concat(e,"</ows:Identifier>")+"</wps:RawDataOutput>"},g=function(e,t,r){return"<wps:ResponseDocument".concat(e?' storeExecuteResponse="true"':"").concat(t?' status="true"':"",">")+r+"</wps:ResponseDocument>"},v=function(e,t,r,n,o){return"<wps:Output".concat(e?' mimeType="'.concat(e,'"'):"").concat(t?' asReference="true"':"",">")+"<ows:Identifier>".concat(r,"</ows:Identifier>")+(n?"<ows:Title>".concat(n,"</ows:Title>"):"")+(o?"<ows:Abstract>".concat(o,"</ows:Abstract>"):"")+"</wps:Output>"},h=function(e){return s("writeParameters",u(d("<dwn:Parameters>".concat(e,"</dwn:Parameters>"))))},O=function(e,t){return'<dwn:Parameter key="'.concat(e,'">').concat(t,"</dwn:Parameter>")},w=function(e,t){if(e){var r=n.parse(e,!0),o=r.pathname;return(i()(r.pathname,"wfs")||i()(r.pathname,"wms"))&&(o=r.pathname.replace(/(wms|ows|wfs|wps)$/,"wps")),n.format(l(l({},r),{},{search:null,pathname:o,query:l(l({service:"WPS"},t),r.query)}))}return e}},27835:(e,t,r)=>{"use strict";r.d(t,{Uh:()=>P,W5:()=>j,ai:()=>T,RW:()=>k,dr:()=>I,mG:()=>F});var n=r(6557),o=r.n(n),i=r(89255),a=r(5055),l=r(7526),c=r(75875),s=r.n(c),u=r(99767);function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return d(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?d(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){b(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function b(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function g(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function v(e){var t="function"==typeof Map?new Map:void 0;return(v=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return h(e,arguments,E(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),w(n,e)})(e)}function h(e,t,r){return(h=O()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var o=new(Function.bind.apply(e,n));return r&&w(o,r.prototype),o}).apply(null,arguments)}function O(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(o,e);var t,r,n=(t=o,r=O(),function(){var e,n=E(t);if(r){var o=E(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return g(this,e)});function o(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(r=n.call(this,e)).name="WPSExecuteError",r.code=t||e,r}return o}(v(Error)),P=function(e,t,r){return'<?xml version="1.0" encoding="UTF-8"?><wps:Execute version="1.0.0" service="WPS" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://www.opengis.net/wps/1.0.0" xmlns:wfs="http://www.opengis.net/wfs" xmlns:wps="http://www.opengis.net/wps/1.0.0" xmlns:ows="http://www.opengis.net/ows/1.1" xmlns:gml="http://www.opengis.net/gml" xmlns:ogc="http://www.opengis.net/ogc" xmlns:wcs="http://www.opengis.net/wcs/1.1.1" xmlns:dwn="http://geoserver.org/wps/download" xmlns:xlink="http://www.w3.org/1999/xlink" xsi:schemaLocation="http://www.opengis.net/wps/1.0.0 http://schemas.opengis.net/wps/1.0.0/wpsAll.xsd">'+"<ows:Identifier>".concat(e,"</ows:Identifier>")+"<wps:DataInputs>"+(t||[]).join("")+"</wps:DataInputs>"+(r||"")+"</wps:Execute>"},j=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return i.Observable.defer((function(){return s().get((0,u.Jy)(e,{version:"1.0.0",REQUEST:"GetExecutionStatus",executionId:t}),y({headers:{Accept:"application/xml"}},r))}))},C=function(e,t){var r,n,i=function(e){var t,r,n,i,a,l,c,s,u,p,f,d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o(),m=null==e||null===(t=e.ExecuteResponse)||void 0===t||null===(r=t.Status)||void 0===r?void 0:r[0];return null!=m&&m.ProcessAccepted?{status:"ProcessAccepted"}:null!=m&&m.ProcessStarted?{status:"ProcessStarted"}:null!=m&&m.ProcessSucceeded?{status:"ProcessSucceeded",data:d(null===(n=e.ExecuteResponse.ProcessOutputs)||void 0===n||null===(i=n[0])||void 0===i?void 0:i.Output)}:null!=m&&m.ProcessFailed?{status:"ProcessFailed",exceptionReport:null==m||null===(a=m.ProcessFailed)||void 0===a||null===(l=a[0])||void 0===l||null===(c=l.ExceptionReport)||void 0===c||null===(s=c[0])||void 0===s||null===(u=s.Exception)||void 0===u||null===(p=u[0])||void 0===p||null===(f=p.ExceptionText)||void 0===f?void 0:f[0]}:null!=m&&m.ProcessPaused?{status:"ProcessPaused"}:{status:"UnexpectedStatus"}}(e,t);if("ProcessFailed"===i.status)throw new S(i.exceptionReport,"ProcessFailed");if("UnexpectedStatus"===i.status)throw new S("UnexpectedProcessStatus");if("ProcessSucceeded"===i.status)return{succeeded:!0,data:i.data};var a=null==e||null===(r=e.ExecuteResponse)||void 0===r||null===(n=r.$)||void 0===n?void 0:n.statusLocation;if(!a)throw new S("NoStatusLocation");var l=a.indexOf("executionId=");if(-1===l)throw new S("NoExecutionId");var c=a.slice(l+12),s=c.indexOf("&");return{succeeded:!1,executionId:-1===s?c:c.slice(0,s)}},x=function(e){var t,r;return null!=e&&null!==(t=e.Identifier)&&void 0!==t&&t[0]?{identifier:null==e||null===(r=e.Identifier)||void 0===r?void 0:r[0]}:null},T=function(e){var t,r,n,o,i;return null!=e&&null!==(t=e.Data)&&void 0!==t&&null!==(r=t[0])&&void 0!==r&&r.LiteralData?{data:null==e||null===(n=e.Data)||void 0===n||null===(o=n[0])||void 0===o||null===(i=o.LiteralData)||void 0===i?void 0:i[0]}:null},k=function(e){var t,r,n,o,i,a;return null!=e&&e.Reference?{href:null==e||null===(t=e.Reference)||void 0===t||null===(r=t[0])||void 0===r||null===(n=r.$)||void 0===n?void 0:n.href,mimeType:null==e||null===(o=e.Reference)||void 0===o||null===(i=o[0])||void 0===i||null===(a=i.$)||void 0===a?void 0:a.mimeType}:null},I=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map((function(e){return[x].concat(f(t||[])).map((function(t){return t(e)})).reduce((function(e,t){return t?y(y({},e),t):e}),{})}))}},A=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return i.Observable.defer((function(){return s().post((0,u.Jy)(e,{version:"1.0.0",REQUEST:"Execute"}),t,y({headers:{"Content-Type":"application/xml"}},r))}))},F=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=r.executeStatusUpdateInterval,c=void 0===o?2e3:o,s=r.outputsExtractor,u=function(e){return i.Observable.defer((function(){return new Promise((function(t,r){return(0,a.parseString)(e,{tagNameProcessors:[l.stripPrefix]},(function(e,n){return e?r(e):t(n)}))}))}))};return A(e,t,n).catch((function(){throw new S("ExecuteProcessXHRFailed")})).switchMap((function(e){return"application/xml"===e.headers["content-type"]||"text/xml"===e.headers["content-type"]?u(e.data).map((function(t){return{data:t,type:"application/xml",originalData:e.data}})):i.Observable.of({data:e.data,type:e.headers["content-type"]})})).flatMap((function(t){var r=t.data,n=t.type,o=t.originalData;if("application/xml"!==n)return i.Observable.of(r);if(null==r||!r.ExecuteResponse)return i.Observable.of(o);var a=C(r,s),l=a.succeeded,p=a.data,f=a.executionId;if(l)return i.Observable.of(p);var d=i.Observable.interval(c).take(1).flatMap((function(){return j(e,f).catch((function(){throw new S("GetExecutionStatusXHRFailed")})).flatMap((function(e){return u(e.data).flatMap((function(e){var t=C(e,s);return t.succeeded?i.Observable.of(t.data):d}))}))}));return d}))}},18163:(e,t,r)=>{"use strict";r.d(t,{Z:()=>g});var n=r(31273),o=r(81808),i=r(61868),a=r(14293),l=r.n(a),c=r(27418),s=r.n(c),u=r(55877),p=r.n(u);function f(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach((function(t){y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var b={url:"",type:"wms",title:"",isNew:!0,autoload:!1,showAdvancedSettings:!1,showTemplate:!1,hideThumbnail:!1,metadataTemplate:"<p>${description}</p>"};const g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{default:{services:{},selectedService:"",newService:{}},delayAutoSearch:1e3,loading:!1,pageSize:4,services:{},selectedService:"",newService:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.eA:return m(m({},e),{},{saving:t.status});case n.HR:return s()({},e,{result:t.result,searchOptions:t.searchOptions,loadingError:null,layerError:null,loading:!1});case n.xi:return s()({},e,{result:null,loadingError:null,searchOptions:null});case n.vK:return s()({},e,{result:null,searchOptions:null,loadingError:t.error,loading:!1,layerError:null});case n.nm:return s()({},e,{result:null,loadingError:null,format:t.format,layerError:null});case n.QF:return s()({},e,{layerError:t.error});case n.uN:return s()({},e,{newService:t.isNew?b:s()({},e.services&&e.services[e.selectedService||""]||{},{oldService:e.selectedService||""}),mode:t.mode,result:null,loadingError:null,layerError:null});case o.ok:return e&&!l()(e.default)?t.config&&!l()(t.config.catalogServices)?s()({},e,{services:t.config.catalogServices.services,selectedService:t.config.catalogServices.selectedService}):s()({},e,{services:e.default.services,selectedService:e.default.selectedService}):e;case n.YO:return(0,i.t8)("openCatalogServiceList",t.status,e);case n.CO:return(0,i.t8)("searchOptions.text",t.text,e);case n.Mt:return(0,i.t8)('newService["'.concat(t.property,'"]'),t.value,e);case n.im:return(0,i.t8)("newService.title",t.title,e);case n.PR:return(0,i.t8)("newService.url",t.url,e);case n.Oq:return(0,i.t8)("newService.format",t.format,e);case n.$X:var r=t.newType.toLowerCase(),a={};return"csw"!==r&&(a={showTemplate:!1,metadataTemplate:""}),s()({},e,{newService:s()({},e.newService,m({type:r},a))});case n.wI:var c=t.service,u=c.isNew,d=f(c,["isNew"]),g=u?d.title+p()():e.selectedService,v=s()({},e.services,y({},g,d));return s()({},e,{services:v,selectedService:g,mode:"view",result:null,loadingError:null,searchOptions:s()({},e.searchOptions,{text:""}),layerError:null});case n.zZ:return t.service!==e.selectedService?s()({},e,{selectedService:t.service,result:null,loadingError:null,layerError:null}):e;case n.bv:var h,O="";return delete(h=s()({},e.services))[t.service],Object.keys(h).length&&(O=h[Object.keys(h)[0]].title),s()({},e,{services:h,selectedService:O,mode:"view",result:null,loadingError:null,layerError:null});case n.Kz:return(0,i.t8)("newService.hideThumbnail",!e.newService.hideThumbnail,e);case n.cS:return(0,i.t8)("loading",t.loading,e);case n.Bz:return(0,i.t8)("newService.metadataTemplate",t.metadataTemplate,e);case n.l3:var w=(0,i.t8)("newService.showTemplate",!e.newService.showTemplate,e);return w.newService.showTemplate&&(w=(0,i.t8)("newService.metadataTemplate",w.newService.metadataTemplate||"<p>${description}</p>",w)),w;case n.vg:return(0,i.t8)("newService.showAdvancedSettings",!e.newService.showAdvancedSettings,e);case n.do:return(0,i.t8)("formatsLoading",t.loading,e);case n.lb:return(0,i.t8)("newService.supportedFormats",t.formats,(0,i.t8)("newService.formatUrlUsed",t.url,e));default:return e}}},78113:(e,t,r)=>{"use strict";r.d(t,{Z:()=>C});var n=r(89602),o=r(82904),i=r(61868),a=r(62192),l=r(8797),c=r(53275),s=r(43624),u=r.n(s),p=r(41609),f=r.n(p),d=r(30998),m=r.n(d),y=r(81763),b=r.n(y),g=r(27418),v=r.n(g);function h(e){return function(e){if(Array.isArray(e))return O(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return O(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?O(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function w(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function S(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E(Object(r),!0).forEach((function(t){P(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function P(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var j={lineMeasureEnabled:!0,geomType:"LineString",areaMeasureEnabled:!1,bearingMeasureEnabled:!1,customStartEndPoint:{startPointOptions:{radius:3,fillColor:"green"},endPointOptions:{radius:3,fillColor:"red"}},uom:{length:{unit:"m",label:"m"},area:{unit:"sqm",label:"m²"}},lengthFormula:"haversine",showLabel:!0,showSegmentLengths:!0,currentFeature:0,features:[]};const C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.lD:var r,s=null!==t.geomType&&m()(e.features,(function(e){var r,n;return("bearing"===((null===(r=e.properties)||void 0===r||null===(n=r.values)||void 0===n?void 0:n[0])||{}).type?"Bearing":e.geometry.type)===t.geomType}));return v()({},e,{lineMeasureEnabled:t.geomType!==e.geomType&&"LineString"===t.geomType,areaMeasureEnabled:t.geomType!==e.geomType&&"Polygon"===t.geomType,bearingMeasureEnabled:t.geomType!==e.geomType&&"Bearing"===t.geomType,geomType:t.geomType===e.geomType?null:t.geomType,features:null===t.geomType?[]:e.features,textLabels:null===t.geomType?[]:e.textLabels,feature:{properties:{disabled:!0}},currentFeature:-1!==s?s:(null===(r=e.features)||void 0===r?void 0:r.length)||0,len:0,area:0,bearing:0});case n.yK:var p=t.feature;return(0,c.oU)(p)&&(p=(0,i.t8)("geometry.coordinates[0]",u()(p.geometry.coordinates[0]),p)),v()({},e,{lineMeasureEnabled:t.lineMeasureEnabled,areaMeasureEnabled:t.areaMeasureEnabled,bearingMeasureEnabled:t.bearingMeasureEnabled,geomType:t.geomType,values:t.values,feature:(0,i.t8)("properties.disabled",e.feature.properties.disabled,p),point:t.point,len:t.len,area:t.area,bearing:t.bearing,lenUnit:t.lenUnit,areaUnit:t.areaUnit});case n.sc:var d=t.measures,y=d.point,g=d.len,O=d.area,E=d.bearing;return S(S({},e),{},{point:y,len:g,area:O,bearing:E});case n.Qw:var C=(0,i.t8)("feature.properties.disabled",!0,e);return S(S({},C),{},{isDrawing:!0,updatedByUI:!1});case n.gf:var x,T="length"===t.uom?"lenUnit":"lenArea",k=t.value,I=k.value,A=k.label;return v()({},e,(P(x={},T,I),P(x,"uom",v()({},t.previousUom,P({},t.uom,{unit:I,label:A}))),P(x,"updatedByUI",!0),x));case n.Qr:var F,D=t.features,R=void 0===D?[]:D,N=(0,a.k2)(R),M=(null===(F=e.features)||void 0===F?void 0:F.length)===R.length?e.currentFeature:R.length?R.length-1:0;return S(S({},e),{},{features:R,currentFeature:M,geomTypeSelected:N,updatedByUI:!1,isDrawing:!1},f()(R)&&{exportToAnnotation:!1});case n.Kf:var L=t.property,_=t.value;return S(S({},e),{},P({},L,_));case n.ES:var Z=t.features,B=t.properties,z=(0,a.k2)(Z);return S(S({},e),{},{features:Z,geomTypeSelected:z,updatedByUI:!0,isDrawing:!1,exportToAnnotation:!0,id:B.id,visibility:B.visibility});case n.Kx:return S(S({},e),{},{textLabels:t.textLabels});case n.V:return S(S({},e),{},{currentFeature:b()(t.featureIndex)?t.featureIndex:e.features.length});case o.kM:e.id;var G=w(e,["id"]);return"info"===t.control?S(S({},G),{},{len:0,area:0,bearing:0,lineMeasureEnabled:!1,areaMeasureEnabled:!1,bearingMeasureEnabled:!1,feature:{properties:{disabled:!0}},geomType:""}):"measure"===t.control?S(S({},G),{},{geomType:"",lineMeasureEnabled:!1,areaMeasureEnabled:!1,bearingMeasureEnabled:!1}):e;case o.At:return"measure"===t.control&&!1===t.value?S(S({},e),{},{geomType:"",lineMeasureEnabled:!1,areaMeasureEnabled:!1,bearingMeasureEnabled:!1}):e;case o.l:return S(S({},e),{},{len:0,area:0,bearing:0,lineMeasureEnabled:!1,areaMeasureEnabled:!1,bearingMeasureEnabled:!1,feature:{properties:{disabled:!0}},geomType:"",features:[]});case n.GI:return S(S({},e),{},{format:t.format});case n.qg:return S(S({},e),t.defaultOptions);case n.MT:var U,W=t.coordinates.map((function(e){return[e.lon,e.lat]})),V=e.features||[],q=V[e.currentFeature]||{},H=W.filter((function(e){return(0,l.wd)(e)})).length!==W.length;return S(S({},e),{},{feature:{type:"Feature",properties:{disabled:W.filter((function(e){return(0,l.wd)(e)})).length!==W.length},geometry:{type:e.bearingMeasureEnabled?"LineString":e.geomType,coordinates:e.areaMeasureEnabled?[u()(W)]:W}},features:[].concat(h(V.slice(0,e.currentFeature)),[S(S({},q),{},{type:"Feature",properties:S(S({},q.properties||{}),{},{disabled:H||e.bearingMeasureEnabled&&W.length<2}),geometry:{type:e.bearingMeasureEnabled?"LineString":e.geomType,coordinates:e.areaMeasureEnabled?[[].concat(h(W),[W[0]])]:W,textLabels:(null==q||null===(U=q.geometry)||void 0===U?void 0:U.textLabels)||[]}})],h(V.slice(e.currentFeature+1,V.length))),updatedByUI:!0});default:return e}}},97080:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var n=r(97395);function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?c(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function s(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}const u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case n.e2:t.type;var r=s(t,["type"]);return[].concat(l(e),[i({},r)]);case n.Zz:return e.filter((function(e){return e.uid!==t.uid}));case n.wt:return[];default:return e}}},32244:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});var n=r(96909),o=r(47037),i=r.n(o);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.wL:return l(l({},e),{},{service:t.service,canEdit:t.canEdit});case n.Nm:return l(l({},e),{},{canEdit:t.canEdit});case n.gF:return l(l({},e),{},{temporaryId:t.temporaryId,templateId:t.templateId,code:t.code,format:t.format,error:null,languageVersion:t.languageVersion,initialCode:t.init?t.code:e.initialCode});case n.g$:return""===t.status?l(l({},e),{},{status:t.status,code:"",templateId:"",initialCode:"",addStyle:!1,error:{}}):l(l({},e),{},{status:t.status});case n.dJ:return{service:e.service&&l({},e.service)||{},canEdit:e.canEdit,loading:e.loading};case n.uz:return l(l({},e),{},{addStyle:t.add});case n.lX:return l(l({},e),{},{loading:!t.status||t.status});case n.E2:return l(l({},e),{},{loading:!1,enabled:!0});case n.mF:var r,o,a,s=(null==t||null===(r=t.error)||void 0===r?void 0:r.statusText)||(null==t||null===(o=t.error)||void 0===o?void 0:o.message)||"",u=i()(null==t||null===(a=t.error)||void 0===a?void 0:a.messageId)&&{messageId:t.error.messageId},p=s.match(/line\s([\d]+)|column\s([\d]+)|lineNumber:\s([\d]+)|columnNumber:\s([\d]+)/g),f=p&&2===p.length&&p.reduce((function(e,t){var r=t.split(" "),n=r[0].replace(/Number:/g,""),o=parseFloat(r[1]);return n&&!isNaN(o)&&l(l({},e),{},c({},n,o))||l({},e)}),l({message:s},u))||l({message:s},u);return l(l({},e),{},{loading:!1,canEdit:!(t.error&&(401===t.error.status||403===t.error.status||t.error.message&&-1!==t.error.message.indexOf("could not be unmarshalled"))),error:l(l({},e.error),{},c({},t.status||"global",l({status:t.error&&t.error.status||404},f)))});case n.dk:return l(l({},e),{},{metadata:l(l({},e.metadata),t.metadata)});default:return e}}},75859:(e,t,r)=>{"use strict";r.d(t,{Z:()=>x});var n=r(57579),o=r(81808),i=r(55927),a=r(27418),l=r.n(a),c=r(28252),s=r.n(c),u=r(27361),p=r.n(u),f=r(13311),d=r.n(f),m=r(57557),y=r.n(m),b=r(66604),g=r.n(b),v=r(84596),h=r.n(v),O=r(61868);function w(e){return function(e){if(Array.isArray(e))return E(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return E(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?E(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(Object(r),!0).forEach((function(t){j(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function j(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var C={dependencies:{viewport:"map.bbox",center:"map.center",zoom:"map.zoom"},containers:{floating:{widgets:[]}},builder:{settings:{step:0}}};const x=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,r=arguments.length>1?arguments[1]:void 0;switch(r.type){case n.Cz:return s()("builder.settings.".concat(r.key),r.value,t);case n.n8:return s()("builder.editor",r.widget,s()("builder.settings",r.settings||C.settings,t));case n.dm:return s()("builder.editor",P(P({},r.widget),{},{widgetType:r.widget&&r.widget.widgetType||"chart"}),s()("builder.settings.step","chart"===(r.widget&&r.widget.widgetType||"chart")?1:0,t));case n.BV:return s()("builder.editor.".concat(r.key),r.value,t);case n.Jm:var a=(0,O.vy)("containers[".concat(r.target,"].widgets"),P(P({id:r.id},r.widget),{},{dataGrid:r.id&&{y:0,x:0,w:1,h:1}}),{id:r.widget.id||r.id},t);return a;case n.$A:var c=d()(p()(t,"containers[".concat(r.target,"].widgets")),{id:r.id});return(0,O.vy)("containers[".concat(r.target,"].widgets"),s()(r.key,"merge"===r.mode?l()({},c[r.key],r.value):r.value,c),{id:r.id},t);case n.eb:if(r.layer){var u=p()(t,"containers[".concat(n.VR,"].widgets"));if(u)return s()("containers[".concat(n.VR,"].widgets"),u.map((function(e){return p()(e,"layer.id")===r.layer.id?s()("layer",r.layer,e):e})),t)}return t;case n.yY:return(0,O.z6)("containers[".concat(r.target,"].widgets"),{id:r.widget.id},t);case i.E9:var f=r.data;return s()("containers[".concat(n.VR,"]"),P({},f),t);case o.ok:var m=r.config||{},b=m.widgetsConfig;return s()("containers[".concat(n.VR,"]"),P({},b),t);case n.v8:return s()("containers[".concat(r.target,"].layout"),r.layout)(s()("containers[".concat(r.target,"].layouts"),r.allLayouts,t));case n.ff:case i.R4:return s()("containers[".concat(n.VR,"]"),C.containers[n.VR],t);case n.S0:var v=r.key,E=r.value;return s()("dependencies[".concat(v,"]"),E,t);case n.Q6:var S=r.key;return s()("dependencies[".concat(S,"]"),null,t);case n.kb:var j=r.dependencies;return s()("dependencies",j,t);case n.GV:return s()("dependencies",C.dependencies,t);case n.Ym:var x=r.widget,T=void 0===x?{}:x;if(T.dataGrid&&T.dataGrid.static)return t;var k=p()(t,"containers[".concat(r.target,"].collapsed[").concat(T.id));if(k){var I=[].concat(w(p()(t,"containers[".concat(r.target,"].layout"),[])),w(h()(p()(k,"layout",[])))),A=g()(p()(t,"containers[".concat(r.target,"].layouts"),{}),(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return[].concat(w(e),w(h()(p()(k,"layouts[".concat(t,"]"),[]))))}));return y()((0,O.qC)(s()("containers[".concat(r.target,"].layout"),I),s()("containers[".concat(r.target,"].layouts"),A))(t),"containers[".concat(r.target,"].collapsed[").concat(T.id,"]"))}return s()("containers[".concat(r.target,"].collapsed[").concat(T.id,"]"),{layout:d()(p()(t,"containers[".concat(r.target,"].layout"),[]),{i:T.id}),layouts:g()(p()(t,"containers[".concat(r.target,"].layouts"),{}),(function(e){return d()(e,{i:T.id})}))},t);case n.ke:var F,D,R,N,M,L,_,Z,B,z,G,U,W,V,q,H,$,K,Y=r.widget,X=null==t||null===(F=t.containers)||void 0===F||null===(D=F[r.target])||void 0===D?void 0:D.maximized;if(!Y||null!==(R=Y.dataGrid)&&void 0!==R&&R.static)return t;if(null!=X&&X.widget)return(0,O.qC)(s()("containers[".concat(r.target,"].layout"),X.layout),s()("containers[".concat(r.target,"].layouts"),X.layouts),s()("containers[".concat(r.target,"].maximized"),{}),s()("containers[".concat(r.target,"].widgets"),null==t||null===(H=t.containers)||void 0===H||null===($=H[r.target])||void 0===$||null===(K=$.widgets)||void 0===K?void 0:K.map((function(e){return e.id===X.widget.id?P(P({},e),{},{dataGrid:P(P({},e.dataGrid),{},{isDraggable:!0,isResizable:!0})}):e}))))(t);if(null!=t&&null!==(N=t.containers)&&void 0!==N&&null!==(M=N[r.target])&&void 0!==M&&null!==(L=M.collapsed)&&void 0!==L&&L[Y.id])return t;var Q={x:0,y:0,w:1,h:1},J=d()(null==t||null===(_=t.containers)||void 0===_||null===(Z=_[r.target])||void 0===Z?void 0:Z.layout,{i:Y.id}),ee=P(P({},J),Q);return(0,O.qC)(s()("containers[".concat(r.target,"].maximized"),{widget:Y,layout:null==t||null===(B=t.containers)||void 0===B||null===(z=B[r.target])||void 0===z?void 0:z.layout,layouts:null==t||null===(G=t.containers)||void 0===G||null===(U=G[r.target])||void 0===U?void 0:U.layouts}),s()("containers[".concat(r.target,"].layout"),[ee]),s()("containers[".concat(r.target,"].layouts"),{xxs:[ee]}),s()("containers[".concat(r.target,"].widgets"),null==t||null===(W=t.containers)||void 0===W||null===(V=W[r.target])||void 0===V||null===(q=V.widgets)||void 0===q?void 0:q.map((function(e){return e.id===Y.id?P(P({},e),{},{dataGrid:P(P({},e.dataGrid),{},{isDraggable:!1,isResizable:!1})}):e}))))(t);case n.uU:var te=p()(t,"containers[".concat(r.target,"].widgets"),[]).filter((function(e){return!e.dataGrid||!e.dataGrid.static})),re=te.filter((function(e){return p()(t,"containers[".concat(r.target,"].collapsed[").concat(e.id,"]"))})),ne=te.filter((function(e){return!p()(t,"containers[".concat(r.target,"].collapsed[").concat(e.id,"]"))})),oe=0===ne.length;return oe?re.reduce((function(t,r){return e(t,(0,n.f)(r))}),t):ne.length>0?ne.reduce((function(t,r){return e(t,(0,n.f)(r))}),t):t;case n.nw:return s()("tray",r.value,t);default:return t}}},67306:(e,t,r)=>{"use strict";r.d(t,{Wy:()=>i,i$:()=>a,P0:()=>l});var n=r(22222),o=r(24684),i=function(e){return e&&e.dashboard&&e.dashboard.editor&&e.dashboard.editor.available},a=function(e){return e&&e.dashboard&&e.dashboard.editing},l=function(e){return e&&e.dashboard&&e.dashboard.showConnections};(0,n.P1)(o.F,(function(e){return e&&e.dashboard&&e.dashboard.resource}),(function(e){return e&&e.browser&&e.browser.mobile}),(function(e,t,r){return r?!r:t&&t.canEdit||isNaN(e.substr(-4))}))},24684:(e,t,r)=>{"use strict";r.d(t,{F:()=>i});var n=r(27361),o=r.n(n),i=function(e){return o()(e,"router.location.pathname")||"/"}},93222:(e,t,r)=>{"use strict";r.d(t,{gc:()=>v,Mc:()=>h,ex:()=>O,p:()=>w,aN:()=>E,iB:()=>S,j5:()=>P,gB:()=>j,QW:()=>C,w_:()=>x,ji:()=>T,Z0:()=>k,z_:()=>I,Vf:()=>A,lC:()=>F,m2:()=>D,i7:()=>R,Ed:()=>N,ov:()=>M,WW:()=>L,Ri:()=>_});var n=r(27361),o=r.n(n),i=r(91175),a=r.n(i),l=r(19155),c=r.n(l),s=r(13311),u=r.n(s),p=r(47037),f=r.n(p),d=r(75110),m=r(99009);function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){g(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function g(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var v=function(e){return o()(e,"styleeditor.temporaryId")},h=function(e){return o()(e,"styleeditor.templateId")},O=function(e){return o()(e,"styleeditor.status")},w=function(e){return o()(e,"styleeditor.error")||{}},E=function(e){return o()(e,"styleeditor.loading")},S=function(e){return o()(e,"styleeditor.format")||"css"},P=function(e){return o()(e,"styleeditor.languageVersion")||{}},j=function(e){return o()(e,"styleeditor.code")},C=function(e){return o()(e,"styleeditor.initialCode")||""},x=function(e){return o()(e,"styleeditor.addStyle")||""},T=function(e){return o()(e,"styleeditor.enabled")},k=function(e){return o()(e,"styleeditor.service")||{}},I=function(e){return o()(e,"styleeditor.canEdit")},A=function(e){var t=(0,d.jN)(e);return b(b({},(0,d.Iz)(e)||{}),t&&t.options||{})},F=function(e){var t=A(e),r=(0,m.Py)(t).geometryType;return void 0===r?"vector":r},D=function(e){var t=A(e),r=(0,m.Py)(t).properties;return void 0===r?{}:r},R=function(e){var t=A(e);return t.style||t.availableStyles&&t.availableStyles[0]&&t.availableStyles[0].name},N=function(e){var t=(A(e)||{}).availableStyles,r=void 0===t?[]:t,n=R(e);return a()(r.filter((function(e){return e.name===n})).map((function(e){return e.format})))},M=function(e){var t=A(e),r=t.availableStyles||[],n=(a()(r)||{}).name,o=t.style||t&&!t.style&&n;return{availableStyles:c()(r.map((function(e){var t=e&&e.title&&f()(e.title)&&e.title.split(m.I$),r=t&&t[0]||e.name;return b(b({},e),{},{label:r})})),"name"),defaultStyle:n,enabledStyle:o}},L=function(e){var t;return null==e||null===(t=e.styleeditor)||void 0===t?void 0:t.metadata},_=function(e){var t=(A(e)||{}).availableStyles,r=void 0===t?[]:t,n=R(e);return(u()(r,(function(e){var t=e.name;return n===t}))||{}).metadata||{}}},25958:(e,t,r)=>{"use strict";r.d(t,{zA:()=>G,jx:()=>z,h9:()=>Y,YR:()=>_,lF:()=>N,r0:()=>U,YI:()=>F,um:()=>K,E2:()=>k,zm:()=>R,yZ:()=>q,p:()=>V,Jb:()=>M,E5:()=>L,GW:()=>D,Xu:()=>H,xI:()=>W,Wo:()=>$});var n=r(13311),o=r.n(n),i=r(27361),a=r.n(i),l=r(84596),c=r.n(l),s=r(1469),u=r.n(s),p=r(827),f=r(75110),d=r(24684),m=r(57579),y=(r(81763),r(59854),function(e,t,r){var n,o,i=[],a=[],l=e;for(i.push(l);i.length>0;)if(!r[l=i.shift()])for(r[l]=!0,a.push(l),n=0;n<t.length;n+=1)(o=t[n])[0]!==l||r[o[1]]?o[1]!==l||r[o[0]]||i.push(o[0]):i.push(o[1]);return a}),b=function(e){for(var t={},r=[],n=0,o=e.length;n<o;n+=1){var i=e[n],a=i[0],l=i[1],c=null;t[a]?t[l]||(c=l):c=a,c&&r.push(y(c,e,t))}return r},g=r(43143);function v(e){return function(e){if(Array.isArray(e))return O(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||h(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){if(e){if("string"==typeof e)return O(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?O(e,t):void 0}}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var w=function(e,t){var r,n,i=(r=m.oU.exec(e),n=2,function(e){if(Array.isArray(e))return e}(r)||function(e,t){var r=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=r){var n,o,i=[],a=!0,l=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(l)throw o}}return i}}(r,n)||h(r,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=i[0],l=i[1];return a?o()(t,{id:l}):null},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.reduce((function(t,r){var n=a()(r,"mapSync")&&a()(r,"dependenciesMap")||{},o=Object.keys(n).map((function(t){return w(n[t],e)}))||[];return[].concat(v(t),v(o.filter((function(e){return void 0!==e})).map((function(e){return[r.id,e.id]}))))}),[])},S=r(67306),P=r(22222),j=r(84715);function C(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?C(Object(r),!0).forEach((function(t){T(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):C(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function T(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var k=function(e){return a()(e,"widgets.builder.settings")},I=function(e){return a()(e,"widgets.dependencies")||{}},A=function(e){return Object.keys(I(e)).map((function(t){return I(e)[t]}))},F=function(e){return a()(e,"widgets.builder.editor")},D=(0,P.P1)(F,f.Iz,(function(e){return(0,S.Wy)(e)&&(0,S.i$)(e)}),(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.layer,r=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return t||!n&&r})),R=function(e){return a()(e,"widgets.containers[".concat(m.VR,"].widgets"))},N=function(e){return a()(e,"widgets.containers[".concat(m.VR,"].collapsed"))},M=function(e){return a()(e,"widgets.containers[".concat(m.VR,"].maximized"))},L=(0,P.P1)(R,N,M,(function(e,t,r){if(e){if(null!=r&&r.widget)return e.filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id;return t===r.widget.id}));if(t)return e.filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.id;return!t[r]}))}return e})),_=(0,P.P1)(N,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e)})),Z=function(e){return(R(e)||[]).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.widgetType;return"map"===t}))},B=function(e){return(R(e)||[]).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.widgetType;return"table"===t}))},z=(0,P.P1)(Z,B,p.Od,d.F,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=arguments.length>3?arguments[3]:void 0;return{availableDependencies:e.map((function(e){var t=e.id;return"widgets[".concat(t,"].map")})).concat(c()(r).map((function(){return"map"}))).concat(c()(t).filter((function(){return-1===n.indexOf("viewer")})).map((function(e){var t=e.id;return"widgets[".concat(t,"]")})))}})),G=(0,P.P1)(Z,B,p.Od,d.F,F,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0,i=o&&"map"!==o.widgetType?o&&o.layer||{}:o&&o.map&&o.map.layers||[];return{availableDependencies:e.map((function(e){var t=e.id;return"widgets[".concat(t,"].map")})).concat(c()(r).map((function(){return r?"map":null}))).filter((function(e){return e})).concat(c()(t).filter((function(){return-1===n.indexOf("viewer")})).filter((function(e){return u()(i)||i.name===e.layer.name})).filter((function(e){return o&&o.id!==e.id})).map((function(e){var t=e.id;return"widgets[".concat(t,"]")})))}})),U=function(e){return a()(k(e),"".concat(m.jv))},W=function(e){return a()(U(e),"active")},V=((0,P.P1)(R,(function(e){return function(){var e=b(E(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[])),t={base:190,range:340,options:{base:10,range:360,s:.67,v:.67}},r=(0,g.qH)(t.base,t.range,e.length+1,t.options);return e.map((function(e,t){return{color:r[t],widgets:e}}))}(e)})),function(e){return a()(e,"widgets.containers[".concat(m.VR,"].layouts"))}),q=function(e){return a()(e,"widgets.containers[".concat(m.VR,"].layout"))},H=function(e){return a()(e,"widgets.tray")},$=function(e){return a()(e,"widgets.builder.editor.returnToFeatureGrid",!1)},K=function(e){return a()(F(e),"filter")},Y=(0,j.y)(I,A,(function(e){return A(e).map((function(t){return 0===t.indexOf("map.")?a()((0,p.Od)(e),t.slice(4)):t.match(m.oU)?function(e,t){var r=m.oU.exec(e),n=r&&r[2],o=w(e,t);return n?a()(o,n):o}(t,R(e)):a()(e,t)}))}),(function(e,t,r){return t.reduce((function(t,n,o){return x(x({},t),{},T({},Object.keys(e)[o],r[o]))}),{})}));(0,P.zB)({widgets:R,layouts:V})},36882:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n={OpenStreetMap:{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",options:{maxZoom:19,maxNativeZoom:19,credits:{text:"© OpenStreetMap, Open Street Map and contributors, CC-BY-SA",link:"http://www.openstreetmap.org/copyright"},attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'},variants:{Mapnik:{},BlackAndWhite:{url:"http://tiles.wmflabs.org/bw-mapnik/{z}/{x}/{y}.png",options:{maxZoom:18,maxNativeZoom:18}},DE:{url:"http://{s}.tile.openstreetmap.de/tiles/osmde/{z}/{x}/{y}.png",options:{maxZoom:18,maxNativeZoom:18}},France:{url:"http://{s}.tile.openstreetmap.fr/osmfr/{z}/{x}/{y}.png",options:{attribution:"&copy; Openstreetmap France | {attribution.OpenStreetMap}"}},HOT:{url:"http://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png",options:{attribution:'{attribution.OpenStreetMap}, Tiles courtesy of <a href="http://hot.openstreetmap.org/" target="_blank">Humanitarian OpenStreetMap Team</a>'}}}},OpenSeaMap:{url:"http://tiles.openseamap.org/seamark/{z}/{x}/{y}.png",options:{maxNativeZoom:18,attribution:'Map data: &copy; <a href="http://www.openseamap.org">OpenSeaMap</a> contributors',credits:{text:"Map data: © OpenSeaMap contributors",link:"http://www.openseamap.org"}}},OpenPtMap:{url:"http://openptmap.org/tiles/{z}/{x}/{y}.png",options:{maxZoom:17,attribution:'Map data: &copy; <a href="http://www.openptmap.org">OpenPtMap</a> contributors'}},OpenTopoMap:{url:"https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png",options:{maxZoom:17,attribution:'Map data: {attribution.OpenStreetMap}, <a href="http://viewfinderpanoramas.org">SRTM</a> | Map style: &copy; <a href="https://opentopomap.org">OpenTopoMap</a> (<a href="https://creativecommons.org/licenses/by-sa/3.0/">CC-BY-SA</a>)'}},OpenRailwayMap:{url:"https://{s}.tiles.openrailwaymap.org/standard/{z}/{x}/{y}.png",options:{maxZoom:19,attribution:'Map data: {attribution.OpenStreetMap} | Map style: &copy; <a href="https://www.OpenRailwayMap.org">OpenRailwayMap</a> (<a href="https://creativecommons.org/licenses/by-sa/3.0/">CC-BY-SA</a>)'}},OpenFireMap:{url:"http://openfiremap.org/hytiles/{z}/{x}/{y}.png",options:{maxZoom:19,attribution:'Map data: {attribution.OpenStreetMap} | Map style: &copy; <a href="http://www.openfiremap.org">OpenFireMap</a> (<a href="https://creativecommons.org/licenses/by-sa/3.0/">CC-BY-SA</a>)'}},SafeCast:{url:"https://s3.amazonaws.com/te512.safecast.org/{z}/{x}/{y}.png",options:{maxZoom:16,attribution:'Map data: {attribution.OpenStreetMap} | Map style: &copy; <a href="https://blog.safecast.org/about/">SafeCast</a> (<a href="https://creativecommons.org/licenses/by-sa/3.0/">CC-BY-SA</a>)'}},CyclOSM:{url:"https://dev.{s}.tile.openstreetmap.fr/cyclosm/{z}/{x}/{y}.png",options:{maxZoom:20,attribution:'<a href="https://github.com/cyclosm/cyclosm-cartocss-style/releases" title="CyclOSM - Open Bicycle render">CyclOSM</a> | Map data: {attribution.OpenStreetMap}'}},OpenMapSurfer:{url:"https://maps.heigit.org/openmapsurfer/tiles/{variant}/webmercator/{z}/{x}/{y}.png",options:{maxZoom:19,variant:"roads",attribution:'Imagery from <a href="http://giscience.uni-hd.de/">GIScience Research Group @ University of Heidelberg</a> | Map data '},variants:{Roads:{options:{variant:"roads",attribution:"{attribution.OpenMapSurfer}{attribution.OpenStreetMap}"}},Hybrid:{options:{variant:"hybrid",attribution:"{attribution.OpenMapSurfer}{attribution.OpenStreetMap}"}},AdminBounds:{options:{variant:"adminb",maxZoom:18,attribution:"{attribution.OpenMapSurfer}{attribution.OpenStreetMap}"}},ContourLines:{options:{variant:"asterc",maxZoom:18,minZoom:13,attribution:'{attribution.OpenMapSurfer} <a href="https://lpdaac.usgs.gov/products/aster_policies">ASTER GDEM</a>'}},Hillshade:{options:{variant:"asterh",maxZoom:18,attribution:'{attribution.OpenMapSurfer} <a href="https://lpdaac.usgs.gov/products/aster_policies">ASTER GDEM</a>, <a href="http://srtm.csi.cgiar.org/">SRTM</a>'}},ElementsAtRisk:{options:{variant:"elements_at_risk",attribution:"{attribution.OpenMapSurfer}{attribution.OpenStreetMap}"}}}},Hydda:{url:"https://{s}.tile.openstreetmap.se/hydda/{variant}/{z}/{x}/{y}.png",options:{maxZoom:18,variant:"full",attribution:'Tiles courtesy of <a href="http://openstreetmap.se/" target="_blank">OpenStreetMap Sweden</a> &mdash; Map data {attribution.OpenStreetMap}'},variants:{Full:"full",Base:"base",RoadsAndLabels:"roads_and_labels"}},Thunderforest:{url:"https://{s}.tile.thunderforest.com/{variant}/{z}/{x}/{y}.png",options:{maxNativeZoom:18,attribution:'&copy; <a href="http://www.opencyclemap.org">OpenCycleMap</a>, {attribution.OpenStreetMap}',credits:{text:"Map data: OpenCycleMap contributors",link:"http://www.opencyclemap.org"},variant:"cycle"},variants:{OpenCycleMap:"cycle",Transport:{options:{variant:"transport",maxZoom:19,maxNativeZoom:19}},TransportDark:{options:{variant:"transport-dark",maxZoom:19,maxNativeZoom:19}},Landscape:"landscape",Outdoors:"outdoors"}},MapQuestOpen:{url:"http://otile{s}.mqcdn.com/tiles/1.0.0/{type}/{z}/{x}/{y}.{ext}",options:{maxNativeZoom:18,type:"map",ext:"jpg",attribution:'Tiles Courtesy of <a href="http://www.mapquest.com/">MapQuest</a> &mdash; Map data {attribution.OpenStreetMap}',subdomains:["1","2","3","4"]},variants:{OSM:{},Aerial:{options:{type:"sat",attribution:'Tiles Courtesy of <a href="http://www.mapquest.com/">MapQuest</a> &mdash; Portions Courtesy NASA/JPL-Caltech and U.S. Depart. of Agriculture, Farm Service Agency'}},HybridOverlay:{options:{type:"hyb",ext:"png",opacity:.9}}}},MapBox:{url:"https://api.tiles.mapbox.com/v4/{source}/{z}/{x}/{y}.png?access_token={accessToken}",options:{maxNativeZoom:18,attribution:'Imagery from <a href="http://mapbox.com/about/maps/">MapBox</a> &mdash; Map data {attribution.OpenStreetMap}',subdomains:["a","b","c","d"]}},MapBoxStyle:{url:"https://api.mapbox.com/styles/v1/mapbox/{source}/tiles/{z}/{x}/{y}?access_token={accessToken}",options:{attribution:'Imagery from <a href="http://mapbox.com/about/maps/">MapBox</a>',subdomains:["a","b","c","d"]}},Stamen:{url:"https://stamen-tiles-{s}.a.ssl.fastly.net/{variant}/{z}/{x}/{y}.{ext}",options:{attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data {attribution.OpenStreetMap}',subdomains:"abcd",minZoom:0,maxZoom:20,variant:"toner",ext:"png"},variants:{Toner:"toner",TonerBackground:"toner-background",TonerHybrid:"toner-hybrid",TonerLines:"toner-lines",TonerLabels:"toner-labels",TonerLite:"toner-lite",Watercolor:{url:"https://stamen-tiles-{s}.a.ssl.fastly.net/{variant}/{z}/{x}/{y}.{ext}",options:{variant:"watercolor",ext:"jpg",minZoom:1,maxZoom:16}},Terrain:{options:{variant:"terrain",minZoom:0,maxZoom:18}},TerrainBackground:{options:{variant:"terrain-background",minZoom:0,maxZoom:18}},TerrainLabels:{options:{variant:"terrain-labels",minZoom:0,maxZoom:18}}}},Esri:{url:"https://server.arcgisonline.com/ArcGIS/rest/services/{variant}/MapServer/tile/{z}/{y}/{x}",options:{maxNativeZoom:18,variant:"World_Street_Map",attribution:"Tiles &copy; Esri"},variants:{WorldStreetMap:{options:{attribution:"{attribution.Esri} &mdash; Source: Esri, DeLorme, NAVTEQ, USGS, Intermap, iPC, NRCAN, Esri Japan, METI, Esri China (Hong Kong), Esri (Thailand), TomTom, 2012"}},DeLorme:{options:{variant:"Specialty/DeLorme_World_Base_Map",minZoom:1,maxZoom:11,maxNativeZoom:11,attribution:"{attribution.Esri} &mdash; Copyright: &copy;2012 DeLorme"}},WorldTopoMap:{options:{variant:"World_Topo_Map",attribution:"{attribution.Esri} &mdash; Esri, DeLorme, NAVTEQ, TomTom, Intermap, iPC, USGS, FAO, NPS, NRCAN, GeoBase, Kadaster NL, Ordnance Survey, Esri Japan, METI, Esri China (Hong Kong), and the GIS User Community"}},WorldImagery:{options:{variant:"World_Imagery",attribution:"{attribution.Esri} &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community"}},WorldTerrain:{options:{variant:"World_Terrain_Base",maxZoom:13,maxNativeZoom:13,attribution:"{attribution.Esri} &mdash; Source: USGS, Esri, TANA, DeLorme, and NPS"}},WorldShadedRelief:{options:{variant:"World_Shaded_Relief",maxZoom:13,maxNativeZoom:13,attribution:"{attribution.Esri} &mdash; Source: Esri"}},WorldPhysical:{options:{variant:"World_Physical_Map",maxZoom:8,maxNativeZoom:8,attribution:"{attribution.Esri} &mdash; Source: US National Park Service"}},OceanBasemap:{options:{variant:"Ocean_Basemap",maxZoom:13,maxNativeZoom:13,attribution:"{attribution.Esri} &mdash; Sources: GEBCO, NOAA, CHS, OSU, UNH, CSUMB, National Geographic, DeLorme, NAVTEQ, and Esri"}},NatGeoWorldMap:{options:{variant:"NatGeo_World_Map",maxZoom:16,maxNativeZoom:16,attribution:"{attribution.Esri} &mdash; National Geographic, Esri, DeLorme, NAVTEQ, UNEP-WCMC, USGS, NASA, ESA, METI, NRCAN, GEBCO, NOAA, iPC"}},WorldGrayCanvas:{options:{variant:"Canvas/World_Light_Gray_Base",maxZoom:16,maxNativeZoom:16,attribution:"{attribution.Esri} &mdash; Esri, DeLorme, NAVTEQ"}}}},OpenWeatherMap:{url:"http://{s}.tile.openweathermap.org/map/{variant}/{z}/{x}/{y}.png",options:{maxZoom:19,maxNativeZoom:19,attribution:'Map data &copy; <a href="http://openweathermap.org">OpenWeatherMap</a>',opacity:.5},variants:{Clouds:"clouds",CloudsClassic:"clouds_cls",Precipitation:"precipitation",PrecipitationClassic:"precipitation_cls",Rain:"rain",RainClassic:"rain_cls",Pressure:"pressure",PressureContour:"pressure_cntr",Wind:"wind",Temperature:"temp",Snow:"snow"}},HERE:{url:"https://{s}.{base}.maps.cit.api.here.com/maptile/2.1/maptile/{mapID}/{variant}/{z}/{x}/{y}/256/png8?app_id={app_id}&app_code={app_code}",options:{attribution:'Map &copy; 1987-2014 <a href="http://developer.here.com">HERE</a>',subdomains:["1","2","3","4"],mapID:"newest",app_id:"<insert your app_id here>",app_code:"<insert your app_code here>",base:"base",variant:"normal.day",maxZoom:20,maxNativeZoom:20},variants:{normalDay:"normal.day",normalDayCustom:"normal.day.custom",normalDayGrey:"normal.day.grey",normalDayMobile:"normal.day.mobile",normalDayGreyMobile:"normal.day.grey.mobile",normalDayTransit:"normal.day.transit",normalDayTransitMobile:"normal.day.transit.mobile",normalNight:"normal.night",normalNightMobile:"normal.night.mobile",normalNightGrey:"normal.night.grey",normalNightGreyMobile:"normal.night.grey.mobile",carnavDayGrey:"carnav.day.grey",hybridDay:{options:{base:"aerial",variant:"hybrid.day"}},hybridDayMobile:{options:{base:"aerial",variant:"hybrid.day.mobile"}},pedestrianDay:"pedestrian.day",pedestrianNight:"pedestrian.night",satelliteDay:{options:{base:"aerial",variant:"satellite.day"}},terrainDay:{options:{base:"aerial",variant:"terrain.day"}},terrainDayMobile:{options:{base:"aerial",variant:"terrain.day.mobile"}}}},Acetate:{url:"http://a{s}.acetate.geoiq.com/tiles/{variant}/{z}/{x}/{y}.png",options:{attribution:"&copy;2012 Esri & Stamen, Data from OSM and Natural Earth",subdomains:["0","1","2","3"],minZoom:2,maxZoom:18,maxNativeZoom:18,variant:"acetate-base"},variants:{basemap:"acetate-base",terrain:"terrain",all:"acetate-hillshading",foreground:"acetate-fg",roads:"acetate-roads",labels:"acetate-labels",hillshading:"hillshading"}},FreeMapSK:{url:"http://t{s}.freemap.sk/T/{z}/{x}/{y}.jpeg",options:{minZoom:8,maxZoom:16,maxNativeZoom:16,subdomains:["1","2","3","4"],bounds:[[47.204642,15.996093],[49.830896,22.576904]],attribution:'{attribution.OpenStreetMap}, vizualization CC-By-SA 2.0 <a href="http://freemap.sk">Freemap.sk</a>'}},MtbMap:{url:"http://tile.mtbmap.cz/mtbmap_tiles/{z}/{x}/{y}.png",options:{maxNativeZoom:18,attribution:"{attribution.OpenStreetMap} &amp; USGS"}},CartoDB:{url:"https://{s}.basemaps.cartocdn.com/{variant}/{z}/{x}/{y}.png",options:{attribution:'{attribution.OpenStreetMap} &copy; <a href="http://cartodb.com/attributions">CartoDB</a>',subdomains:["a","b","c","d"],maxZoom:19,maxNativeZoom:19,variant:"light_all"},variants:{Positron:"light_all",PositronNoLabels:"light_nolabels",PositronOnlyLabels:"light_only_labels",DarkMatter:"dark_all",DarkMatterNoLabels:"dark_nolabels",DarkMatterOnlyLabels:"dark_only_labels"}},HikeBike:{url:"http://{s}.tiles.wmflabs.org/{variant}/{z}/{x}/{y}.png",options:{maxZoom:19,maxNativeZoom:19,attribution:"{attribution.OpenStreetMap}",variant:"hikebike"},variants:{HikeBike:{},HillShading:{options:{maxZoom:15,maxNativeZoom:15,variant:"hillshading"}}}},BasemapAT:{url:"https://maps{s}.wien.gv.at/basemap/{variant}/normal/google3857/{z}/{y}/{x}.{format}",options:{maxZoom:19,maxNativeZoom:19,attribution:'Datenquelle: <a href="https://www.basemap.at">basemap.at</a>',subdomains:["","1","2","3","4"],format:"png",bounds:[[46.35877,8.782379],[49.037872,17.189532]],variant:"geolandbasemap"},variants:{basemap:"geolandbasemap",grau:"bmapgrau",overlay:"bmapoverlay",highdpi:{options:{variant:"bmaphidpi",format:"jpeg"}},orthofoto:{options:{variant:"bmaporthofoto30cm",format:"jpeg"}}}},NASAGIBS:{url:"https://map1.vis.earthdata.nasa.gov/wmts-webmerc/{variant}/default/{time}/{tilematrixset}9/{z}/{y}/{x}.{format}",options:{attribution:'<span>Imagery provided by services from the Global Imagery Browse Services (GIBS), operated by the NASA/GSFC/Earth Science Data and Information System (<a href="https://earthdata.nasa.gov">ESDIS</a>) with funding provided by NASA/HQ.</span>',credits:{text:"Black Marble imagery courtesy NASA Earth Observatory"},bounds:[[-85.0511287776,-179.999999975],[85.0511287776,179.999999975]],minZoom:1,maxZoom:9,maxNativeZoom:9,format:"jpg",time:"",tilematrixset:"GoogleMapsCompatible_Level"},variants:{ModisTerraTrueColorCR:"MODIS_Terra_CorrectedReflectance_TrueColor",ModisTerraBands367CR:"MODIS_Terra_CorrectedReflectance_Bands367",ViirsEarthAtNight2012:{url:"https://map1.vis.earthdata.nasa.gov/wmts-webmerc/{variant}/default/{time}/{tilematrixset}8/{z}/{y}/{x}.{format}",options:{variant:"VIIRS_CityLights_2012",maxZoom:8,maxNativeZoom:8}},ModisTerraLSTDay:{url:"https://map1.vis.earthdata.nasa.gov/wmts-webmerc/{variant}/default/{time}/{tilematrixset}7/{z}/{y}/{x}.{format}",options:{variant:"MODIS_Terra_Land_Surface_Temp_Day",format:"png",maxZoom:7,maxNativeZoom:7,opacity:.75}},ModisTerraSnowCover:{url:"https://map1.vis.earthdata.nasa.gov/wmts-webmerc/{variant}/default/{time}/{tilematrixset}8/{z}/{y}/{x}.{format}",options:{variant:"MODIS_Terra_Snow_Cover",format:"png",maxZoom:8,maxNativeZoom:8,opacity:.75}},ModisTerraAOD:{url:"https://map1.vis.earthdata.nasa.gov/wmts-webmerc/{variant}/default/{time}/{tilematrixset}6/{z}/{y}/{x}.{format}",options:{variant:"MODIS_Terra_Aerosol",format:"png",maxZoom:6,maxNativeZoom:6,opacity:.75}},ModisTerraChlorophyll:{url:"https://map1.vis.earthdata.nasa.gov/wmts-webmerc/{variant}/default/{time}/{tilematrixset}7/{z}/{y}/{x}.{format}",options:{variant:"MODIS_Terra_Chlorophyll_A",format:"png",maxZoom:7,maxNativeZoom:7,opacity:.75}}}},NLS:{url:"https://nls-{s}.tileserver.com/{variant}/{z}/{x}/{y}.jpg",options:{attribution:'<a href="http://geo.nls.uk/maps/">National Library of Scotland Historic Maps</a>',bounds:[[49.6,-12],[61.7,3]],minZoom:1,maxZoom:18,maxNativeZoom:18,subdomains:["0","1","2","3"]},variants:{OS_1900:"NLS_API",OS_1920:"nls",OS_opendata:{url:"http://geo.nls.uk/maps/opendata/{z}/{x}/{y}.png",options:{maxZoom:16,maxNativeZoom:16}},OS_6inch_1st:{url:"http://geo.nls.uk/maps/os/six_inch/{z}/{x}/{y}.png",options:{tms:!0,minZoom:6,maxZoom:16,maxNativeZoom:16,bounds:[[49.86261,-8.66444],[60.89421,1.7785]]}},OS_6inch:"os_6_inch_gb",OS_25k:"25k",OS_npe:{url:"http://geo.nls.uk/maps/os/newpopular/{z}/{x}/{y}.png",options:{tms:!0,minZoom:3,maxZoom:15,maxNativeZoom:15}},OS_7th:"os7gb",OS_London:{options:{variant:"London_1056",minZoom:9,maxNativeZoom:9,bounds:[[51.177621,-.708618],[51.618016,.355682]]}},GSGS_Ireland:{url:"http://geo.nls.uk/maps/ireland/gsgs4136/{z}/{x}/{y}.png",options:{tms:!0,minZoom:5,maxZoom:15,maxNativeZoom:15,bounds:[[51.37178,-10.810546],[55.422779,-5.262451]]}}}},LINZ:{url:"http://tiles-{s}.data-cdn.linz.govt.nz/services;key={linzAPIkey}/tiles/v4/{variant}/{tilematrixset}/{z}/{x}/{y}.png",options:{attribution:'<a href="https://www.linz.govt.nz/data/licensing-and-using-data/attributing-elevation-or-aerial-imagery-data">Sourced from LINZ. CC-BY 4.0</a>',subdomains:["a","b","c","d"],linzAPIkey:"<insert your LINZ API Key here>",variant:"set=4702",tilematrixset:"EPSG:3857",maxZoom:22,maxNativeZoom:22},variants:{nz_aerial_imagery:{options:{attribution:'<a href="https://www.linz.govt.nz/data/licensing-and-using-data/attributing-elevation-or-aerial-imagery-data">Sourced from LINZ. CC-BY 4.0</a>',variant:"set=4702",tilematrixset:"EPSG:3857",maxZoom:22,maxNativeZoom:22}},nz_topo50_maps:{options:{attribution:'Sourced from the <a href="https://data.linz.govt.nz/">LINZ Data Service</a> and licensed for reuse under the <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> license',variant:"layer=50767",tilematrixset:"EPSG:3857",maxZoom:22,maxNativeZoom:22}},nz_topo50_gridless_maps:{options:{attribution:'Sourced from the <a href="https://data.linz.govt.nz/">LINZ Data Service</a> and licensed for reuse under the <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> license',variant:"layer=52343",tilematrixset:"EPSG:3857",maxZoom:22,maxNativeZoom:22}},nz_topo250_gridless_maps:{options:{attribution:'Sourced from the <a href="https://data.linz.govt.nz/">LINZ Data Service</a> and licensed for reuse under the <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> license',variant:"layer=52324",tilematrixset:"EPSG:3857",maxZoom:22,maxNativeZoom:22}},nz_topo250_maps:{options:{attribution:'Sourced from the <a href="https://data.linz.govt.nz/">LINZ Data Service</a> and licensed for reuse under the <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> license',variant:"layer=50798",tilematrixset:"EPSG:3857",maxZoom:22,maxNativeZoom:22}},nz_parcel_boundaries_wireframe:{options:{attribution:'Sourced from the <a href="https://data.linz.govt.nz/">LINZ Data Service</a> and licensed for reuse under the <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> license',variant:"set=4769",tilematrixset:"EPSG:3857",maxZoom:22,maxNativeZoom:22}}}},PDOK:{url:"https://geodata.nationaalgeoregister.nl/tiles/service/wmts?layer={variant}&tilematrixset=EPSG:3857&Service=WMTS&Request=GetTile&Version=1.0.0&Format=image%2Fpng&TileMatrix={z}&TileCol={x}&TileRow={y}",options:{attribution:'<a href="https://www.pdok.nl/introductie?articleid=1949876">BRT Achtergrondkaart</a> by <a href="https://www.kadaster.nl/">Kadaster</a>, <a href="http://creativecommons.org/licenses/by/4.0">CC BY 4.0</a>',format:"png",bounds:[[48.0405018704,-1.65729160235],[56.1105896442,12.4317272654]],minZoom:6,maxZoom:19,maxNativeZoom:19},variants:{brtachtergrondkaart:"brtachtergrondkaart",brtachtergrondkaartgrijs:"brtachtergrondkaartgrijs",brtachtergrondkaartpastel:"brtachtergrondkaartpastel",brtachtergrondkaartwater:"brtachtergrondkaartwater",luchtfotoRGB:{url:"https://geodata.nationaalgeoregister.nl/luchtfoto/rgb/wmts?layer={variant}&tilematrixset=EPSG:3857&Service=WMTS&Request=GetTile&Version=1.0.0&Format=image%2Fpng&TileMatrix={z}&TileCol={x}&TileRow={y}",options:{variant:"Actueel_ortho25",attribution:'<a href="https://www.pdok.nl/introductie?articleid=1954278">Luchtfoto Actueel Ortho 25cm RGB</a> by <a href="http://www.beeldmateriaal.nl">Beeldmateriaal.nl</a>, <a href="http://creativecommons.org/licenses/by/4.0">CC BY 4.0</a>'}},luchtfotoIR:{url:"https://geodata.nationaalgeoregister.nl/luchtfoto/rgb/wmts?layer={variant}&tilematrixset=EPSG:3857&Service=WMTS&Request=GetTile&Version=1.0.0&Format=image%2Fpng&TileMatrix={z}&TileCol={x}&TileRow={y}",options:{variant:"Actueel_ortho25IR",attribution:'<a href="https://www.pdok.nl/introductie?articleid=1954278">Luchtfoto Actueel Ortho 25cm Infrarood</a> by <a href="http://www.beeldmateriaal.nl">Beeldmateriaal.nl</a>, <a href="http://creativecommons.org/licenses/by/4.0">CC BY 4.0</a>'}}}}}},12226:(e,t,r)=>{"use strict";r.d(t,{B:()=>o});var n=r(62651);function o(e,t){return(0,n.U)(e)(t)}},89077:(e,t,r)=>{"use strict";r.d(t,{LR:()=>f,RP:()=>d});var n=r(78598),o=r.n(n),i=r(97995),a=r.n(i),l=(r(39902),r(89597),r(66085),r(82702),r(27418),r(72163),r(5055),r(3674),r(52628),r(27361),r(91175),r(66604),r(87185),r(30998),r(78718),r(18721),r(93220),r(24261),r(57557),r(47037),r(85564)),c=r.n(l);function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=r){var n,o,i=[],a=!0,l=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}r(13311),r(6557);var p=function(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";return c()([[[/\&/g,"&amp;"]],e?[]:[[/\"/g,"&quot;"]],t?[]:[[/\'/g,"&apos;"]],r?[]:[[/\>/g,"&gt;"]],n?[]:[[/\</g,"&lt;"]]]).reduce((function(e,t){var r=s(t,2),n=r[0],o=r[1];return e.replace(n,o)}),o)};p.bind(null,!0,!0,!0,!1),p.bind(null,!1,!1,!0,!1),r(24262),r(90183),new DOMParser;var f=function(e,t,r){var n=new Blob([e],{type:r});o().saveAs(n,t)},d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"snapshot.png",r=arguments.length>2?arguments[2]:void 0;f(a()(e),t,r)}},2870:(e,t,r)=>{"use strict";r.d(t,{Q:()=>a,j:()=>l});var n=r(27361),o=r.n(n),i=r(53005),a=function(e,t){var r=e.format,n=e.queryParams,o=void 0===n?{}:n;return o.info_format||o.outputFormat||r&&i.O7[r]||t.format},l=function(e){return!!o()(e,"layer.search.url")}},62192:(e,t,r)=>{"use strict";r.d(t,{k2:()=>P,tL:()=>x});var n=r(59854),o=r.n(n),i=r(85564),a=r.n(i),l=r(18029),c=r.n(l),s=r(44908),u=r.n(s),p=r(27361),f=r.n(p),d=r(24261),m=r.n(d),y=r(58767),b=r(8797),g=r(90183);function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(Object(r),!0).forEach((function(t){O(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function O(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function w(e){return function(e){if(Array.isArray(e))return E(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return E(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?E(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var S=function(e,t){return{length:o()((0,b.Ov)(t,"m",e.length.label)||0,2)+" "+e.length.label,area:o()((0,b.Ov)(t,"sqm",e.area.label)||0,2)+" "+e.area.label,bearing:(0,b.rp)(o()(t||0,6)).toString()}},P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return u()(e.map((function(e){return"LineString"===e.geometry.type&&"bearing"===f()(e,"properties.values[0].type","")?"Bearing":e.geometry.type})))},j={offsetY:1,fontSize:"10",fontSizeUom:"px",fontFamily:"Courier New",font:"10px Courier New",textAlign:"center",color:"#000000",opacity:1,fillColor:"#000000",fillOpacity:1},C={offsetY:-15,fontSize:"13",fontSizeUom:"px",fontFamily:"Courier New",font:"13px Courier New",textAlign:"center",color:"#000000",opacity:1,fillColor:"#000000",fillOpacity:1},x=function(e,t,r,n,o,i){var l,s,p=(l=e,(s=u()(l.map((function(e){return f()(e,"properties.values[0].type","")})))).length>1?{title:"Multiple Measurement",iconGlyph:"geometry-collection"}:{title:"Measure "+c()(s[0]),iconGlyph:"1-measure-"+s[0]});return{type:"FeatureCollection",features:[].concat(w(a()(e.map((function(e){return function(e,t,r){var n,o,i,a=r||C,l=!(null===(n=e.properties)||void 0===n||null===(o=n.values)||void 0===o||!o.find((function(e){return"bearing"===e.type})));return[{type:"Feature",geometry:{type:e.geometry.type,coordinates:(0,b.L0)(e.geometry),textLabels:e.geometry.textLabels},properties:{id:m()(),isValidFeature:!0,geometryGeodesic:"LineString"!==e.geometry.type||l?null:{type:"LineString",coordinates:(0,g.transformLineToArcs)(e.geometry.coordinates)},useGeodesicLines:"LineString"===e.geometry.type&&!l,values:(null===(i=e.properties)||void 0===i?void 0:i.values)||[]},style:[h(h({},y.z4[e.geometry.type]),{},{type:e.geometry.type,id:m()(),geometry:"LineString"!==e.geometry.type||l?null:"lineToArc",title:"".concat(e.geometry.type," Style"),filtering:!0})].concat("LineString"===e.geometry.type?(0,y.N_)():[])}].concat(w(e.properties.values.map((function(e){var r=e.value,n=e.formattedValue,o=e.type;return{type:"Feature",geometry:{type:"Point",coordinates:e.position},properties:{valueText:n||S(t,r)[o],isText:!0,isValidFeature:!0,id:m()()},style:h(h({},a),{},{id:m()(),filtering:!0,title:"Text Style",type:"Text"})}}))))}(e,r,i)})))),w(t.filter((function(e){return!!e})).map((function(e){var t=e.text;return{type:"Feature",geometry:{type:"Point",coordinates:e.position},properties:{valueText:t,isValidFeature:!0,isText:!0,id:m()()},style:h(h({},j),{},{id:m()(),filtering:!0,title:"Text Style",type:"Text"})}})))),properties:{id:n,description:o,type:"Measure",title:p.title,iconGlyph:p.iconGlyph},style:{}}}},99009:(e,t,r)=>{"use strict";r.d(t,{I$:()=>D,s1:()=>R,Vi:()=>_,nK:()=>Z,Py:()=>B,H$:()=>z,uW:()=>G,YD:()=>U,$N:()=>W,U_:()=>V,Gg:()=>X,VM:()=>Q,ZF:()=>J});var n=r(91175),o=r.n(n),i=r(27361),a=r.n(i),l=r(1469),c=r.n(l),s=r(47037),u=r.n(s),p=r(85564),f=r.n(p),d=r(14293),m=r.n(d),y=r(57557),b=r.n(y),g=r(14176),v=r.n(g),h=r(52353),O=r.n(h),w=r(24261),E=r.n(w),S=r(8575),P=r(11531);function j(e){return function(e){if(Array.isArray(e))return e}(e)||T(e)||x(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e){return function(e){if(Array.isArray(e))return k(e)}(e)||T(e)||x(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){if(e){if("string"==typeof e)return k(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?k(e,t):void 0}}function T(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function A(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?I(Object(r),!0).forEach((function(t){F(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function F(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var D="___",R="styleeditor",N={},M={css:"geocss",sld:"xml"},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type&&e.type.localPart&&e.type.localPart.toLowerCase()||"";return-1!==t.indexOf("polygon")||-1!==t.indexOf("surface")?"polygon":-1!==t.indexOf("linestring")?"linestring":-1!==t.indexOf("point")?"point":"vector"},_=function(){return"".concat(E()(),"_ms_").concat(Date.now().toString())},Z=function(e){var t=e.title;return"".concat((void 0===t?"":t).toLowerCase().replace(/\s/g,"_")).concat(D).concat(E()())},B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.describeLayer,r=void 0===t?{}:t,n=e.describeFeatureType,i=void 0===n?{}:n,l=r&&r.owsType||null,c=a()(i,"complexType[0].complexContent.extension.sequence.element")||null,s=c&&o()(c.filter((function(e){var t=e.type;return t&&"gml"===t.prefix}))),u=("WCS"===l?"raster":s&&"WFS"===l&&L(s))||null,p="raster"===u?r.bands:c&&c.reduce((function(e,t){var r=t.name,n=t.type,o=void 0===n?{}:n;return A(A({},e),{},F({},r,{localPart:o.localPart,prefix:o.prefix}))}),{});return{geometryType:u,properties:p,owsType:l}},z=function(e){return M[e]||e},G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(N.isSameOrigin)return N.isSameOrigin(e,t);if(!t.baseUrl||!e.url)return!1;var r=[t.baseUrl].concat(C(t.availableUrls||[])),n=r.map((function(e){var t=S.parse(e);return"".concat(t.protocol,"//").concat(t.host)})),o=S.parse(e.url),i="".concat(o.protocol,"//").concat(o.host);return-1!==n.indexOf(i)},U=function(){if(N.getStyleTemplates){var e=N.getStyleTemplates();return[].concat(C(c()(e)?e:[]),C(P.baseTemplates))}return[].concat(C(P.customTemplates),C(P.baseTemplates))},W=function(e){var t=u()(e)&&e.split(":")||[];return{workspace:t[1]&&t[0],name:t[1]||t[0]}},V=function(e){var t=e.name,r=e.workspace;return"".concat(r&&r.name&&"".concat(r.name,":")||"").concat(t)},q=function e(t,r){if(!(t&&t.filterFields&&t.groupFields&&r))return null;var n=t.filterFields.filter((function(e){return e.groupId===r.id})),o=t.groupFields.filter((function(e){return e.groupId===r.id})),i=[].concat(C(n),C(o)),a={OR:"||",AND:"&&",like:"*=","=":"==","<>":"!=",isNull:"=="},l=i.map((function(r){if(void 0!==r.rowId){var n=r.operator,o=r.attribute,i=r.value;return n&&o&&!m()(i)?[a[n]||n,o,"isNull"===n?null:i]:null}return e(t,r)})).filter((function(e){return e})),c=r.logic;return 0===l.length?null:[a[c]].concat(C(l))},H=function(e){var t,r=null==e||null===(t=e.groupFields)||void 0===t?void 0:t.find((function(e){return!e.groupId}));return r&&q(e,r)},$=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.index,o=void 0===n?0:n,i=r.groupId,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};if(!t)return null;var l={"||":"OR","&&":"AND","*=":"like","==":"=","!=":"<>"},s=j(t),u=s[0],p=s.slice(1),f=c()(u),d=f?u[0]:u,m=f?u.filter((function(e,t){return 0!==t})):p;if("||"===d||"&&"===d){var y=E()();return a("groupField",{id:y,index:o,logic:l[d]}),e(p,{index:o+1,groupId:y},a)}return d?(a("filterField",{attribute:m[0],groupId:i,operator:l[d]||d,rowId:E()(),type:isNaN(parseFloat(m[1]))?"string":"number",value:m[1]}),e(p,{index:o,groupId:i},a)):null},K=function(e){var t=[],r=[];return $(e,void 0,(function(e,n){"groupField"===e&&t.push(n),"filterField"===e&&r.push(n)})),{groupFields:t,filterFields:r}};function Y(e){var t=v()(e,O());return Object.keys(t).reduce((function(e,r){switch(r){case"haloColor":case"haloWidth":return"Text"===t.kind&&0===t.haloWidth?e:A(A({},e),{},F({},r,t[r]));case"outlineWidth":case"outlineColor":case"outlineOpacity":return"Fill"===t.kind&&0===t.outlineWidth?e:A(A({},e),{},F({},r,t[r]));case"strokeWidth":case"strokeColor":case"strokeOpacity":return"Mark"===t.kind&&0===t.strokeWidth?e:A(A({},e),{},F({},r,t[r]));case"graphicFill":case"graphicStroke":return A(A({},e),{},F({},r,Y(t[r])));default:return A(A({},e),{},F({},r,t[r]))}}),{})}function X(e){return e&&e.rules?A(A({},e),{},{rules:f()(e.rules.map((function(e){if("Classification"===e.kind)return(e.classification||[]).map((function(t,r){var n=r===e.classification.length-1?"<=":"<",o=null!==t.min?[[">=",e.attribute,t.min]]:[],i=null!==t.max?[[n,e.attribute,t.max]]:[],a=null!==t.min&&">= "+t.min,l=null!==t.max&&n+" "+t.max;return A(A({name:a&&l?a+" and "+l:a||l,filter:o[0]||i[0]?["&&"].concat(o,i):void 0},e.scaleDenominator&&{scaleDenominator:e.scaleDenominator}),{},{symbolizers:[Y(A(A({},b()(e,["ruleId","classification","intervals","method","ramp","reverse","attribute","symbolizerKind"])),{},{kind:e.symbolizerKind||"Fill",color:t.color}))]})}));if("Raster"===e.kind){var t=e.classification&&e.classification.length>0&&{colorMapEntries:(e.classification||[]).map((function(e){return{label:e.label,quantity:e.quantity,color:e.color,opacity:e.opacity}}))};return A(A({name:e.name||""},e.scaleDenominator&&{scaleDenominator:e.scaleDenominator}),{},{symbolizers:[Y(A(A({},b()(e,["ruleId","classification","intervals","method","ramp","reverse","continuous","symbolizerKind","name"])),{},{kind:"Raster"},t&&{colorMap:t}))]})}var r=H(e.filter);return A(A({},e),{},{filter:r,symbolizers:((null==e?void 0:e.symbolizers)||[]).map((function(e){return Y(e)}))})})))}):e}function Q(e){return A(A({},e),{},{rules:e.rules.map((function(e){return A(A({},e),{},{ruleId:E()(),filter:e.filter&&K(e.filter),symbolizers:e.symbolizers&&e.symbolizers.map((function(e){return A(A({},e),{},{symbolizerId:E()()})}))||[]})}))})}function J(e){return new Promise((function(t,r){e||r({messageId:"imageSrcEmpty",isBase64:!1});var n=!1;if(0===e.indexOf("data:image")){var o=e.split("base64,");(n=function(e){try{return window.atob(e),!0}catch(e){return!1}}(o[o.length-1]))||r({messageId:"imageSrcInvalidBase64",isBase64:n})}var i=new Image;i.onload=function(){t({src:e,isBase64:n})},i.onerror=function(){r({messageId:n?"imageSrcInvalidBase64":"imageSrcLoadError",isBase64:n})},i.src=e}))}},11847:(e,t,r)=>{"use strict";r.d(t,{ij:()=>y,w0:()=>b,K2:()=>g,Nw:()=>v});var n=r(8575),o=r(1469),i=r.n(o),a=r(47037),l=r.n(a),c=r(18446),s=r.n(c),u=r(89734),p=r.n(u),f=r(13311),d=r.n(f);function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}r(64210);var y=function(e){if(!e)return{};var t=!(0===e.indexOf("http")),r=t?[]:e.match(/([^:]*:)\/\/([^:]*:?[^@]*@)?([^:\/\?]*):?([^\/\?]*)/);if(t){var n=window.location;r[1]=n.protocol,r[3]=n.hostname,r[4]=n.port,r[5]=e}r[4]=""!==r[4]&&r[4]?r[4]:"https:"===r[1]?"443":"80",r[5]=r[5]?r[5]:e.slice(r[0].length);var o,i,a=(i=6,function(e){if(Array.isArray(e))return e}(o=r)||function(e,t){var r=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=r){var n,o,i=[],a=!0,l=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(l)throw o}}return i}}(o,i)||function(e,t){if(e){if("string"==typeof e)return m(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?m(e,t):void 0}}(o,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),l=a[1],c=a[3],s=a[4],u=a[5],p=0===u.indexOf("/")?u.split("/")[1]:"";return{protocol:l,domain:c,port:s,rootPath:u,applicationRootPath:p}},b=function(e,t){var r=i()(e)?e[0]:e,o=i()(t)?t[0]:t;if(r===o)return!0;if(!r||!o)return!1;if(!l()(r)||!l()(o))return!1;var a=n.parse(r),c=n.parse(o),u=y(r),f=y(o),d=u.protocol===f.protocol,m=u.domain===f.domain,b=u.port===f.port,g=a.pathname===c.pathname,v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(e===t)return!0;if(!e&&!t)return!0;var r=e?e.split("&").filter((function(e){return!!e})):[],n=t?t.split("&").filter((function(e){return!!e})):[];return s()(p()(r),p()(n))}(a.query,c.query);return d&&b&&m&&g&&v},g=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:/^(http(s{0,1}):\/\/)+?[\w.-]+(?:\.[\w\.-]+)+[\w\-\._~:/?#[\]@!\$&'\(\)\*\+,;=.]+$/,r=new RegExp(t);return r.test(e)},v=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:/^(http(s{0,1}):\/\/)+?[\w.\-{}]+(?:\.[\w\.-]+)+[\w\-\._~\/\;\.\%\:\&\=\?{}]+$/,n=new RegExp(r),o=n.test(e);if(!o)return!1;if(o&&!t)return!0;if(o&&t){var i=/\{(.*?)\}/.test(e);return 0===t.filter((function(e){return d()(i,e)})).length}return!1}},95344:(e,t,r)=>{function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=r(13311),l=r(27418)({},r(89808)),c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(e).length>0&&Object.keys(e).reduce((function(r,n){var o=new RegExp(e[n]);return r&&o.test(t[n])}),!0)},s=function(e,t,r){if(l[t]){if(l[t][e])return l[t][e](r);if(l[t].defaultEditor)return l[t].defaultEditor(r)}return null};e.exports={get:function(){return l},register:function(e){var t=e.name,r=e.editors;r&&(l[t]=r)},remove:function(e){if(t=e,-1!==Object.keys(l).indexOf(t))try{return delete l[e],!0}catch(e){return!1}var t;return!1},clean:function(){l={}},getCustomEditor:function(e){var t=e.attribute,r=e.url,n=e.typeName,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],l=arguments.length>2?arguments[2]:void 0,u=l.type,p=l.generalProps,f=void 0===p?{}:p,d=l.props,m=a(i,(function(e){return c(e.regex,{attribute:t,url:r,typeName:n})}));if(m){var y=s(u,m.editor,o(o(o({},d),f),m.editorProps||{}));return y}return null}}},51751:(e,t,r)=>{var n=r(34387),o=n.filter,i=n.fidFilter;e.exports={fidFilter:i,filter:o}},39156:(e,t,r)=>{function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=r(2245),l=r(84596),c=r(78889).wfsToGmlVersion,s=function(e){return'service="WFS" version="'+e+'" '+("1.0.0"===e?'outputFormat="GML2" ':"")+'xmlns:gml="http://www.opengis.net/gml" xmlns:wfs="http://www.opengis.net/wfs" xmlns:ogc="http://www.opengis.net/ogc" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.opengis.net/wfs '+"http://schemas.opengis.net/wfs/".concat(e,"1.0.0"===e?'/WFS-basic.xsd"':'/wfs.xsd"')},u=function(e){return'service="WFS" version="'+e+'" xmlns:wfs="http://www.opengis.net/wfs/2.0" xmlns:fes="http://www.opengis.net/fes/2.0" xmlns:gml="http://www.opengis.net/gml/3.2" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.opengis.net/wfs/2.0 http://schemas.opengis.net/wfs/2.0/wfs.xsd http://www.opengis.net/gml/3.2 http://schemas.opengis.net/gml/3.2.1/gml.xsd"'};e.exports=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.wfsVersion,r=void 0===t?"1.1.0":t,n=e.gmlVersion,i=e.filterNS,p=e.wfsNS,f=void 0===p?"wfs":p,d=n;!d&&r?d=c(r):d||(d="3.1.1");var m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.viewParams,n=e.resultType,o=e.outputFormat,i=e.startIndex,a=e.maxFeatures,l=function(e){return 0===r.indexOf("2.")?'count="'.concat(e,'"'):'maxFeatures="'.concat(e,'"')};return(0===r.indexOf("1.")?s(r):u(r))+(n?' resultType="'.concat(n,'"'):"")+(o?' outputFormat="'.concat(o,'"'):"")+(i||0===i?' startIndex="'.concat(i,'"'):"")+(a||0===a?" ".concat(l(a)):"")+(t?' viewParams="'.concat(t,'"'):"")},y=function(e){return l(e).map((function(e){return"<".concat("2.0"===r?"fes":"ogc",":PropertyName>").concat(e,"</").concat("2.0"===r?"fes":"ogc",":PropertyName>")})).join("")};return o(o({propertyName:y},a({gmlVersion:d,wfsVersion:r,filterNS:i||"2.0"===r?"fes":"ogc"})),{},{getFeature:function(e,t){return"<".concat(f,":GetFeature ").concat(m(t),">").concat(Array.isArray(e)?e.join(""):e,"</").concat(f,":GetFeature>")},sortBy:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"ASC";return"<".concat(f,":SortBy><").concat(f,":SortProperty>").concat(y(e),"<").concat(f,":SortOrder>").concat(t,"</").concat(f,":SortOrder></").concat(f,":SortProperty></").concat(f,":SortBy>")},query:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=n.srsName,i=void 0===o?"EPSG:4326":o;return"<".concat(f,":Query ").concat("2.0"===r?"typeNames":"typeName",'="').concat(e,'" srsName="').concat(i,'">')+"".concat(Array.isArray(t)?t.join(""):t)+"</".concat(f,":Query>")}})}},50937:(e,t,r)=>{function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var c=r(27361),s=r(75775),u=s.insert,p=s.feature,f=s.attribute,d=r(99381).transaction,m=r(50525),y=m.deleteFeaturesByFilter,b=m.deleteFeature,g=r(16685),v=g.update,h=g.propertyChange,O=r(78889),w=O.getPropertyDesciptor,E=O.getValue,S=O.findGeometryProperty,P=O.featureTypeSchema,j=r(39156),C=function(e,t){return t&&t.length>0?[e].concat(function(e){if(Array.isArray(e))return l(e)}(r=t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||function(e,t){if(e){if("string"==typeof e)return l(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?l(e,t):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()):e;var r},x=function(e){this.version=e},T=function(e){return c(e,"featureTypes[0].typeName")},k=function(e){return e.targetPrefix?"".concat(e.targetPrefix,":").concat(T(e)):T(e)},I=function(e,t){return e.geometry_name||S(t).name},A=function(e,t){return"geometry"===e||e===I({},t)?I({},t):e};e.exports=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.wfsVersion,n=void 0===r?"1.1.0":r,i=t.wfsNS,l=void 0===i?"wfs":i,c=a(t,["wfsVersion","wfsNS"]);if("1.1.0"!==n)throw new x(n);var s=function(t){return p(e.targetPrefix,T(e),Object.keys(t.properties||[]).filter((function(t){return w(t,e)})).map((function(r){return f(e.targetPrefix,r,E(t.properties[r],r,e))})).concat(t.geometry?f(e.targetPrefix,I(t,e),E(t.geometry,I(t,e),e)):[]))},m=function(e){return e.features?e.features.map(s):s(e)};return o(o({},j(o(o({},c),{},{wfsVersion:n,wfsNS:l}))),{},{insert:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return u(l,Array.isArray(C(e,r))?C(e,r).map(m):m(e))},getPropertyName:function(t){return A(t,e)},deleteByFilter:function(t){return y(l,t,k(e))},deleteFeature:function(t){return b(l,t,k(e))},update:function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return v(l,k(e),C(t,n))},propertyChange:function(t,r){return h(l,t,E(r,t,e))},transaction:function(t){for(var r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return d(C(t,o),P(e),n,l)}})}},50525:(e,t,r)=>{var n=r(51751).fidFilter,o=function(e,t,r){return"<".concat(e,':Delete typeName="').concat(r,'">').concat(t,"</").concat(e,":Delete>")},i=function(e,t,r){return o(e,n("ogc",t),r)};e.exports={deleteFeaturesByFilter:o,deleteById:i,deleteFeature:function(e,t,r){return i(e,t.features&&1===t.features.length?t.features[0].id:t.id,r)}}},75775:e=>{var t=function(e,t,r){return"<".concat(e?e+":"+t:t,">").concat(Array.isArray(r)?r.join(""):r,"</").concat(e?e+":"+t:t,">")},r=t,n=t;e.exports={insert:function(e,t){return"<".concat(e,":Insert>").concat(Array.isArray(t)?t.join(""):t,"</").concat(e,":Insert>")},feature:n,attribute:r}},99381:e=>{e.exports={transaction:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.wfsNS,o=void 0===n?"wfs":n,i=r.wfsVersion,a=void 0===i?"1.1.0":i;return"<".concat(o,":Transaction ")+'service="WFS" '+'version="'.concat(a,'" ')+"xmlns:".concat(o,'="http://www.opengis.net/wfs" ')+'xmlns:gml="http://www.opengis.net/gml" xmlns:ogc="http://www.opengis.net/ogc" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.opengis.net/wfs" '+"".concat(t,">")+"".concat(Array.isArray(e)?e.join(""):e)+"</".concat(o,":Transaction>")}}},16685:e=>{e.exports={update:function(e,t,r){return"<".concat(e,':Update typeName="').concat(t,'">').concat(Array.isArray(r)?r.join(""):r,"</wfs:Update>")},propertyChange:function(e,t,r){return"<".concat(e,":Property>")+"<".concat(e,":Name>").concat(t,"</").concat(e,":Name>")+"<".concat(e,":Value>").concat(r,"</").concat(e,":Value>")+"</".concat(e,":Property>")}}},84069:(e,t,r)=>{function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var o=r(47805),i=o.isFilterValid,a=o.toOGCFilterParts,l=r(2245)({}).and;e.exports={getWpsPayload:function(e){var t,r=e.layerName,o=e.layerFilter,c=e.attribute,s=e.maxFeatures,u=e.startIndex,p=e.value,f=p?'<ogc:PropertyIsLike matchCase="false" wildCard="*" singleChar="." escapeChar="!">   <ogc:PropertyName>'+c+"</ogc:PropertyName>   <ogc:Literal>*"+p+"*</ogc:Literal></ogc:PropertyIsLike>":"",d=o&&!o.disabled&&i(o)?a(o,"1.1.0","ogc"):[];return'<wps:Execute xmlns:wps="http://www.opengis.net/wps/1.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="1.0.0" service="WPS" xsi:schemaLocation="http://www.opengis.net/wps/1.0.0 http://schemas.opengis.net/wps/1.0.0/wpsAll.xsd">  <ows:Identifier xmlns:ows="http://www.opengis.net/ows/1.1">gs:PagedUnique</ows:Identifier>  <wps:DataInputs>    <wps:Input>      <ows:Identifier xmlns:ows="http://www.opengis.net/ows/1.1">features</ows:Identifier>      <ows:Title xmlns:ows="http://www.opengis.net/ows/1.1">features</ows:Title>      <wps:Data />      <wps:Reference xmlns:xlink="http://www.w3.org/1999/xlink" mimeType="text/xml" xlink:href="http://geoserver/wfs" method="POST">        <wps:Body>         <wfs:GetFeature xmlns:wfs="http://www.opengis.net/wfs" service="WFS" version="1.0.0">           <wfs:Query typeName="'+r+'">'+(f.length>0||d.length>0?'<ogc:Filter xmlns:ogc="http://www.opengis.net/ogc" xmlns:gml="http://www.opengis.net/gml">'+l.apply(void 0,(t=d,function(e){if(Array.isArray(e))return n(e)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat([f]))+"</ogc:Filter>":"")+'             <ogc:SortBy xmlns:ogc="http://www.opengis.net/ogc">               <ogc:SortProperty>                 <ogc:PropertyName>'+c+'</ogc:PropertyName>               </ogc:SortProperty>             </ogc:SortBy>           </wfs:Query>         </wfs:GetFeature>       </wps:Body>     </wps:Reference>   </wps:Input>   <wps:Input>     <ows:Identifier xmlns:ows="http://www.opengis.net/ows/1.1">fieldName</ows:Identifier>     <ows:Title xmlns:ows="http://www.opengis.net/ows/1.1">fieldName</ows:Title>     <wps:Data>       <wps:LiteralData>'+c+'</wps:LiteralData>     </wps:Data>   </wps:Input>   <wps:Input>     <ows:Identifier xmlns:ows="http://www.opengis.net/ows/1.1">maxFeatures</ows:Identifier>     <ows:Title xmlns:ows="http://www.opengis.net/ows/1.1">maxFeatures</ows:Title>     <wps:Data>       <wps:LiteralData>'+s+'</wps:LiteralData>     </wps:Data>   </wps:Input>   <wps:Input>     <ows:Identifier xmlns:ows="http://www.opengis.net/ows/1.1">startIndex</ows:Identifier>     <ows:Title xmlns:ows="http://www.opengis.net/ows/1.1">startIndex</ows:Title>     <wps:Data>       <wps:LiteralData>'+u+'</wps:LiteralData>     </wps:Data>   </wps:Input> </wps:DataInputs> <wps:ResponseForm>   <wps:RawDataOutput mimeType="application/json">     <ows:Identifier xmlns:ows="http://www.opengis.net/ows/1.1">result</ows:Identifier>   </wps:RawDataOutput> </wps:ResponseForm></wps:Execute>'}}},11531:(e,t,r)=>{function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){i(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=r(24261),l=[{types:["point","linestring","polygon","vector"],title:"Base CSS",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n * {\n\tmark: symbol(square);\n\t:mark { fill: #ff0000; };\n}\n\n* {\n\tstroke: #999999;\n}",preview:{config:{backgroundColor:"#333333",texts:[{text:"CSS",fill:"#ffaa33",style:{fontSize:64,fontWeight:"bold"}}]}}},{types:["point","linestring","polygon","vector"],title:"Base SLD",format:"sld",code:'<?xml version="1.0" encoding="ISO-8859-1"?>\n<StyledLayerDescriptor version="1.0.0"\n\t\txsi:schemaLocation="http://www.opengis.net/sld StyledLayerDescriptor.xsd"\n\t\txmlns="http://www.opengis.net/sld"\n\t\txmlns:ogc="http://www.opengis.net/ogc"\n\t\txmlns:xlink="http://www.w3.org/1999/xlink"\n\t\txmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">\n\n\t<NamedLayer>\n\t\t<Name>Default Style</Name>\n\t\t<UserStyle>\n\t\t\t<Title>${styleTitle}</Title>\n\t\t\t<Abstract>${styleAbstract}</Abstract>\n\t\t\t<FeatureTypeStyle>\n\t\t\t\t<Rule>\n\t\t\t\t\t<Name>Rule Name</Name>\n\t\t\t\t\t<Title>Rule Title</Title>\n\t\t\t\t\t<Abstract>Rule Abstract</Abstract>\n\t\t\t\t\t<LineSymbolizer>\n\t\t\t\t\t\t<Stroke>\n\t\t\t\t\t\t\t<CssParameter name="stroke">#0000FF</CssParameter>\n\t\t\t\t\t\t</Stroke>\n\t\t\t\t\t\t</LineSymbolizer>\n\t\t\t\t\t<PointSymbolizer>\n\t\t\t\t\t\t<Graphic>\n\t\t\t\t\t\t\t<Mark>\n\t\t\t\t\t\t\t\t<WellKnownName>square</WellKnownName>\n\t\t\t\t\t\t\t\t<Fill>\n\t\t\t\t\t\t\t\t\t<CssParameter name="fill">#FF0000</CssParameter>\n\t\t\t\t\t\t\t\t</Fill>\n\t\t\t\t\t\t\t</Mark>\n\t\t\t\t\t\t</Graphic>\n\t\t\t\t\t</PointSymbolizer>\n\t\t\t\t\t</Rule>\n\t\t\t\t</FeatureTypeStyle>\n\t\t\t</UserStyle>\n\t\t</NamedLayer>\n\t</StyledLayerDescriptor>\n',preview:{config:{backgroundColor:"#333333",texts:[{text:"SLD",fill:"#33ffaa",style:{fontSize:64,fontWeight:"bold"}}]}}},{types:["raster"],title:"Base CSS",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n * {\n\traster-channels: auto;\n}",preview:{config:{backgroundColor:"#333333",texts:[{text:"CSS",fill:"#ffaa33",style:{fontSize:64,fontWeight:"bold"}}]}}},{types:["raster"],title:"Base SLD",format:"sld",code:'<?xml version="1.0" encoding="ISO-8859-1"?>\n<StyledLayerDescriptor version="1.0.0"\n\t\txsi:schemaLocation="http://www.opengis.net/sld StyledLayerDescriptor.xsd"\n\t\txmlns="http://www.opengis.net/sld"\n\t\txmlns:ogc="http://www.opengis.net/ogc"\n\t\txmlns:xlink="http://www.w3.org/1999/xlink"\n\t\txmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">\n\n\t<NamedLayer>\n\t\t<Name>Default Style</Name>\n\t\t<UserStyle>\n\t\t\t<Title>${styleTitle}</Title>\n\t\t\t<Abstract>${styleAbstract}</Abstract>\n\t\t\t<FeatureTypeStyle>\n\t\t\t\t<Rule>\n\t\t\t\t\t<Name>Rule Name</Name>\n\t\t\t\t\t<Title>Rule Title</Title>\n\t\t\t\t\t<Abstract>Rule Abstract</Abstract>\n\t\t\t\t\t<RasterSymbolizer>\n\t\t\t\t\t\t<Opacity>1.0</Opacity>\n\t\t\t\t\t\t</RasterSymbolizer>\n\t\t\t\t\t</Rule>\n\t\t\t\t</FeatureTypeStyle>\n\t\t\t</UserStyle>\n\t\t</NamedLayer>\n\t</StyledLayerDescriptor>\n',preview:{config:{backgroundColor:"#333333",texts:[{text:"SLD",fill:"#33ffaa",style:{fontSize:64,fontWeight:"bold"}}]}}}].map((function(e){return o(o({},e),{},{styleId:a()})})),c=[{types:["linestring","vector"],title:"Line",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n\tstroke: #999999;\n}",preview:{config:{type:"linestring",paths:[{stroke:"#999999"}]}}},{types:["linestring","vector"],title:"Dashed line",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n\tstroke: #333333;\n\tstroke-width: 0.75;\n\tstroke-dasharray: 6 2;\n}",preview:{config:{type:"linestring",paths:[{stroke:"#333333",strokeWidth:4,strokeDasharray:"20 4"}]}}},{types:["linestring","vector"],title:"Section line",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n\tstroke: #330033;\n\tstroke-width: 1;\n\tstroke-dasharray: 10 4 1 4;\n}",preview:{config:{type:"linestring",paths:[{stroke:"#330033",strokeWidth:4,strokeDasharray:"20 10 4 10"}]}}},{types:["linestring","vector"],title:"Simple railway",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n    stroke: symbol('shape://vertline'), #000000;\n    :stroke {\n        stroke: #000000;\n        size: 8;\n    };\n}\n",preview:{config:{type:"linestring",paths:[{stroke:"#333333",strokeWidth:2,strokeLinejoin:"round"},{stroke:"#333333",strokeWidth:16,strokeDasharray:"2 20",strokeLinejoin:"round"}]}}},{types:["linestring","vector"],title:"Railway",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n\tstroke: #777777, #ffffff;\n\tstroke-width: 4, 2;\n\tstroke-dasharray: 1 0, 10 10;\n}",preview:{config:{type:"linestring",paths:[{stroke:"#777777",strokeWidth:8,strokeLinejoin:"round"},{stroke:"#ffffff",strokeWidth:6,strokeDasharray:"20 20",strokeLinejoin:"round"}]}}},{types:["linestring","vector"],title:"Waterway",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n\tstroke: #8bbceb, #bbddff;\n\tstroke-width: 10, 8;\n\tstroke-linejoin: round;\n}",preview:{config:{type:"linestring",paths:[{stroke:"#8bbceb",strokeWidth:14,strokeLinejoin:"round"},{stroke:"#bbddff",strokeWidth:12,strokeLinejoin:"round"}]}}},{types:["linestring","vector"],title:"Red road",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n\tstroke: #ff5539, #ffffff;\n\tstroke-width: 8, 5;\n}",preview:{config:{type:"linestring",paths:[{stroke:"#ff5539",strokeWidth:14},{stroke:"#ffffff",strokeWidth:7}]}}},{code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n    stroke: symbol('circle');\n    stroke-dasharray: 8 20;\n    :stroke {\n        size: 8;\n        fill: #ddd;\n        stroke: #777;\n        stroke-width: 0.5;\n    };\n}\n",types:["linestring","vector"],title:"Stroke Pattern",format:"css",preview:{config:{type:"linestring",paths:[{type:"point",transform:"translate(-0, -55)",d:"M 100, 100 m -10, 0 a 10,10 0 1,0 20,0 a 10,10 0 1,0 -20,0",stroke:"#777",strokeWidth:2,fill:"#ddd"},{type:"point",transform:"translate(-65, 55)",d:"M 100, 100 m -10, 0 a 10,10 0 1,0 20,0 a 10,10 0 1,0 -20,0",stroke:"#777",strokeWidth:2,fill:"#ddd"},{type:"point",transform:"translate(-33, 0)",d:"M 100, 100 m -10, 0 a 10,10 0 1,0 20,0 a 10,10 0 1,0 -20,0",stroke:"#777",strokeWidth:2,fill:"#ddd"},{type:"point",transform:"translate(33, 0)",d:"M 100, 100 m -10, 0 a 10,10 0 1,0 20,0 a 10,10 0 1,0 -20,0",stroke:"#777",strokeWidth:2,fill:"#ddd"},{type:"point",transform:"translate(65, 55)",d:"M 100, 100 m -10, 0 a 10,10 0 1,0 20,0 a 10,10 0 1,0 -20,0",stroke:"#777",strokeWidth:2,fill:"#ddd"}]}}},{code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n    stroke: #333;\n    label: 'Label';\n    label-anchor: 0.5 0.5;\n    label-conflict-resolution: false;\n\n    font-fill: #000;\n    font-family: 'sans-serif';\n    font-size: 20;\n\n    halo-color: #fff;\n    halo-radius: 4;\n}\n",types:["linestring","vector"],title:"Label",format:"css",preview:{config:{type:"linestring",paths:[{stroke:"#333",strokeWidth:4}],texts:[{text:"Label",transform:"translate(-40, 0)",style:{fontSize:30,fontWeight:"bold",strokeWidth:12,stroke:"#ffffff"}},{text:"Label",fill:"#000000",transform:"translate(-40, 0)",style:{fontSize:30,fontWeight:"bold",strokeWidth:1,stroke:"#000000"}}]}}},{code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n    fill: #ddd;\n}\n",types:["polygon","vector"],title:"Fill",format:"css",preview:{config:{type:"polygon",paths:[{fill:"#ddd"}]}}},{code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n    stroke: #333;\n    stroke-width: 1;\n}\n",types:["polygon","vector"],title:"Border",format:"css",preview:{config:{type:"polygon",paths:[{fill:"transparent",stroke:"#333",strokeWidth:4}]}}},{code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n    stroke: #333;\n    stroke-dasharray: 10 5;\n    stroke-width: 2;\n    stroke-opacity: 0.5;\n}\n",types:["polygon","vector"],title:"Dashed Border",format:"css",preview:{config:{type:"polygon",paths:[{fill:"transparent",stroke:"#333",strokeWidth:4,strokeDasharray:"20 10",strokeOpacity:.5}]}}},{code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n    fill: #ddd;\n    stroke: #333;\n    stroke-width: 1;\n}\n",types:["polygon","vector"],title:"Simple",format:"css",preview:{config:{type:"polygon",paths:[{fill:"#ddd",stroke:"#333",strokeWidth:4}]}}},{code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n    fill: symbol('shape://slash');\n    :fill {\n        size: 8;\n        stroke: #000;\n        stroke-width: 1;\n        stroke-linecap: round;\n    };\n}\n",types:["polygon","vector"],title:"Line Pattern",format:"css",preview:{config:{type:"polygon",paths:[{fill:"url(#line)"}],patterns:[{id:"line",icon:{d:"M0.0 1.0 L1.0 0.0",stroke:"#000",strokeWidth:.05}}]}}},{code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n    fill: symbol('shape://dot');\n    :fill {\n        size: 8;\n        stroke: #000000;\n        stroke-width: 4;\n    };\n}\n",types:["polygon","vector"],title:"Dot Pattern",format:"css",preview:{config:{type:"polygon",paths:[{fill:"url(#poly_dot)"}],patterns:[{id:"poly_dot",icon:{d:"M0.5 0.5 L0.5 0.52Z",stroke:"#000",strokeLinecap:"round",strokeWidth:.2}}]}}},{code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n    mark: symbol('circle');\n    :mark {\n        size: 16;\n        stroke: #333;\n        stroke-width: 2;\n        fill: #ddd;\n    };\n}\n\n* {\n    stroke: #333333;\n    stroke-width: 0.5;\n}\n",types:["polygon","vector"],title:"Marker",format:"css",preview:{config:{type:"polygon",paths:[{fill:"transparent",stroke:"#333"},{type:"point",d:"M 160,100 A 60,60 0 0 1 100,160 60,60 0 0 1 40,100 60,60 0 0 1 100,40 60,60 0 0 1 160,100 Z",stroke:"#333",fill:"#ddd",strokeWidth:4}]}}},{code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n    fill: #ddd, symbol('cross');\n    :fill {\n        size: 20;\n        stroke: #333;\n        stroke-width: 1;\n        fill: #f2f2f2;\n    };\n}\n",types:["polygon","vector"],title:"Fill Pattern",format:"css",preview:{config:{type:"polygon",paths:[{fill:"#ddd"},{fill:"url(#poly_square)"}],patterns:[{id:"poly_square",icon:{d:"M0.1 0.1 L0.9 0.1 L0.9 0.9 L0.1 0.9Z",stroke:"#333",strokeLinecap:"round",strokeWidth:.05,fill:"#f2f2f2"}}]}}},{code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n    label: 'Label';\n    label-anchor: 0.5 0.5;\n\n    font-fill: #000;\n    font-family: 'sans-serif';\n    font-size: 20;\n\n    halo-color: #fff;\n    halo-radius: 4;\n\n    stroke: #474747;\n    fill: symbol('shape://slash');\n    :fill {\n        size: 8;\n        stroke: #000;\n        stroke-width: 1;\n        stroke-linecap: round;\n    };\n}\n",types:["polygon","vector"],title:"Label and Fill",format:"css",preview:{config:{type:"polygon",paths:[{fill:"transparent",stroke:"#000",strokeWidth:2},{fill:"url(#line)"}],texts:[{text:"Label",style:{fontSize:50,fontWeight:"bold",strokeWidth:12,stroke:"#ffffff"}},{text:"Label",fill:"#000000",style:{fontSize:50,fontWeight:"bold",strokeWidth:1,stroke:"#000000"}}]}}},{types:["point","vector"],title:"Square",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n * {\n\tmark: symbol('square');\n\t:mark {\n\t\tstroke: #ff338f;\n\t\tfill: #bcedff;\n\t};\n}",preview:{config:{type:"point",paths:[{d:"M40 40 L160 40 L160 160 L40 160Z",stroke:"#ff338f",fill:"#bcedff",strokeWidth:4}]}}},{types:["point","vector"],title:"Circle",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n * {\n\tmark: symbol('circle');\n\t:mark {\n\t\tstroke: #ff338f;\n\t\tfill: #bcedff;\n\t};\n}",preview:{config:{type:"point",paths:[{d:"M 160,100 A 60,60 0 0 1 100,160 60,60 0 0 1 40,100 60,60 0 0 1 100,40 60,60 0 0 1 160,100 Z",stroke:"#ff338f",fill:"#bcedff",strokeWidth:4}]}}},{types:["point","vector"],title:"Triangle",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n * {\n\tmark: symbol('triangle');\n\t:mark {\n\t\tstroke: #ff338f;\n\t\tfill: #bcedff;\n\t};\n}",preview:{config:{type:"point",paths:[{d:"M 160,151.96151 H 40 L 99.999999,48.038488 Z",stroke:"#ff338f",fill:"#bcedff",strokeWidth:4}]}}},{types:["point","vector"],title:"Star",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n * {\n\tmark: symbol('star');\n\t:mark {\n\t\tstroke: #ff338f;\n\t\tfill: #bcedff;\n\t};\n}",preview:{config:{type:"point",paths:[{d:"M 165.07677,84.40286 131.87672,116.49613 139.49277,162.03972 98.710865,140.38195 57.749838,161.699 65.745291,116.22048 32.813927,83.851564 78.537289,77.40206 99.145626,36.079922 119.40876,77.572419 Z",stroke:"#ff338f",fill:"#bcedff",strokeWidth:4}]}}},{types:["point","vector"],title:"Cross",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n * {\n\tmark: symbol('cross');\n\t:mark {\n\t\tstroke: #ff338f;\n\t\tfill: #bcedff;\n\t};\n}",preview:{config:{type:"point",paths:[{d:"M 84.99987,39.999998 V 84.999868 H 39.999999 V 115.00013 H 84.99987 V 160 H 115.00013 V 115.00013 H 160 V 84.999868 H 115.00013 V 39.999998 Z",stroke:"#ff338f",fill:"#bcedff",strokeWidth:4}]}}},{types:["point","vector"],title:"X",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n * {\n\tmark: symbol('x');\n\t:mark {\n\t\tstroke: #ff338f;\n\t\tfill: #bcedff;\n\t};\n}",preview:{config:{type:"point",paths:[{d:"M 131.81971,46.966899 100,78.786612 68.180288,46.966898 46.966899,68.180287 78.786613,100 46.9669,131.81971 68.180287,153.0331 100,121.21339 131.81971,153.0331 153.0331,131.81971 121.21339,99.999999 153.0331,68.180286 Z",stroke:"#ff338f",fill:"#bcedff",strokeWidth:4}]}}},{types:["point","vector"],title:"Line",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n * {\n\tmark: symbol('shape://vertline');\n\t:mark { stroke: #ff338f; };\n}",preview:{config:{type:"point",paths:[{d:"M 100,40 V 160 Z",stroke:"#ff338f",strokeWidth:4,fill:"none"}]}}},{types:["point","vector"],title:"Plus",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n * {\n\tmark: symbol('shape://plus');\n\t:mark { stroke: #ff338f; };\n}",preview:{config:{type:"point",paths:[{d:"M 100,40 V 160 Z",stroke:"#ff338f",strokeWidth:4,fill:"none"},{d:"M 160,100 40.000002,100 Z",stroke:"#ff338f",strokeWidth:4,fill:"none"}]}}},{types:["point","vector"],title:"Times",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n * {\n\tmark: symbol('shape://times');\n\t:mark { stroke: #ff338f; };\n}",preview:{config:{type:"point",paths:[{d:"M 142.42641,57.573591 57.573595,142.4264 Z",stroke:"#ff338f",strokeWidth:4,fill:"none"},{d:"M 142.42641,142.42641 57.573595,57.573594 Z",stroke:"#ff338f",strokeWidth:4,fill:"none"}]}}},{types:["point","vector"],title:"Open arrow",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n * {\n\tmark: symbol('shape://oarrow');\n\t:mark { stroke: #ff338f; };\n}",preview:{config:{type:"point",paths:[{d:"M 40.027335,53.266123 159.77305,100 40.027335,146.73388",stroke:"#ff338f",strokeWidth:4,fill:"none"}]}}},{types:["point","vector"],title:"Closed arrow",format:"css",code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n * {\n\tmark: symbol('shape://carrow');\n\t:mark { stroke: #ff338f; };\n}",preview:{config:{type:"point",paths:[{d:"M 40.027335,53.266123 159.77305,100 40.027335,146.73388Z",stroke:"#ff338f",strokeWidth:4,fill:"none"}]}}},{code:"@mode 'Flat';\n@styleTitle '${styleTitle}';\n@styleAbstract '${styleAbstract}';\n\n* {\n    label: 'Label';\n    label-anchor: 0.5 2;\n    label-conflict-resolution: false;\n\n    font-fill: #000;\n    font-family: 'sans-serif';\n    font-size: 20;\n\n    halo-color: #fff;\n    halo-radius: 4;\n\n    mark: symbol('circle');\n    :mark {\n        size: 7;\n        stroke: #0d0d0d;\n        stroke-width: 0.7;\n    };\n}\n",types:["polygon","point","vector"],title:"Label and Marker",format:"css",preview:{config:{type:"polygon",paths:[{type:"point",d:"M 100, 100 m -10, 0 a 10,10 0 1,0 20,0 a 10,10 0 1,0 -20,0",stroke:"#0d0d0d",fill:"transparent",strokeWidth:2}],texts:[{text:"Label",y:150,style:{fontSize:50,fontWeight:"bold",strokeWidth:12,stroke:"#ffffff"}},{text:"Label",fill:"#000000",y:150,style:{fontSize:50,fontWeight:"bold",strokeWidth:1,stroke:"#000000"}}]}}}].map((function(e){return o(o({},e),{},{styleId:a()})}));e.exports={baseTemplates:l,customTemplates:c}},43744:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>e_});var n={};r.r(n),r.d(n,{activateBoxSelectionTool:()=>zS,activateGeometryFilter:()=>HS,activateTemporaryChangesEpic:()=>WS,askChangesConfirmOnFeatureGridClose:()=>pP,autoCloseFeatureGridEpicOnDrowerOpen:()=>uP,autoReopenFeatureGridOnFeatureInfoClose:()=>yP,closeIdentifyWhenOpenFeatureGrid:()=>hP,closeRightPanelOnFeatureGridOpen:()=>rP,deactivateBoxSelectionTool:()=>GS,deactivateGeometryFilter:()=>qS,deactivateSyncWmsFilterOnFeatureGridClose:()=>EP,deleteGeometryFeature:()=>oP,deleteSelectedFeatureGridFeatures:()=>QS,disableMultiSelect:()=>_S,enableGeometryFilterOnEditMode:()=>LS,featureGridBrowseData:()=>IS,featureGridChangePage:()=>$S,featureGridLayerSelectionInitialization:()=>AS,featureGridReloadPageOnSaveSuccess:()=>KS,featureGridSort:()=>DS,featureGridStartupQuery:()=>FS,featureGridUpdateGeometryFilter:()=>RS,featureGridUpdateTextFilters:()=>MS,handleBoxSelectionDrawEnd:()=>BS,handleClickOnMap:()=>ZS,handleDrawFeature:()=>eP,handleEditFeature:()=>JS,handleGeometryFilterActivation:()=>VS,hideDrawerOnFeatureGridOpenMobile:()=>xP,hideFeatureGridOnDrawerOpenMobile:()=>CP,launchUpdateFilterEpic:()=>NS,onClearChangeConfirmedFeatureGrid:()=>fP,onCloseFeatureGridConfirmed:()=>dP,onFeatureGridCreateNewFeature:()=>aP,onFeatureGridGeometryEditing:()=>nP,onFeatureGridZoomAll:()=>gP,onOpenAdvancedSearch:()=>bP,removeWmsFilterOnGridClose:()=>mP,replayOnTimeDimensionChange:()=>jP,resetControlsOnEnterInEditMode:()=>vP,resetEditingOnFeatureGridClose:()=>tP,resetGridOnLocationChange:()=>cP,resetQueryPanel:()=>sP,savePendingFeatureGridChanges:()=>XS,selectFeaturesOnMapClickResult:()=>US,setHighlightFeaturesPath:()=>lP,startSyncWmsFilter:()=>OP,stopSyncWmsFilter:()=>wP,syncMapWmsFilter:()=>SP,triggerDrawSupportOnSelectionChange:()=>iP,updateSelectedOnSaveOrCloseFeatureGrid:()=>YS,virtualScrollLoadFeatures:()=>PP});var o={};r.r(o),r.d(o,{checkExportDataEntriesEpic:()=>dM,checkWPSAvailabilityEpic:()=>lM,closeExportDownload:()=>pM,fetchFormatsWFSDownload:()=>sM,openDownloadTool:()=>cM,resetExportDataResultsOnLogout:()=>yM,serializeCookieOnExportDataChange:()=>mM,setExportDataResultsOnLoginSuccessAndMapConfigLoaded:()=>bM,showInfoBubbleMessageEpic:()=>fM,startFeatureExportDownload:()=>uM});var i=r(10206),a=r(79047),l=r(5053),c=r.n(l),s=r(45697),u=r.n(s),p=r(89208),f=r(27361),d=r.n(f),m=r(99534),y=r(94745),b=r(5346),g=r(30294),v=r(82904),h=r(80416),O=r(22843);function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function j(e,t){return!t||"object"!==w(t)&&"function"!=typeof t?C(e):t}function C(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function T(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var k=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=x(n);if(o){var r=x(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return j(this,e)});function a(){var e;E(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return T(C(e=i.call.apply(i,[this].concat(r))),"state",{groupName:""}),T(C(e),"changeName",(function(t){e.setState({groupName:t.target.value})})),T(C(e),"isValid",(function(e){return""!==e})),e}return t=a,(r=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.enabled&&!this.props.enabled&&this.setState({groupName:""})}},{key:"render",value:function(){var e=this;return c().createElement(m.Z,null,c().createElement(y.Z,{size:"xs",clickOutEnabled:!1,showClose:!1,title:c().createElement(b.Z,{msgId:"toc.addGroup"}),show:this.props.enabled,buttons:[{text:c().createElement(b.Z,{msgId:"cancel"}),onClick:function(){e.props.onClose()}},{bsStyle:"primary",disabled:!this.isValid(this.state.groupName),text:c().createElement(b.Z,{msgId:"addgroup.addbtn"}),onClick:function(){e.props.onAdd(e.state.groupName,e.props.parent),e.props.onClose()}}]},c().createElement("div",{id:"mapstore-add-toc-group"},c().createElement(g.FormGroup,null,c().createElement("label",{htmlFor:"groupName"},c().createElement(b.Z,{msgId:"addgroup.groupName"})),c().createElement(g.FormControl,{name:"groupName",onChange:this.changeName,value:this.state.groupName})))))}}])&&S(t.prototype,r),a}(l.Component);T(k,"propTypes",{enabled:u().bool,parent:u().string,onClose:u().func,onAdd:u().func}),T(k,"defaultProps",{enabled:!1,parent:null,onClose:function(){},onAdd:function(){}});var I=(0,p.connect)((function(e){return{enabled:d()(e,"controls.addgroup.enabled",!1),parent:d()(e,"controls.addgroup.parent",null)}}),{onClose:v.pu.bind(null,"addgroup","enabled",!1,"parent",null),onAdd:h.Rp})(k);const A=(0,O.rx)("AddGroup",{component:I,containers:{TOC:{doNotHide:!0,name:"AddGroup"}}});var F=r(9825),D=r(22222),R=r(49848),N="LAYER_FILTER:INIT_LAYER_FILTER",M="LAYER_FILTER:APPLIED_FILTER",L="LAYER_FILTER:STORE_CURRENT_APPLIED_FILTER",_="LAYER_FILTER:DISCARD_CURRENT_FILTER",Z="LAYER_FILTER:APPLY_FILTER",B="LAYER_FILTER:OPEN_QUERY_BUILDER";function z(){return{type:L}}function G(){return{type:_}}function U(){return{type:Z}}var W=r(90825),V=r(1550),q=r(97395),H=r(75110),$=function(e){return e.swipe&&e.swipe||{active:!1}},K=function(e){var t;return(null==e||null===(t=e.swipe)||void 0===t?void 0:t.spy)||{radius:80}},Y=function(e){var t;return(null==e||null===(t=e.swipe)||void 0===t?void 0:t.swipe)||{direction:"cut-vertical"}},X=r(827),Q=r(8316),J=r(7147),ee=r(7877),te=r(74621),re=r(38842),ne=r(24262),oe=r(52259),ie=r(86638),ae=r(27418),le=r.n(ae),ce=r(24273),se=r.n(ce),ue=r(13218),pe=r.n(ue),fe=r(91175),de=r.n(fe),me=r(13311),ye=r.n(me),be=r(57579),ge=r(31273),ve=r(88113),he=r(93152),Oe=r(59309),we=r(24819),Ee=r(42678),Se=r(29180),Pe=r(51269),je=r(29423),Ce=r(64152);function xe(e){return(xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Te(){return(Te=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function ke(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ie(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ae(e,t){return(Ae=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Fe(e,t){return!t||"object"!==xe(t)&&"function"!=typeof t?De(e):t}function De(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Re(e){return(Re=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ne(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Me=function e(t,r){return t.reduce((function(t,n){var o=le()({},n);return o.nodes&&(o=le()({},o,{nodes:e(o.nodes,r)})),r.forEach((function(e){o=e.func(o)?le()({},o,e.options):le()({},o)})),t.push(o),t}),[])},Le=function(e,t,r){return-1!==((pe()(e.title)?e.title[r]||e.title.default:e.title)||e.name).toLowerCase().indexOf(t.toLowerCase())},_e=(0,D.P1)([function(e){return e.controls&&e.controls.toolbar&&"toc"===e.controls.toolbar.active},H.Bt,H.jN,$,H.yj,H.lI,X.Od,Q.Pz,Q.KV,H.NP,H.wA,H.l2,X.Zs,ve.$t,J.PJ,ee.us,he.c0,te.np,re.wk],(function(e,t,r,n,o,i,a,l,c,s,u,p,f,d,m,y,b,g,v){return{enabled:e,groups:t,settings:r,swipeSettings:n,layerMetadata:o,layerdownload:i,currentZoomLvl:a&&a.zoom,scales:(0,oe.getScales)(a&&a.projection||"EPSG:3857",a&&a.mapOptions&&a.mapOptions.view&&a.mapOptions.view.DPI||null),currentLocale:l,currentLocaleLanguage:c,selectedNodes:s,filterText:u,generalInfoFormat:y,selectedLayers:p.filter((function(e){return de()(s.filter((function(t){return t===e.id})))})),noFilterResults:0===p.filter((function(e){return Le(e,u,l)})).length,updatableLayersCount:p.filter((function(e){return"background"!==e.group&&("wms"===e.type||"wmts"===e.type)})).length,selectedGroups:s.map((function(e){return(0,ne.Mk)(t,e)})).filter((function(e){return e&&e.nodes})),mapName:f,filteredGroups:Me(t,[{options:{showComponent:!0},func:function(){return!u}},{options:{loadingError:!0},func:function(e){return de()((e.nodes||[]).filter((function(e){return e.loadingError&&"Warning"!==e.loadingError})))}},{options:{expanded:!0,showComponent:!0},func:function(e){return u&&de()((e.nodes||[]).filter((function(t){return Le(t,u,l)||t.nodes&&de()(e.nodes.filter((function(e){return e.showComponent})))})))}},{options:{showComponent:!1},func:function(e){return de()((e.nodes||[]).filter((function(e){return e.hidden||"annotations"===e.id&&b})))&&1===e.nodes.length}},{options:{showComponent:!1},func:function(e){return"annotations"===e.id&&b}}]),catalogActive:d,activateWidgetTool:m,user:g,isLocalizedLayerStylesEnabled:v}})),Ze=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ae(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Re(n);if(o){var r=Re(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Fe(this,e)});function a(){var e;ke(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Ne(De(e=i.call.apply(i,[this].concat(r))),"getNoBackgroundLayers",(function(e){return"background"!==e.name})),Ne(De(e),"getDefaultGroup",(function(){var t=e.props.groupNodeComponent||Se.Z;return c().createElement(t,Te({onSort:!e.props.filterText&&e.props.activateSortLayer?e.props.onSort:null},e.props.groupOptions,{titleTooltip:e.props.activateTitleTooltip,propertiesChangeHandler:e.props.groupPropertiesChangeHandler,onToggle:e.props.onToggleGroup,style:e.props.groupStyle,groupVisibilityCheckbox:!0,visibilityCheckType:e.props.visibilityCheckType,currentLocale:e.props.currentLocale,selectedNodes:e.props.selectedNodes,onSelect:e.props.activateToolsContainer?e.props.onSelectNode:null}))})),Ne(De(e),"getDefaultLayer",(function(){var t=e.props.layerNodeComponent||Pe.Z,r=(e.props.resolutions||(0,oe.getResolutions)())[e.props.currentZoomLvl];return c().createElement(t,Te({},e.props.layerOptions,{titleTooltip:e.props.activateTitleTooltip,showFullTitleOnExpand:e.props.showFullTitleOnExpand,onToggle:e.props.onToggleLayer,activateOpacityTool:e.props.activateOpacityTool,onContextMenu:e.props.onContextMenu,propertiesChangeHandler:e.props.layerPropertiesChangeHandler,onSelect:e.props.activateToolsContainer?e.props.onSelectNode:null,visibilityCheckType:e.props.visibilityCheckType,activateLegendTool:e.props.activateLegendTool,currentZoomLvl:e.props.currentZoomLvl,scales:e.props.scales,currentLocale:e.props.currentLocale,selectedNodes:e.props.selectedNodes,filterText:e.props.filterText,onUpdateNode:e.props.updateNode,hideOpacityTooltip:e.props.hideOpacityTooltip,language:e.props.isLocalizedLayerStylesEnabled?e.props.currentLocaleLanguage:null,resolution:r}))})),Ne(De(e),"renderTOC",(function(){var t=e.getDefaultGroup(),r=e.getDefaultLayer(),n=[e.props.activateToolsContainer,e.props.activateFilterLayer,e.props.activateMapTitle].filter((function(e){return e})),o=n.length>0?" toc-body-sections-"+n.length:" toc-body-sections";return c().createElement("div",null,c().createElement(we.Z,{title:e.props.mapName,showTitle:e.props.activateMapTitle,showFilter:e.props.activateFilterLayer&&(e.props.groups.filter((function(e){return(e.nodes||[]).length}))||[]).length,showTools:e.props.activateToolsContainer,onClear:function(){e.props.onSelectNode()},onFilter:e.props.onFilter,filterTooltipClear:c().createElement(b.Z,{msgId:"toc.clearFilter"}),filterPlaceholder:(0,ie.S$)(e.context.messages,"toc.filterPlaceholder"),filterText:e.props.filterText,toolbar:c().createElement(Ee.Z,{items:e.props.items.filter((function(e){return"toolbar"===e.target})),groups:e.props.groups,selectedLayers:e.props.selectedLayers,selectedGroups:e.props.selectedGroups,generalInfoFormat:e.props.generalInfoFormat,settings:e.props.settings,swipeSettings:e.props.swipeSettings,layerMetadata:e.props.layerMetadata,layerdownload:e.props.layerdownload,metadataTemplate:e.props.metadataTemplate,maxDepth:e.props.maxDepth,activateTool:{activateToolsContainer:e.props.activateToolsContainer,activateRemoveLayer:e.props.activateRemoveLayer,activateRemoveGroup:e.props.activateRemoveGroup,activateZoomTool:e.props.activateZoomTool,activateQueryTool:e.props.activateQueryTool,activateDownloadTool:e.props.activateDownloadTool,activateSettingsTool:e.props.activateSettingsTool,activateAddLayer:e.props.activateAddLayerButton&&!e.props.catalogActive,activateAddGroup:e.props.activateAddGroupButton,includeDeleteButtonInSettings:!1,activateMetedataTool:e.props.activateMetedataTool,activateWidgetTool:e.props.activateWidgetTool,activateLayerFilterTool:e.props.activateLayerFilterTool,activateLayerInfoTool:e.props.updatableLayersCount>0&&e.props.activateLayerInfoTool},options:{modalOptions:{},metadataOptions:e.props.metadataOptions,settingsOptions:e.props.settingsOptions},style:{chartStyle:e.props.chartStyle},text:{settingsText:c().createElement(b.Z,{msgId:"layerProperties.windowTitle"}),opacityText:c().createElement(b.Z,{msgId:"opacity"}),elevationText:c().createElement(b.Z,{msgId:"elevation"}),saveText:c().createElement(b.Z,{msgId:"save"}),closeText:c().createElement(b.Z,{msgId:"close"}),confirmDeleteText:c().createElement(b.Z,{msgId:"layerProperties.deleteLayer"}),confirmDeleteMessage:c().createElement(b.Z,{msgId:"layerProperties.deleteLayerMessage"}),confirmDeleteLayerGroupText:c().createElement(b.Z,{msgId:"layerProperties.deleteLayerGroup"}),confirmDeleteLayerGroupMessage:c().createElement(b.Z,{msgId:"layerProperties.deleteLayerGroupMessage"}),confirmDeleteConfirmText:c().createElement(b.Z,{msgId:"layerProperties.delete"}),confirmDeleteCancelText:c().createElement(b.Z,{msgId:"cancel"}),addLayer:c().createElement(b.Z,{msgId:"toc.addLayer"}),addLayerTooltip:c().createElement(b.Z,{msgId:"toc.addLayer"}),addLayerToGroupTooltip:c().createElement(b.Z,{msgId:"toc.addLayerToGroup"}),addGroupTooltip:c().createElement(b.Z,{msgId:"toc.addGroup"}),addSubGroupTooltip:c().createElement(b.Z,{msgId:"toc.addSubGroup"}),createWidgetTooltip:c().createElement(b.Z,{msgId:"toc.createWidget"}),zoomToTooltip:{LAYER:c().createElement(b.Z,{msgId:"toc.toolZoomToLayerTooltip"}),LAYERS:c().createElement(b.Z,{msgId:"toc.toolZoomToLayersTooltip"})},settingsTooltip:{LAYER:c().createElement(b.Z,{msgId:"toc.toolLayerSettingsTooltip"}),GROUP:c().createElement(b.Z,{msgId:"toc.toolGroupSettingsTooltip"})},featuresGridTooltip:c().createElement(b.Z,{msgId:"toc.toolFeaturesGridTooltip"}),downloadToolTooltip:c().createElement(b.Z,{msgId:"toc.toolDownloadTooltip"}),trashTooltip:{LAYER:c().createElement(b.Z,{msgId:"toc.toolTrashLayerTooltip"}),LAYERS:c().createElement(b.Z,{msgId:"toc.toolTrashLayersTooltip"}),GROUP:c().createElement(b.Z,{msgId:"toc.toolTrashGroupTooltip"})},reloadTooltip:{LAYER:c().createElement(b.Z,{msgId:"toc.toolReloadLayerTooltip"}),LAYERS:c().createElement(b.Z,{msgId:"toc.toolReloadLayersTooltip"})},layerMetadataTooltip:c().createElement(b.Z,{msgId:"toc.layerMetadata.toolLayerMetadataTooltip"}),layerMetadataPanelTitle:c().createElement(b.Z,{msgId:"toc.layerMetadata.layerMetadataPanelTitle"}),layerFilterTooltip:c().createElement(b.Z,{msgId:"toc.layerFilterTooltip"}),layerInfoTooltip:c().createElement(b.Z,{msgId:"toc.layerInfoTooltip"})},onToolsActions:{onZoom:e.props.onZoomToExtent,onNewWidget:e.props.onNewWidget,onBrowseData:e.props.onBrowseData,onQueryBuilder:e.props.onQueryBuilder,onDownload:e.props.onDownload,onUpdate:e.props.updateNode,onRemove:e.props.removeNode,onClear:e.props.onSelectNode,onSettings:e.props.onSettings,onUpdateSettings:e.props.updateSettings,onRetrieveLayerData:e.props.retrieveLayerData,onHideSettings:e.props.hideSettings,onReload:e.props.refreshLayerVersion,onAddLayer:e.props.onAddLayer,onAddGroup:e.props.onAddGroup,onGetMetadataRecord:e.props.onGetMetadataRecord,onHideLayerMetadata:e.props.hideLayerMetadata,onShow:e.props.layerPropertiesChangeHandler,onLayerInfo:e.props.onLayerInfo}})}),c().createElement("div",{className:"mapstore-toc"+o},e.props.noFilterResults&&e.props.filterText?c().createElement("div",null,c().createElement("div",{className:"toc-filter-no-results"},c().createElement(b.Z,{msgId:"toc.noFilteredResults"}))):c().createElement(Oe.Z,{onError:e.props.onError,onSort:!e.props.filterText&&e.props.activateSortLayer?e.props.onSort:null,filter:e.getNoBackgroundLayers,nodes:e.props.filteredGroups},c().createElement(je.Z,{groupElement:t,layerElement:r}))))})),e}return t=a,(r=[{key:"render",value:function(){return this.props.groups?this.renderTOC():c().createElement("div",null)}}])&&Ie(t.prototype,r),a}(c().Component);Ne(Ze,"propTypes",{id:u().number,items:u().array,buttonContent:u().node,groups:u().array,settings:u().object,swipeSettings:u().object,layerMetadata:u().object,layerdownload:u().object,metadataTemplate:u().oneOfType([u().string,u().array,u().object,u().func]),refreshMapEnabled:u().bool,groupStyle:u().object,groupPropertiesChangeHandler:u().func,layerPropertiesChangeHandler:u().func,onToggleGroup:u().func,onToggleLayer:u().func,onContextMenu:u().func,onBrowseData:u().func,onQueryBuilder:u().func,onDownload:u().func,onSelectNode:u().func,selectedNodes:u().array,onZoomToExtent:u().func,retrieveLayerData:u().func,onSort:u().func,onSettings:u().func,onRefreshLayer:u().func,onNewWidget:u().func,hideSettings:u().func,updateSettings:u().func,updateNode:u().func,removeNode:u().func,activateTitleTooltip:u().bool,showFullTitleOnExpand:u().bool,activateOpacityTool:u().bool,activateSortLayer:u().bool,activateFilterLayer:u().bool,activateMapTitle:u().bool,activateToolsContainer:u().bool,activateRemoveLayer:u().bool,activateRemoveGroup:u().bool,activateLegendTool:u().bool,activateZoomTool:u().bool,activateQueryTool:u().bool,activateDownloadTool:u().bool,activateSettingsTool:u().bool,activateMetedataTool:u().bool,activateWidgetTool:u().bool,activateLayerInfoTool:u().bool,maxDepth:u().number,visibilityCheckType:u().string,settingsOptions:u().object,chartStyle:u().object,currentZoomLvl:u().number,scales:u().array,layerOptions:u().object,metadataOptions:u().object,spatialOperations:u().array,spatialMethodOptions:u().array,groupOptions:u().object,currentLocale:u().string,currentLocaleLanguage:u().string,onFilter:u().func,filterText:u().string,generalInfoFormat:u().string,selectedLayers:u().array,selectedGroups:u().array,mapName:u().string,filteredGroups:u().array,noFilterResults:u().bool,onAddLayer:u().func,onAddGroup:u().func,onError:u().func,onGetMetadataRecord:u().func,hideLayerMetadata:u().func,activateAddLayerButton:u().bool,activateAddGroupButton:u().bool,activateLayerFilterTool:u().bool,catalogActive:u().bool,refreshLayerVersion:u().func,hideOpacityTooltip:u().bool,layerNodeComponent:u().func,groupNodeComponent:u().func,isLocalizedLayerStylesEnabled:u().bool,onLayerInfo:u().func,onSetSwipeActive:u().func,updatableLayersCount:u().number,onSetSwipeMode:u().func,resolutions:u().func}),Ne(Ze,"contextTypes",{messages:u().object}),Ne(Ze,"defaultProps",{items:[],groupPropertiesChangeHandler:function(){},layerPropertiesChangeHandler:function(){},retrieveLayerData:function(){},onToggleGroup:function(){},onToggleLayer:function(){},onContextMenu:function(){},onToggleQuery:function(){},onZoomToExtent:function(){},onSettings:function(){},onRefreshLayer:function(){},onNewWidget:function(){},updateNode:function(){},removeNode:function(){},onSelectNode:function(){},selectedNodes:[],activateOpacityTool:!0,activateTitleTooltip:!0,showFullTitleOnExpand:!1,activateSortLayer:!0,activateFilterLayer:!0,activateMapTitle:!0,activateToolsContainer:!0,activateLegendTool:!0,activateZoomTool:!0,activateSettingsTool:!0,activateMetedataTool:!0,activateRemoveLayer:!0,activateRemoveGroup:!0,activateQueryTool:!0,activateDownloadTool:!0,activateWidgetTool:!1,activateLayerFilterTool:!1,activateLayerInfoTool:!0,maxDepth:3,visibilityCheckType:"glyph",settingsOptions:{includeCloseButton:!1,closeGlyph:"1-close",buttonSize:"small",showFeatureInfoTab:!0},layerOptions:{},metadataOptions:{},groupOptions:{},spatialOperations:[{id:"INTERSECTS",name:"queryform.spatialfilter.operations.intersects"},{id:"BBOX",name:"queryform.spatialfilter.operations.bbox"},{id:"CONTAINS",name:"queryform.spatialfilter.operations.contains"},{id:"WITHIN",name:"queryform.spatialfilter.operations.within"}],spatialMethodOptions:[{id:"Viewport",name:"queryform.spatialfilter.methods.viewport"},{id:"BBOX",name:"queryform.spatialfilter.methods.box"},{id:"Circle",name:"queryform.spatialfilter.methods.circle"},{id:"Polygon",name:"queryform.spatialfilter.methods.poly"}],currentLocale:"en-US",filterText:"",selectedLayers:[],selectedGroups:[],mapName:"",filteredGroups:[],noFilterResults:!1,onAddLayer:function(){},onAddGroup:function(){},onError:function(){},onGetMetadataRecord:function(){},hideLayerMetadata:function(){},activateAddLayerButton:!1,activateAddGroupButton:!1,catalogActive:!1,refreshLayerVersion:function(){},metadataTemplate:null,onLayerInfo:function(){},onSetSwipeMode:function(){}});var Be=(0,R.withPropsOnChange)(["user","addLayersPermissions","activateAddLayerButton","removeLayersPermissions","activateRemoveLayer","sortingPermission","activateRemoveLayer","addGroupsPermissions","activateAddGroupButton","removeGroupsPermissions","activateRemoveGroup","layerInfoToolPermissions","activateLayerInfoTool"],(function(e){var t=e.addLayersPermissions,r=void 0===t||t,n=e.removeLayersPermissions,o=void 0===n||n,i=e.sortingPermissions,a=void 0===i||i,l=e.addGroupsPermissions,c=void 0===l||l,s=e.removeGroupsPermissions,u=void 0===s||s,p=e.layerInfoToolPermissions,f=void 0!==p&&p,d=e.activateAddLayerButton,m=e.activateRemoveLayer,y=e.activateSortLayer,b=e.activateAddGroupButton,g=e.activateRemoveGroup,v=e.activateLayerInfoTool,h=e.user,O=function(e,t){var r=h&&"ADMIN"===h.role||!1;return!(!e&&!r)&&t};return{activateAddLayerButton:O(r,d),activateRemoveLayer:O(o,m),activateSortLayer:O(a,y),activateAddGroupButton:O(c,b),activateRemoveGroup:O(u,g),activateLayerInfoTool:O(f,v)}})),ze=(0,R.branch)((function(e){var t=e.checkPlugins;return void 0===t||t}),(0,R.withPropsOnChange)(["items","activateAddLayerButton","activateAddGroupButton","activateLayerFilterTool","activateSettingsTool","FeatureEditor","activateLayerInfoTool"],(function(e){var t=e.items,r=void 0===t?[]:t,n=e.activateAddLayerButton,o=void 0===n||n,i=e.activateAddGroupButton,a=void 0===i||i,l=e.activateQueryTool,c=void 0===l||l,s=e.activateSettingsTool,u=void 0===s||s,p=e.activateLayerFilterTool,f=void 0===p||p,d=e.activateWidgetTool,m=void 0===d||d,y=e.activateLayerInfoTool,b=void 0===y||y,g=e.activateDownloadTool,v=void 0===g||g;return{activateAddLayerButton:o&&!!ye()(r,{name:"MetadataExplorer"})||!1,activateAddGroupButton:a&&!!ye()(r,{name:"AddGroup"})||!1,activateSettingsTool:u&&!!ye()(r,{name:"TOCItemsSettings"})||!1,activateQueryTool:c&&!!ye()(r,{name:"FeatureEditor"})||!1,activateLayerFilterTool:f&&!!ye()(r,{name:"FilterLayer"})||!1,activateWidgetTool:m&&!!ye()(r,{name:"WidgetBuilder"})&&!!ye()(r,{name:"Widgets"}),activateLayerInfoTool:b&&!!ye()(r,{name:"LayerInfo"})||!1,activateDownloadTool:v&&!!ye()(r,{name:"LayerDownload"})||!1}}))),Ge=(0,p.connect)(_e,{groupPropertiesChangeHandler:h.WO,layerPropertiesChangeHandler:h.He,retrieveLayerData:W.k,onToggleGroup:(0,ne.$0)("groups",h.bh),onToggleLayer:(0,ne.$0)("layers",h.bh),onContextMenu:h.pV,onBrowseData:h.Qr,onQueryBuilder:function(){return{type:B}},onDownload:h.LR,onSort:h.Dv,onSettings:h.RP,onZoomToExtent:V.Px,hideSettings:h.sF,updateSettings:h.VP,updateNode:h.tV,removeNode:h.ZF,onSelectNode:h.UG,onFilter:h.F5,onAddLayer:v.pu.bind(null,"metadataexplorer","enabled",!0,"group"),onAddGroup:v.pu.bind(null,"addgroup","enabled",!0,"parent"),onGetMetadataRecord:ge.ky,onError:q.vU,hideLayerMetadata:h.Jh,onNewWidget:function(){return(0,be.A4)()},refreshLayerVersion:h.ct,onLayerInfo:v.Xg.bind(null,"layerinfo","enabled",!0,!1)})((0,R.compose)(Be,ze)(Ze));const Ue={TOCPlugin:le()(Ge,{Toolbar:{name:"toc",position:7,exclusive:!0,panel:!0,help:c().createElement(b.Z,{msgId:"helptexts.layerSwitcher"}),tooltip:"layers",wrap:!0,title:"layers",icon:c().createElement(g.Glyphicon,{glyph:"1-layer"}),priority:1},DrawerMenu:{name:"toc",position:1,glyph:"1-layer",icon:c().createElement("img",{src:se()}),buttonConfig:{buttonClassName:"square-button no-border",tooltip:"toc.layers"},priority:2}}),reducers:{queryform:r(46905).Z,query:r(97301).Z},epics:r(56175).Z(Ce.Z)};var We=r(55368),Ve=r(83520),qe=(r(16385),r(65544)),He=r.n(qe),$e=r(15135),Ke=r(55105),Ye=r(6806),Xe=r(50966),Qe=r(1706),Je=r(38560);function et(e){return(et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function rt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tt(Object(r),!0).forEach((function(t){pt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function nt(){return(nt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function ot(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function it(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function at(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function lt(e,t){return(lt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ct(e,t){return!t||"object"!==et(t)&&"function"!=typeof t?st(e):t}function st(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ut(e){return(ut=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ft=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&lt(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ut(n);if(o){var r=ut(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return ct(this,e)});function a(){var e;it(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return pt(st(e=i.call.apply(i,[this].concat(r))),"getWidth",(function(){return e.props.dynamicWidth||e.props.width})),pt(st(e),"renderChildren",(function(t,r){var n={key:t.key?t.key:r,ref:t.ref,open:e.props.activeKey&&e.props.activeKey===t.props.eventKey},o=t.props,i=(o.glyph,o.icon,o.buttonConfig,ot(o,["glyph","icon","buttonConfig"]));return c().createElement(t.type,nt({},n,i))})),pt(st(e),"renderButtons",(function(){return e.props.children.map((function(t){var r=c().createElement(Je.Z,{key:t.props.eventKey,bsSize:"large",className:t.props.buttonConfig&&t.props.buttonConfig.buttonClassName?t.props.buttonConfig.buttonClassName:"square-button",onClick:e.props.onChoose.bind(null,t.props.eventKey,e.props.activeKey===t.props.eventKey),bsStyle:e.props.activeKey===t.props.eventKey?"default":"primary"},t.props.glyph?c().createElement(g.Glyphicon,{glyph:t.props.glyph}):t.props.icon);if(t.props.buttonConfig&&t.props.buttonConfig.tooltip){var n=c().createElement(g.Tooltip,{key:"tooltip."+t.props.eventKey,id:"tooltip."+t.props.eventKey},c().createElement(b.Z,{msgId:t.props.buttonConfig.tooltip}));return c().createElement(Xe.Z,{placement:"bottom",key:"overlay-trigger."+t.props.eventKey,overlay:n},r)}return r}))})),pt(st(e),"renderContent",(function(){var t=e.props.single?c().createElement("div",{className:"navHeader",style:{width:"100%",minHeight:"35px"}},c().createElement(g.Glyphicon,{glyph:"1-close",className:"no-border btn-default",onClick:e.props.onToggle,style:{cursor:"pointer"}}),c().createElement("div",{className:"navButtons"},e.renderButtons())):c().createElement("div",{className:"navHeader",style:{width:"100%",minHeight:"35px"}},c().createElement("span",{className:"title"},e.props.title),c().createElement(g.Glyphicon,{glyph:"1-close",className:"no-border btn-default",onClick:e.props.onToggle,style:{cursor:"pointer"}})),r=c().createElement("div",{className:"nav-content"},t,c().createElement("div",{className:"nav-body"},e.props.children.filter((function(t){return!e.props.single||e.props.activeKey===t.props.eventKey})).map(e.renderChildren)));return e.props.resizable?c().createElement(Qe.Resizable,{axis:"x",resizeHandles:["e"],width:e.getWidth(),onResize:e.resize},r):r})),pt(st(e),"resize",(function(t,r){var n=r.size;e.props.onResize(n.width)})),e}return t=a,(r=[{key:"componentDidMount",value:function(){if(!this.props.overlapMap&&this.props.show){var e={left:this.props.width,width:"calc(100% - ".concat(this.props.width,"px)")};this.props.changeMapStyle(e,"drawerMenu")}}},{key:"componentDidUpdate",value:function(e){if(!this.props.overlapMap&&e.show!==this.props.show){var t=this.props.show?{left:this.props.width,width:"calc(100% - ".concat(this.props.width,"px)")}:{};this.props.changeMapStyle(t,"drawerMenu")}}},{key:"render",value:function(){var e=this;return c().createElement(Ye.Z,{styles:{sidebar:rt(rt({},this.props.layout),{},{zIndex:1022,width:this.getWidth()}),overlay:{zIndex:1021},root:{right:this.props.show?0:"auto",width:"0",overflow:"visible"},content:{overflowY:"auto"}},sidebarClassName:"nav-menu",onSetOpen:function(){e.props.onToggle()},open:this.props.show,docked:this.props.docked,sidebar:this.renderContent()},c().createElement("div",null))}}])&&at(t.prototype,r),a}(c().Component);pt(ft,"propTypes",{title:u().node,alignment:u().string,activeKey:u().string,docked:u().bool,show:u().bool,onToggle:u().func,onChoose:u().func,single:u().bool,width:u().number,dynamicWidth:u().number,overlapMap:u().bool,changeMapStyle:u().func,layout:u().object,resizable:u().bool,onResize:u().func}),pt(ft,"defaultProps",{docked:!1,single:!1,width:300,overlapMap:!0,layout:{},resizable:!1,onResize:function(){}});const dt=ft;var mt=r(43614);function yt(e){return(yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function vt(e,t){return(vt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ht(e,t){return!t||"object"!==yt(t)&&"function"!=typeof t?Ot(e):t}function Ot(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wt(e){return(wt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Et(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var St=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vt(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=wt(n);if(o){var r=wt(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return ht(this,e)});function a(){var e;bt(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Et(Ot(e=i.call.apply(i,[this].concat(r))),"onHeaderClick",(function(){e.props.onHeaderClick(e.props.eventKey)})),Et(Ot(e),"getHeight",(function(){return e.props.open&&e.refs.sectionContent?e.refs.sectionContent.scrollHeight+10:"0"})),e}return t=a,(r=[{key:"render",value:function(){var e={maxHeight:this.getHeight(),overflow:this.props.open?"auto":"hidden",padding:this.props.open?null:"0"};return c().createElement("div",{className:"section"},c().createElement("div",{className:"sectionHeader",style:{width:"100%"},onClick:this.onHeaderClick},this.props.renderInModal?null:c().createElement(g.Glyphicon,{glyph:"triangle-right",style:this.props.open?{transform:"rotate(90deg)"}:{}}),c().createElement("span",{className:this.headerClassName+" sectionTitle",ref:"sectionTitle"},this.props.header)),this.props.renderInModal?c().createElement(mt.Z,{ref:"modal",show:this.props.open,onHide:this.onHeaderClick},c().createElement(mt.Z.Header,{closeButton:!0},c().createElement(mt.Z.Title,null,this.props.header)),c().createElement(mt.Z.Body,null,this.props.children)):c().createElement("div",{ref:"sectionContent",className:"sectionContent",style:e},this.props.children))}}])&&gt(t.prototype,r),a}(c().Component);Et(St,"displayName","Section"),Et(St,"propTypes",{key:u().string,eventKey:u().string,headerClassName:u().string,open:u().bool,onHeaderClick:u().func,renderInModal:u().bool,header:u().node}),Et(St,"defaultProps",{headerClassName:"panel-heading"});const Pt=St;var jt=r(81756);function Ct(e){return(Ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xt(){return(xt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Tt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function It(e,t){return(It=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function At(e,t){return!t||"object"!==Ct(t)&&"function"!=typeof t?Ft(e):t}function Ft(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Dt(e){return(Dt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Rt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Nt=(0,$e.Z)(Je.Z),Mt=(0,D.P1)([function(e){return e.controls.drawer&&e.controls.drawer.enabled},function(e){return e.controls.drawer&&e.controls.drawer.menu||"1"},function(e){return e.controls.queryPanel&&e.controls.queryPanel.enabled&&e.controls.drawer&&e.controls.drawer.width||e.controls.drawer&&e.controls.drawer.resizedWidth||void 0},function(e){return(0,Ke.ic)(e,{height:!0})}],(function(e,t,r,n){return{show:e,activeKey:t,dynamicWidth:r,layout:n}})),Lt=(0,p.connect)(Mt,{onToggle:v.Xi.bind(null,"drawer",null),onResize:v.Xg.bind(null,"drawer","resizedWidth"),onChoose:He()(v.Xg.bind(null,"drawer","menu"),!0),changeMapStyle:V.hd})(dt),_t=(0,p.connect)((function(e){return{disabled:e.controls&&e.controls.drawer&&e.controls.drawer.disabled}}),{toggleMenu:v.Xi.bind(null,"drawer",null)})((function(e){var t=e.id,r=void 0===t?"":t,n=e.menuButtonStyle,o=void 0===n?{}:n,i=e.buttonStyle,a=void 0===i?"primary":i,l=e.buttonClassName,s=void 0===l?"square-button ms-drawer-menu-button":l,u=e.toggleMenu,p=void 0===u?function(){}:u,f=e.disabled,d=void 0!==f&&f,m=e.glyph,y=void 0===m?"1-layer":m,b=e.tooltipId,v=void 0===b?"toc.drawerButton":b,h=e.tooltipPosition,O=void 0===h?"bottom":h;return c().createElement(Nt,{id:r,style:o,bsStyle:a,key:"menu-button",className:s,onClick:p,disabled:d,tooltipId:v,tooltipPosition:O},c().createElement(g.Glyphicon,{glyph:y}))})),Zt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&It(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Dt(n);if(o){var r=Dt(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return At(this,e)});function a(){var e;Tt(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Rt(Ft(e=i.call.apply(i,[this].concat(r))),"getTools",(function(){return e.props.items.map((function(e,t){return le()({},e,{position:e.position||t})})).sort((function(e,t){return e.position-t.position}))})),Rt(Ft(e),"renderItems",(function(){return e.getTools().map((function(t,r){var n=t.panel||t.plugin,o=c().createElement(n,xt({isPanel:!0},t.cfg,{items:t.items||[],groupStyle:{style:{marginBottom:"0px",cursor:"pointer"}}})),i=t.title?c().createElement("div",{className:"drawer-menu-head drawer-menu-head-"+t.name},c().createElement(jt.Z,{msgId:t.title})):null;return e.props.singleSection?c().createElement(g.Panel,{icon:t.icon,glyph:t.glyph,buttonConfig:t.buttonConfig,key:t.name,eventKey:r+1+"",header:i},o):c().createElement(Pt,{key:t.name,renderInModal:t.renderInModal||!1,eventKey:r+1+"",header:i},o)}))})),e}return t=a,(r=[{key:"render",value:function(){return this.getTools().length>0?c().createElement("div",{id:this.props.id},c().createElement(_t,xt({},this.props,{id:"drawer-menu-button"})),c().createElement(Lt,xt({single:this.props.singleSection},this.props.menuOptions,{title:c().createElement(jt.Z,{msgId:"menu"}),alignment:"left"}),this.renderItems())):null}}])&&kt(t.prototype,r),a}(c().Component);Rt(Zt,"propTypes",{items:u().array,active:u().string,toggleMenu:u().func,id:u().string,glyph:u().string,buttonStyle:u().string,menuOptions:u().object,singleSection:u().bool,buttonClassName:u().string,menuButtonStyle:u().object,disabled:u().bool}),Rt(Zt,"contextTypes",{messages:u().object,router:u().object}),Rt(Zt,"defaultProps",{id:"mapstore-drawermenu",items:[],toggleMenu:function(){},glyph:"1-layer",buttonStyle:"primary",menuOptions:{},singleSection:!0,buttonClassName:"square-button ms-drawer-menu-button",disabled:!1});var Bt=(0,p.connect)((function(e){return{active:e.controls&&e.controls.drawer&&e.controls.drawer.active,disabled:e.controls&&e.controls.drawer&&e.controls.drawer.disabled}}),{toggleMenu:v.Xi.bind(null,"drawer",null)})(Zt);const zt={DrawerMenuPlugin:le()(Bt,{disablePluginIf:"{state('featuregridmode') === 'EDIT'}",FloatingLegend:{priority:1,name:"drawer-menu",button:_t}}),reducers:{}};var Gt=r(19461),Ut=r(95605),Wt=r(9860),Vt=r(23634),qt=r(9842),Ht=r(68783),$t=r(13573),Kt=r(63277),Yt=r(57668),Xt=r(21090);function Qt(e){return(Qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Jt(){return(Jt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function er(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function rr(e,t){return(rr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function nr(e,t){return!t||"object"!==Qt(t)&&"function"!=typeof t?or(e):t}function or(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ir(e){return(ir=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ar(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var lr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&rr(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ir(n);if(o){var r=ir(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return nr(this,e)});function a(){var e;er(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return ar(or(e=i.call.apply(i,[this].concat(r))),"onClick",(function(){e.props.onClick()})),ar(or(e),"renderButton",(function(){return c().createElement(Je.Z,Jt({id:e.props.id,disabled:e.props.disabled},e.props.btnConfig,{onClick:e.onClick,bsStyle:e.props.buttonStyle,style:e.props.style}),c().createElement(g.Glyphicon,{glyph:e.props.glyph}),e.props.text,e.props.help)})),ar(or(e),"addTooltip",(function(t){var r=c().createElement(g.Tooltip,{id:"redo-btn-tooltip"},e.props.tooltip);return c().createElement(Xe.Z,{placement:e.props.tooltipPlace,key:"overlay-trigger."+e.props.id,overlay:r},t)})),e}return t=a,(r=[{key:"shouldComponentUpdate",value:function(e){return this.props.disabled!==e.disabled}},{key:"UNSAFE_componentWillMount",value:function(){}},{key:"render",value:function(){var e=this.renderButton();return this.props.tooltip?this.addTooltip(e):e}}])&&tr(t.prototype,r),a}(c().Component);ar(lr,"propTypes",{id:u().string,btnConfig:u().object,text:u().oneOfType([u().string,u().element]),help:u().oneOfType([u().string,u().element]),onClick:u().func,tooltip:u().element,tooltipPlace:u().string,style:u().object,glyph:u().string,buttonStyle:u().string,disabled:u().bool}),ar(lr,"defaultProps",{id:"redo-btn",onClick:function(){},tooltipPlace:"left",glyph:"1-screen-forward",buttonStyle:"primary",btnConfig:{className:"square-button"}});const cr=lr;function sr(e){return(sr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ur(){return(ur=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function pr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fr(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function dr(e,t){return(dr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function mr(e,t){return!t||"object"!==sr(t)&&"function"!=typeof t?yr(e):t}function yr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function br(e){return(br=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gr(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var vr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&dr(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=br(n);if(o){var r=br(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return mr(this,e)});function a(){var e;pr(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return gr(yr(e=i.call.apply(i,[this].concat(r))),"onClick",(function(){e.props.onClick()})),gr(yr(e),"renderButton",(function(){return c().createElement(Je.Z,ur({id:e.props.id,disabled:e.props.disabled},e.props.btnConfig,{onClick:e.onClick,bsStyle:e.props.buttonStyle,style:e.props.style}),c().createElement(g.Glyphicon,{glyph:e.props.glyph}),e.props.text,e.props.help)})),gr(yr(e),"addTooltip",(function(t){var r=c().createElement(g.Tooltip,{id:"undo-btn-tooltip"},e.props.tooltip);return c().createElement(Xe.Z,{placement:e.props.tooltipPlace,key:"overlay-trigger."+e.props.id,overlay:r},t)})),e}return t=a,(r=[{key:"shouldComponentUpdate",value:function(e){return this.props.disabled!==e.disabled}},{key:"UNSAFE_componentWillMount",value:function(){}},{key:"render",value:function(){var e=this.renderButton();return this.props.tooltip?this.addTooltip(e):e}}])&&fr(t.prototype,r),a}(c().Component);gr(vr,"propTypes",{id:u().string,btnConfig:u().object,text:u().oneOfType([u().string,u().element]),help:u().oneOfType([u().string,u().element]),onClick:u().func,tooltip:u().element,tooltipPlace:u().string,style:u().object,glyph:u().string,buttonStyle:u().string,disabled:u().bool}),gr(vr,"defaultProps",{id:"undo-btn",onClick:function(){},tooltipPlace:"left",glyph:"1-screen-backward",buttonStyle:"primary",btnConfig:{className:"square-button"}});const hr=vr;var Or=Xt.zF.undo,wr=Xt.zF.redo,Er=(0,p.connect)((function(e){return{disabled:!((e.map&&e.map.past&&{past:e.map.past,future:e.map.future}||{past:[],future:[]}).past.length>0)}}),{onClick:Or})(hr),Sr=(0,p.connect)((function(e){return{disabled:!((e.map&&e.map.past&&{past:e.map.past,future:e.map.future}||{past:[],future:[]}).future.length>0)}}),{onClick:wr})(cr);const Pr={UndoPlugin:le()(Er,{Toolbar:{name:"undo",position:5,tool:!0,tooltip:"history.undoBtnTooltip",icon:c().createElement(g.Glyphicon,{glyph:"step-backward"}),help:c().createElement(jt.Z,{msgId:"helptexts.historyundo"}),priority:1}}),RedoPlugin:le()(Sr,{Toolbar:{name:"redo",position:6,tool:!0,tooltip:"history.redoBtnTooltip",icon:c().createElement(g.Glyphicon,{glyph:"step-forward"}),help:c().createElement(jt.Z,{msgId:"helptexts.historyredo"}),priority:1}}),reducers:{}};var jr=r(58888),Cr=r(43526),xr=r(59224),Tr=r(42780),kr=r(89602),Ir=r(97266),Ar=r(37275),Fr=r(43624),Dr=r.n(Fr),Rr=r(18446),Nr=r.n(Rr),Mr=r(59854),Lr=r.n(Mr),_r=r(29202),Zr=r(24261),Br=r.n(Zr),zr=r(89077),Gr=r(62192),Ur=r(8797),Wr=r(47361),Vr=r(65539),qr=r(80717),Hr=r(4116),$r=r(7654),Kr=r.n($r),Yr=r(41609),Xr=r.n(Yr);function Qr(){return(Qr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Jr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function en(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Jr(Object(r),!0).forEach((function(t){tn(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Jr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function tn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const rn=(0,R.compose)((0,R.branch)((function(e){var t=e.isDraggable;return void 0===t||t}),(function(e){return function(t){var r=t.onSort,n=t.isDraggable,o=t.items,i=void 0===o?[]:o,a=t.containerId,l=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(t,["onSort","isDraggable","items","containerId"]),s=i.map((function(e,t){return en(en({},e),{},{onSort:r,isDraggable:n,sortId:t,key:e.id||t,containerId:a})}));return c().createElement(e,Qr({},en(en({},l),{},{isDraggable:n}),{items:s}))}})));var nn=r(58767),on=r(38261),an=r(81763),ln=r.n(an),cn=r(90183),sn=r(73333),un=function(e,t,r){return ln()(parseFloat(e))&&!isNaN(parseFloat(e))?(0,Ur.Ov)(parseFloat(e),t,r):e},pn=function(e,t,r){return ln()(parseFloat(e))&&!isNaN(parseFloat(e))?parseFloat((0,Ur.Ov)(e,r,t).toFixed(4)):e};const fn=(0,R.compose)((0,R.defaultProps)({valueUom:"m",displayUom:"m",units:[{value:"degrees",label:"deg",originUom:"degrees"},{value:"ft",label:"ft",originUom:"m"},{value:"m",label:"m",originUom:"m"},{value:"km",label:"km",originUom:"m"},{value:"mi",label:"mi",originUom:"m"},{value:"nm",label:"nm",originUom:"m"}]}),(0,R.withStateHandlers)((function(e){var t=e.displayUom;return{uom:void 0===t?"nm":t}}),{setUom:function(){return function(e){return{uom:e}}}}),(0,R.withState)("localValue","setLocalValue"),(0,R.withPropsOnChange)(["value","localValue","uom","valueUom"],(function(e){var t=e.value,r=e.localValue,n=e.uom,o=e.valueUom;return{value:t===un(r,n,o)?r:pn(t,n,o)}})),(0,R.withHandlers)({onChange:function(e){var t=e.uom,r=e.projection,n=e.valueUom,o=e.onChange,i=void 0===o?function(){}:o,a=e.setLocalValue,l=void 0===a?function(){}:a;return function(e){l(e),i(un(e,t,n),r)}}}))((function(e){var t=e.value,r=e.units,n=void 0===r?[]:r,o=e.uom,i=e.projection,a=void 0===i?"EPSG:3857":i,l=e.style,s=void 0===l?{display:"inline-flex",width:"100%"}:l,u=e.setUom,p=void 0===u?function(){}:u,f=e.onChange,d=void 0===f?function(){}:f,m=(0,cn.getUnits)(a);return c().createElement(g.FormGroup,{style:s},c().createElement(sn.Z,{value:t,placeholder:"radius",name:"radius",onChange:function(e){return d(e,o)},step:1,type:"number"}),c().createElement(g.FormControl,{componentClass:"select",placeholder:"select",value:o,onChange:function(e){return p(e.target.value)},style:{width:85}},n.filter((function(e){var t=e.originUom;return m===t})).map((function(e){return c().createElement("option",{key:e.value,value:e.value},e.label)}))))}));function dn(e){return(dn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function yn(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?mn(Object(r),!0).forEach((function(t){jn(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function bn(e){return function(e){if(Array.isArray(e))return gn(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return gn(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?gn(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gn(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function vn(){return(vn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function hn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function On(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function wn(e,t){return(wn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function En(e,t){return!t||"object"!==dn(t)&&"function"!=typeof t?Sn(e):t}function Sn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Pn(e){return(Pn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function jn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Cn=(0,$e.Z)(g.Glyphicon),xn=(0,$e.Z)(g.DropdownButton),Tn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wn(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Pn(n);if(o){var r=Pn(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return En(this,e)});function a(){var e;hn(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return jn(Sn(e=i.call.apply(i,[this].concat(r))),"getValidationStateRadius",(function(e){var t=parseFloat(e);return Kr()(t)?"error":null})),jn(Sn(e),"renderLabelTexts",(function(t,r){var n=r.textLabels,o=r.featurePropValue;return"Polygon"===e.props.type?!Xr()(n)&&n[t].text:0!==t?Xr()(n)?!Xr()(o)&&o[0].formattedValue:n[t-1].text:null})),jn(Sn(e),"validateCoordinates",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.props.components,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0;if(t&&t.length){var o=t.filter(nn.Tl);return r?o.length>e.props.componentsValidation[e.props.type].min||o.length>=e.props.componentsValidation[e.props.type].min&&!(0,nn.Tl)(t[n]):o.length>=e.props.componentsValidation[e.props.type].min}return!1})),jn(Sn(e),"validateCircle",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.props.components,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.props.properties.radius;if(t&&t.length){var n=de()(t);return!Kr()(parseFloat(r))&&(0,nn.Tl)(n)}return!1})),jn(Sn(e),"validateText",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.props.components,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.props.properties.valueText;if(t&&t.length){var n=de()(t);return!!r&&(0,nn.Tl)(n)}return!1})),jn(Sn(e),"isValid",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.props.components,r=arguments.length>1?arguments[1]:void 0;return e[e.props.componentsValidation[e.props.type].validation](t,!1,r)})),jn(Sn(e),"addCoordPolygon",(function(t){if("Polygon"===e.props.type){var r,n,o,i=t.filter(nn.Tl),a=(null===(r=e.props.features[e.props.currentFeature])||void 0===r||null===(n=r.geometry)||void 0===n||null===(o=n.coordinates)||void 0===o?void 0:o[0])||[],l=void 0!==a?a.findIndex((function(e){return!(0,nn.Tl)({lon:e[0],lat:e[1]})})):-1;return t.concat([i.length&&0!==l?i[0]:{lat:"",lon:""}])}return t})),jn(Sn(e),"change",(function(t,r){var n=e.props.components,o=Kr()(parseFloat(r.lat))?"":parseFloat(r.lat),i=Kr()(parseFloat(r.lon))?"":parseFloat(r.lon);n[t]={lat:o,lon:i};var a=e.addCoordPolygon(n);e.props.onChange(a,e.props.properties.radius,e.props.properties.valueText,e.props.mapProjection),e.isValid(n)?(e.props.isMouseEnterEnabled||"LineString"===e.props.type||"Polygon"===e.props.type)&&e.props.onHighlightPoint(n[t]):((e.props.isMouseLeaveEnabled||"LineString"===e.props.type||"Polygon"===e.props.type)&&e.props.onHighlightPoint(null),e.props.onSetInvalidSelected("coords",n.map(nn.bh)))})),e}return t=a,(r=[{key:"renderCircle",value:function(){var e=this;return c().createElement("div",{style:{flex:1,overflowY:"auto",padding:"0 10px"}},c().createElement("div",null,c().createElement(g.FormGroup,{validationState:this.getValidationStateRadius(this.props.properties.radius)},c().createElement(g.ControlLabel,null,c().createElement(b.Z,{msgId:"annotations.editor.radius"})),c().createElement(fn,vn({placeholder:"radius"},this.props.measureOptions,{value:this.props.properties.radius,projection:this.props.mapProjection,name:"radius",onChange:function(t,r){e.isValid(e.props.components,t)?e.props.onChangeRadius(parseFloat(t),e.props.components.map(nn.bh),r):""!==t?e.props.onChangeRadius(parseFloat(t),[],r):(e.props.onChangeRadius(null,e.props.components.map(nn.bh),r),e.props.onSetInvalidSelected("radius",e.props.components.map(nn.bh)))},step:1,type:"number"})))))}},{key:"render",value:function(){var e=this,t=this.props.features[this.props.currentFeature||0],r=d()(t,"geometry.textLabels",[]),n=d()(t,"properties.values",[]),o=this.props,i=o.componentsValidation,a=o.type,l=bn(this.props.components),s=l.filter(nn.Tl).length===l.length,u=this[i[a].validation]()&&s,p=[{value:"decimal",text:c().createElement(b.Z,{msgId:"annotations.editor.decimal"})},{value:"aeronautical",text:c().createElement(b.Z,{msgId:"annotations.editor.aeronautical"})}],f=[{glyph:u?"ok-sign text-success":"exclamation-mark text-danger",tooltipId:u?"annotations.editor.valid":i[a].notValid,visible:!0},{Element:function(){return c().createElement(xn,{noCaret:!0,title:c().createElement(Cn,{glyph:"cog"}),pullRight:!0,className:"square-button-md no-border",tooltip:"Format"},p.map((function(t){var r=t.text,n=t.value;return c().createElement(g.MenuItem,{active:e.props.format===n,key:n,onClick:function(){return e.props.onChangeFormat(n)}},r)})))}},{glyph:"plus",tooltipId:"annotations.editor.add",disabled:"Bearing"!==a&&this.props.properties.disabled,visible:!i[a].add||!i[a].max||this.props.components.length!==i[a].max,onClick:function(){var t=bn(e.props.components);t=t.concat([{lat:"",lon:""}]),e.props.onChange(t,e.props.properties.radius,e.props.properties.valueText,e.props.mapProjection)}}];return c().createElement("div",{style:{display:"flex",flexDirection:"column",flex:1}},c().createElement("div",{className:"measure-feature-selector"},c().createElement("div",null,this.props.showFeatureSelector?c().createElement(Hr.ZP,{value:this.props.currentFeature,disabled:this.props.properties.disabled,options:[].concat(bn(this.props.features.map((function(t,r){var n=d()(t,"properties.values",[]),o="bearing"===(n[0]||{}).type?"Bearing":t.geometry.type;if(o!==e.props.type)return null;var i="LineString"===o?"Length":"Bearing"===o?"Bearing":"Area",a=n.length>0?"".concat(i," ").concat(n[0].formattedValue):"",l=n.length>1&&"Polygon"===o?", Perimeter: ".concat(n[1].formattedValue):"";return{label:"".concat(o," (").concat(a).concat(l,")"),value:r}}))),[{label:(0,ie.S$)(this.context.messages,"annotations.editor.newFeature"),value:this.props.features.length}]).filter((function(e){return!!e})),onChange:function(t){return e.props.onChangeCurrentFeature(null==t?void 0:t.value)}}):null),c().createElement("div",null,c().createElement(qr.Z,{btnGroupProps:{className:"pull-right"},btnDefaultProps:{className:"square-button-md no-border"},buttons:f}))),"Circle"===this.props.type&&this.renderCircle(),"Circle"===this.props.type&&c().createElement("div",{style:{flex:1,overflowY:"auto",paddingLeft:10,marginTop:10}},c().createElement("div",null,c().createElement(g.ControlLabel,null,c().createElement(b.Z,{msgId:"annotations.editor.center"})))),c().createElement("div",{className:"coordinates-row-container"},this.props.components.map((function(t,o){return c().createElement(c().Fragment,null,e.props.showLengthAndBearingLabel&&c().createElement("div",{className:"label-texts"},c().createElement("span",null,e.renderLabelTexts(o,{textLabels:r,featurePropValue:n}))),c().createElement(on.Z,{format:e.props.format,aeronauticalOptions:e.props.aeronauticalOptions,sortId:o,key:o+" key",disabled:e.props.properties.disabled&&(0,nn.Tl)(t),renderer:e.props.renderer,isDraggable:e.props.isDraggable,isDraggableEnabled:e.props.isDraggable&&e[i[a].validation]()&&!e.props.properties.disabled,showDraggable:e.props.isDraggable&&!("Point"===e.props.type||"Text"===e.props.type||"Circle"===e.props.type),formatVisible:!1,removeVisible:i[a].remove,removeEnabled:e[i[a].validation](e.props.components,i[a].remove,o),onSubmit:e.change,onMouseEnter:function(t){(e.props.isMouseEnterEnabled||"LineString"===e.props.type||"Polygon"===e.props.type||"MultiPoint"===e.props.type)&&e.props.onHighlightPoint(t)},onMouseLeave:function(){(e.props.isMouseLeaveEnabled||"LineString"===e.props.type||"Polygon"===e.props.type||"MultiPoint"===e.props.type)&&e.props.onHighlightPoint(null)},onSort:function(t,r){var n=e.props.components.reduce((function(n,o,i){return t===i?[].concat(bn(n),t>r?[yn({},o),de()(e.props.components.filter((function(e,t){return t===r})))]:[de()(e.props.components.filter((function(e,t){return t===r}))),yn({},o)]):r===i?bn(n):[].concat(bn(n),[yn({},o)])}),[]).filter((function(e){return e}));e.isValid(n)?e.props.onChange(n):e.props.properties.isValidFeature&&e.props.onSetInvalidSelected("coords",e.props.components.map(nn.bh))},idx:o,component:t,onRemove:function(){var t=e.props.components.filter((function(e,t){return t!==o}));e.isValid(t)?(e.props.isMouseEnterEnabled||"LineString"===e.props.type&&o!==t.length||"Polygon"===e.props.type?e.props.onHighlightPoint(t[o]):e.props.onHighlightPoint(null),e.props.onChange(t)):e.props.properties.isValidFeature&&e.props.onSetInvalidSelected("coords",e.props.components.map(nn.bh))}}))}))),(!this.props.components||0===this.props.components.length)&&c().createElement("div",{className:"text-center",style:{padding:15,paddingBottom:30}},c().createElement("i",null,c().createElement(b.Z,{msgId:"annotations.editor.addByClick"}))))}}])&&On(t.prototype,r),a}(c().Component);jn(Tn,"propTypes",{components:u().array,measureOptions:u().object,onSetInvalidSelected:u().func,onChange:u().func,onChangeRadius:u().func,onHighlightPoint:u().func,onChangeText:u().func,onChangeFormat:u().func,onChangeCurrentFeature:u().func,format:u().string,aeronauticalOptions:u().object,componentsValidation:u().object,transitionProps:u().object,properties:u().object,mapProjection:u().string,features:u().array,currentFeature:u().number,showFeatureSelector:u().bool,type:u().string,isDraggable:u().bool,isMouseEnterEnabled:u().bool,isMouseLeaveEnabled:u().bool,showLengthAndBearingLabel:u().bool,renderer:u().string}),jn(Tn,"contextTypes",{messages:u().object}),jn(Tn,"defaultProps",{components:[],measureOptions:{},onChange:function(){},onChangeRadius:function(){},onHighlightPoint:function(){},onChangeFormat:function(){},onChangeText:function(){},onChangeCurrentFeature:function(){},onSetInvalidSelected:function(){},componentsValidation:{Bearing:{min:2,max:2,add:!0,remove:!0,validation:"validateCoordinates",notValid:"annotations.editor.notValidPolyline"},Polygon:{min:3,add:!0,remove:!0,validation:"validateCoordinates",notValid:"annotations.editor.notValidPolyline"},LineString:{min:2,add:!0,remove:!0,validation:"validateCoordinates",notValid:"annotations.editor.notValidPolyline"},MultiPoint:{min:2,add:!0,remove:!0,validation:"validateCoordinates",notValid:"annotations.editor.notValidPolyline"},Point:{min:1,max:1,add:!0,remove:!1,validation:"validateCoordinates",notValid:"annotations.editor.notValidMarker"},Circle:{min:1,max:1,add:!0,remove:!1,validation:"validateCircle",notValid:"annotations.editor.notValidCircle"},Text:{min:1,max:1,add:!0,remove:!1,validation:"validateText",notValid:"annotations.editor.notValidText"}},transitionProps:{transitionName:"switch-panel-transition",transitionEnterTimeout:300,transitionLeaveTimeout:300},features:[],isDraggable:!0,isMouseEnterEnabled:!1,isMouseLeaveEnabled:!1,properties:{},type:"Point"});const kn=rn(Tn);function In(e){return(In="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function An(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Fn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Dn(e,t){return(Dn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Rn(e,t){return!t||"object"!==In(t)&&"function"!=typeof t?Nn(e):t}function Nn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Mn(e){return(Mn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ln(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.e(388).then(r.t.bind(r,40388,23));var _n=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Dn(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Mn(n);if(o){var r=Mn(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Rn(this,e)});function a(){var e;An(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Ln(Nn(e=i.call.apply(i,[this].concat(r))),"onGeomClick",(function(t){e.props.geomType!==t&&e.props.toggleMeasure({geomType:t})})),Ln(Nn(e),"onResetClick",(function(){e.props.toggleMeasure({geomType:null})})),Ln(Nn(e),"getToolTips",(function(){return{lineToolTip:c().createElement(g.Tooltip,{id:"tooltip-button.line"},e.props.lengthLabel),areaToolTip:c().createElement(g.Tooltip,{id:"tooltip-button.area"},e.props.areaLabel),bearingToolTip:c().createElement(g.Tooltip,{id:"tooltip-button.bearing"},e.isTrueBearing()?e.props.trueBearingLabel:e.props.bearingLabel)}})),Ln(Nn(e),"renderMeasurements",(function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r={style:"decimal",minimumIntegerDigits:1,maximumFractionDigits:2,minimumFractionDigits:2};return c().createElement(g.Grid,{fluid:!0,style:{maxHeight:400}},e.props.lineMeasureEnabled&&c().createElement(g.Row,null,c().createElement(g.FormGroup,{style:{display:"flex",alignItems:"center"}},e.props.lineMeasureValueEnabled&&c().createElement(g.Col,{xs:6},c().createElement("span",null,e.props.lengthLabel,": "),c().createElement("span",{id:"measure-len-res",className:"measure-value"},c().createElement("h3",null,c().createElement("strong",null,c().createElement(Wr.Z,{key:"len",numberParams:r,value:e.props.formatLength(e.props.uom.length.unit,e.props.measurement.len)})," ",e.props.uom.length.label)))),c().createElement(g.Col,{xs:6},c().createElement(_r.DropdownList,{disabled:t,value:e.props.uom.length.label,onChange:function(t){e.props.onChangeUom("length",t,e.props.uom)},data:e.props.uomLengthValues,textField:"label",valueField:"value"})))),e.props.areaMeasureEnabled&&c().createElement(g.Row,null,c().createElement(g.FormGroup,{style:{display:"flex",alignItems:"center"}},e.props.areaMeasureValueEnabled&&c().createElement(g.Col,{xs:6},c().createElement("span",null,e.props.areaLabel,": "),c().createElement("span",{id:"measure-area-res",className:"measure-value"},c().createElement("h3",null,c().createElement("strong",null,c().createElement(Wr.Z,{key:"area",numberParams:r,value:e.props.formatArea(e.props.uom.area.unit,e.props.measurement.area)})," ",e.props.uom.area.label)))),c().createElement(g.Col,{xs:6},c().createElement(_r.DropdownList,{disabled:t,value:e.props.uom.area.label,onChange:function(t){e.props.onChangeUom("area",t,e.props.uom)},data:e.props.uomAreaValues,textField:"label",valueField:"value"})))),e.props.bearingMeasureEnabled&&e.props.bearingMeasureValueEnabled&&c().createElement(g.Row,null,c().createElement(g.FormGroup,{style:{display:"flex",alignItems:"center",minHeight:34}},c().createElement(g.Col,{xs:6},c().createElement("span",null,e.isTrueBearing()?e.props.trueBearingLabel:e.props.bearingLabel,": "),c().createElement("span",{id:"measure-bearing-res",className:"measure-value"},c().createElement("h3",null,c().createElement("strong",null,e.props.formatBearing(e.props.measurement.bearing||0,e.isTrueBearing()&&e.props.measurement.trueBearing))))))))})),Ln(Nn(e),"renderPanel",(function(t){return e.props.showResults?e.renderMeasurements(t):null})),Ln(Nn(e),"renderLabel",(function(t){return e.props.showButtonsLabels?c().createElement("span",{className:"option-text"},(0,ie.S$)(e.context.messages,t)):null})),Ln(Nn(e),"renderText",(function(t,r){return t?c().createElement("span",null,c().createElement("span",{className:"option-icon"},c().createElement(g.Glyphicon,{glyph:t})),e.renderLabel(r)):e.renderLabel(r)})),Ln(Nn(e),"isTrueBearing",(function(){return e.props.measurement&&e.props.measurement.trueBearing&&e.props.measurement.trueBearing.measureTrueBearing})),e}return t=a,(r=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.geomType||this.props.toggleMeasure({geomType:"LineString"})}},{key:"shouldComponentUpdate",value:function(e){return!Nr()(e,this.props)}},{key:"render",value:function(){var e,t,r,n=this,o=d()(this.props.measurement,"features",[])[this.props.measurement.currentFeature||0],i=(null==o||null===(e=o.properties)||void 0===e?void 0:e.disabled)||!1,a=0===(this.props.measurement.features||[]).length||i;this.props.useSingleFeature?(t=(d()(this.props.measurement,"feature.geometry.type")||"").toLowerCase(),r=(d()(this.props.measurement,-1!==t.indexOf("polygon")?"feature.geometry.coordinates[0]":"feature.geometry.coordinates")||[]).map((function(e){return{lon:e[0],lat:e[1]}}))):(t=d()(o,"geometry.type","").toLowerCase(),r=(d()(o,-1!==t.indexOf("polygon")?"geometry.coordinates[0]":"geometry.coordinates")||[]).map((function(e){return{lon:e[0],lat:e[1]}})));var l=(this.props.measurement||{}).exportToAnnotation,s=void 0!==l&&l;return c().createElement(Vr.Z,{id:this.props.id,style:{overflow:"visible"},header:c().createElement("div",null,c().createElement(g.ButtonToolbar,{style:{width:"100%",marginBottom:15,marginTop:8,display:"flex",justifyContent:"center"}},c().createElement(qr.Z,{btnDefaultProps:{className:"square-button-md",bsStyle:"primary"},buttons:[{glyph:this.props.lineGlyph,active:!!this.props.lineMeasureEnabled,bsStyle:this.props.lineMeasureEnabled?"success":"primary",tooltip:this.renderText(this.props.inlineGlyph&&this.props.lineGlyph,"measureComponent.MeasureLength"),onClick:function(){return n.onGeomClick("LineString")},disabled:!this.props.lineMeasureEnabled&&i},{active:!!this.props.areaMeasureEnabled,bsStyle:this.props.areaMeasureEnabled?"success":"primary",glyph:this.props.areaGlyph,tooltip:this.renderText(this.props.inlineGlyph&&this.props.areaGlyph,"measureComponent.MeasureArea"),onClick:function(){return n.onGeomClick("Polygon")},disabled:!this.props.areaMeasureEnabled&&i},{visible:!this.props.disableBearing,active:!!this.props.bearingMeasureEnabled,bsStyle:this.props.bearingMeasureEnabled?"success":"primary",glyph:this.props.bearingGlyph,tooltip:this.renderText(this.props.inlineGlyph&&this.props.bearingGlyph,this.isTrueBearing()?"measureComponent.MeasureTrueBearing":"measureComponent.MeasureBearing"),onClick:function(){return n.onGeomClick("Bearing")},disabled:!this.props.bearingMeasureEnabled&&i}]}),c().createElement(qr.Z,{btnDefaultProps:{className:"square-button-md",bsStyle:"primary"},buttons:[{glyph:"remove",visible:!!this.props.withReset,tooltip:c().createElement(b.Z,{msgId:"measureComponent.resetTooltip"}),onClick:function(){return n.onResetClick()}}]}),c().createElement(qr.Z,{btnDefaultProps:{className:"square-button-md",bsStyle:"primary"},buttons:[{glyph:"ext-json",disabled:a,visible:!!(this.props.bearingMeasureEnabled||this.props.areaMeasureEnabled||this.props.lineMeasureEnabled)&&this.props.showExportToGeoJSON,tooltip:c().createElement(b.Z,{msgId:"measureComponent.exportToGeoJSON"}),onClick:function(){(0,zr.LR)(JSON.stringify((0,Gr.tL)(n.props.measurement.features,n.props.measurement.textLabels,n.props.uom,Br()(),"MapStore Measurements")),"measurements.json","application/geo+json")}},{glyph:"1-layer",visible:!!(this.props.bearingMeasureEnabled||this.props.areaMeasureEnabled||this.props.lineMeasureEnabled)&&this.props.showAddAsLayer,disabled:a||s,tooltip:c().createElement(b.Z,{msgId:"measureComponent.addAsLayer"}),onClick:function(){return n.props.onAddAsLayer(n.props.measurement.features,n.props.measurement.textLabels,n.props.uom)}},{glyph:s?"floppy-disk":"comment",tooltip:c().createElement(b.Z,{msgId:s?"measureComponent.saveMeasure":"measureComponent.addAsAnnotation"}),onClick:function(){n.props.onAddAnnotation(n.props.measurement.features,n.props.measurement.textLabels,n.props.uom,!s,{id:n.props.measurement.id,visibility:n.props.measurement.visibility})},disabled:a,visible:!!(this.props.bearingMeasureEnabled||this.props.areaMeasureEnabled||this.props.lineMeasureEnabled)&&this.props.showAddAsAnnotation}]})),this.renderPanel(i))},this.props.showCoordinateEditor&&c().createElement(g.Grid,{fluid:!0,style:{maxHeight:400,borderTop:"1px solid #ddd"}},this.props.bearingMeasureEnabled||this.props.areaMeasureEnabled||this.props.lineMeasureEnabled?c().createElement(g.Row,{style:this.props.isCoordinateEditorEnabled?{}:{pointerEvents:"none",opacity:.5}},c().createElement(kn,{key:"measureEditor",isMouseEnterEnabled:!0,isMouseLeaveEnabled:!0,format:this.props.format,currentFeature:this.props.measurement.currentFeature,features:this.props.measurement.features,mapProjection:this.props.mapProjection,onChangeFormat:this.props.onChangeFormat,onHighlightPoint:this.props.onHighlightPoint,onChange:this.props.onChangeCoordinates,onChangeCurrentFeature:this.props.onChangeCurrentFeature,showFeatureSelector:this.props.showFeatureSelector,items:[],isDraggable:!0,type:this.props.geomType,showLengthAndBearingLabel:this.props.showLengthAndBearingLabel,components:this.props.useSingleFeature||-1===t.indexOf("polygon")?r:Dr()(r),properties:(null==o?void 0:o.properties)||{}})):c().createElement(g.Row,null,c().createElement(g.Col,{xs:12,className:"text-center",style:{padding:15}},c().createElement("i",null,c().createElement(b.Z,{msgId:"measureComponent.selectTool"}))))))}}])&&Fn(t.prototype,r),a}(c().Component);Ln(_n,"propTypes",{id:u().string,name:u().string,columnProperties:u().object,propertiesChangeHandler:u().func,lengthButtonText:u().oneOfType([u().string,u().element]),areaButtonText:u().oneOfType([u().string,u().element]),resetButtonText:u().oneOfType([u().string,u().element]),lengthLabel:u().oneOfType([u().string,u().element]),areaLabel:u().oneOfType([u().string,u().element]),bearingLabel:u().oneOfType([u().string,u().element]),trueBearingLabel:u().oneOfType([u().string,u().element]),uom:u().shape({length:u().shape({unit:u().string.isRequired,label:u().string.isRequired}),area:u().shape({unit:u().string.isRequired,label:u().string.isRequired})}),toggleMeasure:u().func,measurement:u().object,lineMeasureEnabled:u().bool,lineMeasureValueEnabled:u().bool,areaMeasureEnabled:u().bool,areaMeasureValueEnabled:u().bool,bearingMeasureEnabled:u().bool,bearingMeasureValueEnabled:u().bool,showButtons:u().bool,showResults:u().bool,mapProjection:u().string,lineGlyph:u().string,areaGlyph:u().string,bearingGlyph:u().string,withReset:u().bool,showButtonsLabels:u().bool,inlineGlyph:u().bool,formatLength:u().func,formatArea:u().func,formatBearing:u().func,onChangeUom:u().func,uomLengthValues:u().array,uomAreaValues:u().array,format:u().string,onChangeFormat:u().func,onChangeCoordinates:u().func,onChangeCurrentFeature:u().func,onAddAsLayer:u().func,onHighlightPoint:u().func,geomType:u().string,defaultOptions:u().object,onAddAnnotation:u().func,showAddAsAnnotation:u().bool,showLengthAndBearingLabel:u().bool,showAddAsLayer:u().bool,showFeatureSelector:u().bool,useSingleFeature:u().bool,showExportToGeoJSON:u().bool,disableBearing:u().bool,trueBearing:u().object,onMount:u().func,onUpdateOptions:u().func,showCoordinateEditor:u().bool,isCoordinateEditorEnabled:u().bool}),Ln(_n,"contextTypes",{messages:u().object}),Ln(_n,"defaultProps",{mapProjection:"EPSG:3857",columnProperties:{xs:4,sm:4,md:4},uomLengthValues:[{value:"ft",label:"ft"},{value:"m",label:"m"},{value:"km",label:"km"},{value:"mi",label:"mi"},{value:"nm",label:"nm"}],uomAreaValues:[{value:"sqft",label:"ft²"},{value:"sqm",label:"m²"},{value:"sqkm",label:"km²"},{value:"sqmi",label:"mi²"},{value:"sqnm",label:"nm²"}],id:"measure-result-panel",uom:{length:{unit:"m",label:"m"},area:{unit:"sqm",label:"m²"}},geomType:"LineString",defaultOptions:{geomType:"LineString"},showResults:!0,showAddAsAnnotation:!1,showAddAsLayer:!0,showExportToGeoJSON:!0,showCoordinateEditor:!1,isCoordinateEditorEnabled:!0,showLengthAndBearingLabel:!1,withReset:!0,lineGlyph:"1-measure-length",areaGlyph:"1-measure-area",bearingGlyph:"1-measure-bearing",showButtonsLabels:!0,lengthLabel:c().createElement(b.Z,{msgId:"measureComponent.lengthLabel"}),areaLabel:c().createElement(b.Z,{msgId:"measureComponent.areaLabel"}),bearingLabel:c().createElement(b.Z,{msgId:"measureComponent.bearingLabel"}),trueBearingLabel:c().createElement(b.Z,{msgId:"measureComponent.trueBearingLabel"}),formatLength:function(e,t){return(0,Ur.Ov)(t,"m",e)},formatArea:function(e,t){return(0,Ur.Ov)(t,"sqm",e)},formatBearing:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,Ur.rp)(Lr()(e||0,6),t)},onChangeUom:function(){},onChangeFormat:function(){},onMount:function(){},onUpdateOptions:function(){},onAddAsLayer:function(){}});const Zn=_n;var Bn=r(32107),zn=r(7472);function Gn(e){return(Gn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Un(){return(Un=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Wn(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function Vn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qn(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Hn(e,t){return(Hn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $n(e,t){return!t||"object"!==Gn(t)&&"function"!=typeof t?Kn(e):t}function Kn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Yn(e){return(Yn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xn(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Qn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Hn(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Yn(n);if(o){var r=Yn(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return $n(this,e)});function a(){var e;Vn(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Xn(Kn(e=i.call.apply(i,[this].concat(r))),"onClose",(function(){e.props.onClose(!1)})),Xn(Kn(e),"initDefaultOptions",(function(t){var r=t.showCoordinateEditor,n=Wn(t,["showCoordinateEditor"]);e.props.onMount(r||e.props.showCoordinateEditor),e.props.toggleMeasure({geomType:n.geomType||"LineString"}),e.props.onInit(n)})),e}return t=a,(r=[{key:"UNSAFE_componentWillMount",value:function(){this.initDefaultOptions(this.props.defaultOptions)}},{key:"componentDidUpdate",value:function(e){Nr()(e.defaultOptions,this.props.defaultOptions)||this.initDefaultOptions(this.props.defaultOptions)}},{key:"render",value:function(){return this.props.show?this.props.showCoordinateEditor?c().createElement(Bn.Z,{dock:!0,bsStyle:"primary",position:"right",title:c().createElement(b.Z,{key:"title",msgId:"measureComponent.Measure"}),glyph:"1-ruler",size:660,open:this.props.show,onClose:this.onClose,style:this.props.style},c().createElement(Zn,Un({id:"measure-panel"},this.props))):c().createElement(zn.Z,{id:"measure-dialog"},c().createElement("div",{key:"header",role:"header"},c().createElement(g.Glyphicon,{glyph:"1-ruler"})," ",c().createElement(b.Z,{key:"title",msgId:"measureComponent.Measure"}),c().createElement("button",{key:"close",onClick:this.onClose,className:"close"},this.props.closeGlyph?c().createElement(g.Glyphicon,{glyph:this.props.closeGlyph}):c().createElement("span",null,"×"))),c().createElement("div",{key:"body",role:"body"},c().createElement(Zn,Un({id:"measure-panel",style:{minWidth:"500px"}},this.props)))):null}}])&&qn(t.prototype,r),a}(c().Component);Xn(Qn,"propTypes",{show:u().bool,closeGlyph:u().string,onClose:u().func,onMount:u().func,onInit:u().func,showCoordinateEditor:u().bool,defaultOptions:u().object,style:u().object}),Xn(Qn,"contextTypes",{messages:u().object}),Xn(Qn,"defaultProps",{show:!1,defaultOptions:{},onMount:function(){},onInit:function(){},toggleMeasure:function(){},showCoordinateEditor:!1,showAddAsAnnotation:!1,closeGlyph:"1-close",style:{height:"calc(100% - 30px)"}});var Jn=Qn;function eo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function to(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eo(Object(r),!0).forEach((function(t){ro(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eo(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ro(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var no=v.Xi.bind(null,"measure",null),oo=(0,p.connect)((0,D.P1)([function(e){return{measurement:e.measurement||{},uom:e.measurement&&e.measurement.uom||{length:{unit:"m",label:"m"},area:{unit:"sqm",label:"m²"}},lineMeasureEnabled:e.measurement&&e.measurement.lineMeasureEnabled,lineMeasureValueEnabled:!(0,he.m6)(e),areaMeasureEnabled:e.measurement&&e.measurement.areaMeasureEnabled,areaMeasureValueEnabled:!(0,he.m6)(e),bearingMeasureEnabled:e.measurement&&e.measurement.bearingMeasureEnabled,showLengthAndBearingLabel:e.measurement&&e.measurement.showLengthAndBearingLabel,bearingMeasureValueEnabled:!(0,he.m6)(e),isCoordinateEditorEnabled:(0,Ir.iL)(e),showCoordinateEditor:(0,J.Iz)(e),showFeatureSelector:(0,he.m6)(e),useSingleFeature:!(0,he.m6)(e),withReset:(0,he.m6)(e),showExportToGeoJSON:(0,he.m6)(e),showAddAsAnnotation:(0,Ir.cD)(e)&&(0,he.m6)(e),trueBearing:(0,Ir.jM)(e),showAddAsLayer:(0,he.m6)(e),isCoordEditorEnabled:e.measurement&&!e.measurement.isDrawing,geomType:e.measurement&&e.measurement.geomType,format:e.measurement&&e.measurement.format}},function(e){return(0,J.QF)(e)}],(function(e,t){return to(to({},e),{},{show:t,format:e.format||Ar.ZP.getConfigProp("defaultCoordinateFormat")||"decimal"})})),{toggleMeasure:kr.Bd,onAddAnnotation:kr.ud,onChangeUom:kr.Gd,onHighlightPoint:Tr.aS,onChangeFormat:kr.RM,onInit:kr.S1,onChangeCoordinates:kr.dD,onChangeCurrentFeature:kr.h2,onClose:no,onMount:function(e){return(0,v.Xg)("measure","showCoordinateEditor",e)},onAddAsLayer:kr.NR},null,{pure:!1})(Jn);const io={MeasurePlugin:le()(oo,{disablePluginIf:"{state('mapType') === 'cesium'}",BurgerMenu:{name:"measurement",position:9,panel:!1,help:c().createElement(jt.Z,{msgId:"helptexts.measureComponent"}),tooltip:"measureComponent.tooltip",text:c().createElement(jt.Z,{msgId:"measureComponent.Measure"}),icon:c().createElement(g.Glyphicon,{glyph:"1-ruler"}),action:function(){return(0,v.Xg)("measure","enabled",!0)}}}),reducers:{measurement:r(78113).Z},epics:r(74226).ZP},ao=(0,O.rx)("FilterLayer",{component:function(){return null},containers:{TOC:{name:"FilterLayer"}}});var lo=r(96909),co=r(87427),so=r(47037),uo=r.n(so);function po(){return(po=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function fo(e){return function(e){if(Array.isArray(e))return mo(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return mo(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?mo(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mo(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var yo=(0,$e.Z)(g.NavItem),bo=function(e){var t=e.className,r=void 0===t?"":t,n=e.activeTab,o=void 0===n?"general":n,i=e.currentLocale,a=void 0===i?"en-US":i,l=e.currentLocaleLanguage,s=void 0===l?"en":l,u=e.width,p=void 0===u?500:u,f=e.groups,d=void 0===f?[]:f,v=e.element,h=void 0===v?{}:v,O=e.settings,w=void 0===O?{}:O,E=e.onSave,S=void 0===E?function(){}:E,P=e.onClose,j=void 0===P?function(){}:P,C=e.onHideSettings,x=void 0===C?function(){}:C,T=e.onSetTab,k=void 0===T?function(){}:T,I=e.onUpdateParams,A=void 0===I?function(){}:I,F=e.onRetrieveLayerData,D=void 0===F?function(){}:F,R=e.onShowAlertModal,N=void 0===R?function(){}:R,M=e.realtimeUpdate,L=void 0===M||M,_=e.alertModal,Z=void 0!==_&&_,B=e.dockStyle,z=void 0===B?{}:B,G=e.dock,U=void 0===G||G,W=e.showFullscreen,V=e.draggable,q=e.position,H=void 0===q?"left":q,$=e.tabs,K=void 0===$?[]:$,Y=e.tabsConfig,X=void 0===Y?{}:Y,Q=e.isLocalizedLayerStylesEnabled,J=void 0!==Q&&Q,ee=de()(K.filter((function(e){return e.id===o&&e.toolbarComponent})).map((function(e){return e.toolbarComponent}))),te=K&&K.map((function(e){return e&&e.onClose})).filter((function(e){return e}))||[],re=[{glyph:"floppy-disk",tooltipId:"save",visible:!!S,onClick:function(){return S(te)}}].concat(fo(de()(K.filter((function(e){return e.id===o&&e.toolbar})).map((function(e){return e.toolbar})))||[]));return c().createElement("div",null,c().createElement(Bn.Z,{open:w.expanded,glyph:"wrench",title:h.title&&pe()(h.title)&&(h.title[a]||h.title.default)||uo()(h.title)&&h.title||"",className:r,onClose:function(){j?j(!1,te):(te.forEach((function(e){e()})),x())},size:p,style:z,showFullscreen:W,dock:U,draggable:V,position:H,header:[c().createElement(g.Row,{key:"ms-toc-settings-toolbar",className:"text-center"},c().createElement(g.Col,{xs:12},ee?c().createElement(ee,{buttons:re}):c().createElement(qr.Z,{btnDefaultProps:{bsStyle:"primary",className:"square-button-md"},buttons:re})))].concat(fo(K.length>1?[c().createElement(g.Row,{key:"ms-toc-settings-navbar",className:"ms-row-tab"},c().createElement(g.Col,{xs:12},c().createElement(g.Nav,{bsStyle:"tabs",activeKey:o,justified:!0},K.map((function(e){return c().createElement(yo,{key:"ms-tab-settings-"+e.id,tooltip:c().createElement(b.Z,{msgId:e.tooltipId}),eventKey:e.id,onClick:function(){k(e.id),e.onClick&&e.onClick()}},c().createElement(g.Glyphicon,{glyph:e.glyph}))})))))]:[]))},K.filter((function(e){return e.id&&e.id===o})).filter((function(e){return e.Component})).map((function(t){return c().createElement(t.Component,po({},e,X[t.id],{key:"ms-tab-settings-body-"+t.id,containerWidth:p,element:h,groups:d,nodeType:w.nodeType,settings:w,retrieveLayerData:D,onChange:function(e,t){return pe()(e)?A(e,L):A(function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}({},e,t),L)},isLocalizedLayerStylesEnabled:J,currentLocaleLanguage:s}))}))),c().createElement(m.Z,null,c().createElement(y.Z,{fade:!0,show:Z,title:c().createElement(b.Z,{msgId:"layerProperties.changedSettings"}),size:"xs",onClose:function(){return N(!1)},buttons:[{bsStyle:"primary",text:c().createElement(b.Z,{msgId:"close"}),onClick:function(){return j(!0,te)}},{bsStyle:"primary",text:c().createElement(b.Z,{msgId:"save"}),onClick:function(){return S(te)}}]},c().createElement("div",{className:"ms-alert"},c().createElement("div",{className:"ms-alert-center"},c().createElement(b.Z,{msgId:"layerProperties.changedSettingsAlert"}))))))};bo.contextTypes={plugins:u().object,pluginsConfig:u().array,loadedPlugins:u().object};const go=bo;var vo=r(63105),ho=r.n(vo),Oo=r(89734),wo=r.n(Oo),Eo=r(39980),So=r(529),Po=r(40562),jo=r(21222),Co=r(88798),xo=r(63209),To=r(10907),ko=r(37752),Io=r.n(ko),Ao=r(77786);function Fo(e){return(Fo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Do(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ro(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function No(e,t){return(No=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Mo(e,t){return!t||"object"!==Fo(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Lo(e){return(Lo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var _o,Zo,Bo,zo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&No(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Lo(n);if(o){var r=Lo(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Mo(this,e)});function a(){return Do(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"render",value:function(){if(this.props.active){var e=this.props.payload;return c().createElement("div",{className:"custom-tooltip"},c().createElement("p",{className:"label"},Math.abs(e[0].value)))}return null}}])&&Ro(t.prototype,r),a}(c().Component);_o=zo,Zo="propTypes",Bo={type:u().string,payload:u().array,label:u().string,active:u().bool},Zo in _o?Object.defineProperty(_o,Zo,{value:Bo,enumerable:!0,configurable:!0,writable:!0}):_o[Zo]=Bo;const Go=zo;function Uo(e){return(Uo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Vo(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function qo(e,t){return(qo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ho(e,t){return!t||"object"!==Uo(t)&&"function"!=typeof t?$o(e):t}function $o(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ko(e){return(Ko=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Yo(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Xo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qo(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ko(n);if(o){var r=Ko(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Ho(this,e)});function a(){var e;Wo(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Yo($o(e=i.call.apply(i,[this].concat(r))),"renderLineChart",(function(){return c().createElement(Ao.wW,{margin:e.props.chartStyle.margin,width:e.props.chartStyle.width,height:e.props.chartStyle.height,data:e.formatData(e.props.elevations.values)},c().createElement(Ao.Kc,{hide:!0,dataKey:"name"}),c().createElement(Ao.B2,{hide:!0}),c().createElement(Ao.u,{content:c().createElement(Go,null)}),c().createElement(Ao.q3,{strokeDasharray:"3 3",horizontal:!1}),c().createElement(Ao.x1,{isAnimationActive:e.props.animated,type:"monotone",dataKey:"value",stroke:"#82ca9d",activeDot:{r:8}}))})),Yo($o(e),"formatData",(function(t){var r=[];return t.map((function(e){r.push({name:this.props.elevations.name,value:parseFloat(this.props.elevations.positive?e:-e)})}),$o(e)),r})),e}return t=a,(r=[{key:"render",value:function(){return c().createElement("div",null,this.renderLineChart())}}])&&Vo(t.prototype,r),a}(c().Component);function Qo(e){return(Qo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Jo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ei(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Jo(Object(r),!0).forEach((function(t){li(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Jo(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ti(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ri(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ni(e,t){return(ni=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function oi(e,t){return!t||"object"!==Qo(t)&&"function"!=typeof t?ii(e):t}function ii(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ai(e){return(ai=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function li(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Yo(Xo,"propTypes",{elevations:u().object,chartStyle:u().object,animated:u().bool}),Yo(Xo,"defaultProps",{elevations:{},chartStyle:{margin:{top:5,right:5,left:5,bottom:45},width:600,height:200},animated:!1}),r(42490),r(57845);var ci=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ni(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ai(n);if(o){var r=ai(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return oi(this,e)});function a(){var e;ti(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return li(ii(e=i.call.apply(i,[this].concat(r))),"renderElevationsChart",(function(t){return e.props.showElevationChart?c().createElement(Xo,{elevations:t,chartStyle:ei({height:200,width:e.props.containerWidth-30},e.props.chartStyle)}):null})),li(ii(e),"renderElevationsSlider",(function(t){var r=t.values,n=r.length-1,o=n-0,i=parseFloat(r[0]),a=parseFloat(r[r.length-1]),l=e.props.element&&e.props.element.params&&e.props.element.params[t.name]||r[0];return c().createElement("div",{id:"mapstore-elevation"},c().createElement(Io(),{snap:!0,start:[parseFloat(l)]||0,range:e.calculateRange(r,0,n,o,i,a),behaviour:"tap",pips:{mode:"range",stepped:!0,density:10,format:{to:function(e){return parseFloat(e).toFixed(1)}}},tooltips:!e.props.showElevationChart,onChange:function(r){e.props.onChange("params",Object.assign({},li({},t.name,r[0])))}}))})),li(ii(e),"calculateRange",(function(e,t,r,n,o,i){var a=[],l="",c={min:o,max:i};return e.forEach((function(e,r){a[r]=(r-t)/n*100,l=a[r]+"%",c[l]=parseFloat(e)})),c})),e}return t=a,(r=[{key:"shouldComponentUpdate",value:function(e){return this.props.element.id!==e.element.id}},{key:"render",value:function(){var e=this.props.getDimension(this.props.element.dimensions,"elevation");return c().createElement(g.Grid,{fluid:!0,style:{paddingTop:15,paddingBottom:15}},c().createElement("label",{id:"mapstore-elevation-label",key:"elevation-label",className:"control-label",style:this.props.showElevationChart?{marginBottom:"10px"}:{marginBottom:"90px"}},this.props.elevationText,": (",e.units,")"),this.renderElevationsChart(e),c().createElement("div",null,c().createElement("div",{key:"elevation"},this.renderElevationsSlider(e))))}}])&&ri(t.prototype,r),a}(c().Component);li(ci,"propTypes",{elevationText:u().node,element:u().object,getDimension:u().func,onChange:u().func,chartStyle:u().object,showElevationChart:u().bool,containerWidth:u().number}),li(ci,"defaultProps",{onChange:function(){},showElevationChart:!0,containerWidth:500,elevationText:c().createElement(b.Z,{msgId:"elevation"}),getDimension:ne.Fr});var si=r(53657),ui=r.n(si),pi=(r(89531),r(66913)),fi=r.n(pi);function di(e){return(di="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function yi(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?mi(Object(r),!0).forEach((function(t){ji(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mi(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function bi(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function gi(e,t,r){return(gi="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Si(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(r):o.value}})(e,t,r||e)}function vi(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&hi(e,t)}function hi(e,t){return(hi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Oi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=Si(e);if(t){var o=Si(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return wi(this,r)}}function wi(e,t){return!t||"object"!==di(t)&&"function"!=typeof t?Ei(e):t}function Ei(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Si(e){return(Si=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Pi(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ji(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ci='<span class="glyphicon glyphicon-align-left" style="display: inline-block; margin-top: 4px;"></span>',xi='<span class="glyphicon glyphicon-align-center" style="display: inline-block; margin-top: 4px;"></span>',Ti='<span class="glyphicon glyphicon-align-right" style="display: inline-block; margin-top: 4px;"></span>',ki='<span class="glyphicon glyphicon-remove" style="display: inline-block; margin-top: 4px;"></span>';function Ii(e){return(Ii="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ai(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Fi(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ai(Object(r),!0).forEach((function(t){Zi(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ai(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Di(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ri(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ni(e,t){return(Ni=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Mi(e,t){return!t||"object"!==Ii(t)&&"function"!=typeof t?Li(e):t}function Li(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _i(e){return(_i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Zi(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Bi=ui().Quill,zi=function(e){var t=e.import("blots/embed"),r=e.import("formats/link"),n=e.imports.parchment,o=new n.Attributor.Style("float","float"),i=new n.Attributor.Style("margin","margin"),a=new n.Attributor.Style("display","display"),l=new n.Attributor.Style("width","width"),c={iframeIcon:!0,modules:["DisplaySize","Toolbar","Resize"],overlayStyles:{position:"absolute",boxSizing:"border-box",border:"1px dashed #444"},handleStyles:{position:"absolute",height:"12px",width:"12px",backgroundColor:"white",border:"1px solid #777",boxSizing:"border-box",opacity:"0.80"},displayStyles:{position:"absolute",font:"12px/1.0 Arial, Helvetica, sans-serif",padding:"4px 8px",textAlign:"center",backgroundColor:"white",color:"#333",border:"1px solid #777",boxSizing:"border-box",opacity:"0.80",cursor:"default"},toolbarStyles:{position:"absolute",top:"-12px",right:"0",left:"0",height:"0",minWidth:"100px",font:"12px/1.0 Arial, Helvetica, sans-serif",textAlign:"center",color:"#333",boxSizing:"border-box",cursor:"default"},toolbarButtonStyles:{display:"inline-block",width:"24px",height:"24px",background:"white",border:"1px solid #999",verticalAlign:"middle"},toolbarButtonSvgStyles:{fill:"#444",stroke:"#444",strokeWidth:"2"}},s=function e(t){Pi(this,e),ji(this,"onCreate",(function(){})),ji(this,"onDestroy",(function(){})),ji(this,"onUpdate",(function(){})),this.overlay=t.overlay,this.domNode=t.domNode,this.options=t.options,this.requestUpdate=t.onUpdate},u=function(e){vi(r,e);var t=Oi(r);function r(){var e;Pi(this,r);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return ji(Ei(e=t.call.apply(t,[this].concat(o))),"onCreate",(function(){e.display=document.createElement("div"),Object.assign(e.display.style,e.options.displayStyles),e.overlay.appendChild(e.display)})),ji(Ei(e),"onDestroy",(function(){})),ji(Ei(e),"onUpdate",(function(){if(e.display&&e.domNode){var t=e.getCurrentSize();if(e.display.innerHTML=t.join(" &times; "),t[0]>120&&t[1]>30)Object.assign(e.display.style,{right:"4px",bottom:"4px",left:"auto"});else if("right"===e.domNode.style.float){var r=e.display.getBoundingClientRect();Object.assign(e.display.style,{right:"auto",bottom:"-".concat(r.height+4,"px"),left:"-".concat(r.width+4,"px")})}else{var n=e.display.getBoundingClientRect();Object.assign(e.display.style,{right:"-".concat(n.width+4,"px"),bottom:"-".concat(n.height+4,"px"),left:"auto"})}}})),ji(Ei(e),"getCurrentSize",(function(){return"IMG"===e.domNode.tagName.toUpperCase()?[e.domNode.width,Math.round(e.domNode.width/e.domNode.naturalWidth*e.domNode.naturalHeight)]:[e.domNode.clientWidth,e.domNode.clientHeight]})),e}return r}(s),p=function(e){vi(r,e);var t=Oi(r);function r(){var e;Pi(this,r);for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return ji(Ei(e=t.call.apply(t,[this].concat(o))),"onCreate",(function(){e.boxes=[],e.addBox("nwse-resize"),e.addBox("nesw-resize"),e.addBox("nwse-resize"),e.addBox("nesw-resize"),e.positionBoxes()})),ji(Ei(e),"onDestroy",(function(){e.setCursor("")})),ji(Ei(e),"positionBoxes",(function(){var t="".concat(-parseFloat(e.options.handleStyles.width)/2,"px"),r="".concat(-parseFloat(e.options.handleStyles.height)/2,"px");[{left:t,top:r},{right:t,top:r},{right:t,bottom:r},{left:t,bottom:r}].forEach((function(t,r){Object.assign(e.boxes[r].style,t)}))})),ji(Ei(e),"addBox",(function(t){var r=document.createElement("div");Object.assign(r.style,e.options.handleStyles),r.style.cursor=t,r.style.width="".concat(e.options.handleStyles.width,"px"),r.style.height="".concat(e.options.handleStyles.height,"px"),r.addEventListener("mousedown",e.handleMousedown,!1),e.overlay.appendChild(r),e.boxes.push(r)})),ji(Ei(e),"handleMousedown",(function(t){e.dragBox=t.target,e.dragStartX=t.clientX,e.dragStartY=t.clientY,e.preDragWidth=e.domNode.width||e.domNode.naturalWidth||e.domNode.clientWidth,e.preDragHeight=e.domNode.height||e.domNode.naturalHeight||e.domNode.clientHeight,e.setCursor(e.dragBox.style.cursor),document.addEventListener("mousemove",e.handleDrag,!1),document.addEventListener("mouseup",e.handleMouseup,!1)})),ji(Ei(e),"handleMouseup",(function(){e.setCursor(""),document.removeEventListener("mousemove",e.handleDrag),document.removeEventListener("mouseup",e.handleMouseup)})),ji(Ei(e),"handleDrag",(function(t){if(e.domNode){var r=t.clientX-e.dragStartX,n=t.clientY-e.dragStartY;if(e.dragBox===e.boxes[0]||e.dragBox===e.boxes[3]){if("IMG"===e.domNode.tagName.toUpperCase())e.domNode.width=Math.round(e.preDragWidth-r);else if("ms-quill-iframe"===e.domNode.getAttribute("class")){var o=e.domNode.parentNode&&e.domNode.parentNode.children&&e.domNode.parentNode.children[0]||null;o&&(e.domNode.parentNode.parentNode.style.width=Math.round(e.preDragWidth-r)+"px",o.setAttribute("width",e.domNode.parentNode.parentNode.clientWidth),e.domNode.style.width=e.domNode.parentNode.parentNode.clientWidth+"px")}}else if("IMG"===e.domNode.tagName.toUpperCase())e.domNode.width=Math.round(e.preDragWidth+r);else if("ms-quill-iframe"===e.domNode.getAttribute("class")){var i=e.domNode.parentNode&&e.domNode.parentNode.children&&e.domNode.parentNode.children[0]||null;i&&(e.domNode.parentNode.parentNode.style.width=Math.round(e.preDragWidth+r)+"px",i.setAttribute("width",e.domNode.parentNode.parentNode.clientWidth),e.domNode.style.width=e.domNode.parentNode.parentNode.clientWidth+"px")}if("ms-quill-iframe"===e.domNode.getAttribute("class")){var a=e.domNode.parentNode&&e.domNode.parentNode.children&&e.domNode.parentNode.children[0]||null;a&&(e.domNode.parentNode.parentNode.style.height=Math.round(e.preDragHeight+n)+"px",a.setAttribute("height",e.domNode.parentNode.parentNode.clientHeight),e.domNode.style.height=e.domNode.parentNode.parentNode.clientHeight+"px")}e.requestUpdate()}})),ji(Ei(e),"setCursor",(function(t){[document.body,"IMG"===e.domNode.tagName.toUpperCase()?e.domNode:e.domNode.parentNode.parentNode].forEach((function(e){e.style.cursor=t}))})),e}return r}(s),f=function(e){vi(r,e);var t=Oi(r);function r(){var e;Pi(this,r);for(var n=arguments.length,c=new Array(n),s=0;s<n;s++)c[s]=arguments[s];return ji(Ei(e=t.call.apply(t,[this].concat(c))),"onCreate",(function(){e.toolbar=document.createElement("div"),Object.assign(e.toolbar.style,e.options.toolbarStyles),e.overlay.appendChild(e.toolbar),e._defineAlignments(),e._addToolbarButtons()})),ji(Ei(e),"onDestroy",(function(){})),ji(Ei(e),"onUpdate",(function(){})),ji(Ei(e),"_defineAlignments",(function(){var t="IMG"===e.domNode.tagName.toUpperCase()?e.domNode:e.domNode.parentNode.parentNode;e.alignments=[{icon:Ci,apply:function(){a.add(t,"inline"),o.add(t,"left"),i.add(t,"0 1em 1em 0")},isApplied:function(){return"left"===o.value(t)}},{icon:xi,apply:function(){a.add(t,"block"),o.remove(t),i.add(t,"auto")},isApplied:function(){return"auto"===i.value(t)}},{icon:Ti,apply:function(){a.add(t,"inline"),o.add(t,"right"),i.add(t,"0 0 1em 1em")},isApplied:function(){return"right"===o.value(t)}},{icon:ki,apply:function(){if(a.add(t,"block"),o.add(t,"none"),i.add(t,"0"),l.add(t,"100%"),"ql-video"===t.getAttribute("class")){var e=t.querySelector("IFRAME")||null,r=t.querySelector(".ms-quill-iframe")||null;e&&r&&(t.style.width="100%",e.setAttribute("width","100%"),r.style.width="100%",t.style.height="200px",e.setAttribute("height",200),r.style.height="200px")}},isApplied:function(){return!1}}]})),ji(Ei(e),"_addToolbarButtons",(function(){var t=[];e.alignments.forEach((function(r,n){var l=document.createElement("span");t.push(l),l.innerHTML=r.icon,l.addEventListener("click",(function(){t.forEach((function(e){e.style.filter=""})),r.isApplied()?(o.remove(e.domNode),i.remove(e.domNode),a.remove(e.domNode)):(e._selectButton(l),r.apply()),e.requestUpdate()})),Object.assign(l.style,e.options.toolbarButtonStyles),n>0&&(l.style.borderLeftWidth="0"),Object.assign(l.style,e.options.toolbarButtonSvgStyles),r.isApplied()&&e._selectButton(l),e.toolbar.appendChild(l)}))})),ji(Ei(e),"_selectButton",(function(e){e.style.filter="invert(20%)"})),e}return r}(s),d={DisplaySize:u,Toolbar:f,Resize:p},m=["height","width"],y=function(e){vi(a,e);var t,n,o,i=Oi(a);function a(){return Pi(this,a),i.apply(this,arguments)}return t=a,o=[{key:"create",value:function(e){var t="",r="100%",n=200;pe()(e)?(t=e.src||t,r=e.width||r,n=e.height||n):t=e||t;var o=gi(Si(a),"create",this).call(this,e);o.style.position="relative",e.domNodeStyle&&Object.assign(o.style,e.domNodeStyle),o.style.width=uo()(r)&&-1!==r.indexOf("%")?r:r+"px",o.style.height=uo()(n)&&-1!==n.indexOf("%")?n:n+"px";var i=document.createElement("IFRAME");i.setAttribute("frameborder","0"),i.setAttribute("allowfullscreen",!0),i.setAttribute("src",this.sanitize(t)),i.setAttribute("width",r),i.setAttribute("height",n);var l=document.createElement("DIV");return l.setAttribute("class","ms-quill-iframe"),l.style.overflow="hidden",l.style.position="absolute",l.style.left="0",l.style.top="0",l.style.width=uo()(r)&&-1!==r.indexOf("%")?r:r+"px",l.style.height=uo()(n)&&-1!==n.indexOf("%")?n:n+"px",l.style.border="1px solid #ddd",o.appendChild(i),o.appendChild(l),o}},{key:"formats",value:function(e){return m.reduce((function(t,r){return e.hasAttribute(r)&&(t[r]=e.getAttribute(r)),t}),{})}},{key:"sanitize",value:function(e){return r.sanitize(e)}},{key:"value",value:function(e){var t=e.children&&e.children[0]&&e.children[0].children&&e.children[0].children[0];return t?{src:t.getAttribute("src"),width:t.getAttribute("width"),height:t.getAttribute("height"),domNodeStyle:yi({},e.style)}:""}}],(n=[{key:"format",value:function(e,t){m.indexOf(e)>-1?t?this.domNode.setAttribute(e,t):this.domNode.removeAttribute(e):gi(Si(a.prototype),"format",this).call(this,e,t)}}])&&bi(t.prototype,n),o&&bi(t,o),a}(t);return y.blotName="video",y.className="ql-video",y.tagName="DIV",{ResizeModule:function t(r){var n=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Pi(this,t),ji(this,"initializeModules",(function(){n.removeModules(),n.modules=n.moduleClasses.map((function(e){return new(d[e]||e)(n)})),n.modules.forEach((function(e){e.onCreate()})),n.onUpdate()})),ji(this,"onUpdate",(function(){n.repositionElements(),n.modules.forEach((function(e){e.onUpdate()}))})),ji(this,"removeModules",(function(){n.modules.forEach((function(e){e.onDestroy()})),n.modules=[]})),ji(this,"handleClick",(function(e){if(e.target&&e.target.tagName&&"IMG"===e.target.tagName.toUpperCase()||e.target&&e.target.tagName&&"DIV"===e.target.tagName.toUpperCase()&&"ms-quill-iframe"===e.target.getAttribute("class")){if(n.domNode===e.target)return;n.domNode&&n.hide(),n.show(e.target)}else n.domNode&&n.hide()})),ji(this,"show",(function(e){n.domNode=e,n.showOverlay(),n.initializeModules()})),ji(this,"showOverlay",(function(){n.overlay&&n.hideOverlay(),n.quill.setSelection(null),n.setUserSelect("none"),document.addEventListener("keyup",n.checkImage,!0),n.quill.root.addEventListener("input",n.checkImage,!0);var e=n.quill.root.parentNode.querySelector(".ql-editor");if(e&&(e.style.overflow="hidden"),n.overlay=document.createElement("div"),Object.assign(n.overlay.style,n.options.overlayStyles),n.domNode&&"ms-quill-iframe"===n.domNode.getAttribute("class")){n.input=document.createElement("input"),n.input.style.position="absolute",n.input.style.left="8px",n.input.style.top="16px",n.input.style.width="calc(100% - 16px)";var t=n.domNode.parentNode&&n.domNode.parentNode.children&&n.domNode.parentNode.children[0]&&n.domNode.parentNode.children[0].getAttribute("src")||"";n.input.setAttribute("value",t),n.overlay.appendChild(n.input),n.overlay.style.backgroundColor="rgba(0, 0, 0, 0.2)"}n.quill.root.parentNode.appendChild(n.overlay),n.repositionElements()})),ji(this,"hideOverlay",(function(){if(n.overlay){n.input&&(n.domNode.parentNode&&n.domNode.parentNode.children&&n.domNode.parentNode.children[0]&&n.domNode.parentNode.children[0]&&n.domNode.parentNode.children[0].setAttribute("src",n.input.value),n.overlay.removeChild(n.input),n.input=void 0);var e=n.quill.root.parentNode.querySelector(".ql-editor");e&&(e.style.overflow="auto"),n.quill.root.parentNode.removeChild(n.overlay),n.overlay=void 0,document.removeEventListener("keyup",n.checkImage),n.quill.root.removeEventListener("input",n.checkImage),n.setUserSelect("")}})),ji(this,"repositionElements",(function(){if(n.overlay&&n.domNode){var e=n.quill.root.parentNode,t="IMG"===n.domNode.tagName.toUpperCase()?n.domNode.getBoundingClientRect():n.domNode.parentNode.parentNode.getBoundingClientRect(),r=e.getBoundingClientRect();Object.assign(n.overlay.style,{left:"".concat(t.left-r.left-1+e.scrollLeft,"px"),top:"".concat(t.top-r.top+e.scrollTop,"px"),width:"".concat(t.width,"px"),height:"".concat(t.height,"px")})}})),ji(this,"hide",(function(){n.hideOverlay(),n.removeModules(),n.domNode=void 0})),ji(this,"setUserSelect",(function(e){["userSelect","mozUserSelect","webkitUserSelect","msUserSelect"].forEach((function(t){n.quill.root.style[t]=e,document.documentElement.style[t]=e}))})),ji(this,"checkImage",(function(t){n.domNode&&n.input!==t.target&&(46!==t.keyCode&&8!==t.keyCode||"IMG"!==n.domNode.tagName.toUpperCase()||e.find(n.domNode).deleteAt(0),n.hide())})),this.quill=r;var i=!1;if(o.modules&&(i=o.modules.slice()),this.options=fi()({},o,c),!1!==i&&(this.options.modules=i),this.quill.theme&&this.quill.theme.modules&&this.quill.theme.modules.toolbar&&this.quill.theme.modules.toolbar.container&&this.options.iframeIcon){var a=this.quill.theme.modules.toolbar.container.querySelector(".ql-video");a&&(a.innerHTML='<svg viewbox="0 1022 18 18"><g transform="translate(0,0) scale(3.5)"><path d="m 0.20913578,292.52935 -0.0448461,0.0228 c -0.0522035,0.0266 -0.10514577,0.0764 -0.12730166,0.11985 -0.03898753,0.0764 -0.03689917898,-0.0334 -0.036985428654,1.94049 -5.91591201e-5,1.35972 0.00218847865,1.849 0.00864824865,1.87539 0.02503373,0.10227 0.09520806,0.17792 0.19668092,0.21203 0.0202072,0.007 0.54764317,0.009 2.18732434,0.008 l 2.1606966,-0.001 0.044846,-0.0228 c 0.079823,-0.0406 0.1345603,-0.10935 0.1556385,-0.19546 0.00646,-0.0264 0.00872,-0.51567 0.00866,-1.87539 -7.44e-5,-1.97386 0.002,-1.86407 -0.036985,-1.94049 -0.022155,-0.0434 -0.075113,-0.0933 -0.1273161,-0.11985 l -0.044846,-0.0228 H 2.381244 Z m 0.0798849,0.757 H 2.381244 4.4734673 v 1.57107 1.57107 H 2.381244 0.28902068 v -1.57107 z m 2.34957572,0.33607 c -0.028878,0 -0.055626,0.007 -0.080256,0.0204 -0.024631,0.0136 -0.045009,0.0323 -0.061147,0.056 -0.016138,0.0238 -0.025064,0.0501 -0.026762,0.079 -0.032275,0.14948 -0.1758133,0.82556 -0.4306147,2.02822 -0.00679,0.017 -0.010194,0.0348 -0.010194,0.0535 0,0.0306 0.00764,0.0586 0.022928,0.0841 0.015288,0.0255 0.035682,0.0459 0.061162,0.0612 0.025481,0.0153 0.053499,0.0229 0.084076,0.0229 0.022083,0 0.043319,-0.004 0.063703,-0.0127 0.020385,-0.008 0.038221,-0.0204 0.053509,-0.0357 0.015288,-0.0153 0.027184,-0.0331 0.035678,-0.0535 0.00849,-0.0204 0.013592,-0.0416 0.01529,-0.0637 l 0.4255178,-2.00274 c 0.00849,-0.0221 0.013592,-0.045 0.015291,-0.0688 0,-0.0459 -0.016566,-0.0854 -0.04969,-0.11847 -0.033125,-0.0331 -0.072626,-0.0497 -0.1184901,-0.0497 z m -0.1025608,0.30066 c 0.00234,0.002 0.00489,0.003 0.00701,0.005 0.00425,0.003 0.00892,0.006 0.014013,0.008 -0.0051,-0.002 -0.010194,-0.004 -0.01529,-0.008 -0.0017,-0.002 -0.00361,-0.003 -0.00574,-0.005 z m -0.7892346,0.20894 c -0.022083,0 -0.048417,0.008 -0.078993,0.0255 l -0.050968,0.0382 c -0.3295431,0.2599 -0.5461142,0.43063 -0.64973332,0.51217 -0.0441656,0.0187 -0.0764407,0.0514 -0.0968248,0.0981 -0.0203841,0.0467 -0.0246402,0.0947 -0.0127495,0.14398 0.0118908,0.0493 0.038225,0.0858 0.0789933,0.10956 0.057755,0.0408 0.13887122,0.10235 0.24333972,0.18473 0.1044687,0.0824 0.1643489,0.13037 0.179637,0.14396 0.022083,0.017 0.053501,0.0412 0.094269,0.0726 0.040768,0.0314 0.077299,0.0603 0.1095742,0.0866 0.032275,0.0263 0.06285,0.0514 0.091728,0.0752 0.047563,0.034 0.1006454,0.0412 0.1592497,0.0217 0.058604,-0.0195 0.097249,-0.0565 0.1159341,-0.11084 0.016987,-0.0442 0.015701,-0.0896 -0.00383,-0.13632 -0.018887,-0.0452 -0.049313,-0.0772 -0.091223,-0.0962 l -0.03489,-0.0274 c -0.018685,-0.0136 -0.029739,-0.0221 -0.033137,-0.0255 -0.056056,-0.0408 -0.1375864,-0.10108 -0.2446029,-0.18091 -0.1070166,-0.0798 -0.1843053,-0.13759 -0.2318683,-0.17327 0.030576,-0.0221 0.1108352,-0.082 0.240784,-0.17963 0.1299487,-0.0977 0.2297443,-0.17284 0.29939,-0.2255 0.057755,-0.0238 0.093001,-0.0697 0.1057405,-0.1376 0.01274,-0.0679 -0.00467,-0.12314 -0.052231,-0.16561 -0.035672,-0.0357 -0.078129,-0.0527 -0.1273908,-0.051 -0.0034,-0.002 -0.0068,-0.003 -0.010194,-0.003 z m 1.2689006,0 c -0.0034,0 -0.0068,8.5e-4 -0.010194,0.003 -0.049262,-0.002 -0.091718,0.0153 -0.1273909,0.051 -0.047563,0.0425 -0.064971,0.0977 -0.052231,0.16561 0.01274,0.0679 0.047986,0.11382 0.1057406,0.1376 0.069646,0.0527 0.1694416,0.12782 0.29939,0.2255 0.1299488,0.0977 0.210208,0.15755 0.2407841,0.17963 -0.047563,0.0357 -0.1248516,0.0934 -0.2318683,0.17327 -0.1070167,0.0798 -0.1885466,0.14014 -0.2446028,0.18091 l -0.033137,0.0255 c -0.015288,0.0102 -0.024628,0.017 -0.028025,0.0204 -0.00522,0.004 -0.00795,0.007 -0.00826,0.008 -0.041191,0.019 -0.071164,0.0509 -0.089841,0.0955 -0.019535,0.0467 -0.020806,0.0922 -0.00382,0.13632 0.018685,0.0544 0.05733,0.0913 0.1159342,0.11084 0.058604,0.0195 0.1116868,0.0123 0.1592499,-0.0217 0.028877,-0.0238 0.059453,-0.0488 0.091728,-0.0752 0.032275,-0.0263 0.068806,-0.0552 0.1095742,-0.0866 0.040768,-0.0314 0.072186,-0.0556 0.094269,-0.0726 0.032275,-0.0272 0.076018,-0.0629 0.1312245,-0.10702 0.055207,-0.0442 0.10659,-0.0845 0.1541529,-0.12103 0.047563,-0.0365 0.093434,-0.0701 0.1375999,-0.10064 0.040768,-0.0238 0.067102,-0.0603 0.078993,-0.10956 0.011891,-0.0493 0.00763,-0.0973 -0.012749,-0.14398 -0.020384,-0.0467 -0.052659,-0.0794 -0.096824,-0.0981 -0.07814,-0.0612 -0.2947259,-0.23189 -0.6497489,-0.51217 -0.045864,-0.0408 -0.089179,-0.062 -0.1299468,-0.0637 z m -1.4396219,0.15034 c -0.0017,0.008 -0.00256,0.0178 -0.00256,0.028 v -0.0102 -0.0102 z m 1.6103431,0 0.00254,0.008 v 0.0102 0.0102 c 0,-0.0102 -8.416e-4,-0.0195 -0.00254,-0.028 z m -1.6128989,0.051 0.00256,0.0178 0.00254,0.0179 0.00765,0.0178 0.00764,0.0153 h -0.00254 c -0.0017,-0.003 -0.0034,-0.008 -0.0051,-0.0153 l -0.00256,-0.003 -0.0051,-0.0153 c -0.0017,-0.008 -0.00254,-0.0145 -0.00254,-0.0179 -0.0017,-0.007 -0.00256,-0.0127 -0.00256,-0.0178 z m 1.6154252,2.3e-4 c -2.25e-5,0.005 -8.494e-4,0.0109 -0.00252,0.0176 0,0.003 -8.416e-4,0.009 -0.00254,0.0179 l -0.0051,0.0153 -0.00256,0.003 c -0.0017,0.007 -0.0034,0.0119 -0.0051,0.0153 h -0.00254 l 0.00764,-0.0153 0.00765,-0.0178 0.00254,-0.0179 z m -1.50331,0.1552 c 0.00849,0.003 0.01869,0.007 0.030581,0.0102 -0.00679,-0.002 -0.011036,-0.003 -0.012735,-0.003 -0.0051,-0.002 -0.011052,-0.004 -0.017846,-0.008 z m 1.3912246,0 c -0.00679,0.003 -0.01275,0.006 -0.017846,0.008 -0.0017,0 -0.00594,8.6e-4 -0.012735,0.003 0.011891,-0.003 0.022087,-0.007 0.030581,-0.0102 z m -0.7975265,1.2256 c 0.0051,0.002 0.00934,0.004 0.012734,0.008 -0.0051,-0.003 -0.00934,-0.006 -0.012734,-0.008 z"/></g></svg>')}this.quill.theme&&this.quill.theme.tooltip&&this.quill.theme.tooltip.root&&this.quill.theme.tooltip.root.classList&&this.quill.theme.tooltip.root.classList.add&&this.options.iframeIcon&&this.quill.theme.tooltip.root.classList.add("ms-ql-iframe-tooltip"),document.execCommand("enableObjectResizing",!1,"false"),this.quill.root.addEventListener("click",this.handleClick,!1),this.quill.root.parentNode.style.position=this.quill.root.parentNode.style.position||"relative",this.moduleClasses=this.options.modules,this.modules=[]},IFrame:y,toolbarConfig:{container:[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"],["video"]]},BaseModule:s,Toolbar:f,DisplaySize:u,Resize:p}}(Bi),Gi=zi.ResizeModule,Ui=zi.IFrame,Wi=zi.toolbarConfig;Bi.register({"formats/video":Ui,"modules/resizeModule":Gi});var Vi=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ni(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=_i(n);if(o){var r=_i(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Mi(this,e)});function a(){var e;Di(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Zi(Li(e=i.call.apply(i,[this].concat(r))),"state",{template:" "}),Zi(Li(e),"close",(function(){e.props.onShowEditor(!e.props.showEditor),e.props.onChange("featureInfo",Fi(Fi({},e.props.element&&e.props.element.featureInfo||{}),{},{template:e.state.template}))})),e}return t=a,(r=[{key:"UNSAFE_componentWillMount",value:function(){this.setState({template:this.props.element&&this.props.element.featureInfo&&this.props.element.featureInfo.template||" "})}},{key:"render",value:function(){var e=this,t=this.props,r=t.showEditor,n=t.enableIFrameModule,o=void 0===n||n;return c().createElement(m.Z,null,c().createElement(y.Z,{fade:!0,show:r,title:c().createElement(b.Z,{msgId:"layerProperties.editCustomFormat"}),size:"lg",showFullscreen:!0,clickOutEnabled:!1,onClose:function(){return e.close()},buttons:[{bsStyle:"primary",text:c().createElement(b.Z,{msgId:"close"}),onClick:function(){return e.close()}}]},c().createElement("div",{id:"ms-template-editor",className:"ms-editor"},c().createElement(ui(),{bounds:"#ms-template-editor",ref:function(t){t&&(e.quill=t)},modules:o?{resizeModule:{},toolbar:Wi}:{},defaultValue:this.state.template,onChange:function(t){return e.setState({template:t})}}))))}}])&&Ri(t.prototype,r),a}(c().Component);Zi(Vi,"propTypes",{showEditor:u().bool,element:u().object,onChange:u().func,onShowEditor:u().func,enableIFrameModule:u().bool}),Zi(Vi,"defaultProps",{showEditor:!1,element:{},enableIFrameModule:!1,onChange:function(){},onShowEditor:function(){}});const qi=Vi;var Hi=r(82110),$i=r(12485),Ki=r.n($i),Yi=r(20135),Xi=r.n(Yi),Qi=r(71062),Ji=r.n(Qi),ea=r(73014),ta=r(82030),ra=r(25382),na=r(58857),oa=r(89255);(0,R.setObservableConfig)(na.Z);var ia=r(43143),aa=r(57037),la=r(3918),ca=r.n(la),sa=r(66287);function ua(e){return(ua="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pa(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fa(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function da(e,t){return(da=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ma(e,t){return!t||"object"!==ua(t)&&"function"!=typeof t?ya(e):t}function ya(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ba(e){return(ba=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ga(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var va=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&da(e,t)}(l,e);var t,n,o,i,a=(o=l,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ba(o);if(i){var r=ba(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return ma(this,e)});function l(){var e;pa(this,l);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return ga(ya(e=a.call.apply(a,[this].concat(n))),"paint",(function(t){t.save(),t.beginPath();var r=e.props.shapeStyle,n=r.color,o=r.fill;switch(t.fillStyle=o?uo()(o)?o:"rgba(".concat(o.r,", ").concat(o.g,", ").concat(o.b,", ").concat(o.a,")"):null,t.strokeStyle=n?uo()(n)?n:"rgba(".concat(n.r,", ").concat(n.g,", ").concat(n.b,", ").concat(n.a,")"):null,t.lineWidth=e.props.shapeStyle.width||e.props.shapeStyle.weight,e.props.shapeStyle.dashArray&&e.props.shapeStyle.dashArray.length&&t.setLineDash(e.props.shapeStyle.dashArray),e.props.geomType){case"Polygon":e.paintPolygon(t);break;case"Polyline":e.paintPolyline(t);break;case"Point":e.paintPoint(t,e.props.shapeStyle.markName);break;case"Circle":e.paintPoint(t,"circle");break;case"Marker":e.paintMarker(t);break;case"Text":e.paintText(t);break;case"Symbol":e.paintSymbol(t);break;default:return}t.restore()})),ga(ya(e),"drawSymbol",(function(t,n){n.clearRect(0,0,600,600);var o=new Image,i=new Image;i.src=r(18845),o.src=t||e.props.shapeStyle.symbolUrl,o.onload=function(){try{n.drawImage(o,e.props.width/2-o.width/2,e.props.height/2-o.height/2)}catch(e){return}},o.onerror=function(){i.onload=function(){try{n.drawImage(i,e.props.width/2-i.width/2,e.props.height/2-i.height/2)}catch(e){return}}}})),ga(ya(e),"paintSymbol",(function(t){(0,sa.isSymbolStyle)(e.props.originalStyle)?e.props.originalStyle.symbolUrlCustomized&&e.props.originalStyle.symbolUrl?e.drawSymbol(e.props.originalStyle.symbolUrlCustomized,t):(0,sa.createSvgUrl)(e.props.originalStyle,e.props.originalStyle.symbolUrlCustomized||e.props.originalStyle.symbolUrl).then((function(r){return e.drawSymbol(r,t)})):e.drawSymbol(null,t)})),ga(ya(e),"paintText",(function(t){var r=e.props,n=r.width,o=r.height,i=e.props.shapeStyle,a=i.textAlign,l=void 0===a?"center":a,c=i.label,s=i.font,u=void 0===s?"14px Arial":s;return t.textAlign=l,t.font=u,"start"===l?(t.strokeText(c||"New",n/2.5,o/2),void t.fillText(c||"New",n/2.5,o/2)):"end"===l?(t.strokeText(c||"New",n/1.5,o/2),void t.fillText(c||"New",n/1.5,o/2)):(t.strokeText(c||"New",n/2,o/2),void t.fillText(c||"New",n/2,o/2))})),ga(ya(e),"paintPolygon",(function(e){e.transform(1,0,0,1,-27.5,0),e.moveTo(55,8),e.lineTo(100,8),e.lineTo(117.5,40),e.lineTo(100,72),e.lineTo(55,72),e.lineTo(37.5,40),e.closePath(),e.fill(),e.stroke()})),ga(ya(e),"paintPolyline",(function(e){e.transform(1,0,0,1,0,0),e.moveTo(10,20),e.bezierCurveTo(40,40,70,0,90,20),e.stroke()})),ga(ya(e),"paintPoint",(function(t,r){var n=e.props.shapeStyle.radius,o=n/2;switch(r){case"square":t.rect(50-o,48.5-o,n,n);break;case"circle":t.arc(50,48.5,o,0,2*Math.PI);break;case"triangle":var i=Math.sqrt(3)*n/2/3;t.moveTo(50,48.5-2*i),t.lineTo(50+o,48.5+i),t.lineTo(50-o,48.5+i),t.closePath();break;case"star":e.paintStar(t,50,48.5,5,o,o/2);break;case"cross":e.paintCross(t,50,48.5,n,.23);break;case"x":t.translate(50,48.5),t.rotate(45*Math.PI/180),t.translate(-50,-48.5),e.paintCross(t,50,48.5,n,.23);break;default:t.arc(50,48.5,n,0,2*Math.PI)}t.fill(),t.stroke()})),ga(ya(e),"paintMarker",(function(e){var t=new Image;t.src=ca();try{e.drawImage(t,42.5,24)}catch(e){return}})),ga(ya(e),"paintStar",(function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5,o=arguments.length>4?arguments[4]:void 0,i=arguments.length>5?arguments[5]:void 0,a=Math.PI/2*3,l=t,c=r,s=Math.PI/n;e.moveTo(t,r-o);for(var u=0;u<n;u++)l=t+Math.cos(a)*o,c=r+Math.sin(a)*o,e.lineTo(l,c),a+=s,l=t+Math.cos(a)*i,c=r+Math.sin(a)*i,e.lineTo(l,c),a+=s;e.lineTo(t,r-o),e.closePath()})),ga(ya(e),"paintCross",(function(e,t,r,n,o){var i=n*o/2,a=n/2;e.moveTo(t-i,r-a),e.lineTo(t+i,r-a),e.lineTo(t+i,r-i),e.lineTo(t+a,r-i),e.lineTo(t+a,r+i),e.lineTo(t+i,r+i),e.lineTo(t+i,r+a),e.lineTo(t-i,r+a),e.lineTo(t-i,r+i),e.lineTo(t-a,r+i),e.lineTo(t-a,r-i),e.lineTo(t-i,r-i),e.closePath()})),e}return t=l,(n=[{key:"componentDidMount",value:function(){var e=this.refs.styleCanvas.getContext("2d");e.clearRect(0,0,this.props.width||500,this.props.height||500),this.paint(e)}},{key:"componentDidUpdate",value:function(){var e=this.refs.styleCanvas.getContext("2d");e.clearRect(0,0,this.props.width||500,this.props.height||500),this.paint(e)}},{key:"render",value:function(){return c().createElement("canvas",{ref:"styleCanvas",style:this.props.style,width:this.props.width,height:this.props.height})}}])&&fa(t.prototype,n),l}(c().Component);ga(va,"propTypes",{originalStyle:u().object,style:u().object,shapeStyle:u().object,geomType:u().oneOf(["Polygon","Polyline","Point","Marker","Text","Symbol","Circle",void 0]),width:u().number,height:u().number}),ga(va,"defaultProps",{originalStyle:{},style:{},shapeStyle:{},geomType:"Polygon",width:100,height:80});const ha=va;function Oa(e){return(Oa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wa(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ea(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Sa(e,t){return(Sa=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Pa(e,t){return!t||"object"!==Oa(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ja(e){return(ja=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ca(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var xa=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Sa(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ja(n);if(o){var r=ja(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Pa(this,e)});function a(){return wa(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"render",value:function(){var e=this;return c().createElement(_r.DropdownList,{data:[{value:"circle",name:(0,ie.S$)(this.context.messages,"markNameSelector.circle")||"Circle"},{value:"square",name:(0,ie.S$)(this.context.messages,"markNameSelector.square")||"Square"},{value:"triangle",name:(0,ie.S$)(this.context.messages,"markNameSelector.triangle")||"Triangle"},{value:"star",name:(0,ie.S$)(this.context.messages,"markNameSelector.star")||"Star"},{value:"cross",name:(0,ie.S$)(this.context.messages,"markNameSelector.cross")||"Cross"},{value:"x",name:(0,ie.S$)(this.context.messages,"markNameSelector.x")||"X"}],valueField:"value",textField:"name",value:this.props.markName,onChange:function(t){return e.props.onChange("markName",t.value)}})}}])&&Ea(t.prototype,r),a}(c().Component);Ca(xa,"propTypes",{markName:u().string,onChange:u().func}),Ca(xa,"contextTypes",{messages:u().object}),Ca(xa,"defaultProps",{markName:"circle",onChange:function(){}});const Ta=xa;var ka=r(37674),Ia=r.n(ka);function Aa(e){return(Aa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fa(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Da(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ra(e,t){return(Ra=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Na(e,t){return!t||"object"!==Aa(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ma(e){return(Ma=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function La(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Ia()();var _a=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ra(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ma(n);if(o){var r=Ma(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Na(this,e)});function a(){return Fa(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"render",value:function(){var e=this;return c().createElement(g.Grid,{fluid:!0},c().createElement(g.Row,null,c().createElement(g.Col,{xs:4,style:{padding:0}},c().createElement(ha,{style:{padding:0,margin:"auto",display:"block"},height:97,shapeStyle:this.props.shapeStyle,geomType:this.props.shapeStyle.marker?"Marker":"Point"})),c().createElement(g.Col,{xs:7},this.props.showMarker?c().createElement(g.Row,null,c().createElement(g.Col,{xs:1},c().createElement("input",{"aria-label":"...",type:"checkbox",defaultChecked:this.props.shapeStyle.marker,onChange:function(t){e.props.setStyleParameter("marker",t.target.checked)}})),c().createElement(g.Col,{style:{paddingLeft:0,paddingTop:1},xs:4},c().createElement("label",null,"Marker"))):null,this.props.showMarkSelector?c().createElement(g.Row,{style:{marginBottom:4}},c().createElement(g.Col,{style:{paddingTop:7},xs:4},c().createElement("label",null,"Mark")),c().createElement(g.Col,{xs:8,style:{paddingRight:0,paddingLeft:30}},c().createElement(Ta,{onChange:this.props.setStyleParameter,markName:this.props.shapeStyle.markName}))):null,c().createElement(g.Row,null,c().createElement(g.Col,{xs:4},c().createElement(aa.Z,{disabled:this.props.shapeStyle.marker,value:this.props.shapeStyle.color,line:!1,text:"Stroke",onChangeColor:function(t){t&&e.props.setStyleParameter("color",t)}})),c().createElement(g.Col,{xs:8,style:{paddingRight:0,paddingLeft:30}},c().createElement(_r.NumberPicker,{disabled:this.props.shapeStyle.marker,min:1,max:15,step:1,value:this.props.shapeStyle.width,onChange:function(t){e.props.shapeStyle.width!==t&&e.props.setStyleParameter("width",t)}}))),c().createElement(g.Row,{style:{marginTop:4}},c().createElement(g.Col,{xs:4},c().createElement(aa.Z,{disabled:this.props.shapeStyle.marker,value:this.props.shapeStyle.fill,line:!1,text:"Fill",onChangeColor:function(t){t&&e.props.setStyleParameter("fill",t)}})),c().createElement(g.Col,{xs:8,style:{paddingRight:0,paddingLeft:30}},c().createElement(_r.NumberPicker,{disabled:this.props.shapeStyle.marker,min:1,max:50,step:1,value:this.props.shapeStyle.radius,onChange:function(t){e.props.shapeStyle.radius!==t&&e.props.setStyleParameter("radius",t)}}))))))}}])&&Da(t.prototype,r),a}(c().Component);La(_a,"propTypes",{shapeStyle:u().object,setStyleParameter:u().func,showMarker:u().bool,showMarkSelector:u().bool}),La(_a,"defaultProps",{shapeStyle:{},showMarker:!0,showMarkSelector:!1,setStyleParameter:function(){}});const Za=_a;function Ba(e){return(Ba="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function za(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ga(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ua(e,t){return(Ua=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Wa(e,t){return!t||"object"!==Ba(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Va(e){return(Va=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function qa(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Ia()();var Ha=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ua(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Va(n);if(o){var r=Va(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Wa(this,e)});function a(){return za(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"render",value:function(){var e=this;return c().createElement(g.Grid,{fluid:!0},c().createElement(g.Row,null,c().createElement(g.Col,{xs:4,style:{padding:0}},c().createElement(ha,{style:{padding:0,margin:"auto",display:"block"},shapeStyle:this.props.shapeStyle,geomType:"Polygon"})),c().createElement(g.Col,{xs:7},c().createElement(g.Row,{style:{marginTop:7}},c().createElement(g.Col,{xs:4},c().createElement(aa.Z,{value:this.props.shapeStyle.color,line:!1,text:"Stroke",onChangeColor:function(t){t&&e.props.setStyleParameter("color",t)}})),c().createElement(g.Col,{xs:8,style:{paddingRight:0,paddingLeft:30}},c().createElement(_r.NumberPicker,{min:1,max:15,step:1,value:this.props.shapeStyle.width,onChange:function(t){t!==e.props.shapeStyle.width&&e.props.setStyleParameter("width",t)}}))),c().createElement(g.Row,{style:{marginTop:4}},c().createElement(g.Col,{xs:6},c().createElement(aa.Z,{value:this.props.shapeStyle.fill,line:!1,text:"Fill",onChangeColor:function(t){t&&e.props.setStyleParameter("fill",t)}}))))))}}])&&Ga(t.prototype,r),a}(c().Component);qa(Ha,"propTypes",{shapeStyle:u().object,setStyleParameter:u().func}),qa(Ha,"defaultProps",{shapeStyle:{},setStyleParameter:function(){}});const $a=Ha;function Ka(e){return(Ka="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ya(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Xa(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Qa(e,t){return(Qa=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ja(e,t){return!t||"object"!==Ka(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function el(e){return(el=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function tl(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Ia()();var rl=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qa(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=el(n);if(o){var r=el(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Ja(this,e)});function a(){return Ya(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"render",value:function(){var e=this;return c().createElement(g.Grid,{fluid:!0},c().createElement(g.Row,null,c().createElement(g.Col,{xs:4,style:{padding:0}},c().createElement(ha,{style:{padding:0,margin:"auto",display:"block"},shapeStyle:this.props.shapeStyle,geomType:"Polyline",height:40})),c().createElement(g.Col,{xs:7},c().createElement(g.Row,{style:{marginTop:7}},c().createElement(g.Col,{xs:4},c().createElement(aa.Z,{value:this.props.shapeStyle.color,line:!1,text:"Stroke",onChangeColor:function(t){t&&e.props.setStyleParameter("color",t)}})),c().createElement(g.Col,{xs:8,style:{paddingRight:0,paddingLeft:30}},c().createElement(_r.NumberPicker,{onChange:function(t){e.props.setStyleParameter("width",t)},min:1,max:15,step:1,value:this.props.shapeStyle.width}))))))}}])&&Xa(t.prototype,r),a}(c().Component);tl(rl,"propTypes",{shapeStyle:u().object,setStyleParameter:u().func}),tl(rl,"defaultProps",{shapeStyle:{},setStyleParameter:function(){}});const nl=rl;var ol=r(38848);function il(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function al(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?il(Object(r),!0).forEach((function(t){ll(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):il(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ll(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var cl=(0,R.compose)((0,R.withProps)((function(e){var t=e.style,r=void 0===t?{}:t,n=e.styleName,o=r.fillColor,i=r.fillOpacity,a=r.color,l=r.opacity,c=r.shapeStyle,s=r.weight,u=r.radius;return{shapeStyle:al(al({},c),{},{marker:"marker"===n,radius:u,width:s,fill:(0,ia.qq)(o,i),color:(0,ia.qq)(a,l)})}})),(0,R.withHandlers)({setStyleParameter:function(e){var t=e.onChange,r=void 0===t?function(){}:t,n=e.style,o=void 0===n?{}:n;return function(e,t){switch(e){case"fill":var n=t.r,i=t.g,a=t.b,l=t.a;r("style",al(al({},o),{},{fillColor:"rgb(".concat(n,", ").concat(i,", ").concat(a,")"),fillOpacity:l}));break;case"color":var c=t.r,s=t.g,u=t.b,p=t.a;r("style",al(al({},o),{},{color:"rgb(".concat(c,", ").concat(s,", ").concat(u,")"),opacity:p}));break;case"width":r("style",al(al({},o),{},{weight:t}));break;case"marker":r("styleName",t?"marker":void 0);break;default:r("style",al(al({},o),{},ll({},e,t)))}}}})),sl={Polygon:cl($a),MultiPolygon:cl($a),GeometryCollection:cl($a),LineString:cl(nl),MultiLineString:cl(nl),MultiPoint:cl(Za),Point:cl(Za)},ul=(0,R.branch)((function(e){var t=e.element;return"wfs"===(void 0===t?{}:t).type}),(0,R.mapPropsStream)((function(e){return e.combineLatest(e.map((function(e){return{layer:e.element}})).let(ra.Z).map((function(e){var t=e.error,r=e.loading,n=e.describeFeatureType;return{error:t,loading:r,geometryType:!t&&!r&&n&&(0,ol.mI)(n)}})),(function(e,t){var r=t.geometryType,n=t.error,o=t.loading;return al(al({},e),{},{geometryType:r,error:n,loading:o})}))})),(0,R.withProps)((function(e){var t=e.element;return{geometryType:t&&t.features&&t.features[0].geometry&&t.features[0].geometry.type}})));const pl=(0,R.compose)(ul,(0,ea.Z)(),(0,ta.Z)((function(e){return!e.geometryType})))((function(e){var t=e.geometryType,r=e.element,n=void 0===r?{}:r,o=e.onChange,i=void 0===o?function(){}:o,a=sl[t];return c().createElement(c().Fragment,null,c().createElement("h4",null,"    ",c().createElement(b.Z,{msgId:"layerProperties.style"})),c().createElement(a,{styleName:n.styleName,style:n.style,onChange:i}))}));var fl=r(60604),dl=r(6724),ml=r(32425),yl=r(38064),bl=r(93451),gl=r(69235);function vl(){return(vl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function hl(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}const Ol=function(e){var t=e.type,r=e.patterns,n=e.paths,o=e.texts,i=e.backgroundColor,a=void 0===i?"#ffffff":i;return c().createElement("svg",{viewBox:"0 0 200 200"},c().createElement("defs",null,r&&r.filter((function(e){return e.icon})).map((function(e){return c().createElement("pattern",{id:e.id,viewBox:"0 0 1 1",width:"15%",height:"15%"},e.icon&&c().createElement("path",e.icon))})),r&&r.filter((function(e){return e.image})).map((function(e){return c().createElement("pattern",{id:e.id,width:"100%",height:"100%"},e.image&&c().createElement("image",e.image))}))),c().createElement("path",{fill:a,d:"M0 0 L200 0 L200 200 L0 200Z"}),n&&n.map((function(e){var r=e.type,n=hl(e,["type"]);return"polygon"===(r||t)&&c().createElement("path",vl({},n,{d:"M20 20 L180 20 L180 180 L20 180Z"}))||"linestring"===(r||t)&&c().createElement("path",vl({},n,{fill:"none",d:"M30 160 L100 40 L170 160"}))||"point"===(r||t)&&c().createElement("path",n)})),o&&o.map((function(e){var t=e.text,r=hl(e,["text"]);return c().createElement("text",vl({x:"100",y:"100",textAnchor:"middle",alignmentBaseline:"middle"},r),t)})))};function wl(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function El(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?wl(Object(r),!0).forEach((function(t){Sl(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wl(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Sl(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Pl=(0,bl.Z)("filterPlaceholder")(gl.Z),jl=(0,$e.Z)(g.Glyphicon),Cl=(0,ta.Z)((function(e){return 0===e.items.length}),{title:c().createElement(b.Z,{msgId:"styleeditor.filterMatchNotFound"}),glyph:"1-stilo"})(yl.Z);var xl=r(15402);const Tl=function(e){var t=e.disabled,r=e.selected,n=e.title,o=e.preview,i=e.previewSrc,a=e.onClick,l=void 0===a?function(){}:a;return c().createElement("div",{className:"ms-square-card".concat(r?" ms-selected":"").concat(t?" ms-disabled":""),onClick:t?null:function(){return l()}},(o||i)&&c().createElement("div",{className:"ms-preview"},o||i&&c().createElement("img",{src:i})),c().createElement("small",null,n))};function kl(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Il(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?kl(Object(r),!0).forEach((function(t){Al(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kl(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Al(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Fl=(0,bl.Z)("filterPlaceholder")(gl.Z),Dl=(0,bl.Z)("placeholder")(g.FormControl),Rl=(0,ta.Z)((function(e){return 0===e.items.length}),{title:c().createElement(b.Z,{msgId:"styleeditor.filterMatchNotFound"}),glyph:"1-stilo"})(yl.Z),Nl=function(e){var t=e.title,r=e._abstract,n=/^[a-zA-Z0-9\s]*$/,o=t&&null!==t.match(n);return o&&!r||o&&r&&null!==r.match(n)};function Ml(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Ll=r(93222),_l=r(99009),Zl=r(1469),Bl=r.n(Zl),zl=r(78795),Gl=r(8954),Ul=(r(76752),r(32095),r(64020),r(43657),r(71707),r(29589),r(4631)),Wl=r.n(Ul),Vl=r(23279),ql=r.n(Vl),Hl=r(66654),$l=r.n(Hl),Kl=r(23560),Yl=r.n(Kl),Xl=r(77905),Ql=r(2576);function Jl(e){return(Jl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ec(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function tc(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ec(Object(r),!0).forEach((function(t){uc(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ec(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function rc(e){return function(e){if(Array.isArray(e))return nc(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return nc(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?nc(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nc(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function oc(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ic(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ac(e,t){return(ac=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function lc(e,t){return!t||"object"!==Jl(t)&&"function"!=typeof t?cc(e):t}function cc(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function sc(e){return(sc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function uc(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r(40021).Z(Wl()),r(95246).Z(Wl());var pc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ac(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=sc(n);if(o){var r=sc(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return lc(this,e)});function a(){var e;oc(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return uc(cc(e=i.call.apply(i,[this].concat(r))),"state",{}),uc(cc(e),"onRenderToken",(function(t){var r=t.lineCount();e.inlineWidgets&&e.inlineWidgets.forEach((function(e){e&&e.parentNode&&e.parentNode.removeChild&&e.parentNode.removeChild(e)})),e.inlineWidgets=[],t.doc.iter(0,r,(function(r){var n=r.lineNo();t.getLineTokens(n).forEach((function(r){e.inlineWidgets=e.props.inlineWidgets.reduce((function(o,i){var a=i.type,l=i.style,c=void 0===l?{}:l,s=i.active,u=void 0===s?function(){return!1}:s,p=i.className,f=void 0===p?"":p;if(u(r)){var d=e.getInlineWidget({className:f,token:r,onClick:function(){return e.setState({inlineWidgetType:a,token:r,lineNo:n})},style:Yl()(c)&&c(r)||c});return t.addWidget({line:n,ch:r.start-1},d,!1),[].concat(rc(o),[d])}return rc(o)}),rc(e.inlineWidgets))}))}))})),uc(cc(e),"onAutocomplete",(function(t){if(!(t&&t.state&&t.state.completionActive)){var r=t.getCursor(),n=t.getTokenAt(r);if(n.string&&($l()(n.string,"-")||n.string.match(/^[.`\w@]\w*$/))&&n.string.length>0){var o=e.editor&&e.editor.getWrapperElement&&e.editor.getWrapperElement()||null;Wl().commands.autocomplete(t,null,{completeSingle:!1,container:o})}}})),uc(cc(e),"onUpdate",(function(){e.update.cancel(),e.update()})),uc(cc(e),"getInlineWidget",(function(e){var t=e.onClick,r=void 0===t?function(){}:t,n=e.token,o=void 0===n?{}:n,i=e.className,a=void 0===i?"":i,l=e.style,c=void 0===l?{}:l,s=document.createElement("div");return s.setAttribute("class","".concat(a," ms-style-editor-inline-widget")),le()(s.style,c),s.onclick=function(){return r(tc({},o))},s})),e}return t=a,(r=[{key:"UNSAFE_componentWillMount",value:function(){this.setState({code:this.props.code})}},{key:"UNSAFE_componentWillUpdate",value:function(e){if(!Nr()(this.props.error,e.error)&&(this.marker&&(this.marker.clear(),this.marker=null),e.error)){var t=this.editor.lineCount(),r={line:e.error.line-1||0,ch:0},n=e.error.line?{line:t,ch:0}:this.editor.getCursor();this.marker=this.editor.markText(r,n,{className:"ms-style-editor-error"})}}},{key:"render",value:function(){var e=this;return c().createElement(Vr.Z,{className:"ms-style-editor",style:this.props.style,header:c().createElement("div",{className:"ms-style-editor-head"},this.props.loading&&c().createElement(ml.Z,{className:"ms-style-editor-loader",size:20}),this.props.error&&c().createElement(Ql.Z,{glyph:"exclamation-mark",bsStyle:"danger",placement:"right",title:c().createElement(b.Z,{msgId:"styleeditor.validationErrorTitle"}),text:this.props.error.line?this.props.error.message:c().createElement(b.Z,{msgId:"styleeditor.genericValidationError"})}))},c().createElement(Xl.Controlled,{key:"style-editor",value:this.state.code,editorDidMount:function(t){e.onRenderToken(t),e.editor=t,t.on("inputRead",e.onAutocomplete),e.update=ql()((function(){e.props.onChange(e.state.code)}),e.props.waitTime),Wl().extendMode(e.props.mode,{hintProperties:e.props.hintProperties})},editorWillUnmount:function(t){return t.off("inputRead",e.onAutocomplete)},onBeforeChange:function(t,r,n){return e.setState({code:n})},onChange:function(t){e.onRenderToken(t),e.onUpdate()},options:{theme:this.props.theme,mode:this.props.mode,lineNumbers:!0,styleSelectedText:!0,indentUnit:2,tabSize:2}}),this.state.token&&c().createElement("div",{className:"ms-inline-widget-container"},c().createElement("div",null,c().createElement("button",{className:"btn close square-button",onClick:function(){e.state.value&&e.editor.replaceRange(e.state.value,{line:e.state.lineNo,ch:e.state.token.start},{line:e.state.lineNo,ch:e.state.token.end}),e.setState({token:null,inlineWidgetType:null,lineNo:null,value:null})}})),c().createElement("div",null,this.props.inlineWidgets.filter((function(t){return t.type===e.state.inlineWidgetType})).map((function(t){var r=t.Widget;return c().createElement(r,{value:e.state.value,token:e.state.token,onChange:function(t){return e.setState({value:t})}})})))))}}])&&ic(t.prototype,r),a}(c().Component);uc(pc,"propTypes",{mode:u().string,theme:u().string,style:u().object,code:u().string,onChange:u().func,waitTime:u().number,hintProperties:u().object,error:u().object,inlineWidgets:u().array,loading:u().bool}),uc(pc,"defaultProps",{mode:"geocss",theme:"lesser-dark",style:{},code:"",onChange:function(){},waitTime:1e3,hintProperties:{},inlineWidgets:[]});const fc=pc;var dc=r(6557),mc=r.n(dc),yc=r(57557),bc=r.n(yc),gc=r(14293),vc=r.n(gc),hc=r(12961),Oc=r(1036);function wc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ec(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?wc(Object(r),!0).forEach((function(t){Sc(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wc(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Sc(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Pc=function(e){var t=e.ramp,r=e.name,n=e.label,o=1/t.length,i=(t||[]).reduce((function(e,r,n){return"".concat(e,", ").concat(r," ").concat(n/t.length*100,"%, ").concat(r," ").concat(100*(n/t.length+o),"%")}),"linear-gradient(to right");return c().createElement("div",{style:{backgroundImage:"".concat(i,")"),width:"100%",display:"inline-block",verticalAlign:"middle",padding:"0 2px"}},c().createElement("span",{style:{color:"#000000",backgroundColor:"rgba(255, 255, 255, 0.75)",padding:"0 4px"}},c().createElement(b.Z,{msgId:n||r,msgParams:{number:t.length}})))};function jc(e){var t=e.value,r=e.samples,n=e.onChange,o=e.items,i=e.rampFunction,a=e.disabled,l=o.map((function(e){var t=e.options,n=void 0===t?{}:t,o=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["options"]);return Ec(Ec({},o),{},{options:n,ramp:i?i(o,n):((0,ia.qH)(n.base,n.range,r+1,n.options)||["#AAA"]).splice(1)})})),s=ye()(l,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e===t||e.name===(t&&t.name)}));return c().createElement(Hr.ZP,{valueKey:"name",className:"color-ramp-selector",clearable:!1,value:s,options:l,disabled:a,valueRenderer:Pc,optionRenderer:Pc,onChange:function(e){e&&n(e)}})}jc.propTypes={value:u().oneOfType([u().string,u().object]),samples:u().number,onChange:u().func,items:u().array,rampFunction:u().func,disabled:u().bool},jc.defaultProps={samples:5,onChange:function(){},items:[{name:"global.colors.blue",schema:"sequencial",options:{base:190,range:20}},{name:"global.colors.red",schema:"sequencial",options:{base:10,range:4}},{name:"global.colors.green",schema:"sequencial",options:{base:120,range:4}},{name:"global.colors.brown",schema:"sequencial",options:{base:30,range:4,s:1,v:.5}},{name:"global.colors.purple",schema:"sequencial",options:{base:300,range:4}},{name:"global.colors.random",schema:"qualitative",options:{base:190,range:340,options:{base:10,range:360,s:.67,v:.67}}}],disabled:!1};const Cc=jc;var xc=r(98611),Tc=r.n(xc);function kc(e){return(kc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ic(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ac(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Fc(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Dc(e,t){return(Dc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Rc(e,t){return!t||"object"!==kc(t)&&"function"!=typeof t?Nc(e):t}function Nc(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Mc(e){return(Mc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Lc(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var _c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Dc(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Mc(n);if(o){var r=Mc(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Rc(this,e)});function a(){var e;Ac(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Lc(Nc(e=i.call.apply(i,[this].concat(r))),"styleRenderer",(function(t,r,n){var o=e.props.styleRendererPattern||c().createElement("svg",{style:{height:33,width:"100%"},viewBox:"0 0 300 25"},c().createElement("path",{stroke:"#333333",strokeWidth:e.props.defaultStrokeWidth,strokeDasharray:n||t.value,d:"M0 12.5, 300 12.5"}));return c().createElement("div",{style:{display:"flex",alignItems:"center",width:"100%",paddingRight:25}},o)})),e}return t=a,(r=[{key:"render",value:function(){var e,t=this,r=Tc()(this.props.dashArray||"1 0"," "),n=this.props.options.find((function(e){return e.value===r}))?this.props.options:[{value:r}].concat(function(e){if(Array.isArray(e))return Ic(e)}(e=this.props.options)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Ic(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ic(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=this.props.creatable?Hr.ZP.Creatable:Hr.ZP;return c().createElement(o,{options:n,disabled:this.props.disabled,menuPlacement:this.props.menuPlacement,clearable:this.props.clearable,optionRenderer:this.props.optionRenderer||this.styleRenderer,valueRenderer:this.props.valueRenderer||this.styleRenderer,value:r,isValidNewOption:this.props.isValidNewOption,onChange:function(e){if(e){var r=e.value.split(" ");t.props.onChange(r)}}})}}])&&Fc(t.prototype,r),a}(c().Component);Lc(_c,"propTypes",{dashArray:u().array,menuPlacement:u().string,clearable:u().bool,value:u().string,optionRenderer:u().func,styleRendererPattern:u().node,valueRenderer:u().func,disabled:u().bool,onChange:u().func,options:u().array,creatable:u().bool,isValidNewOption:u().func,defaultStrokeWidth:u().number}),Lc(_c,"defaultProps",{dashArray:["1","0"],menuPlacement:"top",clearable:!1,onChange:function(){},options:[{value:"1 0"},{value:"10 50 30"},{value:"6 6"},{value:"20 20"},{value:"30 30"}],defaultStrokeWidth:4});const Zc=_c;function Bc(e){return(Bc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zc(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Gc(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Uc(e,t){return(Uc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Wc(e,t){return!t||"object"!==Bc(t)&&"function"!=typeof t?Vc(e):t}function Vc(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qc(e){return(qc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Hc(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Ia()();var $c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Uc(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=qc(n);if(o){var r=qc(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Wc(this,e)});function a(){var e;zc(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Hc(Vc(e=i.call.apply(i,[this].concat(r))),"renderClasses",(function(){return e.props.classification.map((function(t,r){return c().createElement(g.FormGroup,{key:r},c().createElement(hc.Z,{key:t.color,color:t.color,disableAlpha:!0,format:"hex",onChangeColor:function(t){return e.updateColor(r,t)}}),c().createElement(_r.NumberPicker,{format:"- ###.###",value:t.min,onChange:function(t){return e.updateMin(r,t)}}),c().createElement(_r.NumberPicker,{format:"- ###.###",value:t.max,precision:3,onChange:function(t){return e.updateMax(r,t)}}))}))})),Hc(Vc(e),"updateColor",(function(t,r){if(r){var n=e.props.classification.map((function(e,n){return n===t?le()({},e,{color:r}):e}));e.props.onUpdateClasses(n,"color")}})),Hc(Vc(e),"updateMin",(function(t,r){if(!isNaN(r)){var n=e.props.classification.map((function(e,n){return n===t?le()({},e,{min:r}):n===t-1?le()({},e,{max:r}):e}));e.props.onUpdateClasses(n,"interval")}})),Hc(Vc(e),"updateMax",(function(t,r){if(!isNaN(r)){var n=e.props.classification.map((function(e,n){return n===t?le()({},e,{max:r}):n===t+1?le()({},e,{min:r}):e}));e.props.onUpdateClasses(n,"interval")}})),e}return t=a,(r=[{key:"render",value:function(){return c().createElement("div",{className:"thema-classes-editor "+this.props.className},this.renderClasses())}}])&&Gc(t.prototype,r),a}(c().Component);Hc($c,"propTypes",{classification:u().array,onUpdateClasses:u().func,className:u().string}),Hc($c,"defaultProps",{classification:[],onUpdateClasses:function(){},className:""});const Kc=$c,Yc=function(e){var t=e.children,r=e.label,n=e.tools,o=e.divider,i=e.invalid,a=e.warning,l=e.disabled;if(o)return c().createElement("div",{className:"ms-symbolizer-field-divider"});var s=a?" ms-symbolizer-value-warning":"",u=i?" ms-symbolizer-value-invalid":"",p=l?" ms-symbolizer-value-disabled":"";return c().createElement("div",{className:"ms-symbolizer-field"},c().createElement("div",{className:"ms-symbolizer-label"},c().createElement(b.Z,{msgId:r})),c().createElement("div",{className:"ms-symbolizer-value"+u+p+s,onDragStart:function(e){e.stopPropagation(),e.preventDefault()},draggable:!0},t,c().createElement("div",{className:"ms-symbolizer-tools"},n)))};var Xc=r(64386),Qc=r.n(Xc);function Jc(){return(Jc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function es(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ts(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?es(Object(r),!0).forEach((function(t){rs(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):es(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function rs(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ns(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=r){var n,o,i=[],a=!0,l=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return os(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?os(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function os(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function is(e){var t=e.containerNode,r=void 0===t?function(){return document.querySelector("."+((0,Ar.u8)("themePrefix")||"ms2")+" > div")||document.body}:t,n=e.placement,o=e.content,i=e.children,a=e.open,s=e.onOpen,u=void 0===s?function(){}:s,p=10,f=Yl()(r)?r():r,d=(0,l.useRef)({picker:{opacity:0},arrow:{opacity:0},overlay:{}}),m=ns((0,l.useState)(d.current),2),y=m[0],b=m[1],g=(0,l.useRef)(),v=(0,l.useRef)(),h=(0,l.useRef)(),O=(0,l.useCallback)((function(){var e,t,r,o,i,l;if(!a)return d.current;var c={picker:{},overlay:{backgroundColor:"rgba(0, 0, 0, 0.4)"},arrow:{opacity:0}};if("center"===n)return c;var s=null==g||null===(e=g.current)||void 0===e||null===(t=e.getBoundingClientRect)||void 0===t?void 0:t.call(e),u=null==v||null===(r=v.current)||void 0===r||null===(o=r.getBoundingClientRect)||void 0===o?void 0:o.call(r),f=null==h||null===(i=h.current)||void 0===i||null===(l=i.getBoundingClientRect)||void 0===l?void 0:l.call(i);if(s&&u&&f){var m,y,b,O,w=f.width,E=f.height,S=u.top,P=u.left,j=u.width,C=u.height,x=s.top,T=s.left,k=s.width,I=s.height,A=[T+k/2,x+I/2],F=A[0]-P>w/2+p&&P+j-A[0]>w/2+p,D=A[1]-S>E/2+p&&S+C-A[1]>E/2+p,R={top:{filter:function(){return F&&x-S>E+p},styles:function(){return{picker:{position:"absolute",top:x-E-p-S,left:T+k/2-w/2-P},overlay:{},arrow:{top:x+2,left:T+k/2,transform:"translate(-50%, -50%) rotateZ(270deg) translateX(50%)"}}}},right:{filter:function(){return D&&P+j-(T+k)>w+p},styles:function(){return{picker:{position:"absolute",top:x-E/2-S,left:T+k+p-P},overlay:{},arrow:{top:x+I/2,left:T+k-2,transform:"translate(-50%, -50%) rotateZ(0deg) translateX(50%)"}}}},bottom:{filter:function(){return F&&S+C-(x+I)>E+p},styles:function(){return{picker:{position:"absolute",top:x+I+p-S,left:T+k/2-w/2-P},overlay:{},arrow:{top:x+I-2,left:T+k/2,transform:"translate(-50%, -50%) rotateZ(90deg) translateX(50%)"}}}},left:{filter:function(){return D&&T-P>w+p},styles:function(){return{picker:{position:"absolute",top:x-E/2-S,left:T-w-p-P},overlay:{},arrow:{top:x+I/2,left:T+2,transform:"translate(-50%, -50%) rotateZ(180deg) translateX(50%)"}}}}};if(null!=R&&null!==(m=R[n])&&void 0!==m&&null!==(y=m.filter)&&void 0!==y&&y.call(m))return null==R||null===(b=R[n])||void 0===b||null===(O=b.styles)||void 0===O?void 0:O.call(b);if("top"!==n&&R.top.filter())return R.top.styles();if("right"!==n&&R.right.filter())return R.right.styles();if("bottom"!==n&&R.bottom.filter())return R.bottom.styles();if("left"!==n&&R.left.filter())return R.left.styles()}return c}),[n,a]);(0,l.useEffect)((function(){b(O());var e=function(){return b(O())};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[O]);var w=(0,l.useRef)();return w.current={open:a},(0,l.useEffect)((function(){function e(e){var t=h.current,r=t&&e.target&&t.contains(e.target);if(w.current.open&&!r){var n,o,i=e.clientX,a=e.clientY,l=(null==h||null===(n=h.current)||void 0===n||null===(o=n.getBoundingClientRect)||void 0===o?void 0:o.call(n))||{},c=l.left,s=l.top,p=l.width,f=l.height;void 0!==i&&void 0!==a&&!(i>=c&&i<=c+p&&a>=s&&a<=s+f)&&u(!1)}}return window.addEventListener("click",e,!0),window.addEventListener("wheel",e,!0),window.addEventListener("scroll",e,!0),function(){window.removeEventListener("click",e,!0),window.removeEventListener("wheel",e,!0),window.removeEventListener("scroll",e,!0)}}),[]),c().createElement(c().Fragment,null,c().createElement("div",{className:"ms-popover",ref:g},(0,l.cloneElement)(i,{onClick:function(e){e.stopPropagation(),u(!a)}})),f&&a?(0,Xc.createPortal)(c().createElement("div",{className:"ms-popover-overlay",ref:v,style:ts({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",top:0,left:0,pointerEvents:"none"},null==y?void 0:y.overlay)},c().createElement("div",{style:{position:"absolute",width:"100%",height:"100%",top:0,left:0}}),c().createElement("div",{ref:h,style:ts({pointerEvents:"auto"},null==y?void 0:y.picker)},o),c().createElement("div",{className:"ms-popover-arrow",style:ts({position:"absolute",borderTop:"".concat(9,"px solid transparent"),borderBottom:"".concat(9,"px solid transparent"),borderRight:"".concat(9,"px solid #ffffff"),filter:"drop-shadow(-4px 2px 4px rgba(0, 0, 0, 0.2))"},null==y?void 0:y.arrow)})),f):null)}const as=function(e){var t=e.open,r=e.onOpen,n=void 0===r?function(){}:r,o=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["open","onOpen"]),i=ns((0,l.useState)(t),2),a=i[0],s=i[1];return c().createElement(is,Jc({},o,{open:a,onOpen:function(e){s(e),n(e)}}))},ls=[{value:"Circle",label:"styleeditor.circle",preview:{type:"point",paths:[{d:"M 160,100 A 60,60 0 0 1 100,160 60,60 0 0 1 40,100 60,60 0 0 1 100,40 60,60 0 0 1 160,100 Z",stroke:"#f2f2f2",fill:"#333333",strokeWidth:4}]}},{value:"Square",label:"styleeditor.square",preview:{type:"point",paths:[{d:"M40 40 L160 40 L160 160 L40 160Z",stroke:"#f2f2f2",fill:"#333333",strokeWidth:4}]}},{value:"Triangle",label:"styleeditor.triangle",preview:{type:"point",paths:[{d:"M 160,151.96151 H 40 L 99.999999,48.038488 Z",stroke:"#f2f2f2",fill:"#333333",strokeWidth:4}]}},{value:"Star",label:"styleeditor.star",preview:{type:"point",paths:[{d:"M 165.07677,84.40286 131.87672,116.49613 139.49277,162.03972 98.710865,140.38195 57.749838,161.699 65.745291,116.22048 32.813927,83.851564 78.537289,77.40206 99.145626,36.079922 119.40876,77.572419 Z",stroke:"#f2f2f2",fill:"#333333",strokeWidth:4}]}},{value:"Cross",label:"styleeditor.cross",preview:{type:"point",paths:[{d:"M 84.99987,39.999998 V 84.999868 H 39.999999 V 115.00013 H 84.99987 V 160 H 115.00013 V 115.00013 H 160 V 84.999868 H 115.00013 V 39.999998 Z",stroke:"#f2f2f2",fill:"#333333",strokeWidth:4}]}},{value:"X",label:"styleeditor.x",preview:{type:"point",paths:[{d:"M 131.81971,46.966899 100,78.786612 68.180288,46.966898 46.966899,68.180287 78.786613,100 46.9669,131.81971 68.180287,153.0331 100,121.21339 131.81971,153.0331 153.0331,131.81971 121.21339,99.999999 153.0331,68.180286 Z",stroke:"#f2f2f2",fill:"#333333",strokeWidth:4}]}},{value:"shape://vertline",label:"styleeditor.verticalLine",preview:{type:"point",paths:[{d:"M 100,40 V 160 Z",stroke:"#333333",strokeWidth:4,fill:"none"}]}},{value:"shape://horline",label:"styleeditor.horizontalLine",preview:{type:"point",paths:[{d:"M 160,100 40.000002,100 Z",stroke:"#333333",strokeWidth:4,fill:"none"}]}},{value:"shape://slash",label:"styleeditor.slash",preview:{type:"point",paths:[{d:"M 142.42641,57.573591 57.573595,142.4264 Z",stroke:"#333333",strokeWidth:4,fill:"none"}]}},{value:"shape://backslash",label:"styleeditor.backslash",preview:{type:"point",paths:[{d:"M 142.42641,142.42641 57.573595,57.573594 Z",stroke:"#333333",strokeWidth:4,fill:"none"}]}},{value:"shape://dot",label:"styleeditor.dot",preview:{type:"point",paths:[{d:"M 95,100 105,100 Z",stroke:"#333333",strokeWidth:10,fill:"none"}]}},{value:"shape://plus",label:"styleeditor.plus",preview:{type:"point",paths:[{d:"M 100,40 V 160 Z",stroke:"#333333",strokeWidth:4,fill:"none"},{d:"M 160,100 40.000002,100 Z",stroke:"#333333",strokeWidth:4,fill:"none"}]}},{value:"shape://times",label:"styleeditor.times",preview:{type:"point",paths:[{d:"M 142.42641,57.573591 57.573595,142.4264 Z",stroke:"#333333",strokeWidth:4,fill:"none"},{d:"M 142.42641,142.42641 57.573595,57.573594 Z",stroke:"#333333",strokeWidth:4,fill:"none"}]}},{value:"shape://oarrow",label:"styleeditor.openArrow",preview:{type:"point",paths:[{d:"M 40.027335,53.266123 159.77305,100 40.027335,146.73388",stroke:"#333333",strokeWidth:4,fill:"none"}]}},{value:"shape://carrow",label:"styleeditor.closedArrow",preview:{type:"point",paths:[{d:"M 40.027335,53.266123 159.77305,100 40.027335,146.73388Z",stroke:"#333333",strokeWidth:4,fill:"none"}]}}];var cs=(0,$e.Z)(Je.Z);const ss=function(e){var t=e.value,r=e.config,n=void 0===r?{}:r,o=e.onChange,i=void 0===o?function(){}:o,a=n.options,l=void 0===a?ls:a,s=l.find((function(e){return e.value===t}));return c().createElement(as,{content:c().createElement("div",{className:"ms-mark-list"},c().createElement("ul",null,l.map((function(e){return c().createElement("li",{key:e.value},c().createElement(cs,{className:"ms-mark-preview",active:e.value===t,onClick:function(){return i(e.value)}},c().createElement(Ol,e.preview)))}))))},c().createElement(cs,{className:"ms-mark-preview"},s&&c().createElement(Ol,s.preview)))},us=function(e){var t=e.label,r=void 0===t?"styleeditor.band":t,n=e.value,o=e.bands,i=e.onChange,a=e.enhancementType;return c().createElement(c().Fragment,null,c().createElement(Yc,{label:r},c().createElement(Hr.ZP,{clearable:!1,options:o,value:n,onChange:function(e){return i("band",e.value)}})),c().createElement(Yc,{label:"styleeditor.contrastEnhancement"},c().createElement(Hr.ZP,{clearable:!1,options:[{label:c().createElement(b.Z,{msgId:"styleeditor.none"}),value:"none"},{label:c().createElement(b.Z,{msgId:"styleeditor.normalize"}),value:"normalize"},{label:c().createElement(b.Z,{msgId:"styleeditor.histogram"}),value:"histogram"}],value:a||"none",onChange:function(e){var t="none"===e.value?void 0:e.value;i("enhancementType",t)}})))};function ps(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function fs(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ps(Object(r),!0).forEach((function(t){ds(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ps(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ds(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ms(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ys(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=r){var n,o,i=[],a=!0,l=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return bs(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?bs(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bs(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function gs(){return(gs=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var vs,hs,Os=(vs="onChange",hs="value",function(e){function t(t){var r,n,o,i=(0,l.useRef)(),a=(n=(0,l.useState)(t.value),o=2,function(e){if(Array.isArray(e))return e}(n)||function(e,t){var r=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=r){var n,o,i=[],a=!0,l=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(l)throw o}}return i}}(n,o)||function(e,t){if(e){if("string"==typeof e)return ms(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ms(e,t):void 0}}(n,o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),s=a[0],u=a[1],p=(0,l.useRef)();p.current=s,(0,l.useEffect)((function(){p.current!==t.value&&u(t.value)}),[t.value]),(0,l.useEffect)((function(){return i.current=ql()((function(e){var t=e.newProps,r=e.newValue;t.onChange(r)}),t.debounceTime),function(){i.current.cancel()}}),[t.debounceTime]);var f=fs(fs({},t),{},(ds(r={},hs,s),ds(r,vs,(function(e){u(e),i.current&&(i.current.cancel(),i.current({newProps:t,newValue:e}))})),r));return c().createElement(e,f)}return t.propTypes={debounceTime:u().number},t.defaultProps={debounceTime:300},t.displayName=e.displayName+"WithDebounceOnCallback",t})((0,bl.Z)("placeholder")((function(e){return c().createElement(g.FormControl,gs({},e,{onChange:function(t){return e.onChange(t.target.value)}}))}))),ws=(0,$e.Z)(g.Glyphicon);function Es(e){var t=e.value,r=e.onChange,n=e.onLoad,o=(0,l.useRef)(!0);(0,l.useEffect)((function(){return o.current=!0,function(){o.current=!1}}),[]);var i=ys((0,l.useState)(!1),2),a=i[0],s=i[1],u=ys((0,l.useState)(!0),2),p=u[0],f=u[1],d=ys((0,l.useState)(t),2),m=d[0],y=d[1],b=function(e,t){y(e),s(!0),f(!1),(0,_l.ZF)(e).then((function(t){if(o.current){var r=!1;t.isBase64&&(r={type:"warning",messageId:"imageSrcNotSupportedBase64Image"}),f(r),s(!1),n(r,e)}})).catch((function(t){if(o.current){var r=t.isBase64||"imageSrcLoadError"!==t.messageId?{type:"error",messageId:t.messageId}:{type:"warning",messageId:t.messageId};f(r),s(!1),n(r,e)}})),t&&r(e)},v=(0,l.useRef)(t);return(0,l.useEffect)((function(){b(v.current)}),[]),c().createElement("div",{className:"ms-style-editor-icon-input",style:{position:"relative",display:"flex",alignItems:"center"}},c().createElement(g.FormGroup,{style:{flex:1}},c().createElement(Os,{style:{paddingRight:26},placeholder:"styleeditor.placeholderEnterImageUrl",value:t,debounceTime:300,onChange:function(e){return b(e,!0)}})),c().createElement("div",{style:{position:"absolute",minWidth:26,minHeight:26,right:0,display:"flex",alignItems:"center",justifyContent:"center"}},m&&!p&&!a&&c().createElement("div",{className:"ms-style-editor-icon-input-image",style:{position:"absolute",margin:2,width:"calc(100% - 2px)",height:"calc(100% - 2px)",backgroundImage:"url(".concat(m,")"),backgroundPosition:"center",backgroundSize:"contain"}}),p&&c().createElement(ws,{glyph:"exclamation-sign",tooltipId:"styleeditor.".concat(p.messageId)}),a&&c().createElement(ml.Z,{size:20})))}Es.propTypes={value:u().bool,onChange:u().node,onLoad:u().object,onError:u().object},Es.defaultProps={value:"",onChange:function(){},onLoad:function(){},onError:function(){}};const Ss=Es;function Ps(){return(Ps=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function js(e){return function(e){if(Array.isArray(e))return Ts(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||xs(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Cs(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=r){var n,o,i=[],a=!0,l=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(l)throw o}}return i}}(e,t)||xs(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xs(e,t){if(e){if("string"==typeof e)return Ts(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ts(e,t):void 0}}function Ts(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ks(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function Is(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function As(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Is(Object(r),!0).forEach((function(t){Fs(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Is(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Fs(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ds=(0,bl.Z)("placeholder")(g.FormControl),Rs=(0,bl.Z)(["placeholder","noResultsText"])(Hr.ZP),Ns=(0,bl.Z)(["placeholder","noResultsText"])(Hr.ZP.Creatable),Ms={color:function(e){var t=e.label,r=e.config,n=void 0===r?{}:r,o=e.value,i=e.onChange,a=void 0===i?function(){}:i,s=e.disableAlpha,u=(0,l.useRef)({value:o});if(u.current={value:o},"pattern"==(pe()(o)&&o.kind?"pattern":"solid")){var p=((null==n?void 0:n.getGroupParams(o.kind))||{}).params,f=void 0===p?{}:p,d=(null==n?void 0:n.getGroupConfig(o.kind))||{},m=o;return c().createElement(c().Fragment,null,c().createElement(Ls,{properties:m,params:d.omittedKeys?bc()(f,d.omittedKeys):f,config:{disableAlpha:d.disableAlpha},onChange:function(e){return a(As(As({},u.current.value),e))}}),c().createElement(Yc,{divider:!0}))}return c().createElement(Yc,{label:t},c().createElement(hc.Z,{color:o,line:n.stroke,disableAlpha:n.disableAlpha||s,onChangeColor:function(e){return e&&a(e)}}))},slider:function(e){var t=e.label,r=e.value,n=e.disabled,o=e.config,i=void 0===o?{}:o,a=e.onChange,l=void 0===a?function(){}:a;return c().createElement(Yc,{label:t,disabled:n},c().createElement("div",{className:"mapstore-slider with-tooltip",onClick:function(e){e.stopPropagation()}},c().createElement(Oc.Z,{start:[r],disabled:n,tooltips:[!0],format:i.format,range:i.range||{min:0,max:10},onChange:function(e){return l(e)}})))},input:function(e){var t=e.label,r=e.value,n=e.config,o=void 0===n?{}:n,i=e.onChange,a=void 0===i?function(){}:i;return c().createElement(Yc,{label:t},c().createElement(g.FormGroup,null,c().createElement(Ds,{type:o.type||"text",value:r,placeholder:"styleeditor.placeholderInput",onChange:function(e){return a(e.target.value)}})))},toolbar:function(e){var t=e.label,r=e.value,n=e.onChange,o=void 0===n?function(){}:n,i=e.config,a=void 0===i?{}:i,l=e.disabled;return c().createElement(Yc,{label:t,disabled:l},c().createElement(qr.Z,{btnDefaultProps:{className:"no-border",bsSize:"xs"},buttons:(a.options||[]).map((function(e){var t=e.glyph,n=e.label,i=e.labelId,a=e.tooltipId,s=e.value;return{glyph:t,tooltipId:a,disabled:l,text:i?c().createElement(b.Z,{msgId:i}):n,active:s===r,onClick:function(){return o(r===s?void 0:s)}}}))}))},mark:function(e){var t=e.label,r=ks(e,["label"]);return c().createElement(Yc,{label:t},c().createElement(ss,r))},image:function(e){var t=e.label,r=e.value;!function(e){if(null==e)throw new TypeError("Cannot destructure undefined")}(e.config);var n=e.onChange,o=Cs((0,l.useState)(!1),2),i=o[0],a=o[1],s=pe()(r)?r.src:r;return c().createElement(Yc,{label:t,invalid:!("error"!==(null==i?void 0:i.type)),warning:!("warning"!==(null==i?void 0:i.type))},c().createElement(Ss,{label:t,value:s,onChange:function(e){n(e),a(!1)},onLoad:function(e,t){a(e),"error"===e.type&&n({src:t,errorId:e.messageId})}}))},select:function(e){var t=e.label,r=e.value,n=e.config,o=n.getOptions,i=void 0===o?function(){return[]}:o,a=n.selectProps,s=void 0===a?{}:a,u=n.isValid,p=e.onChange,f=ks(e,["label","value","config","onChange"]),d=s.creatable,m=s.clearable,y=void 0!==m&&m,g=s.multi;function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,r=e.map((function(e){return e.value})),n=(null==t?void 0:t.value)&&-1===r.indexOf(t.value);return n?[t].concat(js(e)):e}function h(e){return r?[{value:r,label:r}].reduce(v,e):e}var O=i(f),w=Cs((0,l.useState)(h(O)),2),E=w[0],S=w[1];(0,l.useEffect)((function(){S(h(O))}),[null==O?void 0:O.length]);var P=d?Ns:Rs,j=!u||u({value:r});return c().createElement(Yc,{label:t,invalid:!j},c().createElement(P,Ps({clearable:y,placeholder:"styleeditor.selectPlaceholder",noResultsText:"styleeditor.noResultsSelectInput"},s,{options:E.map((function(e){return As(As({},e),{},{label:e.labelId?c().createElement(b.Z,{msgId:e.labelId}):e.label})})),value:r,onChange:function(e){return g?p(e.length>0?e.map((function(e){return e.value})):void 0):(S(v(E,e)),p(e.value))}})))},colorRamp:function(e){var t=e.label,r=e.value,n=e.config,o=n.samples,i=void 0===o?5:o,a=n.getOptions,l=void 0===a?function(){return[]}:a,s=n.rampFunction,u=void 0===s?function(e){return e.colors}:s,p=e.onChange,f=l(ks(e,["label","value","config","onChange"]));return c().createElement(Yc,{label:t},c().createElement(Cc,{items:f,rampFunction:u,samples:i,value:{name:r},onChange:function(e){return p(e.name)}}))},colorMap:function(e){var t=e.value,r=e.onChange;return c().createElement("div",{onDragStart:function(e){e.stopPropagation(),e.preventDefault()},draggable:!0},c().createElement(Kc,{classification:t,onUpdateClasses:function(e,t){return r({classification:e,type:t})}}))},channel:function(e){var t,r,n,o=e.value,i=e.onChange,a=e.bands,l=o.channelSelection,s=l?l.grayChannel?"gray":"rgb":"auto",u=(a||[]).map((function(e){return{label:e,value:e}}));if("rgb"===s)return Object.keys(l).map((function(e){var t,r,n=null===(t=l[e])||void 0===t?void 0:t.sourceChannelName,a=null===(r=l[e])||void 0===r?void 0:r.contrastEnhancement;return c().createElement(c().Fragment,null,c().createElement(us,{key:e,value:n,bands:u,label:"styleeditor."+e,enhancementType:(null==a?void 0:a.enhancementType)||"none",onChange:function(t,r){return"band"===t?i({contrastEnhancement:{},channelSelection:As(As({},o.channelSelection),{},Fs({},e,As(As({},o.channelSelection[e]),{},{sourceChannelName:r})))}):"enhancementType"===t?i({contrastEnhancement:{},channelSelection:As(As({},o.channelSelection),{},Fs({},e,As(As({},o.channelSelection[e]),{},{contrastEnhancement:As(As({},l[e].contrastEnhancement),{},{enhancementType:r})})))}):null}}),c().createElement(Yc,{key:e+"-divider",divider:!0}))}));var p=void 0===(null==l||null===(t=l.grayChannel)||void 0===t?void 0:t.sourceChannelName)?"auto":null==l||null===(r=l.grayChannel)||void 0===r?void 0:r.sourceChannelName,f="auto"===s?o.contrastEnhancement:null==l||null===(n=l.grayChannel)||void 0===n?void 0:n.contrastEnhancement;return c().createElement(us,{label:"styleeditor.grayChannel",value:p,bands:[{label:c().createElement(b.Z,{msgId:"styleeditor.channelAuto"}),value:"auto"}].concat(js(u)),enhancementType:(null==f?void 0:f.enhancementType)||"none",onChange:function(e,t){return"band"===e?i("auto"===t?As(As({},o),{},{channelSelection:void 0}):{contrastEnhancement:{},channelSelection:{grayChannel:As(As({contrastEnhancement:{}},null==l?void 0:l.grayChannel),{},{sourceChannelName:t})}}):"enhancementType"===e?i("auto"===s?{channelSelection:void 0,contrastEnhancement:As(As({},o.contrastEnhancement),{},{enhancementType:t})}:{contrastEnhancement:{},channelSelection:Object.keys(l).reduce((function(e,r){return As(As({},e),{},Fs({},r,As(As({},l[r]),{},{contrastEnhancement:As(As({},l[r].contrastEnhancement),{},{enhancementType:t})})))}),{})}):null}})},dash:function(e){var t=e.label,r=e.value,n=e.onChange,o=e.config.options;return c().createElement(Yc,{label:t},c().createElement(Zc,{dashArray:r,onChange:n,options:o,defaultStrokeWidth:2,isValidNewOption:function(e){return!!e.label&&!e.label.split(" ").find((function(e){return Kr()(parseFloat(e))}))},creatable:!0}))}};function Ls(e){var t=e.properties,r=e.params,n=e.config,o=e.onChange,i=(0,l.useRef)({properties:t});return i.current={properties:t},c().createElement(c().Fragment,null,Object.keys(r).map((function(e){var a=r[e]||{},l=a.type,s=a.setValue,u=a.getValue,p=a.isDisabled,f=a.config,d=a.label,m=a.key||e,y=Ms[l],b=s&&s(t[m],i.current.properties);return y&&c().createElement(y,Ps({},n,{key:m,label:d||m,config:f,disabled:p&&p(t[m],i.current.properties),value:vc()(b)?t[m]:b,onChange:function(e){return o(u&&u(e,i.current.properties)||e)}}))})))}const _s=Ls;function Zs(e){return(Zs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Bs(){return(Bs=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function zs(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Gs(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Us(e,t){return(Us=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ws(e,t){return!t||"object"!==Zs(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Vs(e){return(Vs=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function qs(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Hs=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Us(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Vs(n);if(o){var r=Vs(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Ws(this,e)});function a(){return zs(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"render",value:function(){var e=this,t=le()({},{borderColor:"#dedede"},this.props.style);this.props.fieldException&&(t=le()({},t,{borderColor:"#FF0000"}));var r=this.props.multivalue?_r.Multiselect:_r.DropdownList,n=null!==this.props.valueField&&null!==this.props.textField?c().createElement(r,Bs({},this.props.options,{busy:this.props.busy,disabled:this.props.disabled,itemComponent:this.props.itemComponent,valueField:this.props.valueField,textField:this.props.textField,data:this.props.fieldOptions,value:this.props.fieldValue,caseSensitive:!1,minLength:3,placeholder:this.props.placeholder,messages:{open:(0,ie.S$)(this.context.messages,"queryform.comboField.drop_down")},filter:this.props.comboFilter,style:t,groupBy:this.props.groupBy,onSelect:this.props.onSelect,onChange:function(t){return e.props.onUpdateField(e.props.fieldRowId,e.props.fieldName,e.props.multivalue?t:t[e.props.valueField],e.props.attType)},onToggle:this.props.onToggle,onSearch:this.props.onSearch})):c().createElement(r,Bs({},this.props.options,{busy:this.props.busy,disabled:this.props.disabled,itemComponent:this.props.itemComponent,data:this.props.fieldOptions,value:this.props.fieldValue,caseSensitive:!1,minLength:3,placeholder:this.props.placeholder,messages:{open:(0,ie.S$)(this.context.messages,"queryform.comboField.drop_down")},filter:this.props.comboFilter,style:t,groupBy:this.props.groupBy,onSelect:this.props.onSelect,onChange:function(t){return e.props.onUpdateField(e.props.fieldRowId,e.props.fieldName,t,e.props.attType)},onToggle:this.props.onToggle,onSearch:this.props.onSearch}));return this.props.fieldException?c().createElement(Xe.Z,{placement:"bottom",overlay:c().createElement(g.Tooltip,{id:this.props.fieldRowId+"_tooltip"},c().createElement("strong",null,this.props.fieldException))},n):n}}])&&Gs(t.prototype,r),a}(c().Component);qs(Hs,"propTypes",{busy:u().bool,style:u().object,valueField:u().string,textField:u().string,placeholder:u().object,itemComponent:u().oneOfType([u().object,u().func]),fieldOptions:u().array,fieldName:u().string,fieldRowId:u().number,attType:u().string,fieldValue:u().oneOfType([u().number,u().string,u().array]),fieldException:u().oneOfType([u().object,u().string]),comboFilter:u().oneOfType([u().bool,u().string,u().func]),groupBy:u().oneOfType([u().string,u().func]),multivalue:u().bool,disabled:u().bool,options:u().object,onSelect:u().func,onToggle:u().func,onSearch:u().func,onUpdateField:u().func,onClick:u().func,onUpdateExceptionField:u().func}),qs(Hs,"contextTypes",{messages:u().object}),qs(Hs,"defaultProps",{options:{},busy:!1,style:{width:"100%"},placeholder:c().createElement(b.Z,{msgId:"queryform.comboField.default_placeholder"}),multivalue:!1,disabled:!1,valueField:null,textField:null,fieldOptions:[],fieldName:null,itemComponent:null,fieldRowId:null,fieldValue:null,fieldException:null,comboFilter:!1,groupBy:function(){},onSelect:function(){},onToggle:function(){},onSearch:function(){},onUpdateField:function(){},onUpdateExceptionField:function(){}});const $s=Hs;function Ks(e){return(Ks="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ys(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Xs(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Qs(e,t){return(Qs=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Js(e,t){return!t||"object"!==Ks(t)&&"function"!=typeof t?eu(e):t}function eu(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tu(e){return(tu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ru(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var nu=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qs(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=tu(n);if(o){var r=tu(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Js(this,e)});function a(){var e;Ys(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return ru(eu(e=i.call.apply(i,[this].concat(r))),"renderOperatorField",(function(){return c().createElement($s,{fieldOptions:e.props.operatorOptions,fieldName:"operator",fieldRowId:e.props.filterField.rowId,fieldValue:e.props.filterField.operator,onUpdateField:e.updateFieldElement})})),ru(eu(e),"renderValueField",(function(t){return c().cloneElement(c().Children.toArray(e.props.children).filter((function(e){return e.props.attType===t.type}))[0],le()({fieldName:"value",fieldRowId:e.props.filterField.rowId,fieldValue:e.props.filterField.value,fieldException:e.props.filterField.exception,onUpdateField:e.updateFieldElement,toggleMenu:e.props.toggleMenu,maxFeaturesWPS:e.props.maxFeaturesWPS,onUpdateExceptionField:e.updateExceptionFieldElement},t.fieldOptions||{}))})),ru(eu(e),"updateExceptionFieldElement",(function(t,r){e.props.onUpdateExceptionField(t,r)})),ru(eu(e),"updateFieldElement",(function(t,r,n,o,i){var a;if("attribute"===r?(a=e.props.attributes.filter((function(e){return e.attribute===n}))[0],e.props.onUpdateField(t,r,n,a&&a.type||o,i)):e.props.onUpdateField(t,r,n,"boolean"===o?"string":o,i),"value"===r){var l=e.props.attributes.filter((function(t){return t.dependson&&t.dependson.field===e.props.filterField.attribute}));l.length>0&&e.props.onChangeCascadingValue(l)}})),e}return t=a,(r=[{key:"render",value:function(){var e=this,t=this.props.attributes.filter((function(t){return t.attribute===e.props.filterField.attribute}))[0];return c().createElement("div",{className:"filter-field-row"},c().createElement("div",{className:"filter-field-attribute"},c().createElement($s,{valueField:"id",textField:"name",fieldOptions:this.props.attributes.map((function(e){return{id:e.attribute,name:e.label}})),placeholder:(0,ie.S$)(this.context.messages,"queryform.attributefilter.combo_placeholder"),fieldValue:this.props.filterField.attribute,attType:t&&t.type,fieldName:"attribute",fieldRowId:this.props.filterField.rowId,onUpdateField:this.updateFieldElement,comboFilter:"contains"})),c().createElement("div",{className:"filter-field-operator"},t?this.renderOperatorField():null),c().createElement("div",{className:"filter-field-value"},t&&this.props.filterField.operator?this.renderValueField(t):null),this.props.deleteButton?c().createElement("div",{className:"filter-field-tools"},this.props.deleteButton):null)}}])&&Xs(t.prototype,r),a}(c().Component);ru(nu,"propTypes",{attributes:u().array,filterField:u().object,operatorOptions:u().array,onUpdateField:u().func,maxFeaturesWPS:u().number,toggleMenu:u().func,deleteButton:u().node,onUpdateExceptionField:u().func,onChangeCascadingValue:u().func}),ru(nu,"contextTypes",{messages:u().object}),ru(nu,"defaultProps",{attributes:[],filterField:null,operatorOptions:["=",">","<",">=","<=","<>","><"],onUpdateField:function(){},toggleMenu:function(){},onUpdateExceptionField:function(){},onChangeCascadingValue:function(){}});const ou=nu;var iu=r(30381),au=r.n(iu),lu=r(78681),cu=r.n(lu),su=r(43146),uu=r(55237);function pu(e){return(pu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fu(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function du(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function mu(e,t){return(mu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function yu(e,t){return!t||"object"!==pu(t)&&"function"!=typeof t?bu(e):t}function bu(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gu(e){return(gu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vu(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}cu()(au());var hu=(0,su.Z)({dateProp:"value",dateTypeProp:"type",setDateProp:"onChange"})(_r.DateTimePicker),Ou=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&mu(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=gu(n);if(o){var r=gu(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return yu(this,e)});function a(){var e;fu(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return vu(bu(e=i.call.apply(i,[this].concat(r))),"updateValueState",(function(t){t.startDate&&t.endDate&&t.startDate>t.endDate?e.props.onUpdateExceptionField(e.props.fieldRowId,"queryform.attributefilter.datefield.wrong_date_range"):e.props.onUpdateExceptionField(e.props.fieldRowId,null),e.props.onUpdateField(e.props.fieldRowId,e.props.fieldName,t,e.props.attType)})),e}return t=a,(r=[{key:"render",value:function(){var e=this,t=this.props.fieldValue&&this.props.fieldValue.startDate||null,r=this.props.fieldValue&&this.props.fieldValue.endDate||null;return"><"===this.props.operator?c().createElement("div",{className:"query-field"},c().createElement("div",{className:"query-field-value"},this.props.showLabels&&c().createElement(b.Z,{msgId:"queryform.from"}),c().createElement(hu,{type:this.props.attType,defaultValue:t,value:t,calendar:this.props.dateEnabled,time:this.props.timeEnabled,format:(0,uu.V$)(this.context.locale,this.props.attType),onChange:function(t){return e.updateValueState({startDate:t,endDate:r})}})),c().createElement("div",{className:"query-field-value"},this.props.showLabels&&c().createElement(b.Z,{msgId:"queryform.to"}),c().createElement(hu,{type:this.props.attType,defaultValue:r,value:r,calendar:this.props.dateEnabled,time:this.props.timeEnabled,format:(0,uu.V$)(this.context.locale,this.props.attType),onChange:function(r){return e.updateValueState({startDate:t,endDate:r})}}))):c().createElement("div",null,this.props.showLabels&&c().createElement(b.Z,{msgId:"queryform.date"}),c().createElement(hu,{type:this.props.attType,defaultValue:t,value:t,time:this.props.timeEnabled,calendar:this.props.dateEnabled,format:(0,uu.V$)(this.context.locale,this.props.attType),onChange:function(t){e.updateValueState({startDate:t,endDate:null})}}))}}])&&du(t.prototype,r),a}(c().Component);vu(Ou,"propTypes",{attType:u().string,dateEnabled:u().bool,fieldName:u().string,fieldRowId:u().number,fieldValue:u().object,fieldException:u().string,operator:u().string,onUpdateField:u().func,onUpdateExceptionField:u().func,showLabels:u().bool,timeEnabled:u().bool}),vu(Ou,"contextTypes",{locale:u().string}),vu(Ou,"defaultProps",{timeEnabled:!1,dateEnabled:!0,operator:null,fieldName:null,fieldRowId:null,attType:null,fieldValue:null,fieldException:null,onUpdateField:function(){},onUpdateExceptionField:function(){},showLabels:!1});const wu=Ou;function Eu(e){return(Eu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Su(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Pu(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Su(Object(r),!0).forEach((function(t){Fu(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Su(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ju(){return(ju=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Cu(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xu(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Tu(e,t){return(Tu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ku(e,t){return!t||"object"!==Eu(t)&&"function"!=typeof t?Iu(e):t}function Iu(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Au(e){return(Au=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Fu(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Ia()();var Du=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Tu(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Au(n);if(o){var r=Au(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return ku(this,e)});function a(){var e;Cu(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Fu(Iu(e=i.call.apply(i,[this].concat(r))),"renderPicker",(function(t){var r=e.props.label?c().createElement("label",null,e.props.label):null,n=e.props.lowLabel?c().createElement("label",null,e.props.lowLabel):null,o=e.props.upLabel?c().createElement("label",null,e.props.upLabel):null;return"><"===e.props.operator?c().createElement("div",{className:"query-field"},c().createElement("div",{className:"query-field-value"},n,c().createElement(_r.NumberPicker,ju({style:t,value:e.props.fieldValue&&null!==e.props.fieldValue.lowBound&&void 0!==e.props.fieldValue.lowBound?e.props.fieldValue.lowBound:null,onChange:function(t){return!isNaN(t)&&e.changeNumber({lowBound:t,upBound:e.props.fieldValue&&null!==e.props.fieldValue.upBound&&void 0!==e.props.fieldValue.upBound?e.props.fieldValue.upBound:null})}},e.props.options))),c().createElement("div",{className:"query-field-value"},o,c().createElement(_r.NumberPicker,ju({style:t,value:e.props.fieldValue&&null!==e.props.fieldValue.upBound&&void 0!==e.props.fieldValue.upBound?e.props.fieldValue.upBound:null,onChange:function(t){return!isNaN(t)&&e.changeNumber({upBound:t,lowBound:e.props.fieldValue&&null!==e.props.fieldValue.lowBound&&void 0!==e.props.fieldValue.lowBound?e.props.fieldValue.lowBound:null})}},e.props.options)))):c().createElement("div",null,r,c().createElement(_r.NumberPicker,ju({style:t,value:e.props.fieldValue&&null!==e.props.fieldValue.lowBound&&void 0!==e.props.fieldValue.lowBound?e.props.fieldValue.lowBound:e.props.fieldValue,onChange:function(t){return!isNaN(t)&&e.changeNumber(t)}},e.props.options)))})),Fu(Iu(e),"changeNumber",(function(t){"><"===e.props.operator?null!==t.lowBound&&void 0!==t.lowBound&&null!==t.upBound&&void 0!==t.upBound&&t.lowBound>=t.upBound?e.props.onUpdateExceptionField(e.props.fieldRowId,(0,ie.S$)(e.context.messages,"queryform.attributefilter.numberfield.wrong_range")):e.props.fieldException&&e.props.onUpdateExceptionField(e.props.fieldRowId,null):e.props.isRequired&&null==t?e.props.onUpdateExceptionField(e.props.fieldRowId,(0,ie.S$)(e.context.messages,"queryform.attributefilter.numberfield.isRequired")):e.props.fieldException&&e.props.onUpdateExceptionField(e.props.fieldRowId,null),e.props.onUpdateField(e.props.fieldRowId,e.props.fieldName,t,e.props.attType)})),e}return t=a,(r=[{key:"render",value:function(){var e=this.props.style;return this.props.fieldException&&(e=Pu(Pu({},this.props.style),{},{borderColor:"#FF0000"})),c().createElement(Xe.Z,{placement:"bottom",overlay:this.props.fieldException?c().createElement(g.Tooltip,{id:this.props.fieldRowId+"_tooltip"},c().createElement("strong",null,this.props.fieldException)):c().createElement("noscript",null)},this.renderPicker(e))}}])&&xu(t.prototype,r),a}(c().Component);Fu(Du,"propTypes",{operator:u().string,fieldName:u().string,fieldRowId:u().number,attType:u().string,fieldValue:u().oneOfType([u().number,u().object]),fieldException:u().oneOfType([u().object,u().bool,u().string]),onUpdateField:u().func,onUpdateExceptionField:u().func,isRequired:u().bool,label:u().string,lowLabel:u().string,upLabel:u().string,options:u().shape({format:u().string,min:u().number,max:u().number,step:u().number,precision:u().number}),style:u().object}),Fu(Du,"contextTypes",{messages:u().object}),Fu(Du,"defaultProps",{style:{borderColor:"#dedede"},operator:"=",fieldName:null,fieldRowId:null,attType:"number",fieldValue:null,fieldException:null,isRequired:!1,label:null,lowLabel:null,upLabel:null,options:{},onUpdateField:function(){},onUpdateExceptionField:function(){}});const Ru=Du;var Nu=r(47805);function Mu(e){return(Mu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Lu(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _u(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Zu(e,t){return(Zu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Bu(e,t){return!t||"object"!==Mu(t)&&"function"!=typeof t?zu(e):t}function zu(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Gu(e){return(Gu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Uu(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Wu=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Zu(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Gu(n);if(o){var r=Gu(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Bu(this,e)});function a(){var e;Lu(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Uu(zu(e=i.call.apply(i,[this].concat(r))),"renderField",(function(){var t=(0,ie.S$)(e.context.messages,"queryform.attributefilter.text_placeholder"),r=c().createElement(g.Tooltip,{id:"textField-tooltip"+e.props.fieldRowId},c().createElement(xl.Z,{msgId:"queryform.attributefilter.tooltipTextField"})),n=c().createElement(g.FormControl,{disabled:"isNull"===e.props.operator,placeholder:t,onChange:e.changeText,type:"text",value:e.props.fieldValue||""});return(0,Nu.isLikeOrIlike)(e.props.operator)?c().createElement(Xe.Z,{key:"textField-overlay"+e.props.fieldRowId,placement:"top",overlay:r},n):n})),Uu(zu(e),"changeText",(function(t){e.props.onUpdateField(e.props.fieldRowId,e.props.fieldName,t.target.value,e.props.attType)})),e}return t=a,(r=[{key:"componentDidMount",value:function(){"isNull"!==this.props.operator||this.props.fieldValue||this.props.onUpdateField(this.props.fieldRowId,this.props.fieldName," ",this.props.attType)}},{key:"componentDidUpdate",value:function(){"isNull"!==this.props.operator||this.props.fieldValue||this.props.onUpdateField(this.props.fieldRowId,this.props.fieldName," ",this.props.attType)}},{key:"render",value:function(){var e=this.props.label?c().createElement("label",null,this.props.label):c().createElement("span",null);return c().createElement("div",{className:"textField"},e,this.renderField())}}])&&_u(t.prototype,r),a}(c().Component);Uu(Wu,"propTypes",{operator:u().string,fieldName:u().string,fieldRowId:u().number,attType:u().string,fieldValue:u().string,label:u().string,fieldException:u().oneOfType([u().object,u().string]),onUpdateField:u().func,onUpdateExceptionField:u().func,style:u().object}),Uu(Wu,"contextTypes",{messages:u().object}),Uu(Wu,"defaultProps",{operator:"like",fieldName:null,fieldRowId:null,attType:"string",fieldValue:null,label:null,fieldException:null,onUpdateField:function(){},onUpdateExceptionField:function(){},style:{}});const Vu=Wu;var qu=r(48384),Hu=r(49902);function $u(e){return($u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ku(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Yu(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Xu(e,t){return(Xu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Qu(e,t){return!t||"object"!==$u(t)&&"function"!=typeof t?Ju(e):t}function Ju(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ep(e){return(ep=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function tp(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var rp=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xu(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ep(n);if(o){var r=ep(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Qu(this,e)});function a(){var e;Ku(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return tp(Ju(e=i.call.apply(i,[this].concat(r))),"getOptions",(function(){return e.props.filterField&&e.props.filterField.options&&e.props.filterField.options[e.props.filterField.attribute]&&e.props.filterField.options[e.props.filterField.attribute].map((function(e){return{value:e,label:e}}))})),tp(Ju(e),"getPagination",(function(t){if(!e.props.filterField.options)return{};var r=Math.ceil(e.props.filterField.fieldOptions.valuesCount/e.props.maxFeaturesWPS),n=1===e.props.filterField.fieldOptions.currentPage||!e.props.filterField.fieldOptions.currentPage,o=e.props.filterField.fieldOptions.currentPage===r||!e.props.filterField.fieldOptions.currentPage;return le()({},e.props.pagination,{paginated:0!==t.length&&!(n&&1===t.length),firstPage:n,lastPage:o,loadPrevPage:function(){return e.props.onUpdateField(e.props.filterField.rowId,"value",e.props.filterField.value,"string",{currentPage:e.props.filterField.fieldOptions.currentPage-1,delayDebounce:0})},loadNextPage:function(){return e.props.onUpdateField(e.props.filterField.rowId,"value",e.props.filterField.value,"string",{currentPage:e.props.filterField.fieldOptions.currentPage+1,delayDebounce:0})}})})),tp(Ju(e),"getTooltip",(function(){return le()({},e.props.tooltip,{enabled:(0,Nu.isLikeOrIlike)(e.props.filterField.operator),id:"autocompleteField-tooltip"+e.props.filterField&&e.props.filterField.rowId,message:c().createElement(xl.Z,{msgId:"queryform.attributefilter.tooltipTextField"}),overlayTriggerKey:"autocompleteField-overlay"+e.props.filterField&&e.props.filterField.rowId,placement:"top"})})),tp(Ju(e),"renderField",(function(){var t;e.props.filterField&&e.props.filterField.value&&"*"!==e.props.filterField.value&&(t={value:e.props.filterField.value,label:e.props.filterField.value});var r=e.getOptions()?e.getOptions().slice(0):[];return c().createElement(Hu.Z,{busy:e.props.filterField.loading,data:e.props.filterField.loading?[]:r,disabled:"isNull"===e.props.filterField.operator,itemComponent:e.props.itemComponent,open:e.props.filterField.openAutocompleteMenu,onChange:function(t){return e.handleChange(t)},onFocus:function(){return e.handleFocus(r)},onSelect:function(){return e.handleSelect()},onToggle:function(){return e.handleToggle(r)},pagination:e.getPagination(r),selectedValue:t&&t.value,tooltip:e.getTooltip()})})),tp(Ju(e),"handleSelect",(function(){e.selected=!0})),tp(Ju(e),"handleChange",(function(t){e.selected?(e.selected=!1,t&&""!==t.value&&e.props.onUpdateField(e.props.filterField.rowId,"value",t.value,"string",{currentPage:1,selected:"selected",delayDebounce:0})):e.props.onUpdateField(e.props.filterField.rowId,"value","string"==typeof t?t:t.value,"string",{currentPage:1,delayDebounce:1e3})})),tp(Ju(e),"handleFocus",(function(t){e.loadWithoutfilter(t)})),tp(Ju(e),"handleToggle",(function(){e.props.toggleMenu(e.props.filterField.rowId,!e.props.filterField.openAutocompleteMenu)})),tp(Ju(e),"loadWithoutfilter",(function(t){0!==t.length||e.props.filterField.value||e.props.onUpdateField(e.props.filterField.rowId,"value","","string",{currentPage:1,delayDebounce:0})})),e}return t=a,(r=[{key:"render",value:function(){var e=this.props.label?c().createElement("label",null,this.props.label):c().createElement("span",null);return c().createElement("div",{className:"autocompleteField"},e,this.renderField())}}])&&Yu(t.prototype,r),a}(c().Component);tp(rp,"propTypes",{disabled:u().bool,filterField:u().object,label:u().string,itemComponent:u().oneOfType([u().object,u().func]),maxFeaturesWPS:u().number,onUpdateField:u().func,pagination:u().object,textField:u().string,tooltip:u().object,toggleMenu:u().func,valueField:u().string}),tp(rp,"contextTypes",{messages:u().object}),tp(rp,"defaultProps",{label:null,onUpdateField:function(){},pagination:{paginated:!0,nextPageIcon:"chevron-right",prevPageIcon:"chevron-left"},itemComponent:qu.Z,toggleMenu:function(){},filterField:{fieldOptions:{}}});const np=rp;var op=r(12346);function ip(e){return(ip="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ap(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lp(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function cp(e,t){return(cp=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function sp(e,t){return!t||"object"!==ip(t)&&"function"!=typeof t?up(e):t}function up(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pp(e){return(pp=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fp(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var dp=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&cp(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=pp(n);if(o){var r=pp(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return sp(this,e)});function a(){var e;ap(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return fp(up(e=i.call.apply(i,[this].concat(r))),"state",{open:!1}),fp(up(e),"getSelected",(function(){return ye()(e.props.options,e.getFindFunciton())})),fp(up(e),"getValue",(function(t){return e.props.valueField&&t&&t[e.props.valueField]?t[e.props.valueField]:t})),fp(up(e),"getLabel",(function(t){return e.props.labelField&&t&&t[e.props.labelField]?t[e.props.labelField]:e.getValue(t)})),fp(up(e),"getFindFunciton",(function(){return e.props.valueField?fp({},e.props.valueField,e.props.value):e.props.value})),fp(up(e),"renderLabel",(function(t){return e.props.labelRenderer?e.props.labelRenderer(t):e.getLabel(t)})),fp(up(e),"handleOutsideClick",(function(t){e.node&&e.node.contains&&!e.node.contains(t.target)&&e.state.open?e.handleClick():document&&!e.node&&e.handleOutsideClick&&document.removeEventListener("click",e.handleOutsideClick,!1)})),fp(up(e),"handleClick",(function(){document&&!e.state.open?document.addEventListener("click",e.handleOutsideClick,!1):document.removeEventListener("click",e.handleOutsideClick,!1);var t=!e.state.open;e.setState({open:t})})),e}return t=a,(r=[{key:"render",value:function(){var e=this;return c().createElement("span",{ref:function(t){e.node=t},className:"mapstore-string-select"},c().createElement("span",{onClick:this.handleClick},c().createElement("strong",null,this.renderLabel(this.getSelected())),c().createElement(g.Glyphicon,{glyph:"chevron-down"})),this.state.open&&c().createElement("div",{className:"m-options"},c().createElement("ul",null,this.props.options.map((function(t,r){return c().createElement("li",{key:r,onClick:function(){e.setState({open:!1}),e.props.onSelect(e.getValue(t),t)}},e.renderLabel(t))})))))}}])&&lp(t.prototype,r),a}(c().Component);fp(dp,"propTypes",{options:u().array,value:u().any,onSelect:u().func,valueField:u().string,labelField:u().string,labelRenderer:u().any}),fp(dp,"defaultProps",{onSelect:function(){},options:[]});const mp=dp;var yp=r(40797);function bp(e){return(bp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gp(e){return function(e){if(Array.isArray(e))return vp(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return vp(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?vp(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vp(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function hp(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Op(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function wp(e,t){return(wp=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ep(e,t){return!t||"object"!==bp(t)&&"function"!=typeof t?Sp(e):t}function Sp(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Pp(e){return(Pp=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function jp(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Cp=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wp(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Pp(n);if(o){var r=Pp(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Ep(this,e)});function a(){var e;hp(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return jp(Sp(e=i.call.apply(i,[this].concat(r))),"getComboValues",(function(t,r){if(t&&t.dependson){var n=e.props.filterFields.filter((function(e){return e.attribute===t.dependson.field}))[0];if(n&&n.value){var o=r.filter((function(e){return e.attribute===n.attribute}))[0],i=o.values.filter((function(e){return e[o.valueId]===n.value}))[0][t.dependson.from],a=t.values.filter((function(e){return e[t.dependson.to]===i}));return t&&"list"===t.type?a.map((function(e){return{id:t.fidPrefix?t.fidPrefix+"."+e[t.valueId]:e[t.valueId],name:e[t.valueLabel]}})):null}}return t&&"list"===t.type?t.values.map((function(e){return{id:t.fidPrefix?t.fidPrefix+"."+e[t.valueId]:e[t.valueId],name:e[t.valueLabel]}})):null})),jp(Sp(e),"getOperator",(function(t){switch(t&&t.type?t.type:""){case"list":return e.props.listOperators;case"string":return e.props.stringOperators;case"boolean":return e.props.booleanOperators;default:return e.props.defaultOperators}})),jp(Sp(e),"renderFilterField",(function(t){var r=e.props.attributes.filter((function(e){return e.attribute===t.attribute}))[0],n=e.getComboValues(r,e.props.attributes),o=t.exception?c().createElement(Xe.Z,{placement:"bottom",overlay:c().createElement(g.Tooltip,{id:t.rowId+"tooltip"},c().createElement("strong",null,c().createElement(yp.ZP.Message,{msgId:t.exception||""})))},c().createElement(Je.Z,{id:"remove-filter-field",className:"filter-buttons no-border",bsStyle:e.props.buttonStyle,style:{backgroundColor:"red"},onClick:function(){return e.props.actions.onRemoveFilterField(t.rowId)}},c().createElement(g.Glyphicon,{style:{color:"white"},glyph:"glyphicon glyphicon-warning-sign"}))):c().createElement(Xe.Z,{placement:"top",overlay:c().createElement(g.Tooltip,{id:t.rowId+"tooltip"},c().createElement("strong",null,c().createElement(yp.ZP.Message,{msgId:"queryform.attributefilter.delete"})))},c().createElement(Je.Z,{id:"remove-filter-field",bsStyle:e.props.buttonStyle,className:"filter-buttons no-border",onClick:function(){return e.props.actions.onRemoveFilterField(t.rowId)}},c().createElement(g.Glyphicon,{glyph:e.props.removeButtonIcon})));return c().createElement(ou,{key:t.rowId,deleteButton:o,attributes:e.props.attributes,filterField:t,operatorOptions:e.getOperator(r),onUpdateField:e.props.actions.onUpdateFilterField,toggleMenu:e.props.actions.toggleMenu,maxFeaturesWPS:e.props.maxFeaturesWPS,onUpdateExceptionField:e.props.actions.onUpdateExceptionField,onChangeCascadingValue:e.props.actions.onChangeCascadingValue},c().createElement($s,{attType:"list",valueField:"id",textField:"name",fieldOptions:n||[],comboFilter:"contains"}),c().createElement(wu,{attType:"date",dateEnabled:!0,operator:t.operator}),c().createElement(wu,{attType:"date-time",timeEnabled:!0,dateEnabled:!0,operator:t.operator}),c().createElement(wu,{attType:"time",timeEnabled:!0,dateEnabled:!1,operator:t.operator}),c().createElement(Ru,{operator:t.operator,attType:"number"}),e.props.autocompleteEnabled?c().createElement(np,{filterField:t,attType:"string"}):c().createElement(Vu,{operator:t.operator,attType:"string"}),c().createElement($s,{fieldOptions:["true","false"],attType:"boolean",comboFilter:"contains"}))})),jp(Sp(e),"renderGroupButtons",(function(t){var r=[];return t.index<=e.props.groupLevels&&r.push({key:"add-condition-group",id:"add-condition-group",className:"filter-buttons no-border",glyph:"list-alt",bsStyle:e.props.buttonStyle,tooltipId:"queryform.attributefilter.add_group",onClick:function(){return e.props.actions.onAddGroupField(t.id,t.index)}}),r.push({key:"add-filter-field",id:"add-filter-field",className:"filter-buttons no-border",glyph:e.props.addButtonIcon,bsStyle:e.props.buttonStyle,tooltipId:"queryform.attributefilter.add_condition",onClick:function(){return e.props.actions.onAddFilterField(t.id)}}),t.groupId&&r.push({key:"remove-group",className:"filter-buttons no-border",bsStyle:e.props.buttonStyle,tooltipId:"queryform.attributefilter.deleteGroup",glyph:e.props.removeGroupButtonIcon,onClick:function(){return e.props.actions.onRemoveGroupField(t.id)}}),c().createElement(qr.Z,{buttons:r,btnDefaultProps:{}})})),jp(Sp(e),"renderGroupHeader",(function(t){return c().createElement("div",{className:"logicHeader filter-logic-header"},c().createElement("div",{key:"filter-logic-header",className:"filter-logic-header-text m-label"},c().createElement("span",{className:"group_label_a"},c().createElement(yp.ZP.Message,{msgId:"queryform.attributefilter.group_label_a"}))," ",c().createElement(mp,{options:e.props.logicComboOptions,valueField:"logic",value:t.logic,onSelect:function(r){return e.props.actions.onUpdateLogicCombo(t.id,r)},labelRenderer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name;return c().createElement(yp.ZP.Message,{msgId:t})}})," ",c().createElement("span",{className:"group_label_b"},c().createElement(yp.ZP.Message,{msgId:"queryform.attributefilter.group_label_b"}))),e.renderGroupButtons(t))})),jp(Sp(e),"renderGroupField",(function(t){var r=e.props.filterFields.filter((function(e){return e.groupId===t.id})),n=e.props.groupFields.filter((function(e){return e.groupId===t.id})),o=[].concat(gp(r),gp(n)).map((function(t){return void 0!==t.rowId?e.renderFilterField(t):e.renderGroupField(t)}));return c().createElement("div",{className:"mapstore-conditions-group",key:t.id},e.renderGroupHeader(t),c().createElement("div",{className:"query-content"},o))})),jp(Sp(e),"renderHeader",(function(){return(0,ie.S$)(e.context.messages,"queryform.attributefilter.attribute_filter_header")})),jp(Sp(e),"updateLogicCombo",(function(t,r,n){var o=e.props.logicComboOptions.filter((function(t){return n===(0,ie.S$)(e.context.messages,t.name)}))[0].logic;e.props.actions.onUpdateLogicCombo(t,o)})),e}return t=a,(r=[{key:"render",value:function(){var e=this;return this.props.withContainer?c().createElement(op.Z,{id:"attributeFilterPanel",className:"query-filter-container",header:this.renderHeader(),collapsible:!0,expanded:this.props.attributePanelExpanded,onSwitch:function(t){return e.props.actions.onExpandAttributeFilterPanel(t)}},this.props.groupFields.filter((function(e){return!e.groupId})).map(this.renderGroupField)):c().createElement("div",{className:"query-filter-container"},this.props.groupFields.filter((function(e){return!e.groupId})).map(this.renderGroupField))}}])&&Op(t.prototype,r),a}(c().Component);jp(Cp,"propTypes",{groupLevels:u().number,withContainer:u().bool,autocompleteEnabled:u().bool,maxFeaturesWPS:u().number,groupFields:u().array,filterFields:u().array,attributes:u().array,fieldWidth:u().string,removeButtonIcon:u().string,addButtonIcon:u().string,removeGroupButtonIcon:u().string,buttonStyle:u().string,logicComboOptions:u().array,attributePanelExpanded:u().bool,actions:u().object,listOperators:u().array,stringOperators:u().array,booleanOperators:u().array,defaultOperators:u().array}),jp(Cp,"contextTypes",{messages:u().object}),jp(Cp,"defaultProps",{autocompleteEnabled:!0,withContainer:!0,groupLevels:1,groupFields:[],filterFields:[],attributes:[],removeButtonIcon:"trash",removeGroupButtonIcon:"trash",bsStyle:"default",addButtonIcon:"glyphicon glyphicon-plus",attributePanelExpanded:!0,logicComboOptions:[{logic:"OR",name:"queryform.attributefilter.groupField.any"},{logic:"AND",name:"queryform.attributefilter.groupField.all"},{logic:"NOR",name:"queryform.attributefilter.groupField.none"}],actions:{onAddGroupField:function(){},onAddFilterField:function(){},onRemoveFilterField:function(){},onUpdateFilterField:function(){},onUpdateExceptionField:function(){},onUpdateLogicCombo:function(){},onRemoveGroupField:function(){},onChangeCascadingValue:function(){},onExpandAttributeFilterPanel:function(){},toggleMenu:function(){}},listOperators:["="],stringOperators:["=","like","ilike","isNull"],booleanOperators:["="],defaultOperators:["=",">","<",">=","<=","<>","><"]});const xp=Cp;function Tp(e){return function(e){if(Array.isArray(e))return kp(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return kp(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?kp(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kp(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ip(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ap(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ip(Object(r),!0).forEach((function(t){Fp(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ip(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Fp(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Dp=(0,$e.Z)(Je.Z),Rp=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Ap(Ap({},t),{},(Fp(e={},r.fieldName,r.fieldValue),Fp(e,"type",r.fieldType),Fp(e,"fieldOptions",Ap(Ap({},t.fieldOptions),{},{currentPage:void 0===r.fieldOptions.currentPage?1:r.fieldOptions.currentPage})),e));return"attribute"===r.fieldName?Ap(Ap({},n),{},{value:"string"===r.fieldType?"":null,operator:""}):"operator"===r.fieldName?Ap(Ap({},n),{},{value:null}):n},Np=function(e){var t=e.filterObj,r=void 0===t?{groupFields:[{id:1,logic:"OR",index:0}]}:t,n=e.attributes,o=void 0===n?[]:n,i=e.groupLevels,a=void 0===i?0:i,l=e.onChange,s=void 0===l?function(){}:l,u=r.groupFields,p=r.filterFields;return c().createElement("div",{className:"ms-style-rule-filter"},c().createElement(xp,{attributes:o,filterFields:p,groupFields:u,autocompleteEnabled:!1,groupLevels:a,withContainer:!1,listOperators:["="],stringOperators:["=","<>","like","isNull"],booleanOperators:["="],defaultOperators:["=",">","<",">=","<=","<>"],logicComboOptions:[{logic:"OR",name:"queryform.attributefilter.groupField.any"},{logic:"AND",name:"queryform.attributefilter.groupField.all"}],actions:{onAddGroupField:function(e,t){var r={id:(new Date).getTime(),logic:"OR",groupId:e,index:t+1};s({filterFields:p,groupFields:u?[].concat(Tp(u),[r]):[r]})},onAddFilterField:function(e){var t={rowId:(new Date).getTime(),groupId:e,attribute:null,operator:"",value:null,type:null,fieldOptions:{valuesCount:0,currentPage:1},exception:null};s({filterFields:p?[].concat(Tp(p),[t]):[t],groupFields:u})},onRemoveFilterField:function(e){s({filterFields:p.filter((function(t){return t.rowId!==e})),groupFields:u})},onUpdateFilterField:function(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};s({filterFields:p.map((function(i){return i.rowId===e?Rp(i,{rowId:e,fieldName:t,fieldValue:r,fieldType:n,fieldOptions:o}):i})),groupFields:u})},onUpdateExceptionField:function(e,t){s({filterFields:p.map((function(r){return r.rowId===e?Ap(Ap({},r),{},{exception:t}):r})),groupFields:u})},onUpdateLogicCombo:function(e,t){s({filterFields:p,groupFields:u.map((function(r){return r.id===e?Ap(Ap({},r),{},{logic:t}):r}))})},onRemoveGroupField:function(e){s({filterFields:p.filter((function(t){return t.groupId!==e})),groupFields:u.filter((function(t){return t.id!==e}))})},onChangeCascadingValue:function(){}}}))};function Mp(e){var t=e.value,r=e.hide,n=e.attributes,o=e.onChange,i=e.placement,a=void 0===i?"right":i;return r||!n||0===n.length?null:c().createElement(as,{placement:a,content:c().createElement(Np,{filterObj:t,attributes:n,onChange:function(e){return o({filter:e})}})},c().createElement(Dp,{className:"square-button-md no-border",active:!!t,tooltipId:"styleeditor.openFilterBuilder"},c().createElement(g.Glyphicon,{glyph:"filter"})))}function Lp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Lp(Object(r),!0).forEach((function(t){Zp(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Lp(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Zp(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Bp(e,t){if(e){if("string"==typeof e)return zp(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?zp(e,t):void 0}}function zp(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Gp=(0,bl.Z)(["placeholder","noResultsText"])(Hr.ZP.Creatable),Up=(0,$e.Z)(Je.Z);function Wp(e){var t=e.label,r=e.currentZoom;return c().createElement("span",null,t,r&&c().createElement(c().Fragment,null," ",c().createElement(g.Glyphicon,{glyph:"arrow-left"})))}function Vp(e){var t=e.label,r=e.value,n=e.options,o=e.isValidNewOption,i=e.onChange;return c().createElement(Yc,{label:t},c().createElement(Gp,{placeholder:"styleeditor.selectScale",noResultsText:"styleeditor.noResultScales",value:r,options:n,optionRenderer:Wp,valueRenderer:Wp,isValidNewOption:function(e){if(e.label){var t=parseFloat(e.label);return!Kr()(t)&&o(t)}return!1},onChange:function(e){var t=(null==e?void 0:e.value)&&parseFloat(e.value);i(Kr()(t)?void 0:t)}}))}function qp(e){var t=e.value,r=e.zoom,n=e.scales,o=void 0===n?[]:n,i=e.onChange;function a(e,t){var r,n=e.map((function(e){return e.value}));return t&&-1===n.indexOf(t)?[{value:t}].concat((r=e,function(e){if(Array.isArray(e))return zp(e)}(r)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||Bp(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())).sort((function(e,t){return e.value>t.value?-1:1})):e}var s,u,p=(s=(0,l.useState)(function(e){var r=e.map((function(e,t){return{value:e,zoom:t}})),n=[t.min,t.max].filter((function(e){return void 0!==e}));return 0===n.length?r:n.reduce(a,r)}(o)),u=2,function(e){if(Array.isArray(e))return e}(s)||function(e,t){var r=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=r){var n,o,i=[],a=!0,l=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(l)throw o}}return i}}(s,u)||Bp(s,u)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),f=p[0],d=p[1];return c().createElement("div",{className:"ms-style-rule-scale"},c().createElement(Vp,{label:"styleeditor.maxScaleDenominator",value:t.max,options:f.map((function(e){return{value:e.value,label:"1 : "+e.value,currentZoom:void 0!==r&&r===e.zoom,disabled:t.min&&e.value<=t.min}})),isValidNewOption:function(e){return e>=t.min},onChange:function(e){i(_p(_p({},t),{},{max:e})),d(a(f,e))}}),c().createElement(Vp,{label:"styleeditor.minScaleDenominator",value:t.min,options:f.map((function(e){return{value:e.value,label:"1 : "+e.value,currentZoom:void 0!==r&&r===e.zoom,disabled:t.max&&e.value>=t.max}})),isValidNewOption:function(e){return e<=t.max},onChange:function(e){i(_p(_p({},t),{},{min:e})),d(a(f,e))}}))}function Hp(e){var t=e.value,r=void 0===t?{}:t,n=e.scales,o=void 0===n?[]:n,i=e.zoom,a=e.hide,l=e.onChange,s=e.placement,u=void 0===s?"right":s;return a?null:c().createElement(as,{placement:u,content:c().createElement(qp,{value:r,zoom:i,scales:o,onChange:function(e){return l({scaleDenominator:e})}})},c().createElement(Up,{className:"square-button-md no-border",tooltipId:"styleeditor.openScaleDenominator",active:void 0!==r.min||void 0!==r.max},c().createElement(g.Glyphicon,{glyph:"1-ruler"})))}function $p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Kp(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$p(Object(r),!0).forEach((function(t){Yp(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$p(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Yp(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Xp=function(e){var t=e.ruleBlock,r=e.symbolizerBlock;return"Raster"!==e.kind?[{value:"Simple",labelId:"styleeditor.simpleStyle",onSelect:function(e){return{ruleId:e.ruleId,name:"",symbolizers:[Kp(Kp({},e.deaultProperties),{},{symbolizerId:Br()()})]}}},{value:"Classification",labelId:"styleeditor.classificationStyle",onSelect:function(e){var r=e.ruleId,n=e.symbolizerKind;return Kp(Kp(Kp({},e.deaultProperties),t.Classification.deaultProperties),{},{ruleId:r,symbolizerKind:n})}},{value:"Mark",labelId:"styleeditor.patternMarkStyle",isVisible:function(e){return!!e.graphicKey},onSelect:function(e){var t=e.ruleId,n=e.deaultProperties,o=e.graphicKey;return{ruleId:t,name:"",symbolizers:[Kp(Kp({},n),{},Yp({symbolizerId:Br()(),fill:void 0},o,Kp({},r.Mark.deaultProperties)))]}}},{value:"Icon",labelId:"styleeditor.patternIconStyle",isVisible:function(e){return!!e.graphicKey},onSelect:function(e){var t=e.ruleId,n=e.deaultProperties,o=e.graphicKey;return{ruleId:t,name:"",symbolizers:[Kp(Kp({},n),{},Yp({symbolizerId:Br()(),fill:void 0},o,Kp({},r.Icon.deaultProperties)))]}}}]:[{value:"Gray",labelId:"styleeditor.singleBand",onSelect:function(e){return{ruleId:e.ruleId,name:"",symbolizers:[Kp(Kp({},r.Raster.deaultProperties),{},{symbolizerId:Br()()})]}}},{value:"RGB",labelId:"styleeditor.rgbaBands",onSelect:function(e){return{ruleId:e.ruleId,name:"",symbolizers:[Kp(Kp({},r.Raster.deaultProperties),{},{channelSelection:{redChannel:{sourceChannelName:void 0,contrastEnhancement:{}},greenChannel:{sourceChannelName:void 0,contrastEnhancement:{}},blueChannel:{sourceChannelName:void 0,contrastEnhancement:{}}},symbolizerId:Br()()})]}}},{value:"PseudoColor",labelId:"styleeditor.pseudoColor",onSelect:function(e){var r=e.ruleId;return Kp(Kp({},t.Raster.deaultProperties),{},{ruleId:r})}}]},Qp=function(e){var t=e.ruleKind,r=e.graphic,n=e.symbolizerKind,o=e.channelSelection;return"Raster"===t?"PseudoColor":"Raster"===n?null!=o&&o.redChannel?"RGB":"Gray":void 0!==t?t:null!=r&&r.kind?null==r?void 0:r.kind:"Simple"};function Jp(e){var t,r,n=e.ruleKind,o=e.symbolizerKind,i=e.ruleId,a=e.graphic,l=e.channelSelection,s=e.hide,u=e.ruleBlock,p=e.symbolizerBlock,f=e.getSelected,d=void 0===f?Qp:f,m=e.getOptions,y=void 0===m?Xp:m,v=e.onSelect,h=y({ruleBlock:u,symbolizerBlock:p,kind:o}),O=o?p[o]:{},w=O.deaultProperties,E=O.params,S=void 0===E?{}:E,P=null==S||null===(t=S.color)||void 0===t||null===(r=t.config)||void 0===r?void 0:r.graphicKey,j=d({ruleKind:n,symbolizerKind:o,graphic:a,channelSelection:l});return s?null:c().createElement(g.DropdownButton,{className:"square-button-md no-border",noCaret:!0,pullRight:!0,title:c().createElement(g.Glyphicon,{glyph:"option-vertical"})},h.map((function(e){return!e.isVisible||e.isVisible({graphicKey:P})?c().createElement(g.MenuItem,{key:e.value,active:j===e.value,onClick:function(){return function(e,t){return e===j?null:v(t)}(e.value,e.onSelect({ruleId:i,ruleKind:n,symbolizerKind:o,deaultProperties:w,graphicKey:P}))}},c().createElement(b.Z,{msgId:e.labelId})):null})))}const ef=function(e){var t=e.className,r=e.glyph,n=e.tools,o=e.children,i=t?" "+t:"";return c().createElement("li",{className:"ms-symbolizer".concat(i)},c().createElement("div",{className:"ms-symbolizer-info"},r&&c().createElement(g.Glyphicon,{glyph:r}),c().createElement("div",{className:"ms-symbolizer-tools"},n)),o)};function tf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function rf(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tf(Object(r),!0).forEach((function(t){nf(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tf(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function nf(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function of(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}const af=function(e){var t=e.ruleId,r=e.glyph,n=e.params,o=e.kind,i=e.symbolizerKind,a=e.classificationType,s=void 0===a?"classificationVector":a,u=e.attributes,p=void 0===u?[]:u,f=e.onUpdate,d=e.onReplace,m=e.methods,y=e.getColors,b=void 0===y?function(){}:y,g=e.ruleBlock,v=void 0===g?{}:g,h=e.symbolizerBlock,O=void 0===h?{}:h,w=e.bands,E=of(e,["ruleId","glyph","params","kind","symbolizerKind","classificationType","attributes","onUpdate","onReplace","methods","getColors","ruleBlock","symbolizerBlock","bands"]),S=E.ramp,P=E.method,j=E.classification,C=E.attribute,x=E.intervals,T=E.reverse,k=E.continuous,I=(0,l.useRef)();I.current={ruleId:t,intervals:x,method:P,attribute:C,reverse:T,ramp:S,continuous:k,classification:j};var A=n.reduce((function(e,t){return Yl()(t)?rf(rf({},e),t(i)):rf(rf({},e),t)}),{}),F=(O[i]||{}).glyph;return c().createElement(ef,{key:"Classification",glyph:F||r,tools:c().createElement(Jp,{ruleKind:o,symbolizerKind:i,ruleId:t,onSelect:d,ruleBlock:v,symbolizerBlock:O})},c().createElement(_s,{properties:E,config:{attributes:p,methods:m,getColors:function(){var e="custom"===S&&j.length>0&&{name:"custom",colors:j.map((function(e){return e.color}))},t=b(void 0,void 0,5,e);return t?t.map((function(e){var t=e.name,r=of(e,["name"]);return rf({label:t?"global.colors.".concat(t):void 0,name:t},r)})):[]},bands:w,method:P},params:A,onChange:function(e){return f(rf(rf({},I.current),{},{type:s,values:e}))}}))};var lf=r(17621),cf=r.n(lf);function sf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function uf(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?sf(Object(r),!0).forEach((function(t){pf(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sf(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function pf(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const ff=function(e){var t=e.key,r=void 0===t?"color":t,n=e.opacityKey,o=void 0===n?"opacity":n,i=e.graphicKey,a=e.label,l=void 0===a?"Fill":a,c=e.stroke,s=e.pattern,u=e.disableAlpha,p=e.getGroupParams,f=e.getGroupConfig;return{type:"color",label:l,config:{stroke:c,pattern:s,disableAlpha:u,getGroupParams:p,getGroupConfig:f,graphicKey:i},setValue:function(e,t){var r;if(s&&null!==(r=t[i])&&void 0!==r&&r.kind)return t[i];var n=vc()(t[o])?1:t[o];return cf()(e).setAlpha(n).toRgb()},getValue:function(e){var t,n;if(s&&pe()(e)&&e.kind)return pf(n={},i,e),pf(n,r,void 0),pf(n,o,void 0),n;var a=e||{},l=a.a,c=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(a,["a"]);return uf((pf(t={},r,cf()(uf(uf({},c),{},{a:1})).toHexString()),pf(t,o,l),t),s&&pf({},i,void 0))}}},df=function(e){var t=e.key,r=void 0===t?"width":t,n=e.label,o=void 0===n?"Width":n,i=e.dasharrayKey,a=void 0===i?"dasharray":i;return{type:"slider",label:o,config:{range:{min:0,max:20},format:{from:function(e){return Math.round(e)},to:function(e){return Math.round(e)+" px"}}},setValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return parseFloat(e)},getValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=e[0]&&e[0].split(" px")[0],o=parseFloat(n),i=t[a],l=t[r];return uf(pf({},r,o),i&&pf({},a,o?i.map((function(e){return Math.round(e/l*o)})):void 0))}}},mf=function(e){var t=e.key,r=void 0===t?"dasharray":t,n=e.label;return{type:"dash",label:void 0===n?"Dash array":n,config:{options:[{value:"0"},{value:"1 4"},{value:"1 12"},{value:"8 8"},{value:"8 16"},{value:"8 8 1 8"},{value:"8 8 1 4 1 8"}]},setValue:function(e,t){var r=void 0===t.width?1:t.width;return void 0!==e?e.map((function(e){return Math.round(e/r)})):[0]},getValue:function(e,t){if(Nr()(e,["0"]))return pf({},r,void 0);var n=void 0===t.width?1:t.width,o=!(e||[]).find((function(e){return Kr()(parseFloat(e))}));return pf({},r,void 0!==e&&o?e.map((function(e){return parseFloat(e)*n})):void 0)}}},yf=function(e){var t=e.key,r=void 0===t?"cap":t,n=e.label;return{type:"toolbar",label:void 0===n?"Line cap":n,config:{options:[{labelId:"styleeditor.lineCapButt",value:"butt"},{labelId:"styleeditor.lineCapRound",value:"round"},{labelId:"styleeditor.lineCapSquare",value:"square"}]},getValue:function(e){return pf({},r,e)}}},bf=function(e){var t=e.key,r=void 0===t?"join":t,n=e.label;return{type:"toolbar",label:void 0===n?"Line join":n,config:{options:[{labelId:"styleeditor.lineJoinBevel",value:"bevel"},{labelId:"styleeditor.lineJoinRound",value:"round"},{labelId:"styleeditor.lineJoinMiter",value:"miter"}]},getValue:function(e){return pf({},r,e)}}},gf=function(e){var t=e.key,r=void 0===t?"radius":t,n=e.label;return{type:"slider",label:void 0===n?"Radius":n,config:{range:{min:1,max:100},format:{from:function(e){return Math.round(e)},to:function(e){return Math.round(e)+" px"}}},setValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return parseFloat(e)},getValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=e[0]&&e[0].split(" px")[0];return pf({},r,parseFloat(t))}}},vf=function(e){var t=e.key,r=void 0===t?"opacity":t,n=e.label;return{type:"slider",label:void 0===n?"Opacity":n,config:{range:{min:0,max:1}},setValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return parseFloat(e)},getValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=e[0]&&e[0].split(" px")[0];return pf({},r,parseFloat(t))}}},hf=function(e){var t=e.key,r=void 0===t?"offset":t,n=e.label,o=void 0===n?"":n,i=e.axis,a=void 0===i?"":i;return{key:r,type:"slider",label:o,config:{range:{min:-100,max:100},format:{from:function(e){return Math.round(e)},to:function(e){return Math.round(e)+" px"}}},setValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t="y"===a?parseFloat(e[1]):parseFloat(e[0]);return Kr()(t)?0:t},getValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=e[0]&&e[0].split(" px")[0],o=t[r]||[0,0];return pf({},r,"y"===a?[o[0],parseFloat(n)]:[parseFloat(n),o[1]])}}},Of=function(e){var t=e.key,r=void 0===t?"rotate":t,n=e.label;return{type:"slider",label:void 0===n?"Rotation (deg)":n,config:{range:{min:0,max:360},format:{from:function(e){return Math.round(e)},to:function(e){return Math.round(e)+"°"}}},setValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return parseFloat(e)},getValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=e[0]&&e[0].split("°")[0];return pf({},r,parseFloat(t))}}},wf=function(e){var t=e.label,r=e.key,n=void 0===r?"wellKnownName":r;return{type:"mark",label:t,getValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return pf({},n,e)}}},Ef=function(e){var t=e.label,r=e.key,n=void 0===r?"image":r;return{type:"image",label:t,config:{},getValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return pf({},n,e)}}},Sf=function(e){var t=e.label,r=e.key,n=void 0===r?"fontStyle":r;return{type:"toolbar",label:t,config:{options:[{labelId:"styleeditor.fontStyleNormal",value:"normal"},{labelId:"styleeditor.fontStyleItalic",value:"italic"}]},getValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return pf({},n,e)}}},Pf=function(e){var t=e.label,r=e.key,n=void 0===r?"fontWeight":r;return{type:"toolbar",label:t,config:{options:[{labelId:"styleeditor.fontWeightNormal",value:"normal"},{labelId:"styleeditor.fontWeightBold",value:"bold"}]},getValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return pf({},n,e)}}},jf=function(e){var t=e.key,r=void 0===t?"label":t;return{type:"toolbar",label:e.label,config:{options:[{labelId:"styleeditor.boolTrue",value:!0},{labelId:"styleeditor.boolFalse",value:!1}]},isDisabled:e.isDisabled,getValue:function(e){return pf({},r,e)}}},Cf=function(e){var t=e.key,r=void 0===t?"intervals":t,n=e.label,o=e.isDisabled;return{type:"slider",label:n,config:{range:{min:2,max:25},format:{from:function(e){return Math.round(e)},to:function(e){return Math.round(e)}}},isDisabled:void 0===o?function(e,t){return"customInterval"===(null==t?void 0:t.method)}:o,setValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2;return parseFloat(e)},getValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return pf({},r,parseFloat(e[0]))}}},xf=function(e){var t=e.label,r=e.key,n=void 0===r?"":r,o=e.getOptions;return{type:"select",label:t,config:{getOptions:void 0===o?function(){return[]}:o,selectProps:e.selectProps,isValid:e.isValid},getValue:function(e){return pf({},n,e)}}},Tf=function(e){var t=e.label,r=e.key,n=void 0===r?"":r,o=e.getOptions;return{type:"colorRamp",label:t,config:{getOptions:void 0===o?function(){return[]}:o},getValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return pf({},n,e)}}},kf=function(e){var t=e.label,r=e.key,n=void 0===r?"":r;return{type:"colorMap",label:t,getValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=e.classification,o=e.type,i="interval"===o||"customInterval"===t.method,a="color"===o||"custom"===t.ramp;return uf(uf(pf({},n,r),i&&{method:"customInterval"}),a&&{ramp:"custom"})}}},If=function(e){return{type:"channel",label:e.label,setValue:function(e,t){return{channelSelection:t.channelSelection,contrastEnhancement:t.contrastEnhancement}},getValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{channelSelection:e.channelSelection,contrastEnhancement:e.contrastEnhancement}}}};function Af(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ff(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Af(Object(r),!0).forEach((function(t){Df(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Af(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Df(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Rf(e){return function(e){if(Array.isArray(e))return Nf(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Nf(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Nf(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nf(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}const Mf=function(){var e={Mark:{kind:"Mark",glyph:"1-point",glyphAdd:"1-point-add",tooltipAddId:"styleeditor.addMarkRule",supportedTypes:["point","linestring","polygon","vector"],params:{wellKnownName:wf({label:"styleeditor.shape"}),color:ff({key:"color",opacityKey:"fillOpacity",label:"styleeditor.fill"}),strokeColor:ff({key:"strokeColor",opacityKey:"strokeOpacity",label:"styleeditor.strokeColor",stroke:!0}),strokeWidth:df({key:"strokeWidth",label:"styleeditor.strokeWidth"}),radius:gf({key:"radius",label:"styleeditor.radius"}),rotate:Of({label:"styleeditor.rotation"})},deaultProperties:{kind:"Mark",wellKnownName:"Circle",color:"#dddddd",fillOpacity:1,strokeColor:"#777777",strokeOpacity:1,strokeWidth:1,radius:16,rotate:0}},Icon:{kind:"Icon",glyph:"point",glyphAdd:"point-plus",tooltipAddId:"styleeditor.addIconRule",supportedTypes:["point","linestring","polygon","vector"],params:{image:Ef({label:"styleeditor.image",key:"image"}),opacity:vf({label:"styleeditor.opacity"}),size:gf({key:"size",label:"styleeditor.size"}),rotate:Of({label:"styleeditor.rotation"})},deaultProperties:{kind:"Icon",image:"",opacity:1,size:32,rotate:0}},Line:{kind:"Line",glyph:"line",glyphAdd:"line-plus",tooltipAddId:"styleeditor.addLineRule",supportedTypes:["linestring","polygon","vector"],params:{color:ff({label:"styleeditor.strokeColor",stroke:!0,pattern:!0,getGroupParams:function(t){return e[t]},getGroupConfig:function(e){return"Mark"===e?{disableAlpha:!0}:"Icon"===e?{omittedKeys:["rotate","opacity"]}:{}},graphicKey:"graphicStroke"}),width:df({label:"styleeditor.strokeWidth",key:"width"}),dasharray:mf({label:"styleeditor.lineStyle",key:"dasharray"}),cap:yf({label:"styleeditor.lineCap",key:"cap"}),join:bf({label:"styleeditor.lineJoin",key:"join"})},deaultProperties:{kind:"Line",color:"#777777",width:1,opacity:1,cap:"round",join:"round"}},Fill:{kind:"Fill",glyph:"polygon",glyphAdd:"polygon-plus",tooltipAddId:"styleeditor.addFillRule",supportedTypes:["polygon","vector"],params:{color:ff({label:"styleeditor.fill",key:"color",opacityKey:"fillOpacity",pattern:!0,graphicKey:"graphicFill",getGroupParams:function(t){return e[t]},getGroupConfig:function(e){return"Mark"===e?{}:"Icon"===e?{omittedKeys:["rotate","opacity"]}:{}}}),outlineColor:ff({key:"outlineColor",opacityKey:"outlineOpacity",label:"styleeditor.outlineColor",stroke:!0}),outlineWidth:df({key:"outlineWidth",label:"styleeditor.outlineWidth"})},deaultProperties:{kind:"Fill",color:"#dddddd",fillOpacity:1,outlineColor:"#777777",outlineWidth:1}},Text:{kind:"Text",glyph:"font",tooltipAddId:"styleeditor.addTextRule",supportedTypes:["point","linestring","polygon","vector"],params:{label:xf({key:"label",label:"styleeditor.label",selectProps:{creatable:!0},getOptions:function(e){var t=e.attributes;return(null==t?void 0:t.map((function(e){return{value:"{{"+e.attribute+"}}",label:e.attribute}})))||[]}}),font:xf({key:"font",label:"styleeditor.fontFamily",selectProps:{multi:!0},getOptions:function(e){var t=e.fonts;return(null==t?void 0:t.map((function(e){return{value:e,label:e}})))||[]}}),color:ff({label:"styleeditor.fontColor",key:"color",disableAlpha:!0}),size:gf({label:"styleeditor.fontSize",key:"size"}),fontStyle:Sf({label:"styleeditor.fontStyle",key:"fontStyle"}),fontWeight:Pf({label:"styleeditor.fontWeight",key:"fontWeight"}),haloColor:ff({label:"styleeditor.haloColor",key:"haloColor",stroke:!0,disableAlpha:!0}),haloWidth:df({label:"styleeditor.haloWidth",key:"haloWidth"}),rotate:Of({label:"styleeditor.rotation"}),offsetX:hf({label:"styleeditor.offsetX",axis:"x"}),offsetY:hf({label:"styleeditor.offsetY",axis:"y"})},deaultProperties:{kind:"Text",label:"Label",color:"#333333",size:14,fontStyle:"normal",fontWeight:"normal",haloColor:"#ffffff",haloWidth:1,allowOverlap:!0,offset:[0,0]}},Raster:{kind:"Raster",glyph:"1-raster",tooltipAddId:"styleeditor.addRasterRule",supportedTypes:["raster"],params:{channel:If({}),opacity:vf({label:"styleeditor.opacity"})},deaultProperties:{kind:"Raster",opacity:1,contrastEnhancement:{}}}},t={Classification:{kind:"Classification",glyph:"list",classificationType:"classificationVector",hideInputLabel:!0,hideFilter:!0,params:[{ramp:Tf({key:"ramp",label:"styleeditor.colorRamp",getOptions:function(e){return(0,e.getColors)()}}),reverse:jf({key:"reverse",label:"styleeditor.reverse",isDisabled:function(e,t){return"custom"===(null==t?void 0:t.ramp)||"customInterval"===(null==t?void 0:t.method)}}),attribute:xf({key:"attribute",label:"styleeditor.attribute",isValid:function(e){return void 0!==e.value},getOptions:function(e){var t=e.attributes;return null==t?void 0:t.map((function(e){return{value:e.attribute,label:e.attribute,disabled:e.disabled}}))}}),method:xf({key:"method",label:"styleeditor.method",getOptions:function(e){var t=e.methods,r=e.method,n=(null==t?void 0:t.map((function(e){return{labelId:"styleeditor."+e,value:e}})))||[];return[].concat(Rf("customInterval"===r?[{labelId:"styleeditor."+r,value:r}]:[]),Rf(n))}}),intervals:Cf({label:"styleeditor.intervals"})},function(t){var r,n,o,i;if(!t)return{};switch(t){case"Mark":return Ff({fillOpacity:vf({key:"fillOpacity",label:"styleeditor.opacity"})},bc()(null===(r=e[t])||void 0===r?void 0:r.params,["color"]));case"Line":return Ff({opacity:vf({key:"opacity",label:"styleeditor.opacity"})},bc()(null===(n=e[t])||void 0===n?void 0:n.params,["color"]));case"Fill":return Ff({fillOpacity:vf({key:"fillOpacity",label:"styleeditor.opacity"})},bc()(null===(o=e[t])||void 0===o?void 0:o.params,["color"]));default:return null===(i=e[t])||void 0===i?void 0:i.params}},{classification:kf({key:"classification",rampKey:"ramp"})}],deaultProperties:{kind:"Classification",classification:[],intervals:5,method:"equalInterval",ramp:"orrd",reverse:!1}},Raster:{kind:"Raster",glyph:"1-raster",classificationType:"classificationRaster",hideInputLabel:!1,hideFilter:!0,params:[{channel:If({}),opacity:vf({label:"styleeditor.opacity"}),ramp:Tf({key:"ramp",label:"styleeditor.colorRamp",getOptions:function(e){return(0,e.getColors)()}}),reverse:jf({key:"reverse",label:"styleeditor.reverse"}),continuous:jf({key:"continuous",label:"styleeditor.continuous"}),method:xf({key:"method",label:"styleeditor.method",getOptions:function(e){var t=e.methods;return null==t?void 0:t.map((function(e){return{labelId:"styleeditor."+e,value:e}}))}}),intervals:Cf({label:"styleeditor.intervals"})}],deaultProperties:{kind:"Raster",opacity:1,classification:[],intervals:5,method:"equalInterval",reverse:!1,continuous:!0,symbolizerKind:"Raster"}}};return{symbolizerBlock:e,ruleBlock:t}};var Lf=r(90937);function _f(e){var t=e.title,r=e.tools,n=e.errorId,o=e.draggable,i=e.connectDragSource,a=e.connectDropTarget,s=e.isDragging,u=e.children,p=(0,l.useRef)(null);o&&(i(p.current),a(p.current));var f=s?" ms-drop-target":"";return c().createElement("li",{ref:p,className:"ms-style-rule".concat(f)},c().createElement("div",{className:"ms-style-rule-head"},o&&c().createElement("div",{className:"ms-style-rule-grab-handle"},c().createElement(g.Glyphicon,{glyph:"grab-handle"})),c().createElement("div",{className:"ms-style-rule-head-info"},t),c().createElement("div",{className:"ms-style-rule-head-tools"},r)),n&&c().createElement(g.Alert,{bsStyle:"danger"},c().createElement(b.Z,{msgId:n})),c().createElement("ul",{className:"ms-style-rule-body"},u))}_f.propTypes={title:u().oneOfType([u().node,u().string]),tools:u().node,errorId:u().string,draggable:u().bool,connectDragSource:u().func,connectDropTarget:u().func,isDragging:u().bool},_f.defaultProps={connectDragSource:function(e){return e},connectDropTarget:function(e){return e}};var Zf="RULE";const Bf=(0,Lf.GR)(Zf,{hover:function(e,t,r){!function(e,t,r){if(!r)return null;var n=(0,Xc.findDOMNode)(r);if(!n)return null;var o=t.getItem().index,i=e.index;if(o===i)return null;var a=n.getBoundingClientRect(),l=a.bottom,c=a.top,s=(l-c)/2,u=t.getClientOffset().y-c;o<i&&u<s||o>i&&u>s||(e.onSort(o,i),t.getItem().index=i)}(e,t,r)}},(function(e){return{connectDropTarget:e.dropTarget()}}))((0,Lf.Ej)(Zf,{beginDrag:function(e){return{id:e.id,index:e.index}}},(function(e,t){return{connectDragSource:e.dragSource(),isDragging:t.isDragging()}}))(_f));function zf(){return(zf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Gf(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function Uf(e){return function(e){if(Array.isArray(e))return Wf(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Wf(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Wf(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wf(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Vf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function qf(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Vf(Object(r),!0).forEach((function(t){Hf(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Vf(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Hf(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var $f=(0,$e.Z)(Je.Z),Kf=(0,bl.Z)("placeholder")(g.FormControl);function Yf(){return c().createElement("div",{style:{position:"relative",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",textAlign:"center"}},c().createElement("div",null,c().createElement(g.Glyphicon,{glyph:"exclamation-mark",style:{fontSize:150}}),c().createElement("h1",null,c().createElement(b.Z,{msgId:"styleeditor.emptyRuleEditorTitle"})),c().createElement("p",null,c().createElement(b.Z,{msgId:"styleeditor.emptyRuleEditor"}))))}var Xf=(0,l.forwardRef)((function(e,t){var r=e.rules,n=void 0===r?[]:r,o=e.loading,i=e.toolbar,a=e.config,s=void 0===a?{}:a,u=e.ruleBlock,p=void 0===u?{}:u,f=e.symbolizerBlock,d=void 0===f?{}:f,m=e.onUpdate,y=void 0===m?function(){}:m,v=e.onChange,h=void 0===v?function(){}:v,O=s.geometryType,w=s.attributes,E=s.bands,S=s.scales,P=s.zoom,j=s.fonts,C=s.methods,x=s.getColors,T=(0,l.useRef)();function k(e,t){var r=e.values,n=e.ruleId,o=e.symbolizerId;if(t){var i=T.current.rules.map((function(e){return e.ruleId===n?qf(qf({},e),r):e}));return h(i)}var a=T.current.rules.map((function(e){return e.symbolizers?qf(qf({},e),{},{symbolizers:e.symbolizers.map((function(t){return t.symbolizerId===o&&e.ruleId===n?qf(qf({},t),r):t}))}):e}));return h(a)}function I(e){var t=[e].concat(Uf(T.current.rules));h(t)}function A(e){var t=e.ruleId,r=Gf(e,["ruleId"]),n=T.current.rules.map((function(e){return e.ruleId===t?qf({ruleId:t},r):e}));return h(n)}function F(e,t){var r=ye()(T.current.rules,(function(t,r){return r===e})),n=T.current.rules.reduce((function(n,o,i){return i===e?n:[].concat(Uf(n),i===t?e>t?[r,o]:[o,r]:[o])}),[]);return h(n)}function D(e,t){var r=e.symbolizers,n=void 0===r?[]:r;return!!ye()(n,(function(e){return"Text"===e.kind}))&&t>0}return T.current={rules:n},c().createElement("div",{ref:t,className:"ms-style-rules-editor"},c().createElement("div",{className:"ms-style-rules-editor-head"},c().createElement("div",{className:"ms-style-rules-editor-left"},i),c().createElement("div",{className:"ms-style-rules-editor-right"},c().createElement(qr.Z,{btnDefaultProps:{className:"square-button-md no-border"},buttons:[].concat(Uf(Object.keys(d).map((function(e){var t=d[e];return{glyph:t.glyphAdd||t.glyph,visible:-1!==t.supportedTypes.indexOf(O),tooltipId:t.tooltipAddId,onClick:function(){return I({name:"",ruleId:Br()(),symbolizers:[qf(qf({},d[e].deaultProperties),{},{symbolizerId:Br()()})]})}}}))),Uf(Object.keys(p).filter((function(e){return p[e].add})).map((function(e){var t=p[e];return{glyph:t.glyphAdd||t.glyph,visible:-1!==t.supportedTypes.indexOf(O),tooltipId:t.tooltipAddId,onClick:function(){return I(qf({name:"",ruleId:Br()()},p[e].deaultProperties))}}}))))}))),c().createElement("ul",{className:"ms-style-rules-editor-body"},0===n.length&&c().createElement(Yf,null),n.map((function(e,t){var r=e.name,o=e.symbolizers,i=void 0===o?[]:o,a=e.filter,l=e.scaleDenominator,s=void 0===l?{}:l,u=e.ruleId,f=e.kind,m=e.errorId,v=p[f]||{},O=v.params,I=v.glyph,R=v.hideInputLabel,N=v.hideFilter,M=v.hideScaleDenominator,L=v.classificationType;return c().createElement(Bf,{key:u+(n.length>1?"_draggable":""),draggable:n.length>1,id:u,index:t,errorId:m,onSort:F,title:R?c().createElement(b.Z,{msgId:"styleeditor.rule".concat(f)}):c().createElement(g.FormGroup,{onDragStart:function(e){e.stopPropagation(),e.preventDefault()},draggable:!0},c().createElement(Kf,{value:r,placeholder:"styleeditor.enterLegendLabelPlaceholder",onChange:function(e){return k({values:{name:e.target.value},ruleId:u},!0)}})),tools:c().createElement(c().Fragment,null,D(e,t)&&c().createElement(Ql.Z,{glyph:"exclamation-mark",bsStyle:"warning",placement:"right",title:c().createElement(b.Z,{msgId:"styleeditor.warningTextOrderTitle"}),text:c().createElement(b.Z,{msgId:"styleeditor.warningTextOrder"})}),c().createElement(Mp,{hide:N,value:a,attributes:w,onChange:function(e){return k({values:e,ruleId:u},!0)}}),c().createElement(Hp,{hide:M,value:s,scales:S,zoom:P,onChange:function(e){return k({values:e,ruleId:u},!0)}}),c().createElement($f,{className:"square-button-md no-border",tooltipId:"styleeditor.removeRule",onClick:function(){return function(e){var t=T.current.rules.filter((function(t){return t.ruleId!==e}));h(t)}(u)}},c().createElement(g.Glyphicon,{glyph:"trash"})))},"Classification"===f||"Raster"===f?c().createElement(af,zf({},e,{ruleBlock:p,symbolizerBlock:d,glyph:I,classificationType:L,params:O,methods:C,getColors:x,bands:E,attributes:w&&w.map((function(e){return qf(qf({},e),{},{disabled:"number"!==e.type})})),onUpdate:y,onChange:function(e){return k({values:e,ruleId:u},!0)},onReplace:A})):i.map((function(e){var t=e.kind,r=void 0===t?"":t,n=e.symbolizerId,o=Gf(e,["kind","symbolizerId"]),i=d[r]||{},a=i.params,l=i.glyph;return a&&c().createElement(ef,{key:n,defaultExpanded:!0,draggable:!0,glyph:l,tools:c().createElement(Jp,{hide:"Icon"===r,symbolizerKind:r,ruleBlock:p,symbolizerBlock:d,ruleId:u,onSelect:A,graphic:o.graphicFill||o.graphicStroke,channelSelection:o.channelSelection})},c().createElement(_s,{properties:o,params:a,config:{bands:E,attributes:w,fonts:j},onChange:function(e){return k({values:e,ruleId:u,symbolizerId:n})}}))})))})),o&&c().createElement("div",{style:{position:"absolute",width:"100%",height:"100%",backgroundColor:"rgba(255, 255, 255, 0.4)",zIndex:10,transition:"0.3s all"}})))})),Qf=Mf(),Jf=Qf.symbolizerBlock,ed=Qf.ruleBlock;Xf.propTypes={rules:u().array,loading:u().bool,toolbar:u().node,config:u().object,ruleBlock:u().object,symbolizerBlock:u().object,onUpdate:u().func,onChange:u().func},Xf.defaultProps={rules:[],config:{},ruleBlock:ed,symbolizerBlock:Jf,onUpdate:function(){},onChange:function(){}};const td=Xf;function rd(e){return function(e){if(Array.isArray(e))return id(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||od(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nd(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=r){var n,o,i=[],a=!0,l=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(l)throw o}}return i}}(e,t)||od(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function od(e,t){if(e){if("string"==typeof e)return id(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?id(e,t):void 0}}function id(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ad(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ld(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ad(Object(r),!0).forEach((function(t){cd(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ad(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function cd(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var sd="UPDATE_STYLE",ud="UNDO_STYLE",pd="REDO_STYLE",fd=cd({},sd,(function(e,t){return ld({},t)})),dd=(0,Xt.ZP)((function(e,t){return(fd[t.type]||mc())(e,t.payload)}),{limit:20,undoType:ud,redoType:pd,jumpType:"",jumpToPastType:"",jumpToFutureType:"",clearHistoryType:""}),md={};function yd(e){var t,r,n=e.code,o=e.format,i=e.layer,a=e.zoom,s=e.scales,u=e.geometryType,p=e.fonts,f=e.bands,d=e.attributes,m=e.onChange,y=e.onError,g=e.defaultStyleJSON,v=(e.config,e.loading),h=e.error,O=e.methods,w=e.getColors,E=e.styleUpdateTypes,S=e.debounceTime,P=Mf(),j=P.symbolizerBlock,C=P.ruleBlock,x=nd((0,l.useState)(!1),2),T=x[0],k=x[1],I=nd((0,l.useReducer)(dd,{}),2),A=I[0],F=I[1],D=(null==A?void 0:A.present)||md,R=(0,l.useRef)();R.current={style:D};var N=(0,l.useRef)(!1);(0,l.useEffect)((function(){var e;N.current||((e=(0,sa.getStyleParser)(o))&&n&&null===g?e.readStyle(n).then((function(e){F({type:sd,payload:(0,_l.VM)(e)}),N.current=!0})).catch((function(e){return y(ld(ld({},e),{},{status:400}))})):e&&n&&g?(N.current=!0,F({type:sd,payload:g})):n&&!e&&y({messageId:"styleeditor.formatNotSupported",status:400}))}),[n,o,g]);var M=function(e){if(k(!1),!e)return null;var t=ld(ld({},R.current.style),{},{rules:e});return F({type:sd,payload:t})},L=(0,l.useRef)();(0,l.useEffect)((function(){return L.current=ql()((function(e){var t,r=function(e){if(!e||0===e.length)return{messageId:"styleeditor.styleEmpty",status:400};var t=ye()(e.map((function(e){return e.errorId})),(function(e){return e}));if(t)return{messageId:t,status:400};if(ye()(e,(function(e){var t=e.kind,r=e.classification;return!("Classification"!==t&&"Raster"!==t||r&&0!==r.length)})))return{messageId:"styleeditor.incompleteClassification",status:400};var r,n,o,i=ye()(e,(function(e){var t=e.symbolizers,r=void 0===t?[]:t;return ye()(r,(function(e){var t=e.kind,r=e.image;return"Icon"===t&&(null==r?void 0:r.errorId)}))}));return i?{messageId:"styleeditor.".concat(null==i||null===(r=i.symbolizers)||void 0===r||null===(n=r[0])||void 0===n||null===(o=n.image)||void 0===o?void 0:o.errorId),status:400}:null}(null==e||null===(t=e.style)||void 0===t?void 0:t.rules);if(r)return y(r);var n=(0,sa.getStyleParser)(e.format);return n?n.writeStyle((0,_l.Gg)(e.style)).then((function(t){m(t,e.style)})).catch((function(e){y(ld(ld({},e),{},{status:400}))})):null}),S),function(){L.current.cancel()}}),[]),(0,l.useEffect)((function(){L.current.cancel(),L.current({format:o,style:D})}),[JSON.stringify(D)]);var _=h&&(h.message||h.messageId&&c().createElement(b.Z,{msgId:h.messageId}));return c().createElement(td,{loading:T,toolbar:c().createElement(qr.Z,{btnDefaultProps:{className:"square-button-md no-border"},buttons:[{glyph:"undo",tooltipId:"styleeditor.undoStyle",disabled:0===(null==A||null===(t=A.past)||void 0===t?void 0:t.length),onClick:function(){return F({type:ud})}},{disabled:0===(null==A||null===(r=A.future)||void 0===r?void 0:r.length),tooltipId:"styleeditor.redoStyle",glyph:"redo",onClick:function(){return F({type:pd})}},{visible:!!h,Element:function(){return c().createElement("div",{className:"square-button-md",style:{display:"inline-flex",alignItems:"center",justifyContent:"center"}},c().createElement(Ql.Z,{glyph:"exclamation-mark",bsStyle:"danger",placement:"right",title:c().createElement(b.Z,{msgId:"styleeditor.validationErrorTitle"}),text:c().createElement(c().Fragment,null,c().createElement("p",null,c().createElement(b.Z,{msgId:"styleeditor.genericValidationError"})),_?c().createElement("p",null,c().createElement(b.Z,{msgId:"styleeditor.validationError"}),": ",_):c().createElement("p",null,c().createElement(b.Z,{msgId:"styleeditor.incorrectPropertyInputError"})))}))}},{visible:!(!v&&!T),Element:function(){return c().createElement("div",{className:"square-button-md",style:{display:"inline-flex",alignItems:"center",justifyContent:"center"}},c().createElement(ml.Z,{size:18}))}}]}),ruleBlock:C,symbolizerBlock:j,config:{geometryType:u,zoom:a,fonts:p,scales:s,bands:f,attributes:d,methods:O,getColors:w},rules:(null==D?void 0:D.rules)&&rd(D.rules).reverse(),onChange:function(e){return M(rd(e).reverse())},onUpdate:function(e){var t=e.values,r=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["values"]);k(!0),function(e){var t=e.values,r=e.properties,n=e.rules,o=e.layer,i=e.styleUpdateTypes,a=void 0===i?{}:i;return new Promise((function(e){var i=r.type&&a[r.type];return e(i?i({values:t,properties:r,rules:n,layer:o}):n.map((function(e){return e.ruleId===r.ruleId?ld(ld(ld({},e),t),{},{errorId:void 0}):e})))}))}({values:t,properties:r,layer:i,rules:R.current.style.rules,styleUpdateTypes:E}).then((function(e){return M(e)})).catch((function(){return M()}))}})}yd.propTypes={code:u().string,format:u().string,layer:u().object,zoom:u().number,scales:u().array,geometryType:u().string,fonts:u().array,bands:u().array,attributes:u().array,onChange:u().func,onError:u().func,defaultStyleJSON:u().object,config:u().object,loading:u().bool,error:u().object,methods:u().array,getColors:u().func,styleUpdateTypes:u().object,debounceTime:u().number},yd.defaultProps={onChange:function(){},onError:function(){},config:{},getColors:function(){},styleUpdateTypes:{},debounceTime:300,defaultStyleJSON:null};const bd=yd;var gd=r(84715),vd=r(24198);const hd=[{type:"color",active:function(e){return"atom"===e.type&&cf()(e.string).isValid()},style:function(e){return{backgroundColor:e.string}},Widget:function(e){var t=e.token,r=e.value,n=e.onChange,o=void 0===n?function(){}:n;return c().createElement(vd.xS,{color:{hex:r||t.string},onChange:function(e){return o(e.hex)}})}}];function Od(){return(Od=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function wd(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Ed={classificationVector:Gl.IW,classificationRaster:Gl.DG,classification:Gl.IW,"classification-raster":Gl.DG};function Sd(e,t){return e&&"raster"!==t&&Object.keys(e).filter((function(t){return-1!==["integer","long","double","float","bigdecimal","string","decimal"].indexOf(e[t].localPart.toLowerCase())})).map((function(t){var r=e[t].localPart;return{attribute:t,label:t,type:-1!==["integer","long","double","float","bigdecimal","decimal"].indexOf(r.toLowerCase())?"number":"string"}}))}var Pd=(0,p.connect)((0,D.P1)([Ll.gB,Ll.iB,Ll.m2,Ll.p,Ll.aN,Ll.Vf,Ll.lC,X.up,X.Od,Ll.Z0],(function(e,t,r,n,o,i,a,l,c,s){var u,p;return{code:e,mode:(0,_l.H$)(t),bands:Bl()(r)&&"raster"===a&&r||[],attributes:Sd(r,a),error:n.edit||null,loading:o,format:t,layer:i,geometryType:a,scales:l.map((function(e){return Math.round(e)})),zoom:c.zoom,fonts:s.fonts||[],methods:("raster"===a?null==s||null===(u=s.classificationMethods)||void 0===u?void 0:u.raster:null==s||null===(p=s.classificationMethods)||void 0===p?void 0:p.vector)||zl.Z.methods}})),{onError:lo.Fe.bind(null,"edit")})(bd);Pd.defaultProps={getColors:zl.Z.getColors,styleUpdateTypes:Ed};var jd={visual:Pd,textarea:(0,p.connect)((0,D.P1)([Ll.gB,Ll.iB,Ll.m2,Ll.p,Ll.aN],(function(e,t,r,n,o){return{code:e,mode:(0,_l.H$)(t),hintProperties:r,error:n.edit||null,loading:o}})))(fc)};function Cd(e){var t,r,n=e.code,o=e.error,i=e.canEdit,a=e.editorType,s=e.onUpdateMetadata,u=e.onChange,p=e.loading,f=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["code","error","canEdit","editorType","onUpdateMetadata","onChange","loading"]),d=(t=(0,l.useState)(),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=r){var n,o,i=[],a=!0,l=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(l)throw o}}return i}}(t,r)||function(e,t){if(e){if("string"==typeof e)return wd(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?wd(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),m=d[0],y=d[1],v={position:"relative",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",textAlign:"center"};if(!n&&!o)return c().createElement("div",{style:v},c().createElement(ml.Z,{size:150}));if(!i)return c().createElement("div",{style:v},c().createElement("div",null,c().createElement(g.Glyphicon,{glyph:"exclamation-mark",style:{fontSize:150}}),c().createElement("h1",null,c().createElement(b.Z,{msgId:"styleeditor.noPermission"}))));if(404===(null==o?void 0:o.status))return c().createElement("div",{style:v},c().createElement("div",null,c().createElement(g.Glyphicon,{glyph:"exclamation-mark",style:{fontSize:150}}),c().createElement("h1",null,c().createElement(b.Z,{msgId:"styleeditor.styleNotFound"}))));var h=jd[a]||jd.textarea;return c().createElement(Vr.Z,{style:{position:"relative"},header:c().createElement("div",{className:"ms-style-editor-switch"},c().createElement(qr.Z,{buttons:[{className:"square-button-md no-border",glyph:"code",active:"textarea"===a,disabled:p,tooltipId:"visual"===a?"styleeditor.switchToTextareaEditor":"styleeditor.switchToVisualEditor",onClick:function(){return p?null:"visual"===a?s({editorType:"textarea"}):y(!0)}}]}))},h&&c().createElement(h,Od({},f,{onChange:function(e,t){u(e),pe()(t)&&s({styleJSON:JSON.stringify(t)})}})),m&&c().createElement("div",{className:"ms-style-editor-alert",style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:10,display:"flex",alignItems:"center",justifyContent:"center",padding:16,backgroundColor:"rgba(0, 0, 0, 0.6)"}},c().createElement(g.Alert,{bsStyle:"warning",style:{textAlign:"center"}},c().createElement("p",{style:{padding:8}},c().createElement(b.Z,{msgId:"styleeditor.alertForceTranslate"})),c().createElement("p",null,c().createElement(qr.Z,{buttons:[{text:c().createElement(b.Z,{msgId:"styleeditor.stayInTextareaEditor"}),onClick:function(){return y(!1)},style:{marginRight:4}},{bsStyle:"primary",text:c().createElement(b.Z,{msgId:"styleeditor.useLatestValidStyle"}),onClick:function(){s({editorType:"visual"}),y(!1)}}]})))))}Cd.defaultProps={inlineWidgets:hd};var xd=(0,p.connect)((0,gd.y)(Ll.gB,Ll.p,Ll.z_,(function(e){var t=(0,Ll.WW)(e);return null==t?void 0:t.editorType}),(function(e){try{var t=(0,Ll.WW)(e);return JSON.parse(null==t?void 0:t.styleJSON)}catch(e){return null}}),Ll.aN,(function(e,t,r,n,o,i){return{code:e,error:t.edit||null,canEdit:r,editorType:n,defaultStyleJSON:o,loading:i}})),{onUpdateMetadata:lo.bB,onChange:lo.p2})(Cd),Td=(0,_l.YD)(),kd=(0,ta.Z)((function(e){return!e.canEdit}),{glyph:"exclamation-mark",title:c().createElement(b.Z,{msgId:"styleeditor.noPermission"})}),Id=function(e){return(0,ea.Z)(e,{size:150,style:{margin:"auto"}},(function(e){return c().createElement("div",{style:{position:"relative",height:"100%",display:"flex"}},c().createElement(ml.Z,e))}))},Ad=(0,R.compose)((0,R.defaultProps)({templates:Td}),(0,p.connect)((0,D.P1)([Ll.Mc,Ll.w_,Ll.lC,Ll.z_,Ll.Z0,Ll.aN],(function(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},i=o.formats,a=void 0===i?[]:i,l=arguments.length>5?arguments[5]:void 0;return{selectedStyle:e,add:t&&e,geometryType:r,canEdit:n,availableFormats:a,loading:l}})),{onSelect:lo.FU,onClose:lo.cu.bind(null,!1),onSave:lo.wj}),kd,Id((function(e){return!e.geometryType})),(0,R.withState)("filterText","onFilter",""),(0,R.withState)("styleSettings","onUpdate",{}))((function(e){var t=e.selectedStyle,r=e.add,n=e.styleSettings,o=void 0===n?{}:n,i=e.geometryType,a=void 0===i?"":i,l=e.templates,s=void 0===l?[]:l,u=e.filterText,p=e.availableFormats,f=void 0===p?["sld","css"]:p,d=e.formFields,v=void 0===d?[{key:"title",placeholder:"styleeditor.titleSettingsplaceholder",title:c().createElement(b.Z,{msgId:"styleeditor.titleSettings"})},{key:"_abstract",placeholder:"styleeditor.abstractSettingsplaceholder",title:c().createElement(b.Z,{msgId:"styleeditor.abstractSettings"})}]:d,h=e.onFilter,O=void 0===h?function(){}:h,w=e.onSelect,E=void 0===w?function(){}:w,S=e.onClose,P=void 0===S?function(){}:S,j=e.onSave,C=void 0===j?function(){}:j,x=e.onUpdate,T=void 0===x?function(){}:x,k=e.loading;return c().createElement(Vr.Z,{header:c().createElement("div",null,c().createElement(Fl,{filterPlaceholder:"styleeditor.templateFilterPlaceholder",filterText:u,onFilter:O}),c().createElement("div",{className:"text-center"},c().createElement("small",null,k?c().createElement(ml.Z,{size:15,style:{display:"inline-block"}}):c().createElement(b.Z,{msgId:"styleeditor.createStyleFromTemplate"}))))},c().createElement(Rl,{colProps:{},cardComponent:Tl,onItemClick:function(e){var t=e.code,r=e.styleId,n=e.format;E({code:t,templateId:r,format:n||"css"}),T(Il(Il({},o),{},{title:de()(s.filter((function(e){return e.styleId===r})).map((function(e){return e.title})))}))},items:s.filter((function(e){var t=e.title;return!u||u&&-1!==t.indexOf(u)})).filter((function(e){var t=e.types,r=e.format;return!t||de()(t.filter((function(e){return e===a})))&&-1!==f.indexOf(r)})).map((function(e){var r;return Il(Il({},e),{},{preview:null!=e&&null!==(r=e.preview)&&void 0!==r&&r.config?c().createElement(Ol,e.preview.config):null==e?void 0:e.preview,selected:e.styleId===t,disabled:k})}))}),c().createElement(m.Z,null,c().createElement(y.Z,{show:!!r,fitContent:!0,title:c().createElement(b.Z,{msgId:"styleeditor.createStyleModalTitle"}),onClose:function(){return P()},buttons:[{text:c().createElement(b.Z,{msgId:"save"}),bsStyle:"primary",disabled:!Nl(o),onClick:function(){return C(o)}}]},c().createElement(g.Form,null,c().createElement(g.FormGroup,{controlId:"styleTitle",validationState:!Nl(o)&&"error"},v.map((function(e){var t=e.title,r=e.placeholder,n=e.key;return c().createElement("span",{key:n},c().createElement(g.ControlLabel,null,t),c().createElement(Dl,{type:"text",defaultValue:o[n],placeholder:r,onChange:function(e){return T(Il(Il({},o),{},Al({},n,e.target.value)))}}))}))),!Nl(o)&&c().createElement(g.Alert,{style:{margin:0},bsStyle:"danger"},c().createElement(xl.Z,{msgId:"styleeditor.titleRequired"}))))))})),Fd=(0,R.compose)((0,p.connect)((0,D.P1)([Ll.ex,Ll.ov],(function(e,t){return{status:e,defaultStyle:t.defaultStyle,enabledStyle:t.enabledStyle,availableStyles:t.availableStyles}})),{onSelect:h.Xy}),(0,R.withState)("filterText","onFilter",""),(0,dl.Z)((function(e){var t=e.status,r=e.readOnly;return"template"===t&&!r}),(function(){return c().createElement(Ad,null)}),{maskContainerStyle:{display:"flex",position:"relative"},maskStyle:{overflowY:"auto",left:0}}))((function(e){var t=e.showDefaultStyleIcon,r=e.enabledStyle,n=e.defaultStyle,o=e.availableStyles,i=void 0===o?[]:o,a=e.onSelect,l=e.formatColors,s=void 0===l?{sld:"#33ffaa",css:"#ffaa33"}:l,u=e.filterText,p=e.onFilter,f=void 0===p?function(){}:p;return c().createElement(Vr.Z,{className:"ms-style-editor-list",header:c().createElement(Pl,{filterPlaceholder:"styleeditor.styleListfilterPlaceholder",filterText:u,onFilter:f})},c().createElement(Cl,{size:"sm",onItemClick:function(e){var t=e.name;return a({style:n===t?"":t},!0)},items:i.filter((function(e){var t,r,n=e.name,o=void 0===n?"":n,i=e.title,a=void 0===i?"":i,l=e._abstract,c=void 0===l?"":l,s=e.metadata,p=void 0===s?{}:s;return!u||u&&(-1!==o.indexOf(u)||-1!==(null==p||null===(t=p.title)||void 0===t?void 0:t.indexOf(u))||-1!==(null==p||null===(r=p.description)||void 0===r?void 0:r.indexOf(u))||-1!==a.indexOf(u)||-1!==c.indexOf(u))})).map((function(e){var o,i,a;return El(El({},e),{},{title:(null==e||null===(o=e.metadata)||void 0===o?void 0:o.title)||e.label||e.title||e.name,description:(null==e||null===(i=e.metadata)||void 0===i?void 0:i.description)||e._abstract,selected:r===e.name,preview:e.format&&c().createElement(Ol,{backgroundColor:"#333333",texts:[{text:(a=e.format,{sld:"SLD",css:"CSS",mbstyle:"MBS"}[a]||a||"").toUpperCase(),fill:s[e.format]||"#f2f2f2",style:{fontSize:70,fontWeight:"bold"}}]})||c().createElement(jl,{glyph:"geoserver"}),tools:t&&n===e.name?c().createElement(jl,{glyph:"star",tooltipId:"styleeditor.defaultStyle"}):null})}))}))})),Dd=(0,R.compose)((0,R.withState)("showModal","onShowModal"),(0,p.connect)((0,D.P1)([Ll.ex,Ll.Mc,Ll.p,Ll.QW,Ll.gB,Ll.aN,Ll.i7,Ll.z_,Ll.ov,Ll.Z0,Ll.Ed],(function(e,t,r,n,o,i,a,l,c){var s=c.defaultStyle,u=arguments.length>9&&void 0!==arguments[9]?arguments[9]:{},p=u.formats,f=void 0===p?["sld"]:p,d=arguments.length>10?arguments[10]:void 0;return{status:e,templateId:t,error:r,isCodeChanged:n!==o,loading:i,layerDefaultStyleName:s,selectedStyle:s===a?"":a,editEnabled:l,disableCodeEditing:-1===f.indexOf(d)}})),{onSelectStyle:lo.Nf.bind(null,"template"),onEditStyle:lo.Nf.bind(null,"edit"),onBack:lo.Nf.bind(null,""),onReset:fl.B1.bind(null,_l.s1,[{}]),onAdd:lo.cu.bind(null,!0),onUpdate:lo.Lc,onDelete:lo.WQ,onSetDefault:lo.WB}))((function(e){var t,r=e.status,n=e.buttons,o=void 0===n?[]:n,i=e.templateId,a=e.error,l=e.isCodeChanged,s=e.showModal,u=e.onShowModal,p=e.loading,f=e.selectedStyle,d=e.layerDefaultStyleName,v=e.editEnabled,h=e.enableSetDefaultStyle,O=e.defaultStyles,w=void 0===O?["generic","point","line","polygon","raster"]:O,E=e.onBack,S=void 0===E?function(){}:E,P=e.onAdd,j=void 0===P?function(){}:P,C=e.onReset,x=void 0===C?function(){}:C,T=e.onDelete,k=void 0===T?function(){}:T,I=e.onSelectStyle,A=void 0===I?function(){}:I,F=e.onEditStyle,D=void 0===F?function(){}:F,R=e.onUpdate,N=void 0===R?function(){}:R,M=e.onSetDefault,L=void 0===M?function(){}:M,_=e.disableCodeEditing;return c().createElement("div",null,c().createElement(qr.Z,{btnDefaultProps:{className:"square-button-md",bsStyle:"primary"},buttons:[{glyph:"arrow-left",visible:!!r,tooltipId:"styleeditor.backToList",disabled:!!p,onClick:function(){"edit"===r&&l?u({title:c().createElement(b.Z,{msgId:"styleeditor.closeWithoutSaveAlertTitle"}),message:c().createElement(g.Alert,{bsStyle:"warning",style:{margin:0}},c().createElement(b.Z,{msgId:"styleeditor.closeWithoutSaveAlert"})),buttons:[{text:c().createElement(b.Z,{msgId:"close"}),bsStyle:"primary",onClick:function(){u(null),S(),x()}}]}):(S(),x())}},{glyph:"1-stilo",tooltipId:"styleeditor.createNewStyle",visible:!(r||!v),disabled:!!p,onClick:function(){return A()}},{glyph:"code",tooltipId:"styleeditor.editSelectedStyle",visible:!(r||!v),disabled:!!p||-1!==w.indexOf(f)||!f&&-1!==w.indexOf(d)||_,onClick:function(){return D()}},{glyph:"ok",tooltipId:"styleeditor.saveCurrentStyle",disabled:!!(a&&a.edit&&a.edit.status)||!!p||-1!==w.indexOf(f),visible:!("edit"!==r||!v),onClick:function(){return N()}},{glyph:"plus",tooltipId:"styleeditor.addSelectedTemplate",visible:!("template"!==r||!i||!v),disabled:!!p,onClick:function(){return j()}},{glyph:"trash",tooltipId:"styleeditor.deleteSelectedStyle",disabled:!!p||-1!==w.indexOf(f)||!f,visible:!(r||!v),onClick:function(){u({title:c().createElement(b.Z,{msgId:"styleeditor.deleteStyleAlertTitle"}),message:c().createElement(g.Alert,{bsStyle:"warning",style:{margin:0}},c().createElement(b.Z,{msgId:"styleeditor.deleteStyleAlert"})),buttons:[{text:c().createElement(b.Z,{msgId:"styleeditor.delete"}),bsStyle:"primary",onClick:function(){u(null),k(f)}}]})}},{glyph:"star",tooltipId:"styleeditor.setDefaultStyle",disabled:!!p||-1!==w.indexOf(f)||!f,visible:!(!h||r||!v),onClick:function(){return L()}}].concat((t=r?[]:o,function(e){if(Array.isArray(e))return Ml(e)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return Ml(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ml(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()))}),c().createElement(m.Z,null,c().createElement(y.Z,{show:s,fitContent:!0,title:s&&s.title,onClose:function(){return u(null)},buttons:s&&s.buttons},s&&s.message)))})),Rd=(0,R.compose)((0,p.connect)((0,D.P1)([Ll.Vf],(function(e){return{layer:e}})),{onInit:W.k}),(0,R.lifecycle)({UNSAFE_componentWillMount:function(){this.props.onInit&&this.props.layer&&this.props.onInit(this.props.layer)}}),Id((function(e){var t=e.layer,r=void 0===t?{}:t;return r&&r.capabilitiesLoading})))((function(){return c().createElement(Vr.Z,{className:"ms-style-editor-container",footer:c().createElement("div",{style:{height:25}})},c().createElement(Fd,{readOnly:!0}))})),Nd=(0,R.branch)((function(e){return e.readOnly}),(function(){return Rd}))(Fd),Md=r(76424);function Ld(){return(Ld=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}const _d=function(e){var t=e.activePanel,r=e.fillContainer,n=e.className,o=e.onSelect,i=e.panels,a=void 0===i?[]:i,l=r?"ms-fill-container ":"";return c().createElement(g.Accordion,{activeKey:t,className:"ms-accordion "+l+n},a.map((function(e,r){return c().createElement(g.Panel,{key:r,eventKey:e.id,className:t===e.id&&"HIDDEN"!==e.id?"ms-selected":"",header:e.head&&c().createElement("a",{role:"tab"},c().createElement(Md.Z,Ld({},e.head,{selected:t===e.id,onClick:function(){o(e.id)}})))||null,collapsible:!0},e.body)})))};var Zd=r(64721),Bd=r.n(Zd);function zd(e){return(zd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Gd(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ud(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Gd(Object(r),!0).forEach((function(t){tm(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Gd(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Wd(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=r){var n,o,i=[],a=!0,l=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(l)throw o}}return i}}(e,t)||qd(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vd(e){return function(e){if(Array.isArray(e))return Hd(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||qd(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qd(e,t){if(e){if("string"==typeof e)return Hd(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Hd(e,t):void 0}}function Hd(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function $d(){return($d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Kd(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Yd(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Xd(e,t){return(Xd=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Qd(e,t){return!t||"object"!==zd(t)&&"function"!=typeof t?Jd(e):t}function Jd(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function em(e){return(em=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function tm(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var rm=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xd(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=em(n);if(o){var r=em(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Qd(this,e)});function a(){var e;Kd(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return tm(Jd(e=i.call.apply(i,[this].concat(r))),"getInfoFormat",(function(t){return Object.keys(t).map((function(t){var r=e.props.formatCards[t]&&e.props.formatCards[t].body;return{id:t,head:{preview:c().createElement(g.Glyphicon,{glyph:e.props.formatCards[t]&&e.props.formatCards[t].glyph||"ext-empty"}),title:e.props.formatCards[t]&&e.props.formatCards[t].titleId&&c().createElement(b.Z,{msgId:e.props.formatCards[t].titleId})||"",description:e.props.formatCards[t]&&e.props.formatCards[t].descId&&c().createElement(b.Z,{msgId:e.props.formatCards[t].descId})||"",size:"sm"},body:r&&c().createElement(r,$d({template:e.props.element.featureInfo&&e.props.element.featureInfo.template||""},e.props))||null}}))})),tm(Jd(e),"supportedInfoFormats",(function(){var t,r=(null===(t=e.props.element)||void 0===t?void 0:t.infoFormats)||[],n=Object.assign.apply(Object,[{}].concat(Vd(Object.entries(e.props.defaultInfoFormat).filter((function(e){var t=Wd(e,2)[1];return Bd()(r,t)})).map((function(e){var t=Wd(e,2);return tm({},t[0],t[1])})))));return Xr()(n)?e.props.defaultInfoFormat:n})),e}return t=a,(r=[{key:"render",value:function(){var e=this,t=this.getInfoFormat(this.supportedInfoFormats());return c().createElement("span",null,c().createElement(_d,{fillContainer:!0,activePanel:this.props.element.featureInfo&&this.props.element.featureInfo.format,panels:t,onSelect:function(t){var r=e.props.element.featureInfo&&e.props.element.featureInfo.format&&t===e.props.element.featureInfo.format;e.props.onChange("featureInfo",Ud(Ud({},e.props.element&&e.props.element.featureInfo||{}),{},{format:r?"":t,viewer:e.props.element.featureInfo?e.props.element.featureInfo.viewer:void 0}))}}))}}])&&Yd(t.prototype,r),a}(c().Component);function nm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function om(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?nm(Object(r),!0).forEach((function(t){im(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nm(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function im(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function am(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function lm(){return(lm=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function cm(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}tm(rm,"propTypes",{element:u().object,defaultInfoFormat:u().object,onChange:u().func,formatCards:u().object}),tm(rm,"defaultProps",{element:{},defaultInfoFormat:[],onChange:function(){},formatCards:{}});var sm={html:Ki(),json:JSON.parse(Xi()),text:Ji()},um=(0,R.defaultProps)({readOnly:!0})(Nd),pm=(0,p.connect)((0,D.P1)([X.Od],(function(e){return{zoom:e.zoom,projection:e.projection}})))(To.Z),fm=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.settings,r=void 0===t?{}:t;return"layers"===r.nodeType},dm=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.element,r=void 0===t?{}:t;return"wfs"===r.type||"vector"===r.type&&"annotations"!==r.id},mm=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.element,r=void 0===t?{}:t;return"wms"===r.type},ym=function(e){return fm(e)&&(mm(e)||dm(e))},bm={HIDDEN:{titleId:"layerProperties.hideFormatTitle",descId:"layerProperties.hideFormatDescription",glyph:"hide-marker"},TEXT:{titleId:"layerProperties.textFormatTitle",descId:"layerProperties.textFormatDescription",glyph:"ext-txt",body:function(){return c().createElement("div",null,c().createElement("div",null,c().createElement(b.Z,{msgId:"layerProperties.exampleOfResponse"})),c().createElement("br",null),c().createElement(So.Z,{response:sm.text}))}},HTML:{titleId:"layerProperties.htmlFormatTitle",descId:"layerProperties.htmlFormatDescription",glyph:"ext-html",body:function(){return c().createElement("div",null,c().createElement("div",null,c().createElement(b.Z,{msgId:"layerProperties.exampleOfResponse"})),c().createElement("br",null),c().createElement(Eo.Z,{response:sm.html}))}},PROPERTIES:{titleId:"layerProperties.propertiesFormatTitle",descId:"layerProperties.propertiesFormatDescription",glyph:"ext-json",body:function(){return c().createElement("div",null,c().createElement("div",null,c().createElement(b.Z,{msgId:"layerProperties.exampleOfResponse"})),c().createElement("br",null),c().createElement(Po.Z,{response:sm.json}))}},TEMPLATE:{titleId:"layerProperties.templateFormatTitle",descId:"layerProperties.templateFormatDescription",glyph:"ext-empty",body:function(e){var t=e.template,r=void 0===t?"":t,n=cm(e,["template"]);return c().createElement("div",null,c().createElement("div",null,r&&"<p><br></p>"!==r?c().createElement(b.Z,{msgId:"layerProperties.templatePreview"}):null),c().createElement("br",null),c().createElement("div",null,r&&"<p><br></p>"!==r?c().createElement(jo.Z,{html:r}):c().createElement("span",null,c().createElement("p",null,c().createElement(b.Z,{msgId:"layerProperties.templateFormatInfoAlert2",msgParams:{attribute:"{ }"}})),c().createElement("pre",null,c().createElement(b.Z,{msgId:"layerProperties.templateFormatInfoAlertExample",msgParams:{properties:"{ properties.id }"}})),c().createElement("p",null,c().createElement("small",null,c().createElement(b.Z,{msgId:"layerProperties.templateFormatInfoAlert1"}))," ( ",c().createElement(g.Glyphicon,{glyph:"pencil"})," )")),c().createElement(qi,lm({template:r},n))))}}},gm=(0,R.defaultProps)({formatCards:bm,defaultInfoFormat:Object.assign({HIDDEN:"text/html"},(0,Co.eq)())})(rm),vm={},hm=function(e,t,r){if(e){var n=vm[e.name];return n||(n=(0,O.KB)(e,t,r))&&n.loaded&&(vm[e.name]=n),n}return e},Om=function(e){var t=e.settings,r=e.items,n=void 0===r?[]:r,o=e.loadedPlugins,i=e.onToggleStyleEditor,a=void 0===i?function(){}:i,l=e.onUpdateParams,s=void 0===l?function(){}:l,u=e.element,p=cm(e,["settings","items","loadedPlugins","onToggleStyleEditor","onUpdateParams","element"]);if(dm({element:u}))return{Component:pl};var f,d=wo()(ho()((f=n,function(e){if(Array.isArray(e))return am(e)}(f)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(f)||function(e,t){if(e){if("string"==typeof e)return am(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?am(e,t):void 0}}(f)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),{target:"style"}),["priority"]).filter((function(e){var t=e.selector;return!t||t(om(om({},p),{},{element:u}))})),m=de()(ho()(d,{name:"ThematicLayer"}));if(m){var y=t&&t.options&&t.options.thematic,b=[{glyph:"list",tooltipId:"toc.thematic.classify",visible:p.isAdmin&&!y||!1,onClick:function(){return s({thematic:{unconfigured:!0}})}},{glyph:"trash",tooltipId:"toc.thematic.remove_thematic",visible:p.isAdmin&&y||!1,onClick:function(){return s({thematic:null})}}];return y?{Component:"style"===p.activeTab&&m.plugin&&hm(m,o,c().createElement(Hi.Z,{width:100,height:100})),toolbar:b}:{toolbar:b}}var g=de()(d);if(g&&g.plugin){var v=g.cfg||g.plugin.cfg;return{onClose:function(){return a(null,!1)},Component:hm(om(om({},g),{},{cfg:om(om({},v||{}),{},{active:!0})}),o,c().createElement(Hi.Z,{width:100,height:100})),toolbarComponent:g.ToolbarComponent&&(v&&(0,R.defaultProps)(v)(g.ToolbarComponent)||g.ToolbarComponent)}}return{}};const wm=function(e){var t=e.showFeatureInfoTab,r=void 0===t||t,n=e.loadedPlugins,o=e.items,i=e.onToggleStyleEditor,a=cm(e,["showFeatureInfoTab","loadedPlugins","items","onToggleStyleEditor"]);return[{id:"general",titleId:"layerProperties.general",tooltipId:"layerProperties.general",glyph:"wrench",visible:!0,Component:xo.Z},{id:"display",titleId:"layerProperties.display",tooltipId:"layerProperties.display",glyph:"eye-open",visible:fm(a),Component:pm},om({id:"style",titleId:"layerProperties.style",tooltipId:"layerProperties.style",glyph:"dropper",visible:ym(a),Component:um},Om(om({items:o,loadedPlugins:n,onToggleStyleEditor:i},a))),{id:"feature",titleId:"layerProperties.featureInfo",tooltipId:"layerProperties.featureInfo",glyph:"map-marker",visible:r&&fm(a)&&mm(a)&&!(a.element.featureInfo&&a.element.featureInfo.viewer),Component:gm,toolbar:[{glyph:"pencil",tooltipId:"layerProperties.editCustomFormat",visible:!a.showEditor&&a.element&&a.element.featureInfo&&"TEMPLATE"===a.element.featureInfo.format||!1,onClick:function(){return a.onShowEditor&&a.onShowEditor(!a.showEditor)}}]},{id:"elevation",titleId:"layerProperties.elevation",tooltipId:"layerProperties.elevation",glyph:"1-vector",visible:fm(a)&&mm(a)&&a.element.dimensions&&a.getDimension&&a.getDimension(a.element.dimensions,"elevation"),Component:ci}].filter((function(e){return e.visible}))};var Em=(0,D.P1)([H.jN,H.l2,H.Bt,Q.Pz,Q.KV,function(e){return(0,Ke.ic)(e,{height:!0})},te.qg,J.Gd,J.tL,J.R4,H.Ci,re.wk],(function(e,t,r,n,o,i,a,l,c,s,u,p){return{settings:e,element:u,groups:r,currentLocale:n,currentLocaleLanguage:o,dockStyle:i,isAdmin:a,initialSettings:l,originalSettings:c,activeTab:s,isLocalizedLayerStylesEnabled:p}})),Sm=(0,R.compose)((0,p.connect)(Em,{onHideSettings:h.sF,onUpdateSettings:h.VP,onUpdateNode:h.tV,onRetrieveLayerData:W.k,onUpdateOriginalSettings:v.Xg.bind(null,"layersettings","originalSettings"),onUpdateInitialSettings:v.Xg.bind(null,"layersettings","initialSettings"),onSetTab:v.Xg.bind(null,"layersettings","activeTab"),onUpdateParams:h.Xy,onToggleStyleEditor:lo.Wv}),co.bR,(0,R.defaultProps)({getDimension:ne.Fr,enableLayerNameEditFeedback:!0}),(0,R.getContext)({loadedPlugins:u().object}),(0,R.withPropsOnChange)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.items,r=void 0===t?[]:t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=n.items;return r!==o}),(function(e){return{tabs:wm(e)}})))(go);const Pm=(0,O.rx)("TOCItemsSettings",{component:Sm,containers:{TOC:{doNotHide:!0,name:"TOCItemsSettings"}}});var jm=r(25958),Cm=r(84596),xm=r.n(Cm),Tm=r(66604),km=r.n(Tm);function Im(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Am=function e(t){var r=t.accessInfo,n=t.postProcessValue,o=t.reduceFun;return function(t){var i=xm()(t),a=o;return i.length>1&&"__OR__"===i[0]&&(a=function(e,t){return e||t},i=i.slice(1)),i.map((function(t){var i=t;if(Bl()(i))return e({accessInfo:r,postProcessValue:n,reduceFun:o})(i);var a=!1;i&&uo()(i)&&i.startsWith("!")&&(a=!0,i=i.substr(1));var l=function(e){return a?!e:e},c=uo()(i)&&i.split(":");if(c&&c[0]){var s=c[0].split(/\!\=\=?/),u=c[0].split(/\=\=?\=?/);return s.length>1?l(n(d()(r,s[0]),i)!==s[1]):u.length>1?l(n(d()(r,u[0]),i)===u[1]):l(n(d()(r,c[0]),i))}return i})).reduce(a||function(e,t){return e&&t})}};const Fm=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.asObject,n=void 0!==r&&r,o=t.postProcessValue,i=void 0===o?function(e){return e}:o,a=t.reduceFun,l=t.accessInfo,c=void 0===l?"accessInfo":l;return(0,R.withPropsOnChange)([e,c],(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Im({},e,n?km()(t[e],Am({accessInfo:t[c],postProcessValue:i,reduceFun:a})):Am({accessInfo:t[c],postProcessValue:i,reduceFun:a})(t[e]))}))},Dm=function(){return(0,R.compose)((0,p.connect)((0,D.P1)(X.J9,X._H,te.np,(function(e,t,r){return{accessInfo:{mapId:e,mapInfo:t,user:r}}}))),Fm.apply(void 0,arguments))},Rm=(0,p.connect)((0,D.P1)(Ke.Jz,Ke.VM,he.c0,(function(e,t,r){return{enabled:!e&&!t&&!r}})));var Nm=r(99171),Mm=r(38482);function Lm(){return(Lm=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var _m=r(69968);function Zm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Bm(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Zm(Object(r),!0).forEach((function(t){zm(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Zm(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function zm(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Gm=function(e){return d()(de()(e,(function(e){return e.color})),"color")};const Um=(0,R.withProps)((function(e){var t=e.groups,r=e.showGroupColor,n=e.headerStyle,o=void 0===n?{borderTop:"3px solid rgba(0,0,0,0)",transition:"border-color .5s ease-out"}:n;return{headerStyle:r&&t&&Gm(t)?Bm(Bm({},o),{},{borderTop:"3px solid ".concat(Gm(t))}):o}}));function Wm(){return(Wm=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Vm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function qm(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Vm(Object(r),!0).forEach((function(t){Hm(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Vm(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Hm(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $m(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}r(2903);var Km=(0,R.branch)((function(e){var t=e.useDefaultWidthProvider;return void 0===t||t}),_m.WidthProvider)(_m.Responsive),Ym=Um(r(43716).Z),Xm=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return e.filter((function(e){return ye()(e.widgets,(function(e){return e===t.id}))}))};const Qm=(0,R.pure)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,r=e.style,n=e.className,o=void 0===n?"":n,i=e.toolsOptions,a=void 0===i?{}:i,l=e.rowHeight,s=void 0===l?208:l,u=e.breakpoints,p=void 0===u?{lg:1200,md:996,sm:768,xs:480,xxs:0}:u,f=e.cols,d=void 0===f?{lg:6,md:6,sm:4,xs:2,xxs:1}:f,m=e.widgets,y=void 0===m?[]:m,b=e.layouts,g=e.dependencies,v=e.verticalCompact,h=void 0!==v&&v,O=e.compactMode,w=e.useDefaultWidthProvider,E=void 0===w||w,S=e.measureBeforeMount,P=e.width,j=e.showGroupColor,C=e.groups,x=void 0===C?[]:C,T=e.canEdit,k=void 0===T||T,I=e.getWidgetClass,A=void 0===I?function(){}:I,F=e.onWidgetClick,D=void 0===F?function(){}:F,R=e.updateWidgetProperty,N=void 0===R?function(){}:R,M=e.deleteWidget,L=void 0===M?function(){}:M,_=e.toggleCollapse,Z=void 0===_?function(){}:_,B=e.toggleMaximize,z=void 0===B?function(){}:B,G=e.editWidget,U=void 0===G?function(){}:G,W=e.onLayoutChange,V=void 0===W?function(){}:W,q=e.language,H=e.env,$=$m(e,["id","style","className","toolsOptions","rowHeight","breakpoints","cols","widgets","layouts","dependencies","verticalCompact","compactMode","useDefaultWidthProvider","measureBeforeMount","width","showGroupColor","groups","canEdit","getWidgetClass","onWidgetClick","updateWidgetProperty","deleteWidget","toggleCollapse","toggleMaximize","editWidget","onLayoutChange","language","env"]),K=y.filter((function(e){var t=e.mapSync,r=e.dependenciesMap;return t&&r})).map((function(e){return e.dependenciesMap})),Y=function(e){return"table"===e.widgetType&&K.filter((function(t){return Object.keys(t).filter((function(r){return t[r]&&-1!==t[r].indexOf(e.id)})).length>0})).length>0};return c().createElement(Km,{key:t||"widgets-view",useDefaultWidthProvider:E,measureBeforeMount:S,width:E?void 0:P,isResizable:k,isDraggable:k,draggableHandle:".draggableHandle",onLayoutChange:V,preventCollision:!0,style:r,className:"widget-container ".concat(o," ").concat(k?"":"no-drag"),rowHeight:s,autoSize:!0,verticalCompact:h,compactMode:O,breakpoints:p,cols:d,layouts:b?JSON.parse(JSON.stringify(km()(b,(function(e){return e.map((function(e){var t=ye()(y,{id:e.i});return t?qm(qm({},e),{},{isResizable:t.dataGrid&&t.dataGrid.isResizable,isDraggable:t.dataGrid&&t.dataGrid.isDraggable,static:t.dataGrid&&t.dataGrid.static}):e}))})))):void 0},y.map((function(e){return c().createElement("div",{key:e.id,"data-grid":e.dataGrid,onClick:function(){return D(e)},className:A(e)},c().createElement(Ym,Wm({"data-grid":e.dataGrid},$,e,{quickFilters:Y(e)?e.quickFilters:void 0,toolsOptions:a,groups:Xm(x,e),showGroupColor:j,dependencies:g,enableColumnFilters:Y(e),canEdit:k,updateProperty:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return N.apply(void 0,[e.id].concat(r))},toggleCollapse:function(){return Z(e)},toggleMaximize:function(){return z(e)},onDelete:function(){return L(e)},onEdit:function(){return U(e)},language:q,env:H})))})))}));function Jm(e){return(Jm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ey(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ty(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ry(e,t){return(ry=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ny(e,t){return!t||"object"!==Jm(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function oy(e){return(oy=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function iy(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ay(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?iy(Object(r),!0).forEach((function(t){ly(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iy(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ly(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var cy,sy=(0,R.compose)((0,p.connect)((0,D.P1)(X.J9,jm.E5,jm.p,jm.Jb,jm.h9,(function(e,t,r,n,o){return{id:e,widgets:t,layouts:r,maximized:n,dependencies:o}})),{editWidget:be.uT,updateWidgetProperty:be.Ij,exportCSV:be.sD,toggleCollapse:be.f,toggleMaximize:be.Pt,exportImage:be.Rb,deleteWidget:be.E9,onLayoutChange:be.c_}),(0,R.compose)((cy={debounceTime:20,closest:!0,querySelector:".fill"},(0,R.compose)((0,R.withStateHandlers)((function(){return{}}),{onResize:function(){return function(e){return{height:e.height}}}}),(0,Mm.Z)(cy))),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.overrideWidthProvider;return(0,R.compose)((0,R.defaultProps)({useDefaultWidthProvider:!t}),(function(e){return function(t){return c().createElement(Nm.Z,{handleWidth:!0},(function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.width;return c().createElement(e,Lm({width:n},t))}))}}))}({overrideWidthProvider:!1}),(0,R.withProps)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.width,r=e.height,n=e.maximized,o=r-120,i=4,a=Math.floor(o/i-20),l=null!=n&&n.widget?{width:"100%",height:"100%",marginTop:0,bottom:"auto",top:0,left:0,zIndex:1330}:{},c=null!=n&&n.widget?{width:t,useDefaultWidthProvider:!1,rowHeight:r-50,breakpoints:{xxs:0},cols:{xxs:1}}:{},s=t&&t>800?t-570:t-70,u=t?{width:s-1}:{};return ay(ay({rowHeight:a,className:"on-map",breakpoints:{md:480,xxs:0},cols:{md:6,xxs:1}},u),{},{useDefaultWidthProvider:!1,style:ay({left:t&&t>800?"500px":"0",marginTop:52,bottom:65,height:Math.floor((r-100)/(a+10))*(a+10),width:s+"px",position:"absolute",zIndex:50},l)},c)}))),(0,R.compose)((0,R.defaultProps)({toolsOptions:{showPin:"user.role===ADMIN",seeHidden:"user.role===ADMIN",showHide:!1,showCollapse:!0,showMaximize:!0}}),Dm("toolsOptions",{asObject:!0}),(0,R.compose)((0,p.connect)((0,D.P1)(jm.Xu,(function(e){return{tray:e}}))),(0,R.withPropsOnChange)(["toolsOptions","tray"],(function(e){var t=e.toolsOptions,r=e.tray;return{toolsOptions:t?ay(ay({},t),{},{showCollapse:t.showCollapse&&r}):t}}))),(0,R.withPropsOnChange)(["widgets","toolsOptions"],(function(e){var t=e.widgets,r=void 0===t?[]:t,n=e.toolsOptions,o=void 0===n?{}:n;return{widgets:r.filter((function(e){return!e.hide||o.seeHidden}))}}))))(Qm),uy=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ry(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=oy(n);if(o){var r=oy(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return ny(this,e)});function a(){return ey(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"render",value:function(){return this.props.enabled?c().createElement(sy,this.props):null}}])&&ty(t.prototype,r),a}(c().Component);ly(uy,"propTypes",{enabled:u().bool}),ly(uy,"defaultProps",{enabled:!0});var py=Rm(uy);const fy=(0,O.rx)("WidgetsPlugin",{component:py,containers:{TOC:{doNotHide:!0,name:"Widgets"}},reducers:{widgets:r(75859).Z},epics:r(88395).ZP});var dy=r(33528),my=r(4206),yy=r(7878),by=r(87392),gy=r(95797),vy=r(24260);function hy(e){return function(e){if(Array.isArray(e))return Oy(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Oy(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Oy(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Oy(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function wy(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ey(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?wy(Object(r),!0).forEach((function(t){Sy(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wy(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Sy(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Py=function(e){var t=(0,jm.GW)(e);return[t.search&&t.search.url,t.name]};const jy={openWidgetEditor:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.getState,n=void 0===r?function(){}:r;return e.ofType(be.AE,be.dm,be.IT).filter((function(){return(0,J.PJ)(n())})).switchMap((function(){return oa.Observable.of((0,v.Xg)("widgetBuilder","enabled",!0),(0,v.Xg)("metadataexplorer","enabled",!1))}))},closeWidgetEditorOnFinish:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.getState,n=void 0===r?function(){}:r;return e.ofType(be.Jm,h.oE).filter((function(){return(0,J.PJ)(n())})).switchMap((function(){return oa.Observable.of((0,v.Xg)("widgetBuilder","enabled",!1))}))},initEditorOnNew:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.getState,n=void 0===r?function(){}:r;return e.ofType(be.AE).filter((function(){return(0,J.PJ)(n())})).switchMap((function(e){return oa.Observable.of((0,be.bS)(Ey(Ey({legend:!1,mapSync:!0,cartesian:!0,yAxis:!0},e),{},{type:void 0}),{step:0}))}))},initEditorOnNewChart:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.getState,n=void 0===r?function(){}:r;return e.ofType(be.IT).filter((function(){return(0,J.PJ)(n())})).switchMap((function(e){return oa.Observable.of((0,dy.YV)(),(0,be.bS)(Ey(Ey({legend:!1,mapSync:!0,cartesian:!0,yAxis:!0,widgetType:"chart",filter:(0,vy.X1)(n())},e),{},{type:void 0}),{step:0}),(0,be.Rz)("returnToFeatureGrid",!0))}))},handleWidgetsFilterPanel:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.getState,n=void 0===r?function(){}:r;return e.ofType(be.lG).filter((function(){return(0,J.PJ)(n())})).switchMap((function(){return oa.Observable.of(gy.gT.apply(void 0,hy(Py(n()))),(0,yy.F)((0,jm.um)(n())),(0,v.Xg)("widgetBuilder","enabled",!1),(0,v.Xg)("queryPanel","enabled",!0)).concat(oa.Observable.race(e.ofType(yy.Wm).take(1),e.ofType(v.kM).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.control,r=e.property;return"queryPanel"===t&&(!r||"enabled"===r)})).take(1)).switchMap((function(e){return(e.filterObj?oa.Observable.of((0,be.Rz)("filter",e.filterObj)):oa.Observable.empty()).merge(oa.Observable.of((0,v.Xg)("widgetBuilder","enabled",!0)))}))).takeUntil(e.ofType(by.nk,be.dm).merge(e.ofType(v.kM).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.control,r=e.property;return"widgetBuilder"===t&&0==!r})))).concat(oa.Observable.of((0,my.bp)(),(0,v.Xg)("queryPanel","enabled",!1)))}))}};var Cy=r(16919);const xy=(0,R.compose)((0,p.connect)((function(e){return{returnToFeatureGrid:(0,jm.Wo)(e)}}),{backToWidgetList:function(){return(0,be.Rz)("widgetType",void 0)},closeWidgetBuilder:function(){return(0,v.Xg)("widgetBuilder","enabled",!1,!1)},openFeatureGridTable:function(){return(0,dy.t9)()}}),(0,R.withHandlers)({backFromWizard:function(e){var t=e.backToWidgetList,r=void 0===t?function(){}:t,n=e.closeWidgetBuilder,o=void 0===n?function(){}:n,i=e.openFeatureGridTable,a=void 0===i?function(){}:i,l=e.returnToFeatureGrid;return function(){l?(o(),a()):r()}}}),(0,R.withProps)((function(e){var t=e.returnToFeatureGrid,r=e.backFromWizard;return{exitButton:{onClick:void 0===r?function(){}:r,glyph:"arrow-left",tooltipId:t?"widgets.builder.wizard.backToFeatureGrid":"widgets.builder.wizard.backToWidgetTypeSelection"}}})));var Ty=r(73849),ky=r(86850),Iy=r(75875),Ay=r.n(Iy),Fy=r(10284),Dy=r(99767),Ry=function(e,t){return oa.Observable.defer((function(){return Ay().get((0,Dy.Jy)(e,{version:"1.0.0",REQUEST:"DescribeProcess",IDENTIFIER:t}),{timeout:5e3,headers:{Accept:"application/json","Content-Type":"application/xml"}})})).let(Fy.oB)};function Ny(e){return Ry(e.url,"gs:Aggregate")}var My=r(78889);function Ly(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=r){var n,o,i=[],a=!0,l=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(l)throw o}}return i}}(e,t)||Zy(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _y(e){return function(e){if(Array.isArray(e))return By(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Zy(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Zy(e,t){if(e){if("string"==typeof e)return By(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?By(e,t):void 0}}function By(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var zy="ALL";const Gy=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.needsWPS;return(0,R.compose)((0,R.defaultProps)({dataStreamFactory:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.onEditorChange,o=void 0===n?function(){}:n,i=r.onConfigurationError,a=void 0===i?function(){}:i;return e.distinctUntilChanged((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.layer,r=void 0===t?{}:t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=n.layer;return r.name===o.name})).switchMap((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.layer;return oa.Observable.forkJoin.apply(oa.Observable,[(0,ky.v$)({layer:r})].concat(_y(t?[Ny(r)]:[Ny(r).catch((function(){return oa.Observable.of(!1)}))]))).do((function(e){var t=Ly(e,1)[0],r=d()((0,My.findGeometryProperty)(t.data||{}),"name");r&&o("geomProp",r)})).map((function(e){var t=Ly(e,2),r=t[0];return{hasAggregateProcess:!!t[1],loading:!1,types:zy,featureTypeProperties:d()(r,"data.featureTypes[0].properties")||[]}}))})).catch((function(e){return a(e),oa.Observable.of({errorObj:e,loading:!1,featureTypeProperties:[]})})).startWith({loading:!0})}}),Ty.Z,(0,ea.Z)(),(0,ta.Z)((function(e){var t=e.featureTypeProperties,r=void 0===t?[]:t,n=e.types,o=void 0===n?[]:n;return 0===r.length||0===o.length}),(function(){return{title:c().createElement(yp.v0,{msgId:"widgets.builder.errors.noWidgetsAvailableTitle"}),description:c().createElement(yp.k9,{msgId:"widgets.builder.errors.noWidgetsAvailableDescription"})}})))},Uy=(0,R.withProps)((function(e){var t=e.onResetChange,r=void 0===t?function(){}:t;return{stepButtons:[{glyph:"arrow-left",tooltipId:"widgets.builder.wizard.backToWidgetTypeSelection",onClick:function(){r("options",void 0),r("widgetType",void 0)}}]}}));var Wy=r(80833),Vy=r(76712);function qy(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Hy(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?qy(Object(r),!0).forEach((function(t){$y(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qy(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function $y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const Ky=(0,R.compose)((0,R.withState)("selected","setSelected",null),(0,R.withState)("layer","setLayer",null),(0,R.mapPropsStream)((function(e){return e.distinctUntilKeyChanged("selected").filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.selected;return t})).switchMap((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.selected,r=e.layerValidationStream,n=void 0===r?function(e){return e}:r,o=e.setLayer,i=void 0===o?function(){}:o;return oa.Observable.of((0,Vy.ll)(t)).let(n).switchMap((function(){return(0,Wy.HI)((0,Vy.ll)(t))})).do((function(e){return i(e)})).mapTo({canProceed:!0}).catch((function(e){return oa.Observable.of({error:e,canProceed:!1})}))})).startWith({}).combineLatest(e,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.canProceed,r=e.error,n=arguments.length>1?arguments[1]:void 0;return Hy({error:r,canProceed:t},n)}))}))),Yy=(0,p.connect)((function(){return{}}),{onLayerChoice:function(e){return(0,be.Rz)("layer",e)},onResetChange:be.Rz}),Xy=(0,R.compose)((0,R.setDisplayName)("ChartLayerSelector"),Yy,(0,R.defaultProps)({layerValidationStream:function(e){return e.switchMap((function(e){return function(e){return oa.Observable.forkJoin((0,ky.v$)({layer:e}))}(e)}))}}),Uy,Ky),Qy=function(e){return(0,R.withHandlers)({toggleConnection:function(t){var r=t.toggleConnection,n=void 0===r?function(){}:r,o=t.editorData,i=void 0===o?{}:o;return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return n(!i.mapSync,t,{dependenciesMap:i.dependenciesMap,mappings:e,sourceWidgetType:i.widgetType})}}})};var Jy=function(e,t,r){return"table"===t&&0===e.filter((function(e){return Object.keys(e).filter((function(t){return e[t]&&-1!==e[t].indexOf(r.id)})).length>0})).length};const eb=(0,R.compose)((0,R.withProps)((function(e){var t=e.editorData,r=void 0===t?{}:t,n=e.widgets,o=(void 0===n?[]:n).filter((function(e){var t=e.mapSync,r=e.dependenciesMap;return t&&r})).map((function(e){return e.dependenciesMap}));return{canConnect:r.geomProp&&"table"!==r.widgetType||Jy(o,r.widgetType,r),connected:r.mapSync}})),Qy({viewport:"viewport",layers:"layers",filter:"filter",quickFilters:"quickFilters",layer:"layer",options:"options",mapSync:"mapSync",dependenciesMap:"dependenciesMap"})),tb=(0,R.compose)((0,p.connect)((0,D.P1)(jm.xI,(function(e){return{widgetSelectionActive:e}}))),(0,dl.Z)((function(e){return e.widgetSelectionActive}),(function(){return c().createElement("div",{style:{margin:"auto"}},c().createElement(b.Z,{msgId:"widgets.builder.wizard.selectMapToConnect"}))}),{alwaysWrap:!0}));function rb(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function nb(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rb(Object(r),!0).forEach((function(t){ob(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rb(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ob(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ib(e){return function(e){if(Array.isArray(e))return ab(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return ab(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ab(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ab(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function lb(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}const cb=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(e){return 0===e.step},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,R.withProps)((function(r){var n=r.stepButtons,o=void 0===n?[]:n,i=r.exitButton,a=lb(r,["stepButtons","exitButton"]);return{stepButtons:[nb(nb({},i),{},{visible:e(nb({stepButtons:o,exitButton:i},a))},t)].concat(ib(o))}}))};function sb(e){return function(e){if(Array.isArray(e))return ub(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return ub(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ub(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ub(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function pb(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}const fb=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){return!0};return(0,R.compose)((0,R.withProps)((function(t){var r=t.disableMultiDependencySupport,n=t.stepButtons,o=void 0===n?[]:n,i=t.toggleConnection,a=void 0===i?function(){}:i,l=t.availableDependencies,c=void 0===l?[]:l,s=t.canConnect,u=t.connected,p=pb(t,["disableMultiDependencySupport","stepButtons","toggleConnection","availableDependencies","canConnect","connected"]);return{stepButtons:[].concat(sb(o),[{onClick:function(){return a(c)},disabled:r,visible:!!e(p)&&!!s&&c.length>0,bsStyle:u?"success":"primary",glyph:u?"plug":"unplug",tooltipId:u?"widgets.builder.wizard.clearConnection":1===c.length?"widgets.builder.wizard.connectToTheMap":"widgets.builder.wizard.connectToAMap"}])}})))};var db=r(67306);function mb(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function yb(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?mb(Object(r),!0).forEach((function(t){bb(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mb(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function bb(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var gb=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return yb(yb(yb(yb({},r),e),t),{},{step:e&&e.settings&&e.settings.step,valid:e&&e.settings&&e.settings.valid,onFinish:function(){return t.insertWidget&&t.insertWidget(yb({layer:e.layer,url:e.layer&&e.layer.url},e.editorData||{}),r.target)}})},vb=(0,D.P1)(jm.GW,jm.YI,jm.E2,jm.zm,db.i$,(function(e,t,r,n,o){return{layer:t&&t.layer||e,editorData:t,settings:r,widgets:n,dashBoardEditing:o}}));function hb(e){return(hb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ob(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wb(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Eb(e,t){return(Eb=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Sb(e,t){return!t||"object"!==hb(t)&&"function"!=typeof t?Pb(e):t}function Pb(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jb(e){return(jb=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Cb(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}(0,D.P1)(jm.YI,db.P0,jm.h9,jm.zA,(function(e,t,r,n){return yb({layer:e.layer,showConnections:t,dependencies:r},n)})),(0,D.P1)(re.Yf,Q.KV,re.fY,(function(e,t,r){return{isLocalizedLayerStylesEnabled:!vc()(e),language:t,env:r}})),jm.GW,jm.zA;var xb=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Eb(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=jb(n);if(o){var r=jb(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Sb(this,e)});function a(){var e;Ob(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Cb(Pb(e=i.call.apply(i,[this].concat(r))),"renderButtons",(function(){var t=[],r=e.props,n=r.isStepValid,o=r.children,i=void 0===o?[]:o,a=i.length>=0?i.length:1;return e.props.hideButtons?null:(e.props.step>0&&t.push(c().createElement(Je.Z,{key:"prev",className:"ms-wizard-prev",onClick:function(){return e.props.onPrevPage()}},c().createElement(b.Z,{msgId:"wizard.prev"}))),e.props.step>=a-1?t.push(c().createElement(Je.Z,{key:"finish",className:"ms-wizard-finish",onClick:function(){return e.props.onFinish()}},c().createElement(b.Z,{msgId:"wizard.finish"}))):e.props.step<a-1&&a>1&&t.push(c().createElement(Je.Z,{key:"next",className:"ms-wizard-next",disabled:!n(e.props.step),onClick:function(){return e.props.onNextPage()}},c().createElement(b.Z,{msgId:"wizard.next"}))),t)})),e}return t=a,(r=[{key:"render",value:function(){var e=this,t=this.props.children||[],r=t.length>=0?t.length:1;return c().createElement("div",{key:"wizard-pages",className:"ms-wizard"},c().Children.map(t,(function(t,n){return n===e.props.step?c().cloneElement(t,{key:"wizard-component-".concat(n),onNextPage:e.props.step===r-1?e.props.onFinish:e.props.onNextPage,onPrevPage:e.props.onPrevPage}):null})),c().createElement(g.Row,{key:"wizard-buttons",className:"ms-wizard-buttons"},this.renderButtons()))}}])&&wb(t.prototype,r),a}(c().Component);Cb(xb,"propTypes",{step:u().number,hideButtons:u().bool,onNextPage:u().func,onPrevPage:u().func,buttonType:u().node,onFinish:u().func,isStepValid:u().func}),Cb(xb,"defaultProps",{step:0,isStepValid:function(){return!0},hideButtons:!1,onNextPage:function(){},onPrevPage:function(){},onFinish:function(){}});const Tb=xb;var kb=(0,R.compose)((0,R.withPropsOnChange)(["step"],(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.skipButtonsOnSteps,r=void 0===t?[]:t,n=e.step,o=e.hideButtons;return r&&r.indexOf(n)>=0?{hideButtons:!0}:{hideButtons:o}})),(0,R.withHandlers)({onNextPage:function(e){var t=e.step,r=e.setPage,n=void 0===r?function(){}:r;return function(){n(t+1)}},onPrevPage:function(e){var t=e.step,r=e.setPage,n=void 0===r?function(){}:r;return function(){n(Math.max(t-1,0))}}}));(0,R.compose)((0,R.withState)("step","setPage",0),kb);const Ib=function(e){return(0,ta.Z)(e,{title:c().createElement(b.Z,{msgId:"widgets.builder.errors.noAttributesTitle"}),description:c().createElement(b.Z,{msgId:"widgets.builder.errors.noAttributesDescription"}),glyph:"warning-sign"})},Ab=(0,R.defaultProps)({data:[{name:"A",variable:2,pv:2,amt:2},{name:"B",variable:.5,pv:.5,amt:.5},{name:"C",variable:3,pv:3,amt:3},{name:"D",variable:1,pv:1,amt:2}],series:[{dataKey:"variable",color:"#078aa3"}],xAxis:{dataKey:"name",show:!1}});var Fb=r(28315);const Db=function(e){var t=e.title,r=e.description;return c().createElement(g.Row,null,c().createElement(g.Col,{xs:12,className:"text-center"},c().createElement("div",{className:"mapstore-step-title"},t),c().createElement("div",{className:"mapstore-step-description"},r)))};function Rb(){return(Rb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Nb(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Mb(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Nb(Object(r),!0).forEach((function(t){Lb(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Nb(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Lb(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var _b=Ab(Fb.Z),Zb={xAxisAngle:0,legend:!1,tooltip:!1,cartesian:!1,width:100,height:100,popup:!1},Bb=[{type:"bar"},{type:"pie"},{type:"line"}].map((function(e){var t=e.type;return{type:t,title:c().createElement(b.Z,{msgId:"widgets.chartType.".concat(t,".title")}),description:c().createElement(b.Z,{msgId:"widgets.chartType.".concat(t,".description")}),caption:c().createElement(b.Z,{msgId:"widgets.chartType.".concat(t,".caption")})}}));const zb=(0,R.shouldUpdate)((function(e,t){var r=e.types,n=e.type,o=t.types;return n!==t.type&&r!==o}))((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onSelect,r=void 0===t?function(){}:t,n=e.onNextPage,o=void 0===n?function(){}:n,i=e.types,a=void 0===i?Bb:i,l=e.type;return c().createElement(g.Row,null,c().createElement(Db,{key:"title",title:c().createElement(b.Z,{msgId:"widgets.selectChartType.title"})}),c().createElement(yl.Z,{key:"content",onItemClick:function(e){r(e.type),o()},items:a&&Bb.map((function(e){return Mb(Mb({},e),{},{selected:e.type===l,preview:c().createElement(_b,Rb({},Zb,{type:e.type,autoColorOptions:e.type===l?{base:0,s:0,v:0}:void 0}))})}))}))}));var Gb=function(e){return e.filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type;return 0!==t.indexOf("gml:")})).map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name;return{label:t,value:t}}))},Ub=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=ye()(t,{name:e});return!r||"number"!==r.localType&&"int"!==r.localType?[{value:"Count",label:"widgets.operations.COUNT"}]:[{value:"Count",label:"widgets.operations.COUNT"},{value:"Sum",label:"widgets.operations.SUM"},{value:"Average",label:"widgets.operations.AVG"},{value:"StdDev",label:"widgets.operations.STDDEV"},{value:"Min",label:"widgets.operations.MIN"},{value:"Max",label:"widgets.operations.MAX"}]};const Wb=(0,R.compose)((0,R.withProps)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.featureTypeProperties,r=void 0===t?[]:t,n=e.data,o=void 0===n?{}:n;return{options:Gb(r),aggregationOptions:("counter"!==(null==o?void 0:o.widgetType)?[{value:"None",label:"widgets.operations.NONE"}]:[]).concat(Ub(o.options&&o.options.aggregationAttribute,r))}})),(0,bl.Z)("aggregationOptions"));var Vb=r(45869),qb=r(52595);function Hb(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function $b(e){var t,r,n=e.showOnRender,o=e.placement,i=e.id,a=e.left,s=e.top,u=e.title,p=e.text,f=e.bsStyle,d=void 0===f?"info":f,m=e.glyph,y=void 0===m?"question-sign":m,b=(t=(0,l.useState)(n),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=r){var n,o,i=[],a=!0,l=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(l)throw o}}return i}}(t,r)||function(e,t){if(e){if("string"==typeof e)return Hb(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Hb(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),v=b[0],h=b[1],O=(0,l.useRef)(null);return c().createElement(c().Fragment,null,c().createElement(g.Glyphicon,{onClick:function(){return h(!v)},ref:function(e){return O.current=e},style:{cursor:"pointer"},className:"text-".concat(d),glyph:y}),c().createElement(qb.Z,{target:O.current,show:v,placement:o},c().createElement(g.Popover,{id:i,placement:o,positionLeft:a,positionTop:s,title:u},c().createElement(g.Glyphicon,{glyph:"1-close",style:{position:"absolute",right:0,top:0,margin:8},onClick:function(){return h(!1)}}),p)))}var Kb=r(64647),Yb=r.n(Kb),Xb=r(12226);function Qb(){return(Qb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Jb(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=r){var n,o,i=[],a=!0,l=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return eg(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?eg(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function eg(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var tg={value:1};function rg(e){try{if(!e)return[!0];var t=(0,Xb.B)(e,tg);return[!vc()(t)&&!Kr()(t)&&!Yb()(t),t]}catch(e){return[!1,e]}}function ng(e,t){return e?null:vc()(t)?"the expression returns no value":Kr()(t)?"the expression returned NaN":Yb()(t)?t.message:null}function og(e,t){return t?e?"success":"error":null}function ig(e){var t=e.onChange,r=e.value,n=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["onChange","value"]),o=Jb(rg(r),2),i=o[0],a=o[1],s=Jb((0,l.useState)(i),2),u=s[0],p=s[1],f=Jb((0,l.useState)(a),2),d=f[0],m=f[1],y=Jb((0,l.useState)(r),2),v=y[0],h=y[1];return c().createElement(g.FormGroup,{validationState:og(u,v)},c().createElement(g.Col,{xs:12},c().createElement(g.ControlLabel,null,c().createElement(b.Z,{msgId:"widgets.advanced.formula"})),c().createElement($b,{placement:"top",title:c().createElement(b.Z,{msgId:"widgets.advanced.formula"}),text:c().createElement(xl.Z,{msgId:"widgets.advanced.formulaExamples"})}),c().createElement(g.FormControl,Qb({placeholder:"e.g. value / 100",feedback:ng(u,d)},n,{type:"text",value:v,onChange:function(e){var r=Jb(rg(e.target.value),2),n=r[0],o=r[1];n?(p(!0),m(void 0),t(e)):(p(!1),m(o)),h(e.target.value)}}))))}var ag=(0,bl.Z)("options")(Hr.ZP),lg=[{value:"-",label:"widgets.advanced.axisTypes.auto"},{value:"linear",label:"widgets.advanced.axisTypes.linear"},{value:"category",label:"widgets.advanced.axisTypes.category"},{value:"log",label:"widgets.advanced.axisTypes.log"},{value:"date",label:"widgets.advanced.axisTypes.date"}];function cg(e){var t=e.data;return c().createElement("span",null,c().createElement("span",{style:{cursor:"pointer"}},c().createElement(b.Z,{msgId:"widgets.advanced.title"})),c().createElement("button",{className:"close"},t.panel?c().createElement(g.Glyphicon,{glyph:"glyphicon glyphicon-collapse-down"}):c().createElement(g.Glyphicon,{glyph:"glyphicon glyphicon-expand"})))}function sg(e){var t,r,n,o,i,a,l,s,u,p,f,d,m,y=e.data,v=e.onChange,h=void 0===v?function(){}:v;return c().createElement(op.Z,{id:"displayCartesian",header:c().createElement(cg,{data:y}),collapsible:!0,expanded:y.panel,onSwitch:function(e){h("panel",e)}},c().createElement(g.FormGroup,{controlId:"AdvancedOptions"},c().createElement(g.Col,{componentClass:g.ControlLabel,sm:6},c().createElement(b.Z,{msgId:"widgets.advanced.displayCartesian"})),c().createElement(g.Col,{sm:6},c().createElement(Vb.Z,{checked:!(!y.cartesian&&!1!==y.cartesian||y.cartesian),onChange:function(e){h("cartesian",!e)}})),c().createElement(g.Col,{componentClass:"label",sm:12},c().createElement(b.Z,{msgId:"widgets.advanced.yAxis"})),c().createElement(g.Col,{componentClass:g.ControlLabel,sm:6},c().createElement(b.Z,{msgId:"widgets.advanced.xAxisType"})),c().createElement(g.Col,{sm:6},c().createElement(ag,{value:y.yAxisOpts&&y.yAxisOpts.type||"-",options:lg,onChange:function(e){h("yAxisOpts.type",e&&e.value)}})),c().createElement(g.Col,{componentClass:g.ControlLabel,sm:6},c().createElement(b.Z,{msgId:"widgets.advanced.hideLabels"})),c().createElement(g.Col,{sm:6},c().createElement(Vb.Z,{checked:!y.yAxis&&!1!==y.yAxis||!y.yAxis,onChange:function(e){h("yAxis",!e)}})),c().createElement(g.Col,{componentClass:g.ControlLabel,sm:12},c().createElement(b.Z,{msgId:"widgets.advanced.format"})),c().createElement(g.Col,{sm:4},c().createElement(g.ControlLabel,null,c().createElement(b.Z,{msgId:"widgets.advanced.prefix"}),c().createElement(g.FormControl,{placeholder:"e.g.: ~",disabled:!1===y.yAxis,value:null==y||null===(t=y.yAxisOpts)||void 0===t?void 0:t.tickPrefix,type:"text",onChange:function(e){return h("yAxisOpts.tickPrefix",e.target.value)}}))),c().createElement(g.Col,{sm:4},c().createElement(g.ControlLabel,null,c().createElement(b.Z,{msgId:"widgets.advanced.format"})),c().createElement($b,{placement:"top",title:c().createElement(b.Z,{msgId:"widgets.advanced.examples"}),text:c().createElement(xl.Z,{msgId:"widgets.advanced.formatExamples"})}),c().createElement(g.FormControl,{placeholder:"e.g.: .2s",disabled:!1===y.yAxis,value:null==y||null===(r=y.yAxisOpts)||void 0===r?void 0:r.format,type:"text",onChange:function(e){return h("yAxisOpts.format",e.target.value)}})),c().createElement(g.Col,{sm:4},c().createElement(g.ControlLabel,null,c().createElement(b.Z,{msgId:"widgets.advanced.suffix"})),c().createElement(g.FormControl,{placeholder:"e.g.: W",disabled:!1===y.yAxis,value:null==y||null===(n=y.yAxisOpts)||void 0===n?void 0:n.tickSuffix,type:"text",onChange:function(e){return h("yAxisOpts.tickSuffix",e.target.value)}})),c().createElement(g.Col,{sm:12},c().createElement(ig,{disabled:!1===y.yAxis,value:y.formula,type:"text",onChange:function(e){return h("formula",e.target.value)}})),c().createElement(g.Col,{componentClass:"label",sm:12},c().createElement(b.Z,{msgId:"widgets.advanced.xAxis"})),c().createElement(g.Col,{componentClass:g.ControlLabel,sm:6},c().createElement(b.Z,{msgId:"widgets.advanced.xAxisType"})),c().createElement(g.Col,{sm:6},c().createElement(ag,{value:null!==(o=null==y||null===(i=y.xAxisOpts)||void 0===i?void 0:i.type)&&void 0!==o?o:"-",options:lg,onChange:function(e){h("xAxisOpts.type",e&&e.value)}})),c().createElement(g.Col,{componentClass:g.ControlLabel,sm:6},c().createElement(b.Z,{msgId:"widgets.advanced.hideLabels"})),c().createElement(g.Col,{sm:6},c().createElement(Vb.Z,{checked:null!==(a=null==y||null===(l=y.xAxisOpts)||void 0===l?void 0:l.hide)&&void 0!==a&&a,onChange:function(e){h("xAxisOpts.hide",e)}})),c().createElement(g.Col,{componentClass:g.ControlLabel,sm:6},c().createElement(b.Z,{msgId:"widgets.advanced.forceTicks"})),c().createElement(g.Col,{sm:6},c().createElement(Vb.Z,{disabled:null!==(s=null==y||null===(u=y.xAxisOpts)||void 0===u?void 0:u.hide)&&void 0!==s&&s,checked:!(null==y||null===(p=y.xAxisOpts)||void 0===p||!p.nTicks),onChange:function(e){h("xAxisOpts.nTicks",e?200:void 0)}}),c().createElement("span",{style:{position:"relative",top:-5,margin:10}},c().createElement(Ql.Z,{bsStyle:"info",text:c().createElement(b.Z,{msgId:"widgets.advanced.maxXAxisLabels",msgParams:{max:200}})}))),c().createElement(g.Col,{componentClass:g.ControlLabel,sm:6},c().createElement(b.Z,{msgId:"widgets.advanced.xAxisAngle"})),c().createElement(g.Col,{sm:6,style:{display:"flex"}},c().createElement(Vb.Z,{disabled:null!==(f=null==y||null===(d=y.xAxisOpts)||void 0===d?void 0:d.hide)&&void 0!==f&&f,checked:void 0!==y.xAxisAngle,onChange:function(e){h("xAxisAngle",e?0:void 0)}}),c().createElement("div",{style:{flexGrow:1,padding:5}},void 0!==y.xAxisAngle?c().createElement("div",{className:"mapstore-slider with-tooltip",onClick:function(e){e.stopPropagation()}},c().createElement(Oc.Z,{disabled:!(null==y||null===(m=y.xAxisOpts)||void 0===m||!m.hide),key:"priority",format:{to:function(e){return"".concat(parseInt(e,10),"°")},from:function(e){return Number(e)}},onSlide:function(e){h("xAxisAngle",parseInt(e[0],10))},range:{min:-90,max:90},start:[vc()(y.xAxisAngle)?0:y.xAxisAngle],step:15,tooltips:[!0]})):c().createElement("div",{style:{textAlign:"center"}},"Auto")))),c().createElement(g.FormGroup,{controlId:"yAxisLabel"},c().createElement(g.Col,{componentClass:"label",sm:12},c().createElement(b.Z,{msgId:"widgets.advanced.legend"})),c().createElement(g.Col,{componentClass:g.ControlLabel,sm:6},c().createElement(b.Z,{msgId:"widgets.advanced.yAxisLabel"})),c().createElement(g.Col,{sm:6},c().createElement(g.FormControl,{value:y.yAxisLabel,type:"text",onChange:function(e){return h("yAxisLabel",e.target.value)}}))))}function ug(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function pg(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ug(Object(r),!0).forEach((function(t){fg(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ug(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function fg(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var dg=[{name:"global.colors.random",schema:"qualitative",options:{base:190,range:360,options:{}}},{name:"global.colors.blue",schema:"sequencial",options:{base:190,range:20}},{name:"global.colors.red",schema:"sequencial",options:{base:10,range:4}},{name:"global.colors.green",schema:"sequencial",options:{base:120,range:4}},{name:"global.colors.brown",schema:"sequencial",options:{base:30,range:4}},{name:"global.colors.purple",schema:"sequencial",options:{base:300,range:4}}],mg=function(e){return"pie"!==e?dg.filter((function(e){return"qualitative"!==e.schema})):dg},yg=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"widgets.".concat(e,".").concat(t.type||t.widgetType||"default")},bg=c().createElement(b.Z,{msgId:yg("placeHolder")});const gg=function(e){var t=e.hasAggregateProcess,r=e.data,n=void 0===r?{options:{}}:r,o=e.onChange,i=void 0===o?function(){}:o,a=e.options,l=void 0===a?[]:a,s=e.formOptions,u=void 0===s?{showGroupBy:!0,showUom:!1,showColorRampSelector:!0,showLegend:!0,advancedOptions:!0}:s,p=e.aggregationOptions,f=void 0===p?[]:p,m=e.sampleChart;return c().createElement(g.Row,null,c().createElement(Db,{title:c().createElement(b.Z,{msgId:"widgets.chartOptionsTitle"})}),c().createElement(g.Col,{xs:12,style:{position:"sticky",top:0,zIndex:1,background:"linear-gradient(to top, rgba(255,255,255,0), rgba(255,255,255, 1) 30px)"}},c().createElement("div",{style:{marginBottom:"30px"}},m)),c().createElement(g.Col,{xs:12},c().createElement(g.Form,{className:"chart-options-form",horizontal:!0},u.showGroupBy?c().createElement(g.FormGroup,{controlId:"groupByAttributes",className:"mapstore-block-width"},c().createElement(g.Col,{componentClass:g.ControlLabel,sm:6},c().createElement(b.Z,{msgId:yg("groupByAttributes",n)})),c().createElement(g.Col,{sm:6},c().createElement(Hr.ZP,{value:n.options&&n.options.groupByAttributes,options:l,placeholder:bg,onChange:function(e){i("options.groupByAttributes",e&&e.value)}}))):null,c().createElement(g.FormGroup,{controlId:"aggregationAttribute",className:"mapstore-block-width"},c().createElement(g.Col,{componentClass:g.ControlLabel,sm:6},c().createElement(b.Z,{msgId:yg("aggregationAttribute",n)})),c().createElement(g.Col,{sm:6},c().createElement(Hr.ZP,{value:n.options&&n.options.aggregationAttribute,options:l,placeholder:bg,onChange:function(e){i("options.aggregationAttribute",e&&e.value)}}))),t?c().createElement(g.FormGroup,{controlId:"aggregateFunction",className:"mapstore-block-width"},c().createElement(g.Col,{componentClass:g.ControlLabel,sm:6},c().createElement(b.Z,{msgId:yg("aggregateFunction",n)})),c().createElement(g.Col,{sm:6},c().createElement(Hr.ZP,{value:n.options&&n.options.aggregateFunction,options:f,placeholder:bg,onChange:function(e){i("options.aggregateFunction",e&&e.value)}}))):null,u.showUom?c().createElement(g.FormGroup,{controlId:"uom"},c().createElement(g.Col,{componentClass:g.ControlLabel,sm:6},c().createElement(b.Z,{msgId:yg("uom",n)})),c().createElement(g.Col,{sm:6},c().createElement(g.FormControl,{value:d()(n,"options.seriesOptions[0].uom"),type:"text",onChange:function(e){return i("options.seriesOptions.[0].uom",e.target.value)}}))):null,u.showColorRampSelector?c().createElement(g.FormGroup,{controlId:"colorRamp",className:"mapstore-block-width"},c().createElement(g.Col,{componentClass:g.ControlLabel,sm:6},c().createElement(b.Z,{msgId:yg("colorRamp",n)})),c().createElement(g.Col,{sm:6},c().createElement(Cc,{items:mg(n.type),value:de()(mg(n.type).filter((function(e){return n.autoColorOptions&&e.name===n.autoColorOptions.name}))),samples:"pie"===n.type?5:1,onChange:function(e){i("autoColorOptions",pg(pg({},e.options),{},{name:e.name}))}}))):null,u.showLegend?c().createElement(g.FormGroup,{controlId:"displayLegend"},c().createElement(g.Col,{componentClass:g.ControlLabel,sm:6},c().createElement(b.Z,{msgId:yg("displayLegend",n)})),c().createElement(g.Col,{sm:6},c().createElement(Vb.Z,{checked:n.legend,onChange:function(e){i("legend",e)}}))):null,!u.advancedOptions||"chart"!==n.widgetType||"bar"!==n.type&&"line"!==n.type?null:c().createElement(sg,{data:n,onChange:i}))))},vg=function(e){var t=e.data,r=void 0===t?{}:t,n=e.onChange,o=void 0===n?function(){}:n,i=e.sampleChart;return c().createElement(g.Row,null,c().createElement(Db,{title:c().createElement(b.Z,{msgId:"widgets.widgetOptionsTitle"})}),c().createElement(g.Col,{key:"sample",xs:12},c().createElement("div",{style:{marginBottom:"30px"}},i)),c().createElement(g.Col,{key:"form",xs:12},c().createElement(g.Form,{className:"widget-options-form",horizontal:!0},c().createElement(g.FormGroup,{controlId:"groupByAttributes"},c().createElement(g.Col,{componentClass:g.ControlLabel,sm:6},c().createElement(b.Z,{msgId:"widgets.title"})),c().createElement(g.Col,{sm:6},c().createElement(g.FormControl,{value:r.title,type:"text",onChange:function(e){return o("title",e.target.value)}}))),c().createElement(g.FormGroup,{controlId:"aggregationAttribute"},c().createElement(g.Col,{componentClass:g.ControlLabel,sm:6},c().createElement(b.Z,{msgId:"widgets.description"})),c().createElement(g.Col,{sm:6},c().createElement(g.FormControl,{value:r.description,type:"text",onChange:function(e){return o("description",e.target.value)}}))))))};var hg=r(87017),Og=r(73339),wg=r(30881),Eg=r(8488),Sg=r(39837),Pg=r(42415);function jg(){return(jg=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var Cg=(0,ea.Z)((function(e){var t=e.loading,r=e.data;return t||!r}),{width:500,height:200}),xg=Ib((function(e){var t=e.featureTypeProperties;return 0===(void 0===t?[]:t).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type,r=void 0===t?"":t;return 0!==r.indexOf("gml:")})).length}))(zb),Tg=Wb(gg),kg=(0,R.compose)(Og.Z,wg.Z,Eg.Z,hg.Z,Cg,Pg.Z,Sg.Z)(Fb.Z),Ig=Ab(Fb.Z),Ag={width:430,height:200},Fg=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=t.hasAggregateProcess;return e.aggregationAttribute&&e.groupByAttributes&&(!r||r&&e.aggregateFunction)},Dg=kb(Tb),Rg=function(e){var t=e.data,r=void 0===t?{}:t,n=e.layer,o=e.dependencies,i=void 0===o?{}:o,a=e.setValid,l=void 0===a?function(){}:a,s=e.hasAggregateProcess;return Fg(r.options,{hasAggregateProcess:s})?c().createElement(kg,jg({key:"preview-chart",onLoad:function(){return l(!0)},onLoadError:function(){return l(!1)},isAnimationActive:!1,dependencies:i,dependenciesMap:r.dependenciesMap},Ag,{type:r.type,xAxisOpts:r.xAxisOpts,yAxisOpts:r.yAxisOpts,formula:r.formula,legend:r.legend,cartesian:r.cartesian,layer:r.layer||n,filter:r.filter,geomProp:r.geomProp,mapSync:r.mapSync,autoColorOptions:r.autoColorOptions,options:r.options,yAxis:r.yAxis,xAxisAngle:r.xAxisAngle,yAxisLabel:r.yAxisLabel})):c().createElement(Ig,jg({hasAggregateProcess:s,key:"sample-chart",isAnimationActive:!1},Ag,{type:r.type,autoColorOptions:r.autoColorOptions,legend:r.legend,cartesian:r.cartesian,yAxis:r.yAxis}))};const Ng=(0,R.compose)((0,R.lifecycle)({UNSAFE_componentWillReceiveProps:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data,r=void 0===t?{}:t,n=e.valid,o=e.setValid,i=void 0===o?function(){}:o,a=e.hasAggregateProcess;n&&!Fg(r.options,{hasAggregateProcess:a})&&i(!1)}}),(0,R.setDisplayName)("ChartWizard"))((function(e){var t=e.onChange,r=void 0===t?function(){}:t,n=e.onFinish,o=void 0===n?function(){}:n,i=e.setPage,a=void 0===i?function(){}:i,l=e.setValid,s=void 0===l?function(){}:l,u=e.data,p=void 0===u?{}:u,f=e.layer,d=void 0===f?{}:f,m=e.step,y=void 0===m?0:m,b=e.types,g=e.featureTypeProperties,v=e.dependencies,h=e.hasAggregateProcess;return c().createElement(Dg,{step:y,setPage:a,onFinish:o,isStepValid:function(e){return 0===e?p.chartType:1!==e||Fg(p.options,{hasAggregateProcess:h})},hideButtons:!0},c().createElement(xg,{key:"type",featureTypeProperties:g,type:p.type,onSelect:function(e){r("type",e)}}),c().createElement(Tg,{hasAggregateProcess:h,dependencies:v,key:"chart-options",featureTypeProperties:g,types:b,data:p,onChange:r,layer:p.layer||d,sampleChart:Rg({hasAggregateProcess:h,data:p,layer:p.layer||d,dependencies:v,setValid:function(e){return s(e&&Fg(p.options,{hasAggregateProcess:h}))}})}),c().createElement(vg,{key:"widget-options",data:p,onChange:r,layer:p.layer||d,sampleChart:Rg({hasAggregateProcess:h,data:p,layer:p.layer||d,dependencies:v,setValid:function(e){return s(e&&Fg(p.options,{hasAggregateProcess:h}))}})}))}));function Mg(e){return function(e){if(Array.isArray(e))return Lg(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Lg(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Lg(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Lg(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}const _g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.canProceed,r=e.selected,n=e.stepButtons,o=void 0===n?[]:n,i=e.onProceed,a=void 0===i?function(){}:i;return c().createElement(qr.Z,{btnDefaultProps:{className:"square-button-md",bsStyle:"primary",bsSize:"sm"},buttons:[].concat(Mg(o),[{onClick:a,disabled:!t,tooltipId:"widgets.builder.wizard.useTheSelectedLayer",visible:r,glyph:"arrow-right"}])})},Zg=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onClose,r=void 0===t?function(){}:t,n=e.children;return c().createElement("div",{className:"mapstore-flex-container"},c().createElement("div",{className:"m-header bg-body widgets-builder-header"},c().createElement(g.Row,null,c().createElement(g.Col,{md:12,className:"text-center",style:{overflow:"hidden",lineHeight:"52px"}},c().createElement(Je.Z,{onClick:function(){return r()},className:"pull-left on-close-btn square-button no-border "},c().createElement(g.Glyphicon,{glyph:"1-close"})),c().createElement("span",{style:{padding:"50px 0 0 0",fontSize:16}},c().createElement(b.Z,{msgId:"widgets.builder.header.title"})),c().createElement("div",{style:{display:"flex"},className:"square-button pull-right no-border"},c().createElement(g.Glyphicon,{glyph:"stats",className:"text-primary"})))),c().createElement(g.Row,{className:"text-center"},c().createElement("div",{className:"m-padding-md"},n))))},Bg=Zg;var zg=r(59551),Gg=r(32354),Ug=r(67007),Wg=r(3475);function Vg(e){return(Vg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qg(e){return function(e){if(Array.isArray(e))return Hg(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Hg(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Hg(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Hg(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function $g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Kg(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$g(Object(r),!0).forEach((function(t){Yg(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Yg(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Xg(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function Qg(e){var t=function(e,t){if("object"!==Vg(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!==Vg(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"===Vg(t)?t:String(t)}var Jg=r(89255),ev=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=n.dataProp,i=void 0===o?"items":o,a=n.initialStreamDebounce,l=void 0===a?0:a,c=n.throttleTime,s=void 0===c?500:c;return e.take(1).concat(e.debounceTime(l)).switchMap((function(e){return r(e,0).startWith({loading:!0}).concat(Jg.Observable.of({loading:!1})).concat(t.throttleTime(s).distinct().exhaustMap((function(t){return r(e,t).startWith({loading:!0}).concat(Jg.Observable.of({loading:!1}))}))).scan((function(e,t){var r=e[i],n=Xg(e,[i].map(Qg)),o=t[i],a=Xg(t,[i].map(Qg));return Kg(Kg(Yg({},i,o?[].concat(qg(r||[]),qg(o)):r||[]),n),a)})).map((function(e){return Kg({},e)}))})).catch((function(e){return Jg.Observable.of({loading:!1,error:e})}))};function tv(e){return(tv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rv(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function nv(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rv(Object(r),!0).forEach((function(t){dv(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rv(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ov(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function iv(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function av(e,t,r){return t&&iv(e.prototype,t),r&&iv(e,r),e}function lv(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&cv(e,t)}function cv(e,t){return(cv=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function sv(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=fv(e);if(t){var o=fv(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return uv(this,r)}}function uv(e,t){return!t||"object"!==tv(t)&&"function"!=typeof t?pv(e):t}function pv(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fv(e){return(fv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function dv(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const mv=function(e){var t=e.loadPage,r=e.scrollSpyOptions,n=e.loadStreamOptions,o=e.loadMoreStreamOptions,i=e.hasMore,a=e.isScrolled;return(0,R.compose)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){return Jg.Observable.empty()},t=arguments.length>1?arguments[1]:void 0;return(0,R.mapPropsStream)((function(r){var n=(0,R.createEventHandler)(),o=n.handler,i=n.stream,a=(0,R.createEventHandler)(),l=a.handler,c=a.stream;return r.combineLatest(ev(c,i,e,t).startWith({}),(function(e,t){return Kg(Kg(Kg({},e),t),{},{onLoadMore:o,loadFirst:l})}))}))}(t,o),(0,R.defaultProps)({hasMore:i,isScrolled:a}),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dataProp,r=void 0===t?"items":t,n=e.querySelector,o=e.closest,i=void 0!==o&&o,a=e.loadingProp,l=void 0===a?"loading":a,s=e.skip,p=void 0===s?0:s,f=e.pageSize,d=void 0===f?10:f,m=e.offsetSize,y=void 0===m?200:m;return function(e){var t,o;return o=t=function(t){lv(a,t);var o=sv(a);function a(){var e;ov(this,a);for(var t=arguments.length,c=new Array(t),s=0;s<t;s++)c[s]=arguments[s];return dv(pv(e=o.call.apply(o,[this].concat(c))),"findScrollDomNode",(function(){if(!e.isMounded)return null;var t=Qc().findDOMNode(pv(e));return t&&i&&n?t.closest(n||"*"):t&&(n?t.querySelector(n):t)})),dv(pv(e),"onScroll",(function(){var t=nv({skip:p,pageSize:d,offsetSize:y},e.props.scrollOptions),n=e.findScrollDomNode();n&&e.props.isScrolled({div:n,offset:t.offsetSize})&&(!r||e.props[r]&&e.props[r].length)&&(!l||!e.props[l])&&e.props.hasMore(e.props)&&e.props.onLoadMore(r?Math.ceil((e.props[r].length-t.skip)/t.pageSize):null)})),e}return av(a,[{key:"componentDidMount",value:function(){this.isMounded=!0;var e=this.findScrollDomNode();e&&(this.listenerAdded=!0,e.addEventListener("scroll",this.onScroll,!1),this.onScroll())}},{key:"componentDidUpdate",value:function(e){var t=this,n=this.findScrollDomNode();n&&!this.listenerAdded&&(n.addEventListener("scroll",this.onScroll,!1),this.listenerAdded=!0),!n||r&&this.props[r]&&this.props[r]===e[r]||setTimeout((function(){return t.onScroll()}),300)}},{key:"componentWillUnmount",value:function(){this.isMounded=!1,this.listenerAdded=!1;var e=this.findScrollDomNode();e&&e.removeEventListener("scroll",this.onScroll,!1)}},{key:"render",value:function(){return c().createElement(e,this.props)}}]),a}(c().Component),dv(t,"propTypes",{hasMore:u().func,onLoadMore:u().func,isScrolled:u().func,scrollOptions:u().object}),dv(t,"defaultProps",{onLoadMore:function(){},hasMore:function(){return!0},isScrolled:function(e){var t=e.div,r=e.offset;return t.scrollTop+t.clientHeight>=t.scrollHeight-r}}),o}}(r,n))};var yv=r(79105),bv=r(14471),gv=r(75480),vv=(0,bl.Z)(["placeholder","clearValueText","noResultsText"])(r(4116).ZP);const hv=function(e){var t=e.isValidServiceSelected,r=e.services,n=e.selectedService,o=e.onChangeCatalogMode,i=void 0===o?function(){}:o,a=e.onChangeSelectedService,l=void 0===a?function(){}:a;return c().createElement(g.InputGroup,null,c().createElement(vv,{clearValueText:"catalog.clearValueText",noResultsText:"catalog.noResultsText",clearable:!0,options:r,value:n,onChange:function(e){return l(e&&e.value?e.value:"")},placeholder:"catalog.servicePlaceholder"}),t?c().createElement(g.InputGroup.Addon,{className:"btn",onClick:function(){return i("edit",!1)}},c().createElement(g.Glyphicon,{glyph:"pencil"})):null,c().createElement(g.InputGroup.Addon,{className:"btn",onClick:function(){return i("edit",!0)}},c().createElement(g.Glyphicon,{glyph:"plus"})))};var Ov=(0,bl.Z)("placeholder")(g.FormControl);const wv=function(e){var t=e.onSearchTextChange,r=void 0===t?function(){}:t,n=e.searchText,o=e.title,i=void 0===o?c().createElement(b.Z,{msgId:"catalog.title"}):o,a=e.catalog,l=e.services,s=e.isValidServiceSelected,u=e.showCatalogSelector;return c().createElement(g.Grid,{className:"catalog-form",fluid:!0},c().createElement(g.Row,null,c().createElement(g.Col,{xs:12},c().createElement("h4",{className:"text-center"},i),u?c().createElement(g.FormGroup,null,c().createElement(hv,{servieces:l,catalog:a,isValidServiceSelected:s})):null,c().createElement(g.FormGroup,{controlId:"catalog-form"},c().createElement(Ov,{type:"text",placeholder:"catalog.textSearchPlaceholder",value:n,onChange:function(e){return r(e.currentTarget.value)}})))))};function Ev(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Sv(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ev(Object(r),!0).forEach((function(t){Pv(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ev(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Pv(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var jv={csw:zg.Z,wms:Ug.ZP,wmts:Wg.Z,backgrounds:Gg.Z},Cv=c().createElement(bv.Z,{glyph:"geoserver",padding:20}),xv=(0,R.compose)((0,ea.Z)((function(e){var t=e.loading,r=e.items;return 0===(void 0===r?[]:r).length&&t})),(0,ta.Z)((function(e){var t=e.loading,r=e.error;return!t&&r}),{title:c().createElement(b.Z,{msgId:"catalog.error"}),style:{transform:"translateY(50%)"}}),(0,ta.Z)((function(e){var t=e.loading,r=e.items;return 0===(void 0===r?[]:r).length&&!t}),{title:c().createElement(b.Z,{msgId:"catalog.noRecordsMatched"}),style:{transform:"translateY(50%)"}}))(yl.Z),Tv=function(e){var t=e.records,r=e.result,n=void 0===r?{}:r;return{items:(t||[]).map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{title:e.title&&pe()(e.title)&&e.title.default||e.title,caption:e.identifier,description:e.description,preview:e.thumbnail?c().createElement("img",{src:"thumbnail"}):Cv,record:e}})),total:n&&n.numberOfRecordsMatched}};const kv=(0,R.compose)((0,yv.Z)("searchText","setSearchText",""),mv({loadPage:function(e){var t=e.text,r=e.catalog,n=void 0===r?{}:r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return oa.Observable.fromPromise(jv[n.type].textSearch(n.url,10*o+("csw"===n.type?1:0),10,t)).map((function(e){return{result:e,records:(0,Vy.eL)(n.type,e||[],{url:n&&n.url,service:n})}})).map(Tv)},scrollSpyOptions:{querySelector:".ms2-border-layout-body .ms2-border-layout-content",pageSize:10}}),(0,R.mapPropsStream)((function(e){return e.merge(e.take(1).switchMap((function(t){var r=t.catalog,n=t.loadFirst,o=void 0===n?function(){}:n;return e.debounceTime(500).startWith({searchText:"",catalog:r}).distinctUntilKeyChanged("searchText").do((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.searchText,r=e.catalog;return o({text:t,catalog:r})})).ignoreElements()})))})))((function(e){var t=e.setSearchText,r=void 0===t?function(){}:t,n=e.selected,o=e.onRecordSelected,i=e.loading,a=e.searchText,l=e.items,s=void 0===l?[]:l,u=e.total,p=e.catalog,f=e.services,d=e.title,m=e.showCatalogSelector,y=e.error;return c().createElement(Vr.Z,{className:"compat-catalog",header:c().createElement(wv,{services:f||[p],showCatalogSelector:m,title:d,searchText:a,onSearchTextChange:r}),footer:c().createElement("div",{className:"catalog-footer"},c().createElement("span",null,i?c().createElement(gv.Z,null):null),vc()(u)?null:c().createElement("span",{className:"res-info"},c().createElement(b.Z,{msgId:"catalog.pageInfoInfinite",msgParams:{loaded:s.length,total:u}})))},c().createElement(xv,{items:s.map((function(e){return e===n||n&&e&&e.record&&n.identifier===e.record.identifier?Sv(Sv({},e),{},{selected:!0}):e})),loading:i,error:y,onItemClick:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.record;return o(t,p)}}))})),Iv=(0,R.defaultProps)({title:c().createElement(b.Z,{msgId:"widgets.builder.wizard.selectALayer"})})(kv);var Av=(0,R.compose)((0,R.branch)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.catalog;return!t}),(0,p.connect)((0,D.P1)(ve.R7,(function(e){return{catalog:e}})))))(Iv);const Fv=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onClose,r=void 0===t?function(){}:t,n=e.setSelected,o=void 0===n?function(){}:n,i=e.onLayerChoice,a=void 0===i?function(){}:i,l=e.stepButtons,s=e.selected,u=e.error,p=e.canProceed,f=e.layer,d=e.catalog,m=e.catalogServices;return c().createElement(Vr.Z,{className:"bg-body layer-selector",header:c().createElement(Bg,{onClose:r},c().createElement(_g,{stepButtons:l,canProceed:p,onProceed:function(){return a(f)}}),s&&!p&&u?c().createElement(Ql.Z,{trigger:!1,glyph:"warning-sign",bsStyle:"warning",title:c().createElement(yp.v0,{msgId:"widgets.builder.errors.noWidgetsAvailableTitle"}),text:c().createElement(yp.k9,{msgId:"widgets.builder.errors.noWidgetsAvailableDescription"})}):null)},c().createElement(Av,{services:m,selected:s,catalog:d,onRecordSelected:function(e){return o(e)}}))};function Dv(e){return function(e){if(Array.isArray(e))return Rv(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Rv(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Rv(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rv(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Nv=function(e){switch(e){case 1:return"widgets.builder.wizard.backToTypeSelection";case 2:return"widgets.builder.wizard.backToChartOptions";default:return"back"}},Mv=function(e){switch(e){case 0:return"widgets.builder.wizard.configureChartOptions";case 1:return"widgets.builder.wizard.configureWidgetOptions";default:return"next"}},Lv=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.id;return r?"widgets.builder.wizard.updateWidget":"widgets.builder.wizard.addTheWidget"};function _v(){return(_v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Zv(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var Bv=(0,p.connect)(vb,{setPage:be.YA,setValid:function(e){return(0,be.t4)("valid",e)},onEditorChange:be.Rz,insertWidget:be.Qe},gb)((0,R.compose)(Gy({needWPS:!1}),(0,R.renameProps)({editorData:"data",onEditorChange:"onChange"}))(Ng)),zv=(0,R.compose)((0,p.connect)(vb,{openFilterEditor:be.fy,setPage:be.YA,onChange:be.Rz,insertWidget:be.Qe},gb),eb,cb(),fb((function(e){return 1===e.step})))((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.step,r=void 0===t?0:t,n=e.editorData,o=void 0===n?{}:n,i=e.valid,a=e.setPage,l=void 0===a?function(){}:a,s=e.onFinish,u=void 0===s?function(){}:s,p=e.stepButtons,f=void 0===p?[]:p,d=e.openFilterEditor,m=void 0===d?function(){}:d;return c().createElement(qr.Z,{btnDefaultProps:{bsStyle:"primary",bsSize:"sm"},buttons:[{onClick:function(){return l(Math.max(0,r-1))},visible:r>0,glyph:"arrow-left",tooltipId:Nv(r)}].concat(Dv(f),[{visible:r>0,onClick:m,glyph:"filter",tooltipId:"widgets.builder.setupFilter"},{onClick:function(){return l(Math.min(r+1,2))},visible:!(1!==r),disabled:1===r&&!i,glyph:"arrow-right",tooltipId:Mv(r)},{onClick:function(){return u(Math.min(r+1,1))},visible:2===r,glyph:"floppy-disk",tooltipId:Lv(r,o)}])})}));const Gv=(0,R.compose)((0,p.connect)(vb),tb,(0,R.branch)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.layer;return!t}),(0,R.renderComponent)(Xy(Fv))))((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.enabled,r=e.onClose,n=void 0===r?function(){}:r,o=e.exitButton,i=e.editorData,a=e.toggleConnection,l=e.availableDependencies,s=void 0===l?[]:l,u=e.dependencies,p=Zv(e,["enabled","onClose","exitButton","editorData","toggleConnection","availableDependencies","dependencies"]);return c().createElement("div",{className:"mapstore-chart-advance-options"},c().createElement(Vr.Z,{header:c().createElement(Bg,{onClose:n},c().createElement(zv,{exitButton:o,editorData:i,toggleConnection:a,availableDependencies:s,onClose:n}))},t?c().createElement(Bv,_v({dependencies:u},p)):null))}));function Uv(e){return function(e){if(Array.isArray(e))return Wv(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Wv(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Wv(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wv(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Vv=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.id;return r?"widgets.builder.wizard.updateWidget":"widgets.builder.wizard.addTheWidget"},qv=(0,bl.Z)("placeholder")(g.FormControl),Hv=(0,bl.Z)("placeholder")(ui());const $v=function(e){var t=e.data,r=void 0===t?{}:t,n=e.onChange,o=void 0===n?function(){}:n;return c().createElement("div",null,c().createElement(g.Col,{key:"form",xs:12},c().createElement(g.Form,null,c().createElement(g.FormGroup,{controlId:"title"},c().createElement(g.Col,{sm:12},c().createElement(qv,{style:{marginBottom:10},placeholder:"widgets.builder.wizard.titlePlaceholder",value:r.title,type:"text",onChange:function(e){return o("title",e.target.value)}}))))),c().createElement(Hv,{modules:{toolbar:[[{size:["small",!1,"large","huge"]},"bold","italic","underline","blockquote"],[{list:"bullet"},{align:[]}],[{color:[]},{background:[]},"clean"],["image","link"]]},placeholder:"widgets.builder.wizard.textPlaceholder",value:r&&r.text||"",onChange:function(e){return o("text",e)}}))};var Kv=kb(Tb),Yv=(0,R.compose)((0,p.connect)(vb,{setPage:be.YA,insertWidget:be.Qe,onResetChange:be.Rz},gb),(0,R.withProps)((function(e){var t=e.onResetChange,r=void 0===t?function(){}:t;return{exitButton:{glyph:"arrow-left",tooltipId:"widgets.builder.wizard.backToWidgetTypeSelection",onClick:function(){return r("widgetType",void 0)}}}})),cb())((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.step,r=void 0===t?0:t,n=e.editorData,o=void 0===n?{}:n,i=e.stepButtons,a=void 0===i?[]:i,l=e.onFinish,s=void 0===l?function(){}:l;return c().createElement(qr.Z,{btnDefaultProps:{bsStyle:"primary",bsSize:"sm"},buttons:[].concat(Uv(a),[{onClick:function(){return s(Math.min(r+1,1))},visible:0===r,glyph:"floppy-disk",tooltipId:Vv(r,o)}])})})),Xv=(0,p.connect)(vb,{onChange:be.Rz},gb)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onChange,r=void 0===t?function(){}:t,n=e.onFinish,o=void 0===n?function(){}:n,i=e.setPage,a=void 0===i?function(){}:i,l=e.step,s=void 0===l?0:l,u=e.editorData,p=void 0===u?{}:u;return c().createElement(Kv,{step:s,setPage:a,onFinish:o,hideButtons:!0},c().createElement($v,{key:"widget-options",data:p,onChange:r}))})),Qv=r(44908),Jv=r.n(Qv),eh=r(21709),th=r.n(eh);function rh(e){return function(e){if(Array.isArray(e))return nh(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return nh(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?nh(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nh(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function oh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ih(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?oh(Object(r),!0).forEach((function(t){ah(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oh(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ah(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lh(e){return function(e){if(Array.isArray(e))return ch(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return ch(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ch(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ch(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var sh=(0,R.compose)((0,R.withProps)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.attributes,r=void 0===t?[]:t,n=e.options,o=void 0===n?{}:n;return{attributes:r.filter((function(e){return!(0,My.isGeometryType)(e)})).map((function(e){return ih(ih({},e),{},{label:e.name,attribute:e.name,hide:o.propertyName&&o.propertyName.indexOf(e.name)<0})}))}})),Ib((function(e){var t=e.attributes;return 0===(void 0===t?[]:t).length})),(0,R.withHandlers)({onChange:function(e){var t=e.onChange,r=void 0===t?function(){}:t,n=e.options,o=void 0===n?{}:n;return function(e,t){return r("options.propertyName",function(e,t,r){var n=xm()(t);return r?e.filter((function(e){return!Bd()(n,e)})):Jv()([].concat(lh(e),lh(n)))}(o&&o.propertyName||[],e,t))}}}))((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.style,r=void 0===t?{}:t,n=e.titleMsg,o=void 0===n?"featuregrid.columns":n,i=e.onChange,a=void 0===i?function(){}:i,l=e.attributes,s=void 0===l?[]:l;return c().createElement("div",{className:"bg-body data-attribute-selector",style:r},c().createElement("h4",{className:"text-center"},c().createElement("strong",null,c().createElement(b.Z,{msgId:o}))),c().createElement(th(),{rowKey:"id",columns:[{name:"",key:"attribute"}],rowGetter:function(e){return s[e]},rowsCount:s.length,rowSelection:{showCheckbox:!0,enableShiftSelect:!0,onRowsSelected:function(e){return a(e.map((function(e){return s[e.rowIdx].name})),!1)},onRowsDeselected:function(e){return a(e.map((function(e){return s[e.rowIdx].name})),!0)},selectBy:{indexes:s.reduce((function(e,t,r){return[].concat(rh(e),rh(t.hide?[]:[r]))}),[])}}}))}));const uh=function(e){var t=e.data,r=void 0===t?{options:{}}:t,n=e.onChange,o=void 0===n?function(){}:n,i=e.featureTypeProperties,a=e.sampleChart;return c().createElement(g.Row,null,c().createElement(Db,{title:c().createElement(b.Z,{msgId:"widgets.builder.wizard.configureTableOptions"})}),c().createElement(g.Col,{xs:12},c().createElement("div",null,a)),c().createElement(g.Col,{xs:12},c().createElement(g.Form,{className:"chart-options-form",horizontal:!0},c().createElement(sh,{options:r.options,onChange:o,attributes:i}),r.options&&r.options.columnSettings?c().createElement(Je.Z,{style:{float:"right"},onClick:function(){return o("options.columnSettings",void 0)}},c().createElement(b.Z,{msgId:"widgets.builder.wizard.resetColumnsSizes"})):null)))};var ph=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.aggregateFunction&&e.aggregationAttribute&&e.groupByAttributes},fh=kb(Tb);const dh=(0,R.compose)((0,R.lifecycle)({UNSAFE_componentWillReceiveProps:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data,r=void 0===t?{}:t,n=e.valid,o=e.setValid,i=void 0===o?function(){}:o;n&&!ph(r.options)&&i(!1)}}))((function(e){var t=e.onChange,r=void 0===t?function(){}:t,n=e.onFinish,o=void 0===n?function(){}:n,i=e.setPage,a=void 0===i?function(){}:i,l=e.data,s=void 0===l?{}:l,u=e.layer,p=void 0===u?{}:u,f=e.step,d=void 0===f?0:f,m=e.types,y=e.featureTypeProperties,b=e.dependencies;return c().createElement(fh,{step:d,setPage:a,onFinish:o,isStepValid:function(e){return 1!==e||ph(s.options)},hideButtons:!0},c().createElement(uh,{dependencies:b,key:"chart-options",featureTypeProperties:y,types:m,data:s,onChange:r,layer:s.layer||p}),c().createElement(vg,{key:"widget-options",data:s,onChange:r,layer:s.layer||p}))}));function mh(e){return function(e){if(Array.isArray(e))return yh(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return yh(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?yh(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yh(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var bh=function(e){return e&&e.options&&e.options.propertyName&&0!==e.options.propertyName.length},gh=function(e){switch(e){case 1:return"widgets.builder.wizard.backToTableOptions";case 2:return"widgets.builder.wizard.backToChartOptions";default:return"back"}},vh=function(e,t){return t?"widgets.builder.wizard.configureWidgetOptions":"widgets.builder.errors.checkAtLeastOneAttribute"},hh=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.id;return r?"widgets.builder.wizard.updateWidget":"widgets.builder.wizard.addTheWidget"};function Oh(){return(Oh=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function wh(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var Eh=(0,p.connect)(vb,{setPage:be.YA,setValid:function(e){return(0,be.t4)("valid",e)},onEditorChange:be.Rz,insertWidget:be.Qe},gb)((0,R.compose)(Gy(),(0,R.renameProps)({editorData:"data",onEditorChange:"onChange"}),(0,R.mapPropsStream)((function(e){return e.merge(e.distinctUntilChanged((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.featureTypeProperties,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.featureTypeProperties;return t===n})).do((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.featureTypeProperties,r=void 0===t?[]:t,n=e.onChange,o=void 0===n?function(){}:n,i=e.data,a=void 0===i?{}:i;o&&r.length>0&&!d()(a,"options.propertyName")&&o("options.propertyName",r.filter((function(e){return!(0,My.isGeometryType)(e)})).map((function(e){return e.name})))})).ignoreElements())})))(dh)),Sh=(0,R.compose)((0,p.connect)(vb,{openFilterEditor:be.fy,setPage:be.YA,onChange:be.Rz,insertWidget:be.Qe},gb),eb,cb(),fb((function(e){return 0===e.step})))((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.openFilterEditor,r=void 0===t?function(){}:t,n=e.step,o=void 0===n?0:n,i=e.stepButtons,a=void 0===i?[]:i,l=e.editorData,s=void 0===l?{}:l,u=e.setPage,p=void 0===u?function(){}:u,f=e.onFinish,d=void 0===f?function(){}:f;return c().createElement(qr.Z,{btnDefaultProps:{bsStyle:"primary",bsSize:"sm"},buttons:[{onClick:function(){return p(Math.max(0,o-1))},visible:o>0,glyph:"arrow-left",tooltipId:gh(o)}].concat(mh(a),[{visible:o>=0,onClick:r,disabled:!bh(s),glyph:"filter",tooltipId:"widgets.builder.setupFilter"},{onClick:function(){return p(Math.min(o+1,2))},visible:0===o,disabled:0===o&&!bh(s),glyph:"arrow-right",tooltipId:vh(0,bh(s))},{onClick:function(){return d(Math.min(o+1,1))},visible:1===o,glyph:"floppy-disk",tooltipId:hh(o,s)}])})}));const Ph=(0,R.compose)((0,p.connect)(vb),tb,(0,R.branch)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.layer;return!t}),(0,R.renderComponent)(Xy(Fv))))((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.enabled,r=e.onClose,n=void 0===r?function(){}:r,o=e.editorData,i=void 0===o?{}:o,a=e.exitButton,l=e.toggleConnection,s=e.availableDependencies,u=void 0===s?[]:s,p=e.dependencies,f=wh(e,["enabled","onClose","editorData","exitButton","toggleConnection","availableDependencies","dependencies"]);return c().createElement(Vr.Z,{header:c().createElement(Bg,{onClose:n},c().createElement(Sh,{editorData:i,exitButton:a,toggleConnection:l,availableDependencies:u,onClose:n}),0===d()(i,"options.propertyName.length")?c().createElement(Ql.Z,{trigger:!1,glyph:"exclamation-mark",bsStyle:"warning",text:c().createElement(b.Z,{msgId:"widgets.builder.errors.checkAtLeastOneAttribute"})}):null)},t?c().createElement(Eh,Oh({editorData:i,dependencies:p},f)):null)}));var jh=r(48860);function Ch(e){return function(e){if(Array.isArray(e))return xh(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return xh(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?xh(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xh(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Th=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.id;return r?"widgets.builder.wizard.updateWidget":"widgets.builder.wizard.addTheWidget"},kh=r(5993),Ih=r(51768),Ah=r(75927),Fh=r(16701),Dh=(0,ta.Z)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.map,r=void 0===t?{}:t;return!r.layers||0===(r.layers||[]).filter((function(e){return"background"!==e.group})).length}),(function(){return{glyph:"1-layer",title:c().createElement(b.Z,{msgId:"widgets.selectMap.TOC.noLayerTitle"}),description:c().createElement(b.Z,{msgId:"widgets.selectMap.TOC.noLayerDescription"})}}))(Fh.Z),Rh=(0,Ih.Z)(Ah.Z),Nh=(0,R.compose)(Ih.Z,(0,R.withProps)((function(e){var t=e.selectedNode;return{title:t&&t.title}})),(0,kh.Z)("title"))(Db);const Mh=function(e){var t=e.preview,r=e.map,n=void 0===r?{}:r,o=e.onChange,i=void 0===o?function(){}:o,a=e.selectedNodes,l=void 0===a?[]:a,s=e.onNodeSelect,u=void 0===s?function(){}:s,p=e.editNode,f=e.closeNodeEditor,d=void 0===f?function(){}:f,m=e.isLocalizedLayerStylesEnabled;return c().createElement("div",null,c().createElement(Db,{title:c().createElement(b.Z,{msgId:"widgets.builder.wizard.configureMapOptions"})}),c().createElement("div",{key:"sample",style:{marginTop:10}},c().createElement(Db,{title:c().createElement(b.Z,{msgId:"widgets.builder.wizard.preview"})}),c().createElement("div",{style:{width:"100%",height:"200px"}},t)),p?[c().createElement(Nh,{map:n,editNode:p}),c().createElement(Rh,{closeNodeEditor:d,editNode:p,map:n,onChange:i,isLocalizedLayerStylesEnabled:m})]:[c().createElement(Db,{title:c().createElement(b.Z,{msgId:"layers"})}),c().createElement(Dh,{selectedNodes:l,onSelect:u,onChange:i,map:n})])};var Lh=r(92936);const _h=(0,R.compose)((0,R.withHandlers)({onMapViewChanges:function(e){var t=e.onChange,r=void 0===t?function(){}:t;return function(e){r("map",e),r("mapStateSource",e.mapStateSource)}}}))(Lh.Z);var Zh=kb(Tb);const Bh=(0,R.compose)((0,p.connect)((0,D.P1)(jm.xI,(function(e){return{widgetSelectionActive:e}}))),(0,dl.Z)((function(e){return e.widgetSelectionActive}),(function(){return c().createElement("div",{style:{margin:"auto"}},c().createElement(b.Z,{msgId:"widgets.builder.wizard.selectMapToConnect"}))}),{alwaysWrap:!0})),zh=(0,p.connect)((0,D.P1)(jm.E2,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.editNode;return{editNode:t}})),{setEditNode:function(e){return(0,be.t4)("editNode",e)},closeNodeEditor:function(){return(0,be.t4)("editNode",void 0)}});function Gh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Uh(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Gh(Object(r),!0).forEach((function(t){Wh(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Gh(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Wh(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Vh(e){return function(e){if(Array.isArray(e))return qh(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return qh(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?qh(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qh(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}const Hh=(0,R.compose)((0,R.withProps)((function(e){var t=e.editorData,r=void 0===t?{}:t;return{layers:r.map&&r.map.layers}})),(0,p.connect)((function(){return{}}),{setLayers:function(e){return(0,be.Rz)("map.layers",e)}}),(0,R.withHandlers)({addLayer:function(e){var t=e.layers,r=void 0===t?[]:t,n=e.setLayers,o=void 0===n?function(){}:n,i=e.catalog;return function(e){return i.localizedLayerStyles?o([].concat(Vh(r),[(0,ne.Cx)(Uh(Uh({},e),{},{localizedLayerStyles:i.localizedLayerStyles}))])):o([].concat(Vh(r),[(0,ne.Cx)(e)]))}},removeLayersById:function(e){var t=e.layers,r=void 0===t?[]:t,n=e.setLayers,o=void 0===n?function(){}:n;return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return o(r.filter((function(t){return!ye()(xm()(e),(function(e){return e===t.id}))})))}}})),$h=(0,R.withHandlers)({onRemoveSelected:function(e){var t=e.selectedLayers,r=void 0===t?[]:t,n=e.removeLayersById,o=void 0===n?function(){}:n,i=e.onNodeSelect,a=void 0===i?function(){}:i;return function(){o(r),r.forEach((function(e){return a(e,"layer",!1)}))}}});var Kh=r(90173);function Yh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Xh(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Yh(Object(r),!0).forEach((function(t){Qh(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Yh(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Qh(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const Jh=(0,R.compose)((0,p.connect)((function(){return{}}),{setMap:function(e){return(0,be.Rz)("map",e)}}),(0,R.withHandlers)({isEpsgSupported:function(e){var t=e.editorData,r=void 0===t?{}:t,n=e.selectedNodes,o=void 0===n?[]:n;return function(){var e=r.map.layers,t=o.map((function(t){return e.find((function(e){return e.id===t}))})).filter((function(e){return e})).filter((function(e){return e.bbox})).map((function(e){return e.bbox})),n=t.length>0?t.reduce((function(e,t){return e.crs===t.crs?e:{crs:"differentCRS"}})):{crs:"differentCRS"},i=!!de()(t)&&"differentCRS"!==n.crs&&n.crs;return i&&Kh.default.defs(i)}},zoomTo:function(e){var t=e.editorData,r=void 0===t?{}:t,n=e.setMap,o=void 0===n?function(){}:n;return function(e){var t=r.map,n=r.map.layers,i=e.map((function(e){return n.find((function(t){return t.id===e}))})).filter((function(e){return e})).filter((function(e){return e.bbox})).map((function(e){return e.bbox})),a=i.length>1?i.reduce((function(e,t){return{bounds:{maxx:e.bounds.maxx>t.bounds.maxx?e.bounds.maxx:t.bounds.maxx,maxy:e.bounds.maxy>t.bounds.maxy?e.bounds.maxy:t.bounds.maxy,minx:e.bounds.minx<t.bounds.minx?e.bounds.minx:t.bounds.minx,miny:e.bounds.miny<t.bounds.miny?e.bounds.miny:t.bounds.miny},crs:t.crs}}),i[0]):i[0],l=0,c=function(e){if(Bl()(e))return e.map((function(e){return"string"==typeof e||e instanceof String?Number(e):e}));if(pe()(e)){var t=km()(e,(function(e){return"string"==typeof e||e instanceof String?Number(e):e}));return[t.minx,t.miny,t.maxx,t.maxy]}return null}(a.bounds),s=cn.default.reprojectBbox(c,a.crs,t.bbox&&t.bbox.crs||"EPSG:4326");if(s){var u=cn.default.reproject(oe.default.getCenterForExtent(c,a.crs),a.crs,"EPSG:4326");if("EPSG:4326"===a.crs&&c&&c[0]<=-180&&c[1]<=-90&&c[2]>=180&&c[3]>=90)l=1;else{var p=cn.default.reprojectBbox(c,a.crs,t.projection||"EPSG:4326");l=oe.default.getZoomForExtent(p,t.size,0,21,null)}var f={minx:s[0],miny:s[1],maxx:s[2],maxy:s[3]},d=Xh(Xh({},t.bbox),{},{bounds:f});o(Xh(Xh({},r.map),{},{center:u,zoom:l,bbox:d,mapStateSource:"tool"}))}}}}),(0,R.withProps)((function(e){var t=e.isEpsgSupported;return{epsgSupported:(void 0===t?function(){}:t)()}}))),eO=(0,R.compose)((0,R.withProps)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.availableDependencies,r=void 0===t?[]:t,n=e.editorData,o=void 0===n?{}:n;return{availableDependencies:r.filter((function(e){return!(o.id&&e.indexOf(o.id)>=0)}))}})),(0,R.withProps)((function(e){var t=e.editorData;return{canConnect:!0,connected:!!(void 0===t?{}:t).mapSync}})),Qy({center:"center",zoom:"zoom",filter:"filter",quickFilters:"quickFilters",layer:"layer",options:"options",mapSync:"mapSync",dependenciesMap:"dependenciesMap"})),tO=(0,R.compose)((0,p.connect)(vb,{setPage:be.YA,onChange:be.Rz,insertWidget:be.Qe},gb),Hh,zh,$h,Jh,(0,R.branch)((function(e){return!!e.editNode}),(0,R.withProps)((function(e){var t=e.selectedNodes,r=void 0===t?[]:t,n=e.setEditNode,o=void 0===n?function(){}:n;return{buttons:[{visible:1===r.length,tooltipId:"close",glyph:"1-close",onClick:function(){return o(!1)}}]}})),(0,R.withProps)((function(e){var t=e.selectedNodes,r=void 0===t?[]:t,n=e.epsgSupported,o=void 0!==n&&n,i=e.onRemoveSelected,a=void 0===i?function(){}:i,l=e.setEditNode,c=void 0===l?function(){}:l,s=e.zoomTo,u=void 0===s?function(){}:s;return{tocButtons:[{visible:r.length>0,glyph:"zoom-to",tooltipId:1===r.length?"toc.toolZoomToLayerTooltip":"toc.toolZoomToLayersTooltip",disabled:!o,onClick:o?function(){return u(r)}:function(){}},{visible:1===r.length,glyph:"wrench",tooltipId:"toc.toolLayerSettingsTooltip",onClick:function(){return c(r[0])}},{onClick:function(){return a()},visible:r.length>0,glyph:"trash",tooltipId:"toc.toolTrashLayerTooltip"}]}}))),eO,cb(void 0,{tooltipId:"widgets.builder.wizard.backToMapSelection"}),fb((function(e){return 0===e.step})));var rO=(0,R.compose)((0,R.branch)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.catalog;return!t}),(0,p.connect)((0,D.P1)(ve.R7,(function(e){return{catalog:e}})))))(Iv),nO=r(91312);function oO(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function iO(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function aO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function lO(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?aO(Object(r),!0).forEach((function(t){cO(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aO(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function cO(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var sO,uO,pO,fO,dO=c().createElement(bv.Z,{glyph:"geoserver",padding:20}),mO=function(e){var t=e.results,r=e.totalCount;return{items:(""!==t&&xm()(t)||[]).map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{id:e.id,title:e.name,description:e.description,preview:e.thumbnail?c().createElement("img",{src:decodeURIComponent(e.thumbnail)}):dO,map:e}})),total:r}},yO=function(e){var t=e.text,r=void 0===t?"*":t,n=e.options,o=void 0===n?{}:n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(0,nO.jh)({category:"MAP",query:r,options:lO({params:{start:10*i,limit:10}},o)}).map(mO).catch((function(e){return oa.Observable.of({error:e,items:[],total:0})}))},bO={querySelector:".ms2-border-layout-body .ms2-border-layout-content",pageSize:10},gO=(0,R.compose)(mv((pO=(sO={loadPage:yO,scrollSpyOptions:bO,hasMore:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.total,r=e.items,n=void 0===r?[]:r;return t>n.length}}).loadPage,fO=sO.scrollSpyOptions,lO(lO({},iO(sO,["loadPage","scrollSpyOptions"])),{},{scrollSpyOptions:lO({skip:1},fO),loadPage:(uO=pO,function(e,t){return 0===t&&e&&!e.text?uO(e,t).map((function(e){var t,r=e.items,n=e.total;return lO(lO({},iO(e,["items","total"])),{},{total:n,items:[{id:"EMPTY_MAP",title:c().createElement(b.Z,{msgId:"widgets.selectMap.emptyMap.title"}),description:c().createElement(b.Z,{msgId:"widgets.selectMap.emptyMap.description"}),preview:dO,map:{id:"new.json"}}].concat((t=r,function(e){if(Array.isArray(e))return oO(e)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return oO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?oO(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()))})})):uO(e,t)}),hasMore:function(e){var t=e.total,r=e.items;return r&&r.length>=1&&"EMPTY_MAP"===r[0].id?t>r.length+1:t>r.length}}))),(0,R.withProps)((function(e){var t=e.items;return{skip:t&&t[0]&&"EMPTY_MAP"===t[0].id?1:0}}))),vO=(0,yv.Z)("searchText","setSearchText",""),hO=(mv({loadPage:yO,scrollSpyOptions:bO,hasMore:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.total,r=e.items,n=void 0===r?[]:r;return t>n.length}}),(0,R.mapPropsStream)((function(e){return e.merge(e.take(1).switchMap((function(t){var r=t.loadFirst,n=void 0===r?function(){}:r;return e.debounceTime(500).startWith({searchText:""}).distinctUntilKeyChanged("searchText",(function(e,t){return e===t})).do((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.searchText,r=e.options;return n({text:t,options:r})})).ignoreElements()})))})));const OO=(0,R.compose)(vO,gO,hO);var wO=(0,bl.Z)("placeholder")(g.FormControl);const EO=function(e){var t=e.onSearchTextChange,r=void 0===t?function(){}:t,n=e.searchText,o=e.title;return c().createElement(g.Grid,{className:"catalog-form",fluid:!0},c().createElement(g.Row,null,c().createElement(g.Col,{xs:12},o&&c().createElement("h4",{className:"text-center"},o),c().createElement(g.FormGroup,{controlId:"catalog-form"},c().createElement(wO,{type:"text",placeholder:"catalog.textSearchPlaceholder",value:n,onChange:function(e){return r(e.currentTarget.value)}})))))};function SO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function PO(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?SO(Object(r),!0).forEach((function(t){jO(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):SO(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function jO(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var CO=(0,R.compose)((0,ea.Z)((function(e){var t=e.loading,r=e.items;return 0===(void 0===r?[]:r).length&&t})),(0,ta.Z)((function(e){var t=e.loading,r=e.items;return 0===(void 0===r?[]:r).length&&!t}),{title:c().createElement(b.Z,{msgId:"catalog.noRecordsMatched"}),style:{transform:"translateY(50%)"}}))(r(38064).Z),xO=r(24384);function TO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function kO(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?TO(Object(r),!0).forEach((function(t){IO(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):TO(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function IO(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const AO=(0,R.compose)((0,R.withState)("selected","setSelected",null),(0,R.withHandlers)({onMapChoice:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onMapSelected,r=void 0===t?function(){}:t,n=e.onSetIdentifyTrue,o=void 0===n?function(){}:n,i=e.selectedSource,a=void 0===i?{}:i,l=e.includeMapId,c=void 0!==l&&l;return function(e){return("string"==typeof e.id?Ay().get(e.id).then((function(e){return e.data})):xO.Z.getData(e.id,{baseURL:a.baseURL})).then((function(t){var r=t.version||"string"==typeof e.id?Ar.ZP.normalizeConfig(t.map):Ar.ZP.convertFromLegacy(t);return kO(kO(kO({},r&&r.map||{}),c?{id:e.id}:{}),{},{groups:r&&r.groups||[],layers:(0,ne.IK)(r.layers.map((function(e){return"background"!==e.group||"ol"!==e.type&&"OpenLayers.Layer"!==e.type||(e.type="empty"),e})))})})).then((function(e){return e.layers=e.sources?e.layers.map((function(t){var r=(0,ne.gv)(e.sources,t);return kO(kO({},t),r)})):e.layers,r({map:e})})).then((function(){return o()}))}}}),(0,R.mapPropsStream)((function(e){return e.distinctUntilKeyChanged("selected").filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.selected;return t})).startWith({}).combineLatest(e,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.canProceed,r=arguments.length>1?arguments[1]:void 0;return kO({canProceed:t},r)}))})));function FO(e){return function(e){if(Array.isArray(e))return DO(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return DO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?DO(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function DO(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var RO=OO((function(e){var t=e.setSearchText,r=void 0===t?function(){}:t,n=e.selected,o=e.skip,i=void 0===o?0:o,a=e.onSelected,l=e.loading,s=e.searchText,u=e.items,p=void 0===u?[]:u,f=e.loaderProps,d=void 0===f?{}:f,m=e.total,y=e.header,g=e.title,v=void 0===g?c().createElement(b.Z,{msgId:"maps.title"}):g;return c().createElement(Vr.Z,{className:"map-catalog",header:y||c().createElement(EO,{title:v,searchText:s,onSearchTextChange:r}),footer:c().createElement("div",{className:"catalog-footer"},c().createElement("span",null,l&&p.length>0?c().createElement(gv.Z,null):null),vc()(m)?null:c().createElement("span",{className:"res-info"},c().createElement(b.Z,{msgId:"catalog.pageInfoInfinite",msgParams:{loaded:p.length-i,total:m}})))},c().createElement(CO,{loaderProps:d,items:p.map((function(e){return e===n||n&&e&&e.map&&n.id===e.map.id?PO(PO({},e),{},{selected:!0}):e})),loading:l,onItemClick:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.map;return a(t)}}))}));const NO=AO((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onClose,r=void 0===t?function(){}:t,n=e.setSelected,o=void 0===n?function(){}:n,i=e.onMapChoice,a=void 0===i?function(){}:i,l=e.stepButtons,s=void 0===l?[]:l,u=e.selected;return c().createElement(Vr.Z,{className:"bg-body layer-selector",header:c().createElement(Zg,{onClose:r},c().createElement(qr.Z,{btnDefaultProps:{bsStyle:"primary",bsSize:"sm"},buttons:[].concat(FO(s),[{tooltipId:"widgets.builder.wizard.useThisMap",onClick:function(){return a(u)},visible:!0,disabled:!u,glyph:"arrow-right"}])}))},c().createElement(RO,{title:c().createElement(b.Z,{msgId:"widgets.builder.wizard.selectAMap"}),selected:u,onSelected:function(e){return o(e)}}))})),MO=(0,R.compose)((0,p.connect)((function(){return{}}),{onMapSelected:function(e){var t=e.map;return(0,be.Rz)("map",(0,ne.lc)(t))},onSetIdentifyTrue:function(){return(0,be.Rz)("map.mapInfoControl",!0)},onResetChange:be.Rz}),(0,R.withProps)((function(e){var t=e.onResetChange,r=void 0===t?function(){}:t;return{stepButtons:[{glyph:"arrow-left",tooltipId:"widgets.builder.wizard.backToWidgetTypeSelection",onClick:function(){r("map",void 0),r("widgetType",void 0)}}]}})))(NO);var LO=tO((function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.step,o=void 0===n?0:n,i=r.buttons,a=r.tocButtons,l=void 0===a?[]:a,s=r.stepButtons,u=void 0===s?[]:s,p=r.dashBoardEditing,f=void 0!==p&&p,d=r.editorData,m=void 0===d?{}:d,y=r.setPage,b=void 0===y?function(){}:y,g=r.onFinish,v=void 0===g?function(){}:g,h=r.toggleLayerSelector,O=void 0===h?function(){}:h,w=r.onChange,E=void 0===w?function(){}:w;return c().createElement(qr.Z,{btnDefaultProps:{bsStyle:"primary",bsSize:"sm"},buttons:i||[].concat(Ch(0===o?l:[]),[{onClick:function(){return b(Math.max(o-1,0))},visible:1===o,glyph:"arrow-left",tooltipId:"widgets.builder.wizard.configureMapOptions"}],Ch(u),[{onClick:function(){var e;return E("map.mapInfoControl",!(null!=m&&null!==(e=m.map)&&void 0!==e&&e.mapInfoControl))},visible:f&&"map"===(null==m?void 0:m.widgetType),glyph:"info-sign",bsStyle:null!=m&&null!==(e=m.map)&&void 0!==e&&e.mapInfoControl?"success":"primary",tooltipId:null!=m&&null!==(t=m.map)&&void 0!==t&&t.mapInfoControl?"widgets.builder.wizard.disableIdentifyTool":"widgets.builder.wizard.enableIdentifyTool"},{onClick:function(){return O(!0)},visible:0===o,glyph:"plus",tooltipId:"widgets.builder.wizard.addLayer"},{onClick:function(){return b(Math.min(o+1,2))},visible:0===o,glyph:"arrow-right",tooltipId:"widgets.builder.wizard.configureWidgetOptions"},{onClick:function(){return v(Math.min(o+1,1))},visible:1===o,glyph:"floppy-disk",tooltipId:Th(o,m)}])})})),_O=(0,R.compose)((0,p.connect)(vb,{onResetChange:be.Rz}),(0,R.branch)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.editorData,r=void 0===t?{}:t;return!r.map}),(0,R.renderComponent)(MO)),(0,R.withState)("layerSelectorOpen","toggleLayerSelector",!1),(0,R.branch)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.layerSelectorOpen,r=void 0!==t&&t;return r}),(0,R.renderComponent)((0,R.compose)(Hh,(0,R.withHandlers)({onLayerChoice:function(e){var t=e.toggleLayerSelector,r=void 0===t?function(){}:t,n=e.addLayer,o=void 0===n?function(){}:n;return function(e){o(e),r(!1)}}}),Ky)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onClose,r=void 0===t?function(){}:t,n=e.setSelected,o=void 0===n?function(){}:n,i=e.onLayerChoice,a=void 0===i?function(){}:i,l=e.toggleLayerSelector,s=void 0===l?function(){}:l,u=e.selected,p=e.canProceed,f=e.layer,d=e.catalog,m=e.catalogServices;return c().createElement(Vr.Z,{className:"bg-body layer-selector",header:c().createElement(Bg,{onClose:r},c().createElement(qr.Z,{btnDefaultProps:{className:"square-button-md",bsStyle:"primary",bsSize:"sm"},buttons:[{onClick:function(){return s(!1)},tooltipId:"close",glyph:"1-close"},{onClick:function(){return a(f)},disabled:!u||!p,tooltipId:"widgets.builder.wizard.useTheSelectedLayer",glyph:"plus"}]}),u&&!p?c().createElement(Ql.Z,{glyph:"exclamation-mark",bsStyle:"warning",title:c().createElement(yp.v0,{msgId:"widgets.builder.errors.noWidgetsAvailableTitle"}),text:c().createElement(yp.k9,{msgId:"widgets.builder.errors.noWidgetsAvailableDescription"})}):null)},c().createElement(rO,{services:m,selected:u,catalog:d,onRecordSelected:function(e){return o(e)}}))})))),(0,R.withProps)((function(e){var t=e.onResetChange,r=void 0===t?function(){}:t;return{exitButton:{glyph:"arrow-left",onClick:function(){r("map",void 0)}}}}))),ZO=(0,p.connect)(vb,{onChange:be.Rz},gb)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onChange,r=void 0===t?function(){}:t,n=e.onFinish,o=void 0===n?function(){}:n,i=e.setPage,a=void 0===i?function(){}:i,l=e.step,s=void 0===l?0:l,u=e.selectedNodes,p=void 0===u?[]:u,f=e.onNodeSelect,d=void 0===f?function(){}:f,m=e.editorData,y=void 0===m?{}:m,b=e.editNode,g=e.setEditNode,v=void 0===g?function(){}:g,h=e.closeNodeEditor,O=void 0===h?function(){}:h,w=e.isLocalizedLayerStylesEnabled,E=e.env;return c().createElement(Zh,{step:s,setPage:a,onFinish:o,hideButtons:!0},c().createElement(Mh,{editNode:b,setEditNode:v,closeNodeEditor:O,onNodeSelect:d,selectedNodes:p,onChange:r,isLocalizedLayerStylesEnabled:w,preview:c().createElement(_h,{onChange:r,layers:y.map&&y.map.layers,map:y.map,env:E,options:{style:{margin:10,height:"calc(100% - 20px)"}}}),map:y.map}),c().createElement(vg,{key:"widget-options",data:y,onChange:r}))}));const BO=(0,R.compose)(_O,(0,R.withProps)((function(e){var t=e.editorData;return{map:(void 0===t?{}:t).map}})),Bh,jh.Z,zh)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.enabled,r=e.onClose,n=void 0===r?function(){}:r,o=e.toggleLayerSelector,i=void 0===o?function(){}:o,a=e.editorData,l=void 0===a?{}:a,s=e.editNode,u=e.setEditNode,p=e.closeNodeEditor,f=e.isLocalizedLayerStylesEnabled,d=e.env,m=e.selectedGroups,y=void 0===m?[]:m,b=e.exitButton,g=e.selectedLayers,v=void 0===g?[]:g,h=e.selectedNodes,O=e.onNodeSelect,w=void 0===O?function(){}:O,E=e.availableDependencies,S=void 0===E?[]:E,P=e.toggleConnection,j=void 0===P?function(){}:P;return c().createElement(Vr.Z,{className:"map-selector",header:c().createElement(Bg,{onClose:n},c().createElement(LO,{exitButton:b,editorData:l,availableDependencies:S,toggleConnection:j,selectedNodes:h,selectedLayers:v,selectedGroups:y,onNodeSelect:w,toggleLayerSelector:i}))},t?c().createElement(ZO,{setEditNode:u,editNode:s,closeNodeEditor:p,onNodeSelect:w,isLocalizedLayerStylesEnabled:f,env:d,selectedNodes:h}):null)})),zO=(0,R.compose)((0,R.setDisplayName)("CounterLayerSelector"),Yy,(0,R.defaultProps)({layerValidationStream:function(e){return e.switchMap((function(e){return function(e){return oa.Observable.forkJoin((0,ky.v$)({layer:e}),Ny(e))}(e)}))}}),Uy,Ky);var GO=r(39589),UO=r(80844);function WO(){return(WO=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var VO=(0,ea.Z)((function(e){var t=e.loading,r=e.data;return t||!r}),{width:500,height:200}),qO=(0,R.compose)((0,R.lifecycle)({componentDidMount:function(){this.props.onChange&&this.props.onChange("options.groupByAttributes",void 0)}}),Wb,Ib((function(e){var t=e.options;return 0===(void 0===t?[]:t).length})))(gg),HO=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,r=t.hasAggregateProcess;return e.aggregateFunction&&e.aggregationAttribute&&r},$O=(0,R.compose)((0,R.lifecycle)({UNSAFE_componentWillReceiveProps:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.valid,r=e.data,n=void 0===r?[]:r,o=e.options,i=void 0===o?{}:o,a=e.setValid,l=void 0===a?function(){}:a,c=e.error,s=e.hasAggregateProcess,u=!vc()(n[0])&&!c;!!t!=!!u&&HO(i,{hasAggregateProcess:s})&&l(u)}})),KO=(0,R.compose)(Og.Z,wg.Z,Eg.Z,GO.Z,$O,VO,Pg.Z,Sg.Z),YO={style:{width:450,height:100}},XO=kb(Tb),QO=KO(UO.Z),JO=function(e){var t=e.data,r=void 0===t?{}:t,n=e.layer,o=e.dependencies,i=void 0===o?{}:o,a=e.valid,l=e.setValid,s=void 0===l?function(){}:l,u=e.hasAggregateProcess;return HO(r.options,{hasAggregateProcess:u})?c().createElement(QO,WO({hasAggregateProcess:u},YO,{valid:a,dependenciesMap:r.dependenciesMap,dependencies:i,setValid:s,type:r.type,legend:r.legend,layer:r.layer||n,filter:r.filter,geomProp:r.geomProp,mapSync:r.mapSync,options:r.options})):c().createElement(UO.Z,WO({},YO,{data:[{data:42}],options:r.options,series:[{dataKey:"data"}]}))};const ew=(0,R.compose)((0,R.lifecycle)({UNSAFE_componentWillReceiveProps:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data,r=void 0===t?{}:t,n=e.valid,o=e.setValid,i=void 0===o?function(){}:o,a=e.hasAggregateProcess;n&&!HO(r.options,{hasAggregateProcess:a})&&i(!1)}}))((function(e){var t=e.onChange,r=void 0===t?function(){}:t,n=e.onFinish,o=void 0===n?function(){}:n,i=e.setPage,a=void 0===i?function(){}:i,l=e.setValid,s=void 0===l?function(){}:l,u=e.valid,p=e.formOptions,f=e.data,d=void 0===f?{}:f,m=e.layer,y=void 0===m?{}:m,b=e.step,g=void 0===b?0:b,v=e.types,h=e.featureTypeProperties,O=e.dependencies,w=e.hasAggregateProcess;return c().createElement(XO,{step:g,setPage:a,onFinish:o,isStepValid:function(e){return 1!==e||HO(d.options,{hasAggregateProcess:w})},hideButtons:!0},c().createElement(qO,{hasAggregateProcess:w,dependencies:O,key:"chart-options",formOptions:p,featureTypeProperties:h,types:v,data:d,onChange:r,layer:d.layer||y,sampleChart:c().createElement(JO,{hasAggregateProcess:w,data:d,valid:u,layer:d.layer||y,dependencies:O,setValid:function(e){return s(e&&HO(d.options,{hasAggregateProcess:w}))}})}),c().createElement(vg,{key:"widget-options",data:d,onChange:r,layer:d.layer||y,sampleChart:c().createElement(JO,{hasAggregateProcess:w,data:d,valid:u,layer:d.layer||y,dependencies:O,setValid:function(e){return s(e&&HO(d.options,{hasAggregateProcess:w}))}})}))}));function tw(e){return function(e){if(Array.isArray(e))return rw(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return rw(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?rw(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rw(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var nw=function(e){switch(e){case 0:return"widgets.builder.wizard.backToTypeSelection";case 1:return"widgets.builder.wizard.backToChartOptions";default:return"back"}},ow=function(e){switch(e){case 0:return"widgets.builder.wizard.configureWidgetOptions";default:return"next"}},iw=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.id;return r?"widgets.builder.wizard.updateWidget":"widgets.builder.wizard.addTheWidget"};function aw(){return(aw=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function lw(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var cw=(0,p.connect)(vb,{setPage:be.YA,setValid:function(e){return(0,be.t4)("valid",e)},onEditorChange:be.Rz,insertWidget:be.Qe},gb)((0,R.compose)(Gy({needsWPS:!0}),(0,R.renameProps)({editorData:"data",onEditorChange:"onChange"}))(ew)),sw=(0,R.compose)((0,p.connect)(vb,{openFilterEditor:be.fy,setPage:be.YA,onChange:be.Rz,insertWidget:be.Qe},gb),eb,cb(),fb((function(e){return 0===e.step})))((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.openFilterEditor,r=void 0===t?function(){}:t,n=e.step,o=void 0===n?0:n,i=e.stepButtons,a=void 0===i?[]:i,l=e.editorData,s=void 0===l?{}:l,u=e.valid,p=e.setPage,f=void 0===p?function(){}:p,d=e.onFinish,m=void 0===d?function(){}:d;return c().createElement(qr.Z,{btnDefaultProps:{bsStyle:"primary",bsSize:"sm"},buttons:[{onClick:function(){return f(Math.max(0,o-1))},visible:o>0,glyph:"arrow-left",tooltipId:nw(o)}].concat(tw(a),[{visible:0===o,onClick:r,disabled:!u,glyph:"filter",tooltipId:"widgets.builder.setupFilter"},{onClick:function(){return f(Math.min(o+1,2))},visible:0===o,disabled:0===o&&!u,glyph:"arrow-right",tooltipId:ow(o)},{onClick:function(){return m(Math.min(o+1,1))},visible:1===o,glyph:"floppy-disk",tooltipId:iw(o,s)}])})}));const uw=(0,R.compose)((0,p.connect)(vb),tb,(0,R.branch)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.layer;return!t}),(0,R.renderComponent)(zO(Fv))))((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.enabled,r=e.onClose,n=void 0===r?function(){}:r,o=e.exitButton,i=e.editorData,a=e.toggleConnection,l=e.availableDependencies,s=void 0===l?[]:l,u=e.dependencies,p=lw(e,["enabled","onClose","exitButton","editorData","toggleConnection","availableDependencies","dependencies"]);return c().createElement(Vr.Z,{header:c().createElement(Bg,{onClose:n},c().createElement(sw,{exitButton:o,editorData:i,toggleConnection:a,availableDependencies:s,onClose:n}))},t?c().createElement(cw,aw({formOptions:{showColorRamp:!1,showUom:!0,showGroupBy:!1,showLegend:!1},dependencies:u},p)):null)}));function pw(e){return function(e){if(Array.isArray(e))return fw(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return fw(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?fw(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fw(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var dw=function(e){switch(e){case 1:return"widgets.builder.wizard.backToPreview";case 2:return"widgets.builder.wizard.backToChartOptions";default:return"back"}},mw=function(e,t){return t?"widgets.builder.wizard.configureWidgetOptions":void 0},yw=function(e){return e.mapSync},bw=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.id;return r?"widgets.builder.wizard.updateWidget":"widgets.builder.wizard.addTheWidget"},gw=r(46173),vw=r(13314),hw=r(70919),Ow=kb(Tb),ww=(0,R.compose)(vw.Z,(0,ta.Z)((function(e){return!e.valid}),{title:c().createElement(b.Z,{msgId:"widgets.builder.errors.noMapAvailableForLegend"}),description:c().createElement(b.Z,{msgId:"widgets.builder.errors.noMapAvailableForLegendDescription"})}),(0,gw.Z)(!1))(hw.Z);const Ew=(0,R.compose)((0,R.withProps)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.availableDependencies,r=void 0===t?[]:t,n=e.editorData,o=void 0===n?{}:n;return{availableDependencies:r.filter((function(e){return!(o.id&&e.indexOf(o.id)>=0)}))}})),(0,R.withProps)((function(e){var t=e.editorData,r=void 0===t?{}:t,n=e.availableDependencies;return{canConnect:(void 0===n?[]:n).length>0,connected:!!r.mapSync}})));function Sw(){return(Sw=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Pw(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var jw=(0,R.withProps)((function(e){var t=e.availableDependencies,r=void 0===t?[]:t,n=e.editorData;return{valid:r.length>0&&n.mapSync}})),Cw=(0,D.P1)(Q.Pz,(function(e){return{currentLocale:e}})),xw=(0,R.compose)((0,p.connect)(vb,{setPage:be.YA,onEditorChange:be.Rz,insertWidget:be.Qe},gb),(0,p.connect)(Cw),jw,(0,R.renameProps)({editorData:"data",onEditorChange:"onChange"}))((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onChange,r=void 0===t?function(){}:t,n=e.onFinish,o=void 0===n?function(){}:n,i=e.setPage,a=void 0===i?function(){}:i,l=e.step,s=void 0===l?0:l,u=e.dependencies,p=e.valid,f=e.data,d=void 0===f?{}:f,m=e.currentLocale,y=e.language;return c().createElement(Ow,{step:s,setPage:a,onFinish:o,hideButtons:!0},c().createElement(g.Row,null,c().createElement(Db,{title:c().createElement(b.Z,{msgId:"widgets.builder.wizard.preview"})}),c().createElement(g.Col,{xs:12},c().createElement("div",{style:{marginBottom:"30px"}},c().createElement(ww,{valid:p,dependencies:u,dependenciesMap:d.dependenciesMap,key:"widget-options",onChange:r,currentLocale:m,language:y})))),c().createElement(vg,{key:"widget-options",onChange:r}))})),Tw=(0,R.compose)((0,p.connect)(vb,{openFilterEditor:be.fy,setPage:be.YA,onChange:be.Rz,insertWidget:be.Qe},gb),Ew,jw,(0,p.connect)((function(){return{}}),{onLayerChoice:function(e){return(0,be.Rz)("layer",e)},onResetChange:be.Rz}),(0,R.withProps)((function(e){var t=e.onResetChange,r=void 0===t?function(){}:t;return{exitButton:{glyph:"arrow-left",tooltipId:"widgets.builder.wizard.backToWidgetTypeSelection",onClick:function(){return r("widgetType",void 0)}}}})),cb((function(e){return 0===e.step})),fb((function(e){return 0===e.step})))((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.step,r=void 0===t?0:t,n=e.editorData,o=void 0===n?{}:n,i=e.valid,a=e.stepButtons,l=void 0===a?[]:a,s=e.onFinish,u=void 0===s?function(){}:s,p=e.setPage,f=void 0===p?function(){}:p;return c().createElement(qr.Z,{btnDefaultProps:{bsStyle:"primary",bsSize:"sm"},buttons:[{onClick:function(){return f(Math.max(0,r-1))},visible:r>0,glyph:"arrow-left",tooltipId:dw(r)}].concat(pw(l),[{onClick:function(){return f(Math.min(r+1,1))},visible:0===r,disabled:0===r&&!yw(o)||!i,glyph:"arrow-right",tooltipId:mw(0,i)},{onClick:function(){return u(Math.min(r+1,1))},visible:1===r,glyph:"floppy-disk",tooltipId:bw(r,o)}])})}));const kw=(0,R.compose)((0,p.connect)(vb),tb,Ew,Qy({layers:"layers",zoom:"zoom",viewport:"viewport"}),(0,R.mapPropsStream)((function(e){return e.merge(e.filter((function(e){var t=e.editorData;return!(void 0===t?{}:t).mapSync})).take(1).distinctUntilChanged().do((function(e){var t=e.toggleConnection;return(void 0===t?function(){}:t)(e.availableDependencies)})).ignoreElements())})))((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.enabled,r=e.onClose,n=void 0===r?function(){}:r,o=e.editorData,i=void 0===o?{}:o,a=e.exitButton,l=e.toggleConnection,s=e.availableDependencies,u=void 0===s?[]:s,p=e.dependencies,f=Pw(e,["enabled","onClose","editorData","exitButton","toggleConnection","availableDependencies","dependencies"]);return c().createElement(Vr.Z,{header:c().createElement(Bg,{onClose:n},c().createElement(Tw,{editorData:i,exitButton:a,toggleConnection:l,availableDependencies:u,onClose:n}),0===d()(i,"options.propertyName.length")?c().createElement(Ql.Z,{trigger:!1,glyph:"exclamation-mark",bsStyle:"warning",text:c().createElement(b.Z,{msgId:"widgets.builder.errors.checkAtLeastOneAttribute"})}):null)},t?c().createElement(xw,Sw({availableDependencies:u,editorData:i,dependencies:p},f)):null)}));function Iw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Aw(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Iw(Object(r),!0).forEach((function(t){Fw(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Iw(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Fw(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Dw=[{title:c().createElement(b.Z,{msgId:"widgets.types.chart.title"}),type:"chart",caption:c().createElement(b.Z,{msgId:"widgets.types.chart.caption"}),glyph:"stats",className:"ms-widget-selector-chart"},{title:c().createElement(b.Z,{msgId:"widgets.types.text.title"}),type:"text",glyph:"sheet",caption:c().createElement(b.Z,{msgId:"widgets.types.text.caption"}),className:"ms-widget-selector-text"},{title:c().createElement(b.Z,{msgId:"widgets.types.table.title"}),type:"table",glyph:"features-grid",caption:c().createElement(b.Z,{msgId:"widgets.types.table.caption"}),className:"ms-widget-selector-table"},{title:c().createElement(b.Z,{msgId:"widgets.types.counter.title"}),type:"counter",glyph:"counter",caption:c().createElement(b.Z,{msgId:"widgets.types.counter.caption"}),className:"ms-widget-selector-counter"},{title:c().createElement(b.Z,{msgId:"widgets.types.map.title"}),type:"map",glyph:"1-map",caption:c().createElement(b.Z,{msgId:"widgets.types.map.caption"}),className:"ms-widget-selector-map"},{title:c().createElement(b.Z,{msgId:"widgets.types.legend.title"}),type:"legend",glyph:"list",caption:c().createElement(b.Z,{msgId:"widgets.types.legend.caption"}),className:"ms-widget-selector-legend"}],Rw=(0,p.connect)((function(){return{}}),{onSelect:function(e){return(0,be.Rz)("widgetType",e)}})((function(e){var t=e.widgetTypes,r=void 0===t?Dw:t,n=e.typeFilter,o=void 0===n?function(){return!0}:n,i=e.onSelect,a=void 0===i?function(){}:i;return c().createElement(yl.Z,{key:"content",onItemClick:function(e){a(e.type)},items:r&&r.filter(o).map((function(e){return Aw(Aw({},e),{},{preview:c().createElement(bv.Z,{glyph:e.glyph,padding:20})})}))})}));function Nw(){return(Nw=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Mw(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var Lw=(0,D.P1)(jm.YI,(function(e){return{widgetType:e&&e.widgetType}})),_w={chart:Gv,text:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.enabled,r=e.onClose,n=void 0===r?function(){}:r;return c().createElement(Vr.Z,{header:c().createElement(Bg,{onClose:n},c().createElement(Yv,null))},t?c().createElement(Xv,null):null)},table:Ph,map:BO,counter:uw,legend:kw};const Zw=(0,R.compose)((0,p.connect)(Lw),(0,R.withProps)((function(e){var t=e.typeFilter,r=void 0===t?function(){return!0}:t,n=e.availableDependencies,o=void 0===n?[]:n;return{typeFilter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return r(e)&&!("legend"===e.type&&0===o.length)}}})),(0,R.branch)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.widgetType;return!t}),(0,R.renderComponent)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.enabled,r=e.onClose,n=void 0===r?function(){}:r,o=e.typeFilter;return c().createElement(Vr.Z,{className:"bg-body",header:c().createElement(Bg,{onClose:n},c().createElement(b.Z,{msgId:"widgets.selectWidgetType"}))},t?c().createElement(Rw,{typeFilter:o}):null)})),(function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.widgetType,r=e.onClose,n=void 0===r?function(){}:r,o=Mw(e,["widgetType","onClose"]),i=_w[t];return c().createElement(i,Nw({},o,{onClose:n,widgetType:t}))}})))();function Bw(e){return(Bw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zw(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Gw(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Uw(e,t){return(Uw=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ww(e,t){return!t||"object"!==Bw(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Vw(e){return(Vw=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function qw(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Hw(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?qw(Object(r),!0).forEach((function(t){$w(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qw(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function $w(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Kw=(0,R.compose)((0,p.connect)((0,D.P1)(jm.h9,jm.zA,(function(e,t){return Hw({dependencies:e},t)})),{toggleConnection:be.w2}),xy)(Zw),Yw=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Uw(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Vw(n);if(o){var r=Vw(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Ww(this,e)});function a(){return zw(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"componentDidMount",value:function(){this.props.onMount()}},{key:"componentWillUnmount",value:function(){this.props.onUnmount()}},{key:"render",value:function(){return c().createElement(Cy.Z,{open:this.props.enabled,size:this.props.dockSize,zIndex:this.props.zIndex,position:this.props.position,bsStyle:"primary",hideHeader:!0,style:Hw(Hw({},this.props.layout),{},{background:"white"})},c().createElement(Kw,{enabled:this.props.enabled,onClose:this.props.onClose,typeFilter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type;return"map"!==t&&"legend"!==t}}))}}])&&Gw(t.prototype,r),a}(c().Component);$w(Yw,"propTypes",{id:u().string,enabled:u().bool,limitDockHeight:u().bool,fluid:u().bool,zIndex:u().number,dockSize:u().number,position:u().string,onMount:u().func,onUnmount:u().func,onClose:u().func,dimMode:u().string,src:u().string,style:u().object,layout:u().object}),$w(Yw,"defaultProps",{id:"widgets-builder-plugin",enabled:!1,dockSize:500,limitDockHeight:!0,zIndex:1e4,fluid:!1,dimMode:"none",position:"left",onMount:function(){},onUnmount:function(){},onClose:function(){},layout:{}});var Xw=(0,p.connect)((0,D.P1)(J.dH,(function(e){return(0,Ke.ic)(e,{height:!0})}),(function(e,t){return{enabled:e,layout:t}})),{onMount:function(){return(0,v.Xg)("widgetBuilder","available",!0)},onUnmount:function(){return(0,v.Xg)("widgetBuilder","available",!1)},onClose:v.Xg.bind(null,"widgetBuilder","enabled",!1,!1)})(Yw);const Qw=(0,O.rx)("WidgetsBuilder",{component:Xw,epics:jy,containers:{TOC:{doNotHide:!0,name:"WidgetBuilder"}}});var Jw=r(30998),eE=r.n(Jw);function tE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function rE(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tE(Object(r),!0).forEach((function(t){nE(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tE(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function nE(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var oE=function(e){return!e.dataGrid||!e.dataGrid.static},iE=(0,D.P1)(jm.zm,jm.YR,jm.yZ,jm.lF,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return wo()(e.filter(oE).map((function(e){return eE()(t,(function(t){return t===e.id}))>=0?rE(rE({},e),{},{collapsed:!0}):e})),(function(e){var t=n[e.id]&&n[e.id].layout,o=ye()(r,{i:e.id})||t||{},i=o.x,a=void 0===i?0:i,l=o.y;return 100*(void 0===l?0:l)+a}))})),aE=(0,R.compose)((0,R.defaultProps)({toolsOptions:{seeHidden:"user.role===ADMIN"}}),Dm("toolsOptions",{asObject:!0}),(0,R.withProps)((function(e){var t=e.widgets,r=e.toolsOptions;return{widgets:(void 0===r?{seeHidden:!1}:r).seeHidden?t:t.filter((function(e){return!e.hide}))}})));function lE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function cE(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?lE(Object(r),!0).forEach((function(t){sE(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lE(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function sE(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var uE=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.widgetType,r=e.type,n=t&&"chart"!==t?t:r;switch(n){case"text":return"sheet";case"table":return"features-grid";case"pie":return"pie-chart";case"line":return"1-line";case"map":return"1-map";case"counter":return"counter";default:return"stats"}};const pE=(0,R.compose)((0,R.withPropsOnChange)(["btnGroupProps"],(function(e){var t=e.btnGroupProps;return{btnGroupProps:cE(cE({},t),{},{className:"widgets-bar"+(t&&t.className?" ".concat(t.className):"")})}})),(0,R.withPropsOnChange)(["widgets","onClick"],(function(e){var t=e.widgets,r=void 0===t?[]:t,n=e.onClick,o=void 0===n?function(){}:n;return{buttons:r.map((function(e){return{glyph:uE(e),tooltip:e.title,className:e.collapsed?"btn-tray":"btn-tray active",onClick:function(){return o(e)}}}))}})))(qr.Z);function fE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function dE(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?fE(Object(r),!0).forEach((function(t){mE(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fE(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function mE(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const yE=(0,R.compose)((0,p.connect)((0,D.P1)(iE,(function(e){return{widgets:e}})),{onClick:be.f}),(0,R.defaultProps)({btnGroupProps:{className:"widgets-toolbar",style:{marginLeft:2,marginRight:2}}}),aE,(0,R.withProps)((function(e){var t=e.btnGroupProps,r=void 0===t?{}:t,n=e.btnDefaultProps,o=void 0===n?{}:n;return{btnGroupProps:dE({bsSize:"xsmall"},r),btnDefaultProps:dE({bsSize:"xsmall"},o||{})}})))(pE);function bE(e){return(bE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gE(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function vE(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hE(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function OE(e,t){return(OE=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function wE(e,t){return!t||"object"!==bE(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function EE(e){return(EE=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function SE(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var PE=(0,$e.Z)(Je.Z),jE=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.expanded,r=e.onClick,n=void 0===r?function(){}:r;return c().createElement(PE,{tooltipId:t?"widgets.tray.collapseTray":"widgets.tray.expandTray",bsSize:"xsmall",bsStyle:"default",style:{borderColor:"transparent"},onClick:n},c().createElement(g.Glyphicon,{glyph:t?"chevron-right":"chevron-left"}))},CE=(0,R.compose)((0,p.connect)((0,D.P1)(jm.E5,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{widgets:e}})),{onClick:function(){return(0,be.Ff)()}}),aE,(0,R.withProps)((function(e){var t=e.widgets;return{shouldExpand:0===(void 0===t?[]:t).length}})))((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onClick,r=void 0===t?function(){}:t,n=e.shouldExpand,o=void 0!==n&&n;return c().createElement(PE,{tooltipId:o?"widgets.tray.expandAll":"widgets.tray.collapseAll",bsStyle:o?"primary":"success active",bsSize:"xsmall",onClick:r},c().createElement(g.Glyphicon,{glyph:"list"}))})),xE=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&OE(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=EE(n);if(o){var r=EE(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return wE(this,e)});function a(){return vE(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"render",value:function(){var e,t=this;return this.props.enabled?c().createElement("div",{className:"widgets-tray",style:{marginBottom:32,marginRight:80,bottom:0,right:0,position:"absolute"}},c().createElement(Vr.Z,{columns:[c().createElement(jE,{key:"collapse-tray",toolsOptions:this.props.toolsOptions,expanded:this.props.expanded,onClick:function(){return t.props.setExpanded(!t.props.expanded)}}),c().createElement(CE,{key:"collapse-all",toolsOptions:this.props.toolsOptions})].concat((e=this.props.items.map((function(e){return e.tool}))||[],function(e){if(Array.isArray(e))return gE(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return gE(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?gE(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()))},this.props.expanded?c().createElement(yE,{toolsOptions:this.props.toolsOptions}):null)):null}}])&&hE(t.prototype,r),a}(c().Component);SE(xE,"propTypes",{enabled:u().bool,toolsOptions:u().object,items:u().array,expanded:u().bool,setExpanded:u().func}),SE(xE,"defaultProps",{enabled:!0,items:[],expanded:!1,setExpanded:function(){}});const TE=(0,R.compose)((0,R.withState)("expanded","setExpanded",!1),(0,p.connect)((0,D.P1)(iE,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return{widgets:e}})),{toggleTray:be.ep}),aE,(0,R.withProps)((function(e){var t=e.widgets,r=void 0===t?[]:t;return{hasCollapsedWidgets:r.filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.collapsed;return t})).length>0,hasTrayWidgets:r.length>0}})),(0,R.lifecycle)({componentDidMount:function(){this.props.toggleTray&&this.props.toggleTray(!0)},componentWillUnmount:function(){this.props.toggleTray&&this.props.toggleTray(!1)}}),(0,R.mapPropsStream)((function(e){return e.merge(e.distinctUntilKeyChanged("hasCollapsedWidgets").do((function(e){var t=e.setExpanded;return(void 0===t?function(){}:t)(e.hasCollapsedWidgets)})).ignoreElements())})),(0,R.withProps)((function(e){var t=e.enabled,r=e.hasTrayWidgets;return{enabled:t&&r}})))(xE);var kE=r(57676),IE=r(81808),AE=r(97291);function FE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function DE(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?FE(Object(r),!0).forEach((function(t){RE(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):FE(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function RE(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var NE=function(e){return((0,jm.E5)(e)||[]).filter((function(e){return!d()(e,"dataGrid.static")})).length>0},ME=function(e){return function(t){return t.take(1).switchMap((function(){return oa.Observable.of((0,q.um)(DE(DE({},e),{},{autoDismiss:8,position:"tr",uid:"timeline-collapsed"})))})).merge(t)}};const LE={collapseTimelineOnWidgetsEvents:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.getState,n=void 0===r?function(){}:r;return oa.Observable.merge(e.ofType(be.Ym,be.uU,IE.ok,be.$A,be.Jm).filter((function(){return NE(n())&&(0,AE.pn)(n())}))).switchMap((function(){return oa.Observable.of((0,kE.w2)(!0))})).let(ME({title:"widgets.tray.notifications.collapsed.timelineTitle",message:"widgets.tray.notifications.collapsed.message"}))},collapseWidgetsOnTimelineEvents:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.getState,n=void 0===r?function(){}:r;return oa.Observable.merge(e.ofType(kE.M5).filter((function(e){return!e.collapsed})),e.ofType(h.yS).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.newProperties,r=void 0===t?{}:t;return r.dimensions}))).filter((function(){return NE(n())&&(0,AE.qJ)(n())&&(0,AE.pn)(n())})).switchMap((function(){return oa.Observable.of((0,be.Ff)())})).let(ME({title:"widgets.tray.notifications.collapsed.widgetsTitle",message:"widgets.tray.notifications.collapsed.message"}))},expandTimelineIfCollapsedOnTrayUnmount:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.getState,n=void 0===r?function(){}:r;return e.ofType(be.yY,be.$A,IE.ok).filter((function(){return!(0,AE.pn)(n())&&(0,AE.qJ)(n())})).filter((function(){return!NE(n())})).switchMap((function(){return oa.Observable.of((0,kE.w2)(!1))}))}},_E={WidgetsTrayPlugin:Rm(TE),epics:LE};var ZE=r(64355),BE=r.n(ZE),zE=r(69175);function GE(e){return(GE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function UE(){return(UE=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function WE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function VE(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?WE(Object(r),!0).forEach((function(t){QE(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):WE(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function qE(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function HE(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function $E(e,t){return($E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function KE(e,t){return!t||"object"!==GE(t)&&"function"!=typeof t?YE(e):t}function YE(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function XE(e){return(XE=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function QE(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var JE=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$E(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=XE(n);if(o){var r=XE(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return KE(this,e)});function a(){var e;qE(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return QE(YE(e=i.call.apply(i,[this].concat(r))),"system",(function(){return e.refs.notify})),QE(YE(e),"updateNotifications",(function(t){var r=t.map((function(e){return e.uid})),n=e.system().state.notifications||[];n.forEach((function(t){r.indexOf(t.uid)<0&&e.system().removeNotification(t.uid)})),t.forEach((function(t){if(n.indexOf(t.uid)<0){var r,o=t.message,i=(0,ie.S$)(e.context.messages,o);r=t.values?(0,e.props.intl.formatMessage)(r=(0,zE.defineMessages)({id:o,defaultMessage:i}),t.values):i||o,e.system().addNotification(VE(VE({},t),{},{title:(0,ie.S$)(e.context.messages,t.title)||t.title,message:r,action:t.action&&{label:(0,ie.S$)(e.context.messages,t.action.label)||t.action.label,callback:t.action.dispatch?function(){e.props.onDispatch(t.action.dispatch)}:t.action.callback},onRemove:function(){e.props.onRemove(t.uid),t.onRemove&&t.onRemove()}}))}}))})),e}return t=a,(r=[{key:"componentDidMount",value:function(){this.updateNotifications(this.props.notifications)}},{key:"componentDidUpdate",value:function(){var e=(this.props||[]).notifications;this.updateNotifications(e)}},{key:"render",value:function(){var e=this.props,t=(e.notifications,e.onRemove,function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["notifications","onRemove"]));return c().createElement(m.Z,null,c().createElement(BE(),UE({ref:"notify"},t)))}}])&&HE(t.prototype,r),a}(c().Component);QE(JE,"propTypes",{notifications:u().array,intl:zE.intlShape.isRequired,onRemove:u().func,onDispatch:u().func}),QE(JE,"contextTypes",{messages:u().object}),QE(JE,"defaultProps",{notifications:[],onRemove:function(){},onDispatch:function(){}});const eS=(0,zE.injectIntl)(JE);const tS={NotificationsPlugin:(0,p.connect)((function(e){return{notifications:e&&e.notifications}}),{onRemove:q.Cp,onDispatch:q.Ce})(eS),reducers:{notifications:r(97080).Z},epics:{clearNotificationOnLocationChange:function(e){return e.ofType(by.nk).switchMap((function(){return oa.Observable.of((0,q.ZH)())}))}}};var rS=r(3523),nS=r(78718),oS=r.n(nS),iS=r(32833),aS=r(54061),lS=r.n(aS),cS=r(13292),sS=r.n(cS),uS=r(34387),pS=r(96958),fS=r(50937),dS=r.n(fS),mS=r(21914),yS=r(41156),bS=r(29386),gS=r(31255),vS=r(69842);function hS(e){return function(e){if(Array.isArray(e))return OS(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return OS(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?OS(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function OS(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function wS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ES(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?wS(Object(r),!0).forEach((function(t){SS(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wS(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function SS(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var PS=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.page,n=t.size,o=(0,gS.Vf)(e),i=void 0!==n?n:o.size;return{startIndex:void 0!==r?r*i:o.page*i,maxFeatures:i}},jS=function(e,t){return ES(ES({},e),{},{pagination:t})},CS=function(e,t,r){var n=r.insert,o=r.update,i=r.propertyChange,a=r.getPropertyName;return(0,r.transaction)(t.map((function(e){return n(e)})),Object.keys(e).map((function(t){return Object.keys(e[t]).map((function(r){return o([i(a(r),e[t][r]),(0,uS.fidFilter)("ogc",t)])}))})))},xS=function(e,t){return oa.Observable.defer((function(){return Ay().post(e,t,{headers:{"Content-Type":"application/xml"}})})).let(Fy.oB)},TS=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.featuregrid;return(0,h.He)(t.selectedLayer,{filterObj:void 0})},kS=function(e){return function(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.update,o=void 0===n?{}:n,i=r.append,a=(0,gS.Li)(e.getState()),l=a.id,c=ES({},d()(e.getState(),'featuregrid.advancedFilters["'.concat(l,'"]')));if(c){var s=(0,gS.M0)(e.getState())||{},u=lS()(s,(function(e,t,r){return(0,pS.dJ)(ES({attribute:r},t),e)}),{}),p="AND";u.spatialField&&(c.spatialField=void 0,p=u.spatialFieldOperator);var f=(0,Nu.composeAttributeFilters)([c,u],"AND",p),m=ES(ES({},c),f);return(0,gy.rh)(m,o.type)}var y=o;return i&&null!=o&&o.attribute&&(y=(0,gS.M0)(e.getState())[null==o?void 0:o.attribute]),(0,gy.rh)((0,pS.dJ)(y,(0,vy.X1)(e.getState())),null===(t=y)||void 0===t?void 0:t.type)}},IS=function(e,t){return e.ofType(h.R8).switchMap((function(r){var n,o=r.layer,i=d()(t.getState(),"query.typeName");return(n=oa.Observable).of.apply(n,hS(i!==o.name?[(0,yy.mc)()]:[]).concat([(0,v.Xg)("drawer","enabled",!1),(0,dy.uF)(o.id),(0,dy.t9)()])).merge(function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.url,o=r.name,i=r.id,a=d()(t.getState(),'featuregrid.advancedFilters["'.concat(i,'"]')),l=function(){return(0,gy.rP)(n,a||{featureTypeName:o,filterType:"OGC",ogcVersion:"1.1.0"})};return(0,vy.hk)(t.getState(),o)?oa.Observable.of(l(),(0,gy.gT)(n,o)):oa.Observable.of((0,gy.gT)(n,o)).merge(e.ofType(gy.u7).filter((function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).typeName===o})).map(l))}(e,t,o))}))},AS=function(e){return e.ofType(gy.DR).switchMap((function(e){return oa.Observable.of((0,dy.uF)(e.id))}))},FS=function(e,t){return e.ofType(gy.Yx).switchMap((function(){return oa.Observable.of((0,dy.oO)(0)).concat((0,gS.eK)(t.getState())===dy.EH.VIEW?oa.Observable.of((0,dy.nY)()):oa.Observable.empty())}))},DS=function(e,t){return e.ofType(dy.dY).switchMap((function(r){var n=r.sortBy,o=r.sortOrder;return oa.Observable.of((0,gy.IO)((0,vy.Bu)(t.getState()),jS(ES(ES({},(0,vy.X1)(t.getState())),{},{sortOptions:{sortBy:n,sortOrder:o}}),PS(t.getState())),(0,gS.TC)(t.getState()))).merge(e.ofType(gy.Hu).map((function(e){return(0,dy.UB)(d()(e,"result.features",[]),[d()(e,"filterObj.pagination.startIndex")])})).takeUntil(e.ofType(gy.VT)).take(1))}))},RS=function(e,t){return e.ofType(dy.$O).switchMap((function(){var r,n=null===(r=(0,gS.Vf)(t.getState()))||void 0===r?void 0:r.size;return e.ofType(dy._u).filter((function(e){var t=e.update,r=void 0===t?{}:t;return"geometry"===r.type&&r.enabled&&!r.value})).switchMap((function(){var r=!1;return e.ofType(dy._u).filter((function(e){var t=e.update,r=void 0===t?{}:t;return"geometry"===r.type&&r.enabled&&!r.deactivated})).switchMap((function(e,n){return 0===n?(r=!0,oa.Observable.from([(0,dy.Jr)(1e5),(0,dy.KD)([]),kS(t)(e)])):oa.Observable.of(kS(t)(e))})).takeUntil(oa.Observable.merge(e.ofType(dy._u).filter((function(e){var t=e.update,r=void 0===t?{}:t;return"geometry"===r.type&&!r.enabled})),e.ofType(dy.sF,by.nk))).merge(e.ofType(dy._u).filter((function(e){var t=e.update,r=void 0===t?{}:t;return"geometry"===r.type&&!r.enabled})).take(1).switchMap((function(e){return r?oa.Observable.of((0,dy.Jr)(n),kS(t)(e)):oa.Observable.of(kS(t)(e))})).takeUntil(e.ofType(dy.sF,by.nk))).merge(e.ofType(dy.sF,by.nk).take(1).switchMap((function(){var e,o=(0,dy.a8)({attribute:null===(e=(0,My.findGeometryProperty)((0,vy.Qs)(t.getState())))||void 0===e?void 0:e.name,enabled:!1,type:"geometry"});return r?oa.Observable.of((0,dy.Jr)(n),o,(0,dy.pP)(o)):oa.Observable.of(o,(0,dy.pP)(o))})))}))}))},NS=function(e,t){return e.ofType(dy.iB).switchMap((function(e){return oa.Observable.of(kS(t)(e.updateFilterAction))}))},MS=function(e,t){return e.ofType(gy.Yx).switchMap((function(){return e.ofType(dy._u).filter((function(e){var t=e.update;return"geometry"!==(void 0===t?{}:t).type})).map(kS(t))}))},LS=function(e,t){return e.ofType(dy.aO).filter((function(){return(0,gS.eK)(t.getState())===dy.EH.EDIT})).switchMap((function(){return(ye()((0,gS.M0)(t.getState()),(function(e){return"geometry"===e.type}))||{}).value?oa.Observable.empty():oa.Observable.of((0,dy.a8)({attribute:(0,My.findGeometryProperty)((0,vy.Qs)(t.getState())).name,enabled:!0,type:"geometry"}))}))},_S=function(e){return e.ofType(dy._u).filter((function(e){var t=e.update,r=void 0===t?{}:t;return"geometry"===r.type&&!r.enabled})).switchMap((function(){return oa.Observable.of((0,dy.dq)())}))},ZS=function(e,t){return e.ofType(dy._u).filter((function(e){var t=e.update,r=void 0===t?{}:t;return"geometry"===r.type&&r.enabled})).switchMap((function(){return e.ofType(V.TR).switchMap((function(e){var r=e.point,n=r.latlng,o=r.pixel,i=r.modifiers,a=i.ctrl,l=i.metaKey,c=ye()((0,gS.M0)(t.getState()),(function(e){return"geometry"===e.type}))||{},s=(0,X.uy)(t.getState()),u=cn.default.reproject([n.lng,n.lat],"EPSG:4326",s),p=oe.default.getHook(oe.default.GET_COORDINATES_FROM_PIXEL_HOOK),f=cn.default.calculateCircleRadiusFromPixel(p,o,u,4);return c.deactivated?oa.Observable.empty():oa.Observable.of((0,dy.dq)({multiselect:a||l}),(0,dy.a8)(ES(ES({},c),{},{value:{attribute:c.attribute||d()((0,vS.vE)(t.getState()),"attribute"),geometry:{center:[u.x,u.y],coordinates:cn.default.calculateCircleCoordinates(u,f,12),extent:[u.x-f,u.y-f,u.x+f,u.y+f],projection:s,radius:f,type:"Polygon"},method:"Circle",operation:"INTERSECTS"}}),a||l))})).takeUntil(oa.Observable.merge(e.ofType(dy._u).filter((function(e){var t=e.update,r=void 0===t?{}:t;return"geometry"===r.type&&!r.enabled})),e.ofType(by.nk)))}))},BS=function(e,t){return e.ofType(dy._u).filter((function(e){var t=e.update,r=void 0===t?{}:t;return"geometry"===r.type&&r.enabled})).switchMap((function(){return e.ofType(yS.fy).switchMap((function(e){var r=e.boxEndInfo,n=r.boxExtent,o=r.modifiers,i=o.ctrl,a=o.metaKey,l=cn.default.getPolygonFromExtent(n),c=(0,X.uy)(t.getState()),s=ye()((0,gS.M0)(t.getState()),(function(e){return"geometry"===e.type}))||{};return s.deactivated?oa.Observable.empty():oa.Observable.of((0,dy.dq)({multiselect:i||a}),(0,dy.a8)(ES(ES({},s),{},{value:{geometry:ES(ES({},l.geometry),{},{projection:c}),attribute:s.attribute||d()((0,vS.vE)(t.getState()),"attribute"),method:"Rectangle",operation:"INTERSECTS"}}),i||a))})).takeUntil(oa.Observable.merge(e.ofType(dy._u).filter((function(e){var t=e.update,r=void 0===t?{}:t;return"geometry"===r.type&&!r.enabled}))))}))},zS=function(e){return e.ofType(dy._u).filter((function(e){var t=e.update,r=void 0===t?{}:t;return"geometry"===r.type&&r.enabled})).switchMap((function(){return oa.Observable.of((0,yS.ZR)("start"))}))},GS=function(e){return oa.Observable.merge(e.ofType(dy._u).filter((function(e){var t=e.update,r=void 0===t?{}:t;return"geometry"===r.type&&!r.enabled})),e.ofType(dy.sF)).switchMap((function(){return oa.Observable.of((0,yS.ZR)("end"))}))},US=function(e,t){return e.ofType(gy.Hu).filter((function(e){return"geometry"===e.reason})).switchMap((function(e){var r=e.result,n=d()(r,"features"),o=(0,gS.gz)(t.getState()),i=ye()((0,gS.M0)(t.getState()),(function(e){return"geometry"===e.type}));return oa.Observable.of((0,dy.KD)(n.length>0&&i&&i.value?hS(n):[],o))}))},WS=function(e){return e.ofType(dy.VV).flatMap((function(e){var t=e.activated;return oa.Observable.of((0,dy.YG)(t),(0,dy.VH)(t))}))},VS=function(e,t){return e.ofType(dy._9).flatMap((function(){var e=ye()((0,gS.M0)(t.getState()),(function(e){return"geometry"===e.type}))||{},r=(0,gS.LB)(t.getState()),n=(0,gS.b4)(t.getState());return oa.Observable.of((0,dy.a8)(ES(ES({},e),{},{type:"geometry",attribute:e.attribute||d()((0,vS.vE)(t.getState()),"attribute"),deactivated:!(!r&&!n&&e.deactivated)})))}))},qS=function(e,t){return oa.Observable.merge(e.ofType(dy.IN,my.DI,dy.JB,dy.K8),e.ofType(dy.B8).filter((function(e){return!!e.deactivated}))).flatMap((function(){var e=ye()((0,gS.M0)(t.getState()),(function(e){return"geometry"===e.type}))||{};return e.deactivated?oa.Observable.empty():oa.Observable.of((0,dy.a8)(ES(ES({},e),{},{type:"geometry",attribute:e.attribute||d()((0,vS.vE)(t.getState()),"attribute"),deactivated:!0})))}))},HS=function(e,t){return oa.Observable.merge(e.ofType(dy.AY,dy.yi),e.ofType(dy.B8).filter((function(e){return!e.deactivated}))).flatMap((function(){var e=ye()((0,gS.M0)(t.getState()),(function(e){return"geometry"===e.type}))||{},r=(0,gS.LB)(t.getState()),n=(0,gS.b4)(t.getState());return!e.deactivated||r||n?oa.Observable.empty():oa.Observable.of((0,dy.a8)(ES(ES({},e),{},{type:"geometry",attribute:e.attribute||d()((0,vS.vE)(t.getState()),"attribute"),deactivated:!1})))}))},$S=function(e,t){return e.ofType(dy.gG).merge(e.ofType(gy.VN).debounceTime(500).map((function(e){return ES(ES({},e),{},{page:0})}))).switchMap((function(r){return function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.page,n=t.size,o=t.reason,i=e.getState();return oa.Observable.of((0,gy.IO)((0,vy.Bu)(i),jS(ES({},(0,vy.X1)(i)),PS(i,{page:r,size:n})),(0,gS.TC)(i),o))}}(t)(r).merge(e.ofType(gy.Hu).map((function(e){var r=d()(e,"result.features",[]),n=(0,gS.gz)(t.getState()),o=ye()((0,gS.M0)(t.getState()),(function(e){return"geometry"===e.type}));return n&&o.enabled&&(r=(0,gS._w)(t.getState())),(0,dy.UB)(r,[d()(e,"filterObj.pagination.startIndex")])})).take(1).takeUntil(e.ofType(gy.VT)))}))},KS=function(e,t){return e.ofType(dy.AY).switchMap((function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.page,o=r.size;return oa.Observable.of((0,gy.IO)((0,vy.Bu)(t.getState()),jS(ES({},(0,vy.X1)(t.getState())),PS(t.getState(),{page:n,size:o})),(0,gS.TC)(t.getState())),(0,h.ct)((0,gS.u$)(t.getState()))).merge(e.ofType(gy.Hu).map((function(e){return oa.Observable.of((0,dy.$E)(),(0,dy.UB)(d()(e,"result.features",[]),[d()(e,"filterObj.pagination.startIndex")]))})).mergeAll().takeUntil(e.ofType(gy.VT)).take(2))}))},YS=function(e){return e.ofType(dy.AY,dy.sF).switchMap((function(){return oa.Observable.of((0,dy.KD)([]))}))},XS=function(e,t){return e.ofType(dy.zh).switchMap((function(){return oa.Observable.of((0,dy.fO)()).concat(function(){var e=arguments.length>2?arguments[2]:void 0;return xS(arguments.length>3?arguments[3]:void 0,CS(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],dS()(e)))}((0,gS.ND)(t.getState()),(0,gS.kG)(t.getState()),(0,vy.Qs)(t.getState()),(0,vy.Bu)(t.getState())).map((function(){return(0,dy.gc)()})).catch((function(e){return oa.Observable.of((0,dy.cE)(),(0,q.vU)({title:"featuregrid.errorSaving",message:e.message||"Unknown Exception",uid:"saveError",autoDismiss:5}))})))}))},QS=function(e,t){return e.ofType(dy.Hk).switchMap((function(){return oa.Observable.of((0,dy.fO)()).concat((e=(0,gS._w)(t.getState()),r=(0,vy.Qs)(t.getState()),n=(0,vy.Bu)(t.getState()),xS(n,function(e,t){var r=t.transaction,n=t.deleteFeature;return r(e.map(n))}(e,dS()(r)))).map((function(){return(0,dy.gc)()})).catch((function(e){return oa.Observable.of((0,dy.cE)(),(0,q.vU)({title:"featuregrid.errorSaving",message:e.message||"Unknown Exception",uid:"saveError"}))})).concat(oa.Observable.of((0,dy.Pv)("deleteConfirm"),(0,dy.MO)())));var e,r,n}))},JS=function(e,t){return e.ofType(dy.Ub).switchMap((function(){var e=t.getState(),r=(0,vy.Qs)(e),n=(0,pS.cZ)(),o=(0,My.findGeometryProperty)(r).localType,i={featureProjection:n,stopAfterDrawing:!1,editEnabled:!0,drawEnabled:!1},a=le()({},(0,gS.P3)(e),{type:"Feature"}),l=(0,gS.ND)(e);return l[a.id]&&l[a.id]&&l[a.id].geometry&&(a.geometry=l[a.id].geometry),oa.Observable.of((0,my.Yf)("drawOrEdit",o,"featureGrid",[a],i))}))},eP=function(e,t){return e.ofType(dy._9).switchMap((function(){var e=t.getState(),r=(0,vy.Qs)(e),n=(0,pS.cZ)(),o=(0,My.findGeometryProperty)(r).localType,i=le()({},(0,gS.P3)(e),{type:"Feature"}),a=(0,gS.ND)(e);a[i.id]&&(a[i.id].geometry||null===a[i.id].geometry)&&(i.geometry=a[i.id].geometry),i._new&&(i.geometry=de()((0,gS.kG)(e)).geometry);var l={featureProjection:n,stopAfterDrawing:!0,editEnabled:!(0,gS.Ae)(e),drawEnabled:(0,gS.Ae)(e)};return oa.Observable.of((0,my.Yf)("drawOrEdit",o,"featureGrid",[i],l))}))},tP=function(e,t){return e.ofType(dy.$O).switchMap((function(){return e.ofType(dy.aO).filter((function(){return(0,gS.eK)(t.getState())===dy.EH.EDIT})).take(1).switchMap((function(){return e.ofType(by.nk,dy.sF).take(1).switchMap((function(){return oa.Observable.of((0,my.bp)())}))}))}))},rP=function(e,t){return e.ofType(dy.$O).switchMap((function(){var e=[(0,v.Xg)("metadataexplorer","enabled",!1),(0,v.Xg)("annotations","enabled",!1),(0,v.Xg)("details","enabled",!1)];return(0,J.Iz)(t.getState())&&e.push((0,v.Xg)("measure","enabled",!1)),oa.Observable.from(e)}))},nP=function(e,t){return e.ofType(my.DI).filter((function(e){return"featureGrid"===e.owner})).switchMap((function(e){var r=t.getState(),n={featureProjection:(0,pS.cZ)(),stopAfterDrawing:!1,editEnabled:!0,drawEnabled:!1},o=e.features.map((function(e,t){return le()({},e,{id:(0,gS._w)(r)[t].id,_new:(0,gS._w)(r)[t]._new,type:"Feature"})})),i=le()({},de()(e.features),{id:(0,gS.P3)(r).id,_new:(0,gS.P3)(r)._new,type:"Feature"}),a="enterEditMode"===e.enableEdit?oa.Observable.of((0,my.Yf)("drawOrEdit",i.geometry.type,"featureGrid",o,n)):oa.Observable.empty();return oa.Observable.of((0,dy.Vw)(o)).concat(a)}))},oP=function(e,t){return e.ofType(dy.JB).switchMap((function(){var e=t.getState();return oa.Observable.from([(0,dy.F5)((0,gS._w)(e)),(0,my.bp)()])}))},iP=function(e,t){return e.ofType(dy.Oj,dy.jp,dy.yi,dy.aO).filter((function(){return(0,gS.eK)(t.getState())===dy.EH.EDIT&&(0,gS.bq)(t.getState())})).switchMap((function(e){return r=t.getState(),n=e.type===dy.yi,o=(0,pS.cZ)(),i=(0,My.findGeometryProperty)((0,vy.Qs)(r)).localType,a={featureProjection:o,stopAfterDrawing:oe.default.isSimpleGeomType(i),editEnabled:!0,drawEnabled:!1},(l=(0,gS._w)(r).map((function(e){var t=le()({},e,{type:"Feature"});if(!Xr()(t)){var o=(0,gS.ND)(r);if(o[t.id]&&(o[t.id].geometry||null===o[t.id].geometry)&&(t.geometry=o[t.id].geometry),t._new&&!t.geometry){var i=ye()((0,gS.kG)(r),{id:t.id});i&&i.geometry&&(t.geometry=i.geometry)}n&&(t.geometry=(0,vy.dc)(r,t.id)?(0,vy.dc)(r,t.id).geometry:null)}return t})).filter((function(e){return null!==e.geometry||"empty_row"!==e.id}))).length>0?oa.Observable.from([(0,my.Yf)("drawOrEdit",i,"featureGrid",l,a)]):oa.Observable.from([(0,my.Yf)("clean","","featureGrid",[],{})]);var r,n,o,i,a,l}))},aP=function(e){return e.ofType(dy.IN).switchMap((function(){return oa.Observable.of((0,my.bp)())}))},lP=function(e,t){return e.ofType(dy.aO).switchMap((function(e){return e.mode===dy.EH.VIEW?oa.Observable.of((0,my.bp)(),(0,bS.WP)("featuregrid.select")):e.mode!==dy.EH.EDIT||(0,gS.bq)(t.getState())?oa.Observable.of((0,bS.WP)()):oa.Observable.of((0,my.bp)(),(0,bS.WP)("featuregrid.select"),(0,q.Kp)({title:"featuregrid.notSupportedGeometryTitle",message:"featuregrid.notSupportedGeometry",uid:"notSupportedGeometryWarning",autoDismiss:5}))}))},cP=function(e){return e.ofType(dy.$O).switchMap((function(){return e.ofType(by.nk).take(1).switchMap((function(){return oa.Observable.of((0,dy.nY)(),(0,dy.YV)())})).takeUntil(e.ofType(dy.sF))}))},sP=function(e,t){return e.ofType(by.nk).switchMap((function(){return(0,J._d)(t.getState())?oa.Observable.of((0,v.Xg)("queryPanel","enabled",!1)):oa.Observable.empty()}))},uP=function(e,t){return e.ofType(dy.$O).switchMap((function(){return e.ofType(v.kM).filter((function(e){return e.control&&"drawer"===e.control&&(0,gS.Rd)(t.getState())})).switchMap((function(){return oa.Observable.of((0,dy.YV)(),(0,dy.KD)([]))})).takeUntil(e.ofType(by.nk))}))},pP=function(e,t){return e.ofType(dy.bZ).switchMap((function(){var e=t.getState();return(0,gS.LB)(e)||(0,gS.b4)(e)?oa.Observable.of((0,dy.Pv)("featureCloseConfirm",!0)):oa.Observable.of((0,dy.YV)())}))},fP=function(e){return e.ofType(dy.Gk).switchMap((function(){return oa.Observable.of((0,dy.$E)(),(0,dy.Pv)("clearConfirm",!1))}))},dP=function(e){return e.ofType(dy.vO).switchMap((function(){return oa.Observable.of((0,v.Xg)("drawer","enabled",!1),(0,dy.Pv)("featureCloseConfirm",!1))}))},mP=function(e,t){return e.ofType(dy.$O).exhaustMap((function(){return e.ofType(dy.sF).delay(50).filter((function(){return(0,vy.M7)(t.getState())})).switchMap((function(){return oa.Observable.of(TS(t.getState()))})).takeUntil(e.ofType(by.nk,mS.xy,dy.VM))}))},yP=function(e){return e.ofType(dy.$O).switchMap((function(){return oa.Observable.race(e.ofType(mS.xy).take(1),e.ofType(dy.sF).take(1)).exhaustMap((function(t){return t.type===dy.sF?oa.Observable.empty():e.ofType(mS.F9).switchMap((function(){return oa.Observable.of((0,dy.t9)())}))})).takeUntil(e.ofType(by.nk,v.kM).filter((function(e){return e.type===by.nk||e.control&&"drawer"===e.control})).merge(e.ofType(dy.sF).withLatestFrom(e.ofType(mS.xy,mS.F9).scan((function(e,t){switch(t.type){case mS.xy:return!1;case mS.F9:return!0;default:return!1}}),!0).startWith(!0),(function(e,t){return t})).filter((function(e){return e}))))}))},bP=function(e,t){return e.ofType(dy.VM).switchMap((function(){return oa.Observable.of((0,dy.KD)([]),(0,yy.F)(d()(t.getState(),'featuregrid.advancedFilters["'.concat((0,gS.u$)(t.getState()),'"]'))),(0,dy.YV)(),(0,v.Xg)("queryPanel","enabled",!0)).merge(oa.Observable.race(e.ofType(yy.Wm).mergeMap((function(e){return oa.Observable.of((0,gy.rP)(e.searchUrl,e.filterObj),(0,dy.Uh)(le()({},(0,vS.gC)(t.getState()),e.filterObj)),(0,v.Xg)("queryPanel","enabled",!1),(0,dy.t9)())})),e.ofType(v.kM).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.control,r=e.property;return"queryPanel"===t&&(!r||"enabled"===r)})).mergeMap((function(){var e="clean"!==(t.getState().draw||{}).drawStatus?[(0,my.Yf)("clean","","featureGrid",[],{})]:[];return oa.Observable.from(e.concat((0,dy.t9)()))}))).takeUntil(e.ofType(dy.$O,by.nk)))}))},gP=function(e,t){return e.ofType(dy.a3).filter((function(){return!d()(t.getState(),"featuregird.virtualScroll",!1)})).switchMap((function(){return oa.Observable.of((0,V.Px)(sS()((0,vy.F0)(t.getState())),"EPSG:4326"))}))},vP=function(e){return e.ofType(dy.aO).filter((function(e){return e.mode===dy.EH.EDIT})).map((function(){return(0,v.fV)(["query"])}))},hP=function(e){return e.ofType(dy.$O).switchMap((function(){return oa.Observable.of((0,mS.Mc)())}))},OP=function(e,t){return e.ofType(gy._T).filter((function(){return(0,vy.M7)(t.getState())})).mapTo((0,dy.hB)())},wP=function(e,t){return e.ofType(gy._T).filter((function(){return!(0,vy.M7)(t.getState())})).switchMap((function(){return oa.Observable.from([TS(t.getState()),{type:dy.Hg}])}))},EP=function(e,t){return e.ofType(dy.sF).filter((function(){return(0,vy.M7)(t.getState())})).switchMap((function(){return oa.Observable.of((0,gy.XO)())}))},SP=function(e,t){return e.ofType(gy.Yx,gy.VN).filter((function(e){var r=t.getState().featuregrid.disableQuickFilterSync;return e.type===gy.Yx||!r})).switchMap((function(){var r=t.getState(),n=r.query,o=(r.featuregrid||{}).selectedLayer,i=(n||{}).filterObj;return oa.Observable.merge(oa.Observable.of((0,vy.M7)(t.getState())).filter((function(e){return e})),e.ofType(dy.Yd)).mergeMap((function(){return oa.Observable.of(function(e,t){return(0,h.He)(e,{filterObj:t})}(o,i))}))}))},PP=function(e,t){var r=t.getState;return e.ofType(dy.ye).filter((function(){return!(0,vy.gy)(r())})).switchMap((function(t){var n=r(),o=t.pages,i=o.startPage,a=o.endPage,l=n.featuregrid,c=l.pages,s=l.pagination,u=d()(s,"size"),p=(0,pS.gP)(i,a,c,u),f=p[1]-p[0]+1;return oa.Observable.of((0,gy.IO)((0,vy.Bu)(n),jS(ES({},(0,vy.X1)(n)),{startIndex:p[0]*u,maxFeatures:f*u}),(0,gS.TC)(n))).filter((function(){return p.length>0})).merge(e.ofType(gy.Hu).filter((function(){return p.length>0})).map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.result,n=void 0===t?{}:t,o=e.filterObj,l=r().featuregrid,s=l.features,p=l.maxStoredPages,f=d()(o,"pagination.startIndex"),m=(0,pS.f1)(n,{endPage:a,startPage:i},{pages:c,features:s||[]},{size:u,startIndex:f,maxStoredPages:p}),y=m.pages,b=m.features;return(0,dy.UB)(b,y)})).take(1).takeUntil(e.ofType(gy.VT))).merge(e.ofType(gy.yz).filter((function(){return p.length>0})).filter((function(e){return!e.isLoading})).withLatestFrom(e.ofType(dy.ye)).map((function(e){return e[1]})).take(1).takeUntil(e.ofType(gy.VT)))}))},jP=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.getState,n=void 0===r?function(){}:r;return e.ofType(h.Zz).filter((function(e){var t=e.layer,r=void 0===t?[]:t,o=e.params,i=void 0===o?{}:o;return Bd()(xm()(r),(0,gS.u$)(n()))&&Bd()(Object.keys(i),"time")&&(0,gS.DK)(n())})).merge(e.ofType(dy.d)).filter((function(){return(0,gS.Rd)(n())})).withLatestFrom(e.ofType(gy.Qq),(function(e,t){return t})).switchMap((function(e){return oa.Observable.of((0,gy.rP)(e.searchUrl,e.filterObj))}))},CP=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.getState;return e.ofType(v.kM).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.control;return"drawer"===t&&r().browser&&r().browser.mobile&&(0,J.BP)(r())})).switchMap((function(){return oa.Observable.of((0,mS.aN)(),(0,dy.t9)())}))},xP=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.getState;return e.ofType(mS.xy).filter((function(){return r().browser&&r().browser.mobile&&(0,J.BP)(r())})).mapTo((0,v.Xi)("drawer","enabled"))},TP=r(19155),kP=r.n(TP),IP=r(55877),AP=r.n(IP),FP=r(15124);function DP(e){return function(e){if(Array.isArray(e))return RP(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return RP(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?RP(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function RP(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function NP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function MP(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?NP(Object(r),!0).forEach((function(t){LP(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):NP(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function LP(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var _P={advancedFilters:{},filters:{},editingAllowedRoles:["ADMIN"],enableColumnFilters:!0,showFilteredObject:!1,timeSync:!1,showTimeSync:!1,open:!1,canEdit:!1,focusOnEdit:!1,showAgain:!1,showPopoverSync:null===(0,FP.ac)().getItem("showPopoverSync")||"true"===(0,FP.ac)().getItem("showPopoverSync"),mode:dy.EH.VIEW,changes:[],pagination:{page:0,size:20},select:[],multiselect:!1,drawing:!1,newFeatures:[],features:[],dockSize:.35,customEditorsOptions:{rules:[]}},ZP=function(e,t){return t===e||void 0!==e.id&&null!==e.id&&e.id===t.id},BP=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return t.filter((function(t){return ZP(e,t)})).length>0},zP=function(e,t,r,n){return e.map((function(e){return BP(e,t)?function(e,t,r){return MP(MP({},e),{},r?{properties:MP(MP({},e.properties),t),geometry:r.geometry}:{properties:MP(MP({},e.properties),t)})}(e,r,n):e}))};var GP=r(93358),UP=r(1262),WP=r(30029),VP=r(18027),qP=r(72986),HP=r.n(qP);r(49548);var $P=r(59979);function KP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function YP(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const XP=(0,R.compose)((0,R.withProps)((function(e){var t=e.renderPopover,r=e.popoverOptions;return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?KP(Object(r),!0).forEach((function(t){YP(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):KP(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}(t?{renderPopover:t,popoverOptions:r}:{},function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["renderPopover","popoverOptions"]))})),(0,R.branch)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.renderPopover,r=e.popoverOptions;return t&&!!r}),$P.Z,$e.Z));function QP(){return(QP=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var JP={width:0,padding:0,borderWidth:0},ej={},tj=function(e){return e?ej:JP},rj=XP((0,l.forwardRef)((function(e,t){var r=e.disabled,n=e.id,o=e.visible,i=e.onClick,a=e.glyph,l=e.active,s=e.className,u=void 0===s?"square-button":s,p=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["disabled","id","visible","onClick","glyph","active","className"]);return c().createElement(Je.Z,QP({ref:t},p,{bsStyle:l?"success":"primary",disabled:r,id:"fg-".concat(n),style:tj(o),className:u,onClick:function(){return!r&&i()}}),c().createElement(g.Glyphicon,{glyph:a}))}))),nj=function(e,t){return e?"featuregrid.toolbar.stopDrawGeom":t?"featuregrid.toolbar.drawGeom":"featuregrid.toolbar.addGeom"},oj=function(e){var t=e.saving,r=e.saved;return t||r?"featuregrid.toolbar.saving":"featuregrid.toolbar.saveChanges"};const ij={onGridSort:function(e,t){return(0,dy.DY)(e,t)},onAddFilter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,dy.a8)(e)},onTemporaryChanges:function(e){return(0,dy.aT)(e)},onGridRowsUpdated:function(e,t){var r,n,o=e.fromRow,i=e.toRow,a=e.updated,l=(r=o,n=i,Array.from({length:n+1-r},(function(e,t){return t+r}))).map((function(e){return t(e)})).filter((function(e){return Object.keys(a||{}).filter((function(t){return e.properties[t]!==a[t]})).length>0}));return(0,dy.nG)(l,a)},onRowsToggled:function(e,t){return(0,dy.KD)(e.map((function(e){return t(e.rowIdx)})),!1)},onRowsSelected:function(e,t){return(0,dy.KD)(e.map((function(e){return t(e.rowIdx)})),!0)},onRowsDeselected:function(e,t){return(0,dy.gr)(e.map((function(e){return t(e.rowIdx)})))}},aj=[{name:"",key:"geometry",width:35,frozen:!0,events:{onClick:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=n.crs,i=n.maxZoom;return e.geometry?(0,V.Px)(sS()(e),o||"EPSG:4326",i):{type:"NONE"}}},formatter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.value;return t?c().createElement(g.Glyphicon,{glyph:"zoom-to"}):c().createElement(Xe.Z,{placement:"top",overlay:c().createElement(g.Tooltip,{id:"fe-save-features"},c().createElement(b.Z,{msgId:"featuregrid.missingGeometry"}))},c().createElement(g.Glyphicon,{glyph:"exclamation-mark"}))}}],lj={onPageChange:function(e,t){return(0,dy.oO)(e,t)},moreFeatures:dy.zd},cj={createFeature:function(){return(0,dy.lx)([{}])},saveChanges:function(){return(0,dy.$S)()},clearFeatureEditing:function(){return(0,dy.Pv)("clearConfirm",!0)},deleteGeometry:function(){return(0,dy.pX)()},deleteFeatures:function(){return(0,dy.Pv)("deleteConfirm",!0)},download:function(){return(0,v.Xi)("layerdownload")},settings:function(){return(0,dy.Pv)("settings")},switchEditMode:function(){return(0,dy.lg)()},startEditingFeature:function(){return(0,dy.sY)()},startDrawingFeature:function(){return(0,dy.kA)()},switchViewMode:function(){return(0,dy.nY)()},onClose:function(){return(0,dy.JK)()},showQueryPanel:function(){return(0,dy.MY)()},zoomAll:function(){return(0,dy.ve)()},sync:function(){return(0,gy.XO)()},setTimeSync:dy.Yb,hideSyncPopover:function(){return(0,dy.Pl)()},toggleShowAgain:function(){return(0,dy.Ib)()},chart:function(){return(0,be.C2)()}};var sj=ij,uj=aj,pj=lj,fj=cj;const dj=(0,p.connect)((function(e){return{attributes:(0,gS.o)(e)}}),{onChange:function(e,t){return(0,dy.an)(e,"hide",t)}})((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.style,r=void 0===t?{}:t,n=e.titleMsg,o=void 0===n?"featuregrid.columns":n,i=e.onChange,a=void 0===i?function(){}:i,l=e.attributes,s=void 0===l?[]:l;return c().createElement("div",{className:"bg-body data-attribute-selector",style:r},c().createElement("h4",{className:"text-center"},c().createElement("strong",null,c().createElement(b.Z,{msgId:o}))),c().createElement("div",null,s.map((function(e){return c().createElement(g.Checkbox,{key:e.attribute||e.name,checked:!e.hide,onChange:function(){return a(e.attribute,!e.hide)}},e.label||e.attribute)}))))}));function mj(){return(mj=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function yj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function bj(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?yj(Object(r),!0).forEach((function(t){gj(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yj(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function gj(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var vj=(0,p.connect)((0,D.zB)({loading:vy.gy}))(WP.Z),hj=(0,p.connect)((0,D.zB)({saving:gS.uz,saved:gS.Ci,mode:gS.eK,hasChanges:gS.LB,hasNewFeatures:gS.b4,hasGeometry:gS.OK,syncPopover:function(e){return{showAgain:(0,gS.tU)(e),showPopoverSync:(0,gS.Gl)(e),dockSize:(0,Ke.ic)(e,{dockSize:!0}).dockSize+3.2+"%"}},isDrawing:gS.Ae,showChartButton:function(e){return!(0,gS.PI)(e)&&(0,J.PJ)(e)},isSimpleGeom:gS.He,selectedCount:gS.jY,disableToolbar:function(e){return e&&e.featuregrid&&e.featuregrid.disableToolbar||!(0,vy.hk)(e,(0,gS.kd)(e))},displayDownload:J.pn,disableDownload:function(e){return 0===((0,vy.Mz)(e)||[]).length},isDownloadOpen:function(e){return e&&e.controls&&e.controls.layerdownload&&e.controls.layerdownload.enabled},isSyncActive:vy.M7,isColumnsOpen:function(e){return e&&e.featuregrid&&e.featuregrid.tools&&e.featuregrid.tools.settings},disableZoomAll:function(e){return e&&e.featuregrid.virtualScroll||0===(0,vy.F0)(e).features.length},isSearchAllowed:function(e){return!(0,he.c0)(e)},isEditingAllowed:gS.nq,hasSupportedGeometry:gS.bq,isFilterActive:vy.VD,showTimeSyncButton:gS.ou,timeSync:gS.DK}),(function(e){return{events:(0,rS.DE)(fj,e)}}))((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.disableToolbar,r=e.disableDownload,n=e.disableZoomAll,o=void 0!==n&&n,i=e.displayDownload,a=e.events,l=void 0===a?{}:a,s=e.hasChanges,u=e.hasGeometry,p=e.hasNewFeatures,f=e.hasSupportedGeometry,d=void 0===f||f,m=e.isColumnsOpen,y=e.isDrawing,v=void 0!==y&&y,h=e.isEditingAllowed,O=e.isFilterActive,w=void 0!==O&&O,E=e.isDownloadOpen,S=e.isSearchAllowed,P=e.isSimpleGeom,j=e.isSyncActive,C=void 0!==j&&j,x=e.saved,T=void 0!==x&&x,k=e.saving,I=void 0!==k&&k,A=e.selectedCount,F=e.showAdvancedFilterButton,D=void 0===F||F,R=e.showChartButton,N=void 0===R||R,M=e.showSyncOnMapButton,L=void 0===M||M,_=e.showTimeSyncButton,Z=void 0!==_&&_,B=e.syncPopover,z=void 0===B?{showPopoverSync:!0,dockSize:"32.2%"}:B,G=e.mode,U=void 0===G?"VIEW":G,W=e.timeSync,V=void 0!==W&&W;return c().createElement(g.ButtonGroup,{id:"featuregrid-toolbar",className:"featuregrid-toolbar featuregrid-toolbar-margin"},c().createElement(rj,{id:"edit-mode",keyProp:"edit-mode",tooltipId:"featuregrid.toolbar.editMode",disabled:t,visible:"VIEW"===U&&h,onClick:l.switchEditMode,glyph:"pencil"}),c().createElement(rj,{id:"search",keyProp:"search",tooltipId:"featuregrid.toolbar.advancedFilter",active:w,disabled:t||!S,visible:"VIEW"===U&&D,onClick:l.showQueryPanel,glyph:"filter"}),c().createElement(rj,{id:"zoom-all",keyProp:"zoom-all",tooltipId:"featuregrid.toolbar.zoomAll",disabled:t||o,visible:"VIEW"===U,onClick:l.zoomAll,glyph:"zoom-to"}),c().createElement(rj,{id:"back-view",keyProp:"back-view",tooltipId:"featuregrid.toolbar.quitEditMode",disabled:t,visible:"EDIT"===U&&!s&&!p,onClick:l.switchViewMode,glyph:"arrow-left"}),c().createElement(rj,{id:"add-feature",keyProp:"add-feature",tooltipId:"featuregrid.toolbar.addNewFeatures",disabled:t,visible:"EDIT"===U&&!p&&!s&&d,onClick:l.createFeature,glyph:"row-add"}),c().createElement(rj,{id:"draw-feature",keyProp:"draw-feature",tooltipId:nj(v,P),disabled:t,visible:"EDIT"===U&&1===A&&(!u||u&&!P)&&d,onClick:l.startDrawingFeature,active:v,glyph:"pencil-add"}),c().createElement(rj,{id:"remove-features",keyProp:"remove-features",tooltipId:"featuregrid.toolbar.deleteSelectedFeatures",disabled:t,visible:"EDIT"===U&&A>0&&!s&&!p,onClick:l.deleteFeatures,glyph:"trash-square"}),c().createElement(rj,{id:"save-feature",keyProp:"save-feature",tooltipId:oj({saving:I,saved:T}),disabled:I||T||t,visible:"EDIT"===U&&s||p,active:T,onClick:l.saveChanges,glyph:"floppy-disk"}),c().createElement(rj,{id:"cancel-editing",keyProp:"cancel-editing",tooltipId:"featuregrid.toolbar.cancelChanges",disabled:t,visible:"EDIT"===U&&s||p,onClick:l.clearFeatureEditing,glyph:"remove-square"}),c().createElement(rj,{id:"delete-geometry",keyProp:"delete-geometry",tooltipId:"featuregrid.toolbar.deleteGeometry",disabled:t,visible:"EDIT"===U&&u&&1===A&&d,onClick:l.deleteGeometry,glyph:"polygon-trash"}),c().createElement(rj,{id:"download-grid",keyProp:"download-grid",tooltipId:"featuregrid.toolbar.downloadGridData",disabled:t||r,active:E,visible:i&&"VIEW"===U,onClick:l.download,glyph:"download"}),c().createElement(rj,{id:"grid-settings",keyProp:"grid-settings",tooltipId:"featuregrid.toolbar.hideShowColumns",disabled:t,active:m,visible:A<=1&&"VIEW"===U,onClick:l.settings,glyph:"features-grid-set"}),c().createElement(rj,{id:"grid-map-chart",keyProp:"grid-map-chart",tooltipId:"featuregrid.toolbar.createNewChart",disabled:t,visible:"VIEW"===U&&N,onClick:l.chart,glyph:"stats"}),c().createElement(rj,{id:"grid-map-filter",keyProp:"grid-map-filter",tooltipId:"featuregrid.toolbar.syncOnMap",disabled:t,active:C,visible:L,onClick:l.sync,glyph:"map-filter",renderPopover:z.showPopoverSync,popoverOptions:!t&&{placement:"top",content:c().createElement("span",null,c().createElement("p",null,c().createElement(b.Z,{msgId:"featuregrid.toolbar.synchPopoverText"})),c().createElement("p",null,c().createElement(g.Checkbox,{checked:z.showAgain,onClick:l.toggleShowAgain},c().createElement(b.Z,{msgId:"featuregrid.toolbar.notShowAgain"})))),props:{id:"sync-popover",title:c().createElement("div",null,c().createElement(b.Z,{msgId:"featuregrid.toolbar.synchPopoverTitle"}),c().createElement("button",{onClick:function(){if(z.showAgain)try{(0,FP.ac)().setItem("showPopoverSync",!1)}catch(e){console.error(e)}l.hideSyncPopover()},className:"close"},c().createElement(g.Glyphicon,{className:"pull-right",glyph:"1-close"}))),style:{bottom:z.dockSize}}}}),c().createElement(rj,{id:"timeSync-button",keyProp:"fg-timeSync-button",tooltipId:V?"featuregrid.toolbar.disableTimeSync":"featuregrid.toolbar.enableTimeSync",visible:Z,active:V,onClick:function(){return l.setTimeSync&&l.setTimeSync(!V)},glyph:"time"}))})),Oj=(0,p.connect)((0,D.P1)(gS.Sj,(function(e){return{title:e}})),{onClose:fj.onClose})((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{onDownloadToggle:function(){}};return c().createElement(g.Grid,{className:"bg-body data-grid-top-toolbar",fluid:!0,style:{width:"100%"}},c().createElement(g.Row,{className:"flex-center"},c().createElement(g.Col,{xs:4},e.children),c().createElement(g.Col,{xs:4},c().createElement("div",{className:"text-center text-primary"},c().createElement("strong",null,e.title))),c().createElement(g.Col,{xs:4},c().createElement(Je.Z,{onClick:e.onClose,style:{float:"right"},className:"square-button no-border featuregrid-top-toolbar-margin"},c().createElement(g.Glyphicon,{glyph:"1-close"})))))})),wj=(0,p.connect)((0,D.P1)((0,D.zB)(vy.b0),vy.gy,(function(e){return e&&e.featuregrid&&!!e.featuregrid.virtualScroll}),gS.jY,(function(e,t,r,n){return bj(bj({},e),{},{selected:n,loading:t,virtualScroll:r})})),pj)((function(){var e,t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{loading:!1,onPageChange:function(){}},n=(0,pS.DR)(r),o=n.page,i=void 0===o?0:o,a=n.size,l=void 0===a?0:a,s=n.resultSize,u=void 0===s?0:s,p=n.maxPages,f=void 0===p?0:p,d=n.total,m=void 0===d?0:d;return c().createElement(g.Grid,{className:"bg-body data-grid-bottom-toolbar",fluid:!0,style:{width:"100%"}},c().createElement(g.Row,{className:"featuregrid-toolbar-margin"},c().createElement(g.Col,{md:3},c().createElement("span",null,c().createElement(b.Z,{msgId:r.virtualScroll?"featuregrid.resultInfoVirtual":"featuregrid.resultInfo",msgParams:{start:i*l+1,end:i*l+u,total:m,selected:null!==(e=r.selected)&&void 0!==e?e:0}}))," ",r.selected>0?c().createElement("span",null,c().createElement(b.Z,{msgId:"featuregrid.selectedInfo",msgParams:{selected:null!==(t=r.selected)&&void 0!==t?t:0}})):null),r.virtualScroll?null:c().createElement(g.Col,{className:"text-center",md:6},c().createElement(Je.Z,{key:"first-page",onClick:function(){return r.onPageChange(0)},disabled:0===i,className:"no-border first-page"},c().createElement(g.Glyphicon,{glyph:"step-backward"})),c().createElement(Je.Z,{key:"prev-page",onClick:function(){return r.onPageChange(i-1)},disabled:0===i,className:"no-border prev-page"},c().createElement(g.Glyphicon,{glyph:"chevron-left"})),c().createElement("span",{key:"page-info"},c().createElement(b.Z,{msgId:"featuregrid.pageInfo",msgParams:{page:i+1,totalPages:f+1}})),c().createElement(Je.Z,{key:"next-page",onClick:function(){return r.onPageChange(i+1)},className:"no-border next-page",disabled:i>=f},c().createElement(g.Glyphicon,{glyph:"chevron-right"})),c().createElement(Je.Z,{key:"last-page",onClick:function(){return r.onPageChange(f)},className:"no-border last-page",disabled:i>=f},c().createElement(g.Glyphicon,{glyph:"step-forward"})))," ",c().createElement(g.Col,{md:3},r.loading?c().createElement("span",{style:{float:"right"}},c().createElement(b.Z,{msgId:"loading"}),c().createElement(HP(),{spinnerName:"circle",style:{float:"right"},noFadeIn:!0})):null)))})),Ej=(0,p.connect)((0,D.P1)(gS.jY,(function(e){return{count:e}})),{onClose:function(){return(0,dy.Pv)("deleteConfirm",!1)},onConfirm:function(){return(0,dy.Uz)()}})((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onClose,r=void 0===t?function(){}:t,n=e.saving,o=void 0!==n&&n,i=e.count,a=e.onConfirm,l=void 0===a?function(){}:a;return c().createElement(m.Z,null,c().createElement(UP.Z,{show:!0,onClose:r,onConfirm:l,confirmButtonBSStyle:"default",closeGlyph:"1-close",confirmButtonContent:c().createElement(b.Z,{msgId:"featuregrid.deleteButton"}),confirmButtonDisabled:o},c().createElement(b.Z,{msgId:"featuregrid.delete",msgParams:{count:i}})))})),Sj=(0,p.connect)((0,D.P1)(gS.jY,(function(e){return{count:e}})),{onClose:function(){return(0,dy.Pv)("clearConfirm",!1)},onConfirm:function(){return(0,dy.oL)()}})((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onClose,r=void 0===t?function(){}:t,n=e.saving,o=void 0!==n&&n,i=e.onConfirm,a=void 0===i?function(){}:i;return c().createElement(m.Z,null,c().createElement(UP.Z,{draggable:!1,show:!0,onClose:r,onConfirm:a,confirmButtonBSStyle:"default",closeGlyph:"1-close",confirmButtonContent:c().createElement(b.Z,{msgId:"featuregrid.yesButton"}),confirmButtonDisabled:o,closeText:c().createElement(b.Z,{msgId:"featuregrid.noButton"})},c().createElement(b.Z,{msgId:"featuregrid.clear"})))})),Pj=(0,p.connect)((function(){}),{onClose:function(){return(0,dy.Ap)()},onConfirm:function(){return(0,dy.YV)()}})((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onClose,r=void 0===t?function(){}:t,n=e.saving,o=void 0!==n&&n,i=e.onConfirm,a=void 0===i?function(){}:i;return c().createElement(m.Z,null,c().createElement(UP.Z,{show:!0,onClose:r,onConfirm:a,confirmButtonBSStyle:"default",closeGlyph:"1-close",confirmButtonContent:c().createElement(b.Z,{msgId:"featuregrid.yesButton"}),confirmButtonDisabled:o,closeText:c().createElement(b.Z,{msgId:"featuregrid.noButton"})},c().createElement(b.Z,{msgId:"featuregrid.featureClose"})))})),jj={settings:dj},Cj={deleteConfirm:Ej,featureCloseConfirm:Pj,clearConfirm:Sj},xj={settings:{style:{padding:"0 12px",overflow:"auto",flex:"0 0 14em",boxShadow:"inset 0px 0px 10px rgba(0, 0, 0, 0.4)",height:"100%",minWidth:195}}},Tj=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).filter((function(t){return e[t]&&jj[t]})).map((function(e){var t=jj[e];return c().createElement(t,mj({key:e},xj[e]||{}))}))},kj=function(){return c().createElement(Oj,null,c().createElement(hj,null))},Ij=function(e){return e.focusOnEdit&&e.hasChanges||e.newFeatures.length>0?null:c().createElement(wj,null)},Aj=function(){return vj},Fj=(0,D.P1)((function(e){return e}),(function(e){return e?((0,My.getFeatureTypeProperties)(e)||[]).reduce((function(e,t){return bj(bj({},e),{},gj({},t.name,(0,p.connect)((0,D.P1)((function(e){return(0,gS.g5)(e,t.name)}),gS.eK,(function(e,r){var n=bj({value:e&&(e.rawValue||e.value)},(0,My.isGeometryType)(t)?{filterEnabled:null==e?void 0:e.enabled,filterDeactivated:null==e?void 0:e.deactivated}:{}),o=(0,My.isGeometryType)(t)?{}:{disabled:!0,tooltipMsgId:"featuregrid.filter.tooltips.editMode"};return"EDIT"===r?bj(bj({},n),o):n})))((0,VP.Q)((0,My.isGeometryType)(t)?"geometry":t.localType,{name:t.name}))))}),{}):{}})),Dj=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).filter((function(t){return e[t]&&Cj[t]})).map((function(e){var t=Cj[e];return c().createElement(t,{key:e})}))},Rj=r(622);function Nj(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Mj(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Nj(Object(r),!0).forEach((function(t){Lj(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Nj(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Lj(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _j(){return(_j=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var Zj=[],Bj={},zj=(0,p.connect)((0,D.P1)(gS.P4,(function(e){return(0,Ke.ic)(e,{transform:!0})}),(function(e,t){return{size:e,dockStyle:t}})))(iS.default),Gj=(0,D.P1)((function(e){return d()(e,"featuregrid.open")}),(function(e){return d()(e,"featuregrid.customEditorsOptions")}),(function(e){return d()(e,"queryform.autocompleteEnabled")}),(function(e){return(0,vy.UM)(e)}),(function(e){return(0,vy.HY)(e)}),(function(e){return d()(e,"featuregrid.features")||Zj}),vy.Qs,(function(e){return d()(e,"featuregrid.attributes")}),(function(e){return d()(e,"featuregrid.tools")}),gS._w,gS.eK,gS.eO,gS.kG,gS.LB,(function(e){return d()(e,"featuregrid.focusOnEdit",!1)}),(function(e){return d()(e,"featuregrid.enableColumnFilters")}),(0,D.zB)(vy.b0),(function(e){return d()(e,"featuregrid.pages")}),(function(e){return d()(e,"featuregrid.pagination.size")}),(function(e,t,r,n,o){var i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Zj,a=arguments.length>6?arguments[6]:void 0,l=arguments.length>7?arguments[7]:void 0,c=arguments.length>8?arguments[8]:void 0,s=arguments.length>9?arguments[9]:void 0,u=arguments.length>10?arguments[10]:void 0,p=arguments.length>11?arguments[11]:void 0,f=arguments.length>12&&void 0!==arguments[12]?arguments[12]:Zj,d=arguments.length>13?arguments[13]:void 0,m=arguments.length>14?arguments[14]:void 0,y=arguments.length>15?arguments[15]:void 0,b=arguments.length>16?arguments[16]:void 0,g=arguments.length>17?arguments[17]:void 0,v=arguments.length>18?arguments[18]:void 0;return{open:e,customEditorsOptions:t,autocompleteEnabled:r,url:n,typeName:o,hasChanges:d,newFeatures:f,features:i,describe:a,attributes:l,tools:c,select:s,mode:u,focusOnEdit:m,enableColumnFilters:y,changes:(0,pS.rK)(p),pagination:b,pages:g,size:v}})),Uj=(0,R.compose)((0,p.connect)(Gj,(function(e){return{onMount:(0,rS.DE)(dy.Z_,e),gridEvents:(0,rS.DE)(sj,e),pageEvents:(0,rS.DE)(pj,e),initPlugin:(0,rS.DE)((function(e){return(0,dy.QT)(e)}),e),toolbarEvents:(0,rS.DE)(fj,e),gridTools:uj.map((function(t){return Mj(Mj({},t),{},{events:(0,rS.DE)(t.events,e)})})),onSizeChange:function(){return e(dy.Ox.apply(void 0,arguments))}}})),(0,R.lifecycle)({componentDidMount:function(){this.props.onMount(oS()(this.props,["showFilteredObject","showTimeSync","timeSync"]))}}))((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{tools:Bj,dialogs:Bj,select:Zj},t=e.pluginCfg.maxZoom,r={dimMode:"none",defaultSize:.35,fluid:!0,isVisible:e.open,maxDockSize:.7,minDockSize:.1,position:"bottom",setDockSize:function(){},zIndex:1030};return c().createElement(zj,_j({},r,{onSizeChange:function(t){e.onSizeChange(t,r)}}),e.open&&c().createElement(Rj.Z,null,(function(r){var n=r.height;return c().createElement(Vr.Z,{className:"feature-grid-container",key:"feature-grid-container",height:n-94,header:kj(),columns:Tj(e.tools),footer:Ij(e)},Dj(e.tools),c().createElement(GP.Z,{editingAllowedRoles:e.editingAllowedRoles,initPlugin:e.initPlugin,customEditorsOptions:e.customEditorsOptions,autocompleteEnabled:e.autocompleteEnabled,url:e.url,typeName:e.typeName,filterRenderers:Fj(e.describe),enableColumnFilters:e.enableColumnFilters,emptyRowsView:Aj(),focusOnEdit:e.focusOnEdit,newFeatures:e.newFeatures,changes:e.changes,mode:e.mode,select:e.select,key:"feature-grid-container",columnSettings:e.attributes,gridEvents:e.gridEvents,pageEvents:e.pageEvents,describeFeatureType:e.describe,features:e.features,minHeight:600,tools:e.gridTools,pagination:e.pagination,pages:e.pages,virtualScroll:e.virtualScroll,maxStoredPages:e.maxStoredPages,vsOverScan:e.vsOverScan,scrollDebounce:e.scrollDebounce,size:e.size,actionOpts:{maxZoom:t}}))})))}));const Wj=(0,O.rx)("FeatureEditor",{component:Uj,epics:n,reducers:{featuregrid:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_P,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case dy.Xp:return le()({},e,{showPopoverSync:null===(0,FP.ac)().getItem("showPopoverSync")||"true"===(0,FP.ac)().getItem("showPopoverSync"),editingAllowedRoles:t.options.editingAllowedRoles||e.editingAllowedRoles||["ADMIN"],virtualScroll:!!t.options.virtualScroll,maxStoredPages:t.options.maxStoredPages||5});case dy.ye:case dy.gG:return le()({},e,{pagination:{page:void 0!==t.page?t.page:e.pagination.page,size:void 0!==t.size?t.size:e.pagination.size}});case dy.fT:var r;return MP(MP({},e),{},{pagination:MP(MP({},null!==(r=e.pagination)&&void 0!==r?r:{}),{},{size:t.size})});case dy.Oj:var n=t.features.filter((function(e){return"empty_row"!==e.id}));return e.multiselect&&t.append?le()({},e,{select:t.append?kP()([].concat(DP(e.select),DP(n)),"id"):n}):n&&e.select&&e.select[0]&&n[0]&&1===e.select.length&&ZP(n[0],e.select[0])?e:le()({},e,{select:n||[]});case dy.v6:var o=e.select.filter((function(e){return!BP(e,t.features)})),i=t.features.filter((function(t){return!BP(t,e.select)})),a=o.concat(i||[]);return le()({},e,{select:a});case dy.jp:return le()({},e,{select:e.select.filter((function(e){return!BP(e,t.features)}))});case dy.DU:return le()({},e,{multiselect:t.multiselect});case dy.r:return le()({},e,{customEditorsOptions:t.payload});case dy.gJ:return le()({},e,t.options||{});case dy.CM:return le()({},e,{select:[],changes:[]});case dy.iQ:return le()({},e,{features:t.features});case dy.dZ:return le()({},e,{dockSize:t.dockSize});case dy.$:return le()({},e,{selectedLayer:t.id});case dy.qw:return le()({},e,{tools:MP(MP({},e.tools),{},LP({},t.tool,void 0===t.value?!(e.tools&&e.tools[t.tool]):t.value))});case dy.f$:return le()({},e,{attributes:MP(MP({},e.attributes),{},LP({},t.name,MP(MP({},e.attributes&&e.attributes[t.name]||{}),{},LP({},t.key,t.value||e.attributes&&e.attributes[t.name]&&!e.attributes[t.name][t.key]))))});case dy.aO:return le()({},e,{showPopoverSync:null!==(0,FP.ac)().getItem("showPopoverSync")?"true"===(0,FP.ac)().getItem("showPopoverSync"):t.mode!==dy.EH.EDIT,tools:t.mode===dy.EH.EDIT?{}:e.tools,mode:t.mode,multiselect:t.mode===dy.EH.EDIT,drawing:!1});case dy.K8:var l=t.features.filter((function(e){return e._new}))||[];return le()({},e,{newFeatures:l.length>0?zP(e.newFeatures,l,t.updated,null):e.newFeatures,changes:[].concat(DP(e&&e.changes||[]),DP(t.features.filter((function(e){return!e._new})).map((function(e){return{id:e.id,updated:t.updated}}))))});case dy.AH:return le()({},e,{saving:!0,loading:!0});case dy.AY:return le()({},e,{deleteConfirm:!1,saved:!0,saving:!1,drawing:!1,loading:!1});case dy.yi:return le()({},e,{saved:!1,deleteConfirm:!1,drawing:!1,newFeatures:[],changes:[]});case dy.IN:var c=AP().v1();return le()({},e,{newFeatures:t.features.map((function(e){return MP(MP({},e),{},{_new:!0,id:c,type:"Feature",geometry:null})})),select:t.features.map((function(e){return MP(MP({},e),{},{_new:!0,id:c,type:"Feature",geometry:null})}))});case dy.SW:return le()({},e,{deleteConfirm:!1,saving:!1,loading:!1,drawing:!1});case dy.DI:var s=t.features.filter((function(e){return e._new}))||[];return le()({},e,{newFeatures:s.length>0?zP(e.newFeatures,s,null,{geometry:MP({},de()(s).geometry)}):e.newFeatures,changes:t.features.filter((function(e){return!e._new})).map((function(e,r){return{id:e.id,updated:{geometry:t.features[r].geometry}}})),drawing:!1});case dy.oh:var u=t.features.filter((function(e){return e._new}))||[];return le()({},e,{newFeatures:u.length>0?zP(e.newFeatures,u,null,{geometry:null}):e.newFeatures,changes:[].concat(DP(e&&e.changes||[]),DP(t.features.filter((function(e){return!e._new})).map((function(e){return{id:e.id,updated:{geometry:null}}}))))});case gy.u7:return le()({},e,{localType:d()(t,"featureType.original.featureTypes[0].properties[1].localType")});case dy._9:return le()({},e,{drawing:!e.drawing});case dy.$O:return le()({},e,{open:!0});case dy.sF:return le()({},e,{open:!1,pagination:{page:0,size:e.pagination.size},mode:dy.EH.VIEW,tools:{},saved:!1,deleteConfirm:!1,drawing:!1,newFeatures:[],changes:[]});case dy.MK:return le()({},e,{disableToolbar:t.disabled});case dy.ut:return le()({},e,{canEdit:t.permission.canEdit});case my.hZ:return"clean"===t.status?le()({},e,{drawing:!1}):e;case dy._u:var p=t.update||{},f=p.attribute;if(f&&t.append){var m=e.filters[f].value,y=[];null!=m&&m.attribute&&(y=[m]),Bl()(m)&&(y=m);var b=[].concat(DP(y),[t.update.value]);return le()({},e,{filters:LP({},f,{attribute:f,enabled:!0,type:"geometry",operator:"OR",value:b})})}return f?le()({},e,{filters:MP(MP({},e.filters),{},LP({},f,t.update))}):e;case gy.Yx:return le()({},e,{filters:{}});case dy.DA:var g=t.dockProps&&t.dockProps.maxDockSize,v=t.dockProps&&t.dockProps.minDockSize,h=g&&v&&v<=t.size&&g>=t.size&&t.size||g&&g<t.size&&g||v&&v>t.size&&v||t.size;return le()({},e,{dockSize:h});case dy.Lz:return le()({},e,{advancedFilters:le()({},e.advancedFilters,LP({},e.selectedLayer,t.filterObj))});case dy.Jb:return le()({},e,{features:t.features||[],pages:t.pages||[]});case dy.yA:return le()({},e,{showPopoverSync:!1});case dy.sK:return le()({},e,{showAgain:!e.showAgain});case dy.d:return le()({},e,{timeSync:t.value});default:return e}}},containers:{TOC:{doNotHide:!0,name:"FeatureEditor"}}});r(65207);var Vj=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.item;return c().createElement("span",null,t&&t.name?c().createElement(b.Z,{msgId:t.name}):null)};const qj=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.spatialOperations,r=void 0===t?[]:t,n=e.onChange,o=void 0===n?function(){}:n,i=e.value;return c().createElement(_r.DropdownList,{valueField:"id",className:"geometry-operation-selector",onChange:o,data:r,valueComponent:Vj,value:i,itemComponent:Vj})};var Hj=r(11847);function $j(e){return function(e){if(Array.isArray(e))return Kj(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Kj(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Kj(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Kj(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Yj=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.search,n=t.url;return(0,Hj.w0)(e,n)||(0,Hj.w0)(e,r&&r.url)},Xj=function(e){return(e||[]).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id;return"BBOX"!==t}))},Qj={"xsd:normalizedString":"string","xsd:string":"string","xsd:date":"date","xsd:dateTime":"date","xsd:date-time":"date-time","xsd:time":"time","xsd:decimal":"number","xsd:int":"number","xsd:integer":"number","xsd:long":"number","xsd:negativeInteger":"number","xsd:nonNegativeInteger":"number","xsd:nonPositiveInteger":"number","xsd:positiveInteger":"number","xsd:short":"number","xsd:unsignedLong":"number","xsd:unsignedInt":"number","xsd:unsignedShort":"number","xsd:number":"number","xsd:boolean":"boolean","xsd:double":"number","xsd:float":"number"},Jj=function(e){return d()(e,"featureTypes[0].properties").filter((function(e){return 0!==e.type.indexOf("gml:")&&Qj[e.type]})).map((function(e){return{label:e.name,attribute:e.name,type:Qj[e.type],valueId:"id",valueLabel:"name",values:[]}}))};function eC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function tC(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eC(Object(r),!0).forEach((function(t){rC(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eC(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function rC(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var nC=function(e){return e.distinctUntilChanged((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.searchUrl,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.searchUrl;return t===n})).switchMap((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.crossLayerExpanded?oa.Observable.of(t):e.filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.crossLayerExpanded;return t})).take(1)})).switchMap((function(e){var t=e.featureTypeName,r=e.searchUrl;return(0,ky.ED)({layer:{name:t,url:r,search:{type:"wfs",url:r}}}).do((function(e){if(t=e,r=d()(t,"WFS_Capabilities.Filter_Capabilities.Scalar_Capabilities.ArithmeticOperators.Functions.FunctionNames.FunctionName"),!ye()(r,(function(){return"queryCollection"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})._})))throw new Error("nocrosslayerfunctionalities");var t,r})).map((function(){return{loadingCapabilities:!1}})).catch((function(e){return oa.Observable.of({errorObj:e,loadingAttributes:!1,loadingCapabilities:!1,featureTypeProperties:[]})})).startWith({loadingCapabilities:!0})})).startWith({})},oC=function(e,t){return e.distinctUntilChanged((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.layer,r=void 0===t?{}:t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=n.layer;return o&&r.name===(o&&o.name)})).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.layer;return!!t})).switchMap((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.layer;return oa.Observable.defer((function(){return(0,ky.v$)({layer:r})})).do((function(e){var r=d()((0,My.findGeometryProperty)(e.data||{}),"name");r&&t("geometryName",r)})).map((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.data,r=void 0===t?{}:t;return Jj(r)})).map((function(e){return{attributes:e,loadingAttributes:!1}})).startWith({loadingAttributes:!0}).catch((function(e){return oa.Observable.of({errorObj:e,loadingAttributes:!1,featureTypeProperties:[]})}))})).catch((function(e){return oa.Observable.of({errorObj:e,loadingAttributes:!1,loadingCapabilities:!1,featureTypeProperties:[]})})).startWith({})};const iC=(0,R.compose)((0,R.withPropsOnChange)(["crossLayerFilter"],(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.crossLayerFilter,r=void 0===t?{}:t;return{queryCollection:d()(r,"collectGeometries.queryCollection"),operation:d()(r,"operation"),distance:d()(r,"distance")}})),(0,R.withProps)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.layers,r=void 0===t?[]:t,n=e.queryCollection,o=void 0===n?{}:n;return{layer:ye()(r,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.name;return t===o.typeName}))}})),(0,R.withHandlers)({setQueryCollectionParameter:function(e){var t=e.setCrossLayerFilterParameter,r=void 0===t?function(){}:t;return function(e,t){r("collectGeometries.queryCollection[".concat(e,"]"),t),"typeName"===e&&r("collectGeometries.queryCollection.filterFields",[])}},updateLogicCombo:function(e){var t=e.setCrossLayerFilterParameter,r=void 0===t?function(){}:t;return function(e,t){return r("collectGeometries.queryCollection.groupFields",[{id:e,logic:t,index:0}])}},setOperation:function(e){var t=e.setCrossLayerFilterParameter,r=void 0===t?function(){}:t;return function(e){return r("operation",e)}}}),(0,R.defaultProps)({dataStreamFactory:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.setQueryCollectionParameter,n=void 0===r?function(){}:r;return nC(e).combineLatest(oC(e,n),(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return tC(tC({},t),e)})).startWith({})}}),Ty.Z);function aC(e){return(aC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lC(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function cC(e,t){return(cC=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function sC(e,t){return!t||"object"!==aC(t)&&"function"!=typeof t?uC(e):t}function uC(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pC(e){return(pC=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fC(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var dC=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&cC(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=pC(n);if(o){var r=pC(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return sC(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),fC(uC(t=i.call(this,e)),"getCurrentFilter",(function(){return{featureTypeName:t.props.featureTypeName,groupFields:t.props.groupFields,filterFields:t.props.sendFilters&&t.props.sendFilters.attributeFilter&&t.props.filterFields.filter((function(e){return(0,Nu.checkOperatorValidity)(e.value,e.operator)}))||[],spatialField:t.props.sendFilters&&t.props.sendFilters.spatialFilter&&t.props.spatialField||{attribute:t.props.spatialField&&t.props.spatialField.attribute},pagination:t.props.pagination,filterType:t.props.filterType,ogcVersion:t.props.ogcVersion,sortOptions:t.props.sortOptions,crossLayerFilter:t.props.sendFilters&&t.props.sendFilters.crossLayerFilter&&(0,Nu.setupCrossLayerFilterDefaults)(t.props.crossLayerFilter)||null,hits:t.props.hits}})),fC(uC(t),"isCurrentFilterChanged",(function(){var e=t.getCurrentFilter(),r={groupFields:e.groupFields,filterFields:e.filterFields,spatialField:e.spatialField,crossLayerFilter:e.crossLayerFilter},n=t.props.appliedFilter||{},o={groupFields:n.groupFields,filterFields:n.attributePanelExpanded&&n.filterFields||[],spatialField:n.spatialPanelExpanded&&n.spatialField||{attribute:t.props.spatialField&&t.props.spatialField.attribute},crossLayerFilter:n.crossLayerExpanded&&n.crossLayerFilter&&n.crossLayerFilter.operation?(0,Nu.setupCrossLayerFilterDefaults)(n.crossLayerFilter):null};return!Nr()(r,o)})),fC(uC(t),"search",(function(){var e=t.getCurrentFilter();t.props.actions.onQuery(t.props.searchUrl,e,t.props.params),t.props.advancedToolbar&&t.props.actions.storeAppliedFilter()})),fC(uC(t),"reset",(function(){if(t.props.actions.onChangeDrawingStatus("clean","","queryform",[]),t.props.actions.onReset(),t.props.advancedToolbar){var e={featureTypeName:t.props.featureTypeName,groupFields:[],filterFields:[],spatialField:{attribute:t.props.spatialField&&t.props.spatialField.attribute},pagination:t.props.pagination,filterType:t.props.filterType,ogcVersion:t.props.ogcVersion,sortOptions:t.props.sortOptions,crossLayerFilter:null,hits:t.props.hits};t.props.actions.onQuery(t.props.searchUrl,e,t.props.params),t.props.advancedToolbar&&t.props.actions.storeAppliedFilter()}})),fC(uC(t),"restorePersistedFilter",(function(){t.props.actions.onRestoreFilter()})),t}return t=a,(r=[{key:"render",value:function(){var e=this,t=this.props.filterFields.filter((function(e){return e.exception})).length>0,r=this.props.allowEmptyFilter&&!this.props.advancedToolbar,n=this.props.filterFields.filter((function(e){return e.value||0===e.value})).length>0,o=(0,Nu.isFilterEmpty)(this.props),i=(0,Nu.isFilterEmpty)(this.props.appliedFilter),a=this.isCurrentFilterChanged(),l=n||this.props.spatialField.geometry||(0,Nu.isCrossLayerFilterValid)(this.props.crossLayerFilter),s=!Nr()(this.props.appliedFilter,this.props.storedFilter),u=r||o&&this.props.appliedFilter&&!i,p=t||!this.props.toolbarEnabled||o&&!u||!o&&(!l||!a),f=this.props.emptyFilterWarning&&o&&a,d=this.props.advancedToolbar?"queryform.apply":this.props.queryBtnMsgId,m=[{tooltipId:f?"queryform.emptyfilter":d,disabled:p,noTooltipWhenDisabled:!0,glyph:this.props.advancedToolbar?"ok":this.props.queryBtnGlyph,className:f?"square-button-md showWarning":"square-button-md",id:"query-toolbar-query",onClick:this.search}];if(this.props.advancedToolbar){var y=!s||this.props.loadingError||a,b=!s||!this.props.storedFilter||!this.props.toolbarEnabled,g=!this.props.appliedFilter||this.props.appliedFilter&&i||!this.props.toolbarEnabled;m=m.concat([{tooltipId:"queryform.save",disabled:y,noTooltipWhenDisabled:!0,glyph:"floppy-disk",id:"query-toolbar-save",onClick:this.props.actions.onSaveFilter},{tooltipId:"queryform.discard",disabled:b,noTooltipWhenDisabled:!0,glyph:"undo",id:"query-toolbar-discard",onClick:this.restorePersistedFilter},{tooltipId:"queryform.reset",glyph:"clear-filter",noTooltipWhenDisabled:!0,id:"reset",disabled:g,onClick:this.reset}])}else m=[{tooltipId:"queryform.reset",glyph:"clear-filter",noTooltipWhenDisabled:!0,id:"reset",disabled:!this.props.toolbarEnabled,onClick:this.reset}].concat(m);return c().createElement("div",{className:"container-fluid query-toolbar"},c().createElement(qr.Z,{btnDefaultProps:{bsStyle:"primary",className:"square-button-md",tooltipPosition:"bottom"},className:"queryFormToolbar row-fluid pull-right",buttons:m}),c().createElement(mt.Z,{show:!!this.props.showGeneratedFilter,bsSize:"large"},c().createElement(mt.Z.Header,null,c().createElement(mt.Z.Title,null,this.props.resultTitle)),c().createElement(mt.Z.Body,null,c().createElement("textarea",{style:{width:"862px",maxWidth:"862px",height:"236px",maxHeight:"236px"}},this.props.showGeneratedFilter)),c().createElement(mt.Z.Footer,null,c().createElement(Je.Z,{style:{float:"right"},onClick:function(){return e.props.actions.onQuery(null,null)}},"Close"))))}}])&&lC(t.prototype,r),a}(c().Component);fC(dC,"propTypes",{filterType:u().string,params:u().object,filterFields:u().array,groupFields:u().array,spatialField:u().object,sendFilters:u().object,crossLayerFilter:u().object,toolbarEnabled:u().bool,searchUrl:u().string,showGeneratedFilter:u().oneOfType([u().bool,u().string]),featureTypeName:u().string,actions:u().object,ogcVersion:u().string,titleMsgId:u().string,queryBtnMsgId:u().string,resultTitle:u().string,queryBtnGlyph:u().string,pagination:u().object,sortOptions:u().object,hits:u().bool,allowEmptyFilter:u().bool,emptyFilterWarning:u().bool,appliedFilter:u().object,storedFilter:u().object,advancedToolbar:u().bool,loadingError:u().bool}),fC(dC,"defaultProps",{sendFilters:{attributeFilter:!0,spatialFilter:!0,crossLayerFilter:!0},filterType:"OGC",params:{},groupFields:[],filterFields:[],spatialField:{},toolbarEnabled:!0,searchUrl:null,showGeneratedFilter:!1,featureTypeName:null,titleMsgId:"queryform.title",queryBtnMsgId:"queryform.query",resultTitle:"Generated Filter",queryBtnGlyph:"search",pagination:null,sortOptions:null,hits:!1,allowEmptyFilter:!1,emptyFilterWarning:!1,advancedToolbar:!1,loadingError:!1,actions:{onQuery:function(){},onReset:function(){},onChangeDrawingStatus:function(){},onSaveFilter:function(){},onRestoreFilter:function(){},storeAppliedFilter:function(){}}});const mC=dC;var yC=r(76364),bC=r(59286);function gC(e){return(gC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vC(){return(vC=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function hC(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function OC(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function wC(e,t){return(wC=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function EC(e,t){return!t||"object"!==gC(t)&&"function"!=typeof t?SC(e):t}function SC(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function PC(e){return(PC=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function jC(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var CC=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wC(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=PC(n);if(o){var r=PC(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return EC(this,e)});function a(){var e;hC(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return jC(SC(e=i.call.apply(i,[this].concat(r))),"state",{}),jC(SC(e),"renderWithTooltip",(function(t){if(e.props.tooltip.customizedTooltip){var r=e.props.tooltip.customizedTooltip;return c().createElement(r,null,t)}var n=c().createElement(g.Tooltip,{id:e.props.tooltip.id},"this.props.tooltip.message");return c().createElement(Xe.Z,{key:e.props.tooltip.overlayTriggerKey,placement:e.props.tooltip.placement,overlay:n},t)})),jC(SC(e),"renderPagination",(function(){var t=e.props.pagination.firstPage,r=e.props.pagination.lastPage;return c().createElement("div",{className:"autocomplete-toolbar"},!t&&c().createElement(g.Glyphicon,{className:e.props.prevPageIcon,glyph:e.props.prevPageIcon,onClick:function(){return e.props.pagination.loadPrevPage()}}),!r&&c().createElement(g.Glyphicon,{className:e.props.nextPageIcon,glyph:e.props.nextPageIcon,onClick:function(){return e.props.pagination.loadNextPage()}}))})),jC(SC(e),"renderField",(function(){var t,r={emptyList:function(){return e.props.busy?"Loading...":(0,ie.S$)(e.context.messages,"queryform.attributefilter.autocomplete.emptyList")},open:(0,ie.S$)(e.context.messages,"queryform.attributefilter.autocomplete.open"),emptyFilter:(0,ie.S$)(e.context.messages,"queryform.attributefilter.autocomplete.emptyFilter")},n=[];e.props.data&&e.props.data.length>0&&(n=e.props.data.map((function(e){return e}))),e.props.pagination&&e.props.pagination.paginated&&n.length>0&&n.push((jC(t={},e.props.textField,""),jC(t,e.props.valueField,""),jC(t,"disabled",!0),jC(t,"pagination",e.renderPagination()),t));var o=!1,i=e.props.loading?[]:n,a=e.props.itemComponent,l=c().createElement(_r.Combobox,{dropUp:e.props.dropUp,busy:e.props.busy,data:i,disabled:e.props.disabled,itemComponent:function(t){return c().createElement(a,vC({textField:e.props.textField,valueField:e.props.valueField},t))},messages:e.props.messages||r,open:e.props.open,filter:!1,onChange:function(t){e.props.onChange(t,e.props.valueField),o=!0},onFocus:function(){return e.props.onFocus(e.props.data)},onSelect:function(t){var r=de()(e.props.features.filter((function(r){return r.properties[e.props.valueField].toLowerCase()===t[e.props.valueField].toLowerCase()})));e.props.onSelect(t,r,e.props.srsName,e.props.style)},onToggle:function(t){var r=de()(e.props.features.filter((function(t){return t.properties[e.props.valueField].toLowerCase()===e.props.selectedValue.toLowerCase()})));!t||e.props.selectedValue||e.props.selectedValue||o||e.props.onChange("",e.props.valueField),e.props.onToggle(t,r,e.props.pagination.currentPage),r&&!t&&e.props.onSelect(e.props.selectedValue,r,e.props.srsName,e.props.style),o=!1},textField:e.props.textField,valueField:e.props.valueField,value:e.props.selectedValue});return e.props.tooltip&&e.props.tooltip.enabled?e.renderWithTooltip(l):l})),e}return t=a,(r=[{key:"render",value:function(){var e=this.props.label?c().createElement("label",null,this.props.label):c().createElement("span",null);return c().createElement("div",{className:"autocompleteField"},e,this.renderField())}}])&&OC(t.prototype,r),a}(c().Component);jC(CC,"propTypes",{busy:u().bool,data:u().array,disabled:u().bool,dropUp:u().bool,features:u().array,filter:u().string,itemComponent:u().oneOfType([u().object,u().func]),label:u().string,loading:u().bool,messages:u().object,onChange:u().func,onFocus:u().func,onSelect:u().func,onToggle:u().func,onChangeDrawingStatus:u().func,style:u().style,open:u().bool,pagination:u().object,nextPageIcon:u().string,prevPageIcon:u().string,selectedValue:u().string,srsName:u().string,textField:u().string,tooltip:u().object,valueField:u().string}),jC(CC,"contextTypes",{messages:u().object}),jC(CC,"defaultProps",{dropUp:!1,features:[],filter:"",itemComponent:qu.Z,loading:!1,label:null,pagination:{paginated:!0,firstPage:!1,lastPage:!1,loadPrevPage:function(){},loadNextPage:function(){}},nextPageIcon:"chevron-right",prevPageIcon:"chevron-left",onFocus:function(){},onToggle:function(){},onChange:function(){},onChangeDrawingStatus:function(){},onSelect:function(){},srsName:"EPSG:4326",textField:"label",tooltip:{customizedTooltip:void 0,enabled:!1,id:"",message:void 0,overlayTriggerKey:"",placement:"top"},valueField:"value"});const xC=CC;function TC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function kC(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?TC(Object(r),!0).forEach((function(t){IC(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):TC(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function IC(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}(0,R.setObservableConfig)(na.Z);var AC=(0,R.mapPropsStreamWithConfig)(na.Z)((function(e){return e.take(1).switchMap((function(t){return t.autocompleteStreamFactory(e)})).combineLatest(e,(function(e,t){return kC(kC({},t),{},{data:Bl()(e&&e.fetchedData&&e.fetchedData.values)?e.fetchedData.values:[],features:Bl()(e&&e.fetchedData&&e.fetchedData.features)?e.fetchedData.features:[],valuesCount:e&&e.fetchedData&&e.fetchedData.size,srsName:e&&e.fetchedData&&e.fetchedData.crs,busy:e.busy})}))}))((function(e){var t=e.open,r=e.toggle,n=e.select,o=e.focus,i=e.change,a=e.changed,l=e.originalValue,s=e.value,u=e.valuesCount,p=e.onChangeDrawingStatus,f=e.loadNextPage,d=e.loadPrevPage,m=e.maxFeatures,y=e.currentPage,b=e.itemComponent,g=e.features,v=e.busy,h=e.data,O=e.loading,w=void 0!==O&&O,E=e.valueField,S=e.textField,P=e.filter,j=e.srsName,C=e.style,x=Math.ceil(u/m);return c().createElement(xC,{pagination:{firstPage:1===y,lastPage:x<=y,paginated:!0,loadPrevPage:d,loadNextPage:f,currentPage:y},srsName:j,busy:v,dropUp:!1,data:h,open:t,onChangeDrawingStatus:p,valueField:E,textField:S,itemComponent:b,filter:P,onFocus:o,onToggle:r,onChange:i,onSelect:n,features:g,style:C,selectedValue:a?s:l||s,loading:w})})),FC=(0,R.compose)((0,R.withPropsOnChange)(["valueField"],(function(){return{value:void 0}})),(0,R.withStateHandlers)((function(e){return{delayDebounce:0,performFetch:!1,open:!1,currentPage:1,maxFeatures:5,changed:e.value,value:e.value,onChangeDrawingStatus:e.onChangeDrawingStatus,itemComponent:e.itemComponent}}),{select:function(){return function(e){return{selected:e}}},change:function(e){return function(t,r){return e.selected||e.open||e.onChangeDrawingStatus("clean","","queryform",[],{}),{delayDebounce:500,selected:!1,changingPage:!1,changed:!0,performFetch:!(e.selected&&!e.changingPage),value:e.selected&&e.changingPage&&e.value||("string"==typeof t?t:t[r]),currentPage:e.changingPage?e.currentPage:1}}},focus:function(e){return function(t){return t&&0===t.length&&""===e.value?{delayDebounce:0,currentPage:1,performFetch:!0,isToggled:!1,open:!0}:e}},toggle:function(e){return function(){return{open:!!e.changingPage||!e.open}}},loadNextPage:function(e){return function(){return{currentPage:e.currentPage+1,performFetch:!0,changingPage:!0,delayDebounce:0}}},loadPrevPage:function(e){return function(){return{currentPage:e.currentPage-1,performFetch:!0,changingPage:!0,delayDebounce:0}}}}),(0,R.withHandlers)({select:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,r=e.onChangeSpatialFilterValue,n=void 0===r?function(){}:r,o=e.select,i=void 0===o?function(){}:o;return function(e,r,o,a){r&&n({geometry:r.geometry,value:e,feature:r,srsName:o,style:a,options:t,collectGeometries:t&&t.crossLayer?{queryCollection:{typeName:t.crossLayer.typeName,geometryName:t.crossLayer.geometryName,cqlFilter:(0,bC.generateTemplateString)(t.crossLayer.cqlTemplate||"",Nu.escapeCQLStrings)(r)}}:void 0}),i(!0)}}}))(AC);function DC(e){return(DC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function RC(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function NC(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function MC(e,t){return(MC=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function LC(e,t){return!t||"object"!==DC(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _C(e){return(_C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ZC=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&MC(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=_C(n);if(o){var r=_C(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return LC(this,e)});function a(){return RC(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"render",value:function(){return c().createElement("span",{className:this.props.customItemClassName?this.props.customItemClassName:""},this.props.item)}}])&&NC(t.prototype,r),a}(c().Component);!function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(ZC,"propTypes",{item:u().string,textField:u().string,customItemClassName:u().string,valueField:u().string});const BC=ZC;function zC(e){return(zC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function GC(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function UC(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function WC(e,t){return(WC=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function VC(e,t){return!t||"object"!==zC(t)&&"function"!=typeof t?qC(e):t}function qC(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function HC(e){return(HC=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $C(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var KC=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&WC(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=HC(n);if(o){var r=HC(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return VC(this,e)});function a(){var e;GC(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return $C(qC(e=i.call.apply(i,[this].concat(r))),"onUpdateBBOX",(function(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"replace";"replace"===n&&(e.tempExtent[r]=!isNaN(parseFloat(t))&&parseFloat(t)||0);var o=[];for(var i in e.tempExtent)i&&o.push(e.tempExtent[i]);var a=(0,cn.reprojectBbox)(o,"EPSG:4326",e.props.projection),l={type:e.props.geometry.type,coordinates:[[[a[0],a[1]],[a[0],a[3]],[a[2],a[3]],[a[2],a[1]],[a[0],a[1]]]],projection:e.props.geometry.projection};e.props.onChangeDrawingStatus(n,void 0,"queryform",[l])})),$C(qC(e),"onUpdateCircle",(function(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"replace";"replace"===n&&(e.tempCircle[r]=parseFloat(t));var o=isNaN(parseFloat(e.tempCircle.x))||isNaN(parseFloat(e.tempCircle.y))?[e.tempCircle.x,e.tempCircle.y]:(0,cn.reproject)([e.tempCircle.x,e.tempCircle.y],"EPSG:4326",e.props.projection);o=void 0===o.x?{x:o[0],y:o[1]}:o;var i={x:isNaN(o.x)?0:o.x,y:isNaN(o.y)?0:o.y},a={type:e.props.geometry.type,center:i,coordinates:[i.x,i.y],radius:isNaN(e.tempCircle.radius)?0:e.tempCircle.radius,projection:e.props.geometry.projection};e.props.onChangeDrawingStatus(n,void 0,"queryform",[a],{geodesic:e.props.enableGeodesic})})),$C(qC(e),"onModifyGeometry",(function(){"BBOX"===e.props.type?e.onUpdateBBOX(null,null,"endDrawing"):"Circle"===e.props.type&&e.onUpdateCircle(null,null,"endDrawing"),e.props.onShowPanel(!1)})),$C(qC(e),"onClosePanel",(function(){e.resetGeom(),e.props.onShowPanel(!1)})),$C(qC(e),"getStep",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return Math.min(1/Math.pow(10,Math.ceil(Math.min(e,21)/3)-2),1)})),$C(qC(e),"getStepCircle",(function(t,r){var n=e.getStep(t);return"radius"===r&&!e.isWGS84()&&1e4*n||n})),$C(qC(e),"getBBOXDimensions",(function(e){var t=(0,cn.reprojectBbox)(e.extent,e.projection,"EPSG:4326");return{west:t[0],sud:t[1],est:t[2],north:t[3]}})),$C(qC(e),"getCircleDimensions",(function(t){var r=(0,cn.reproject)(t.center,t.projection,"EPSG:4326"),n=(0,cn.reproject)(t.center,t.projection,e.props.projection),o=(0,cn.reproject)([t.center[0]+t.radius,t.center[1]],t.projection,e.props.projection),i=Math.sqrt((o.x-n.x)*(o.x-n.x)+(o.y-n.y)*(o.y-n.y));return{x:r.x,y:r.y,radius:i}})),$C(qC(e),"renderCoordinateField",(function(t,r){return c().createElement("div",null,c().createElement("div",{className:"detail-field-title"},r),c().createElement(sn.Z,{style:{minWidth:"105px",margin:"auto"},type:"number",id:"queryform_bbox_"+r,step:e.getStep(e.props.zoom),defaultValue:e.roundValue(t,1e6),onChange:function(t){return e.onUpdateBBOX(t,r)}}))})),$C(qC(e),"renderCircleField",(function(t,r){return c().createElement(sn.Z,{type:"number",id:"queryform_circle_"+r,defaultValue:e.roundValue(t,"radius"!==r||e.isWGS84()?1e6:100),step:e.getStepCircle(e.props.zoom,r),onChange:function(t){return e.onUpdateCircle(t,r)}})})),$C(qC(e),"renderDetailsContent",(function(){var t,r=e.props.geometry;if("BBOX"===e.props.type){var n=e.getBBOXDimensions(r);t=c().createElement("div",null,c().createElement("div",{className:"container-fluid"},c().createElement(g.Row,null,c().createElement(g.Col,{xs:4},c().createElement("span",null)),c().createElement(g.Col,{xs:4},e.renderCoordinateField(n.north,"north")),c().createElement(g.Col,{xs:4},c().createElement("span",null))),c().createElement(g.Row,null,c().createElement(g.Col,{xs:4},e.renderCoordinateField(n.west,"west")),c().createElement(g.Col,{xs:4},c().createElement("span",null)),c().createElement(g.Col,{xs:4},e.renderCoordinateField(n.est,"est"))),c().createElement(g.Row,null,c().createElement(g.Col,{xs:4},c().createElement("span",null)),c().createElement(g.Col,{xs:4},e.renderCoordinateField(n.sud,"sud")),c().createElement(g.Col,{xs:4},c().createElement("span",null)))),c().createElement("span",null,c().createElement("hr",{width:"90%"}),c().createElement("div",null,c().createElement("h5",null,c().createElement(yp.ZP.Message,{msgId:"queryform.spatialfilter.details.details_bbox_label"})))))}else if("Circle"===e.props.type){var o=e.getCircleDimensions(r),i=(0,cn.getUnits)(e.props.projection);t=c().createElement("div",null,c().createElement("div",{className:"container-fluid"},c().createElement(g.Row,null,c().createElement(g.Col,{xs:2},c().createElement("span",null)),c().createElement(g.Col,{xs:2},c().createElement("span",{className:"details-circle-attribute-name"},"x:")),c().createElement(g.Col,{xs:4},e.renderCircleField(o.x,"x")),c().createElement(g.Col,{xs:4},c().createElement("span",null))),c().createElement(g.Row,null,c().createElement(g.Col,{xs:2},c().createElement("span",null)),c().createElement(g.Col,{xs:2},c().createElement("span",{className:"details-circle-attribute-name"},"y:")),c().createElement(g.Col,{xs:4},e.renderCircleField(o.y,"y")),c().createElement(g.Col,{xs:4},c().createElement("span",null))),c().createElement(g.Row,null,c().createElement(g.Col,{xs:2},c().createElement("span",null)),c().createElement(g.Col,{xs:2},c().createElement("span",{className:"details-circle-attribute-name"},c().createElement(yp.ZP.Message,{msgId:"queryform.spatialfilter.details.radius",msgParams:{unit:"degrees"===i?"°":i}}),":")),c().createElement(g.Col,{xs:4},e.renderCircleField(o.radius,"radius")),c().createElement(g.Col,{xs:4},c().createElement("span",null)))),c().createElement("span",null,c().createElement("hr",{width:"90%"}),c().createElement("div",null,c().createElement("h5",null,c().createElement(yp.ZP.Message,{msgId:"queryform.spatialfilter.details.details_circle_label"})))))}return t})),$C(qC(e),"isWGS84",(function(){return"EPSG:4326"===e.props.projection})),$C(qC(e),"roundValue",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e6;return Math.round(e*t)/t})),$C(qC(e),"resetGeom",(function(){"BBOX"===e.props.type?e.resetBBOX():"Circle"===e.props.type&&e.resetCircle()})),$C(qC(e),"resetBBOX",(function(){for(var t in e.extent)t&&(document.getElementById("queryform_bbox_"+t).value=e.roundValue(e.extent[t],1e6),e.onUpdateBBOX(e.extent[t],t))})),$C(qC(e),"resetCircle",(function(){document.getElementById("queryform_circle_radius").value=e.roundValue(e.circle.radius,100),e.onUpdateCircle(e.circle.radius,"radius"),document.getElementById("queryform_circle_x").value=e.roundValue(e.circle.x,e.isWGS84()?1e6:100),e.onUpdateCircle(e.circle.x,"x"),document.getElementById("queryform_circle_y").value=e.roundValue(e.circle.y,e.isWGS84()?1e6:100),e.onUpdateCircle(e.circle.y,"y")})),e}return t=a,(r=[{key:"componentDidMount",value:function(){var e=this.props.geometry;"BBOX"===this.props.type?(this.extent=this.getBBOXDimensions(e),this.tempExtent=le()({},this.extent)):"Circle"===this.props.type&&(this.circle=this.getCircleDimensions(e),this.tempCircle=le()({},this.circle))}},{key:"render",value:function(){var e=this;return c().createElement(op.Z,{buttons:[{key:"confirm",glyph:"ok",tooltipId:"confirm",onClick:function(){return e.onModifyGeometry()}},{key:"reset",tooltipId:"queryform.reset",glyph:"clear-filter",onClick:function(){return e.resetGeom()}},{key:"close",glyph:"1-close",onClick:function(){return e.onClosePanel(!1)}}],title:c().createElement(yp.ZP.Message,{msgId:"queryform.spatialfilter.details.details_header"}),locked:!0,expanded:!0,className:"details-panel",bsStyle:"primary"},this.renderDetailsContent())}}])&&UC(t.prototype,r),a}(c().Component);$C(KC,"propTypes",{useMapProjection:u().bool,geometry:u().object,type:u().string,onShowPanel:u().func,onChangeDrawingStatus:u().func,zoom:u().number,projection:u().string,enableGeodesic:u().bool}),$C(KC,"defaultProps",{useMapProjection:!0,geometry:null,type:null,onShowPanel:function(){},onChangeDrawingStatus:function(){}});const YC=KC;function XC(e){return(XC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function QC(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function JC(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ex(e,t){return(ex=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function tx(e,t){return!t||"object"!==XC(t)&&"function"!=typeof t?rx(e):t}function rx(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nx(e){return(nx=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ox(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ix=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ex(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=nx(n);if(o){var r=nx(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return tx(this,e)});function a(){var e;QC(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return ox(rx(e=i.call.apply(i,[this].concat(r))),"state",{open:!1}),ox(rx(e),"getFilter",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"*",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"=",n={filterFields:[{attribute:e.props.searchAttribute,operator:r,value:t,type:"list"}]};e.props.dependsOn&&(n.groupFields=[{id:1,logic:"AND",index:0}],n.filterFields[0].groupId=1,e.props.multivalue?(n.groupFields.push({id:2,logic:"OR",groupId:1,index:1}),e.props.dependsOn.value instanceof Array?e.props.dependsOn.value.forEach((function(t){n.filterFields.push({attribute:e.props.dependsOn.field,operator:e.props.dependsOn.operator||"=",value:t,groupId:2,type:"list"})})):n.filterFields.push({attribute:e.props.dependsOn.field,operator:e.props.dependsOn.operator||"=",value:e.props.dependsOn.value,groupId:2,type:"list"})):n.filterFields.push({attribute:e.props.dependsOn.field,operator:e.props.dependsOn.operator||"=",value:e.props.dependsOn.value,groupId:1,type:"list"}));var o=(0,Nu.toOGCFilter)(e.props.typeName,n,e.props.wfs,e.props.sort||{sortBy:e.props.searchAttribute,sortOrder:"ASC"});return o})),ox(rx(e),"changeZoneValue",(function(t,r,n){var o;e.setState({open:!1}),o=e.props.multivalue?{value:n.map((function(e){return e.id})),feature:n.map((function(e){return e.feature}))}:{value:[n],feature:[e.values.filter((function(e){return e.id===n}))[0].feature]},e.props.onChange(e.props.zoneId,o)})),e}return t=a,(r=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.values&&!Nr()(this.props.values,e.values)&&e.values.length>0&&this.setState({open:!0})}},{key:"render",value:function(){var e=this;this.values=[],this.props.values&&this.props.values.length>0&&(this.values=this.props.values.map((function(t){var r=t;e.props.valueField.split(".").forEach((function(e){r=r?r[e]:null}));var n=t;return e.props.textField.split(".").forEach((function(e){n=n?n[e]:null})),{id:r,name:n,feature:t}})));var t=this.props.label?c().createElement("label",null,this.props.label):c().createElement("span",null),r=this.props.error;return r&&(r="object"!==XC(r)?r:r.status+" "+r.statusText+": "+r.data),c().createElement("div",{className:"zone-combo"},t,c().createElement($s,{key:(new Date).getTime(),busy:this.props.busy,disabled:this.props.disabled,fieldRowId:this.props.zoneId,valueField:"id",textField:"name",fieldOptions:this.values,fieldValue:this.props.value,fieldName:"zone",fieldException:r,options:{defaultOpen:this.state.open},groupBy:this.props.groupBy?function(t){return t.feature.properties[e.props.groupBy]}:function(){},multivalue:this.props.multivalue,comboFilter:this.props.comboFilter,onSelect:this.props.onSelect,onUpdateField:this.changeZoneValue,onToggle:function(t){if(t&&(!e.props.values||e.props.values.length<1)){var r=e.getFilter(e.props.searchText,e.props.searchMethod);e.props.onSearch(!0,e.props.zoneId),e.props.onFilter(e.props.url,r,e.props.zoneId)}}}))}}])&&JC(t.prototype,r),a}(c().Component);ox(ix,"propTypes",{zoneId:u().number,url:u().string,typeName:u().string,wfs:u().string,busy:u().bool,values:u().array,value:u().oneOfType([u().object,u().number,u().string,u().array]),label:u().string,searchText:u().string,searchMethod:u().string,searchAttribute:u().string,sort:u().object,error:u().oneOfType([u().object,u().string]),comboFilter:u().oneOfType([u().bool,u().string,u().func]),groupBy:u().oneOfType([u().string,u().func]),multivalue:u().bool,open:u().bool,disabled:u().bool,dependsOn:u().object,valueField:u().string,textField:u().string,onSearch:u().func,onFilter:u().func,onChange:u().func,onSelect:u().func}),ox(ix,"contextTypes",{messages:u().object}),ox(ix,"defaultProps",{open:!1,zoneId:null,url:null,typeName:null,wfs:"1.1.0",busy:!1,values:[],value:null,valueField:null,textField:null,label:null,disabled:!1,error:null,searchText:"*",searchMethod:"ilike",searchAttribute:null,comboFilter:"contains",multivalue:!0,groupBy:null,onSearch:function(){},onFilter:function(){},onChange:function(){},onSelect:function(){}});const ax=ix;function lx(e){return(lx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cx(){return(cx=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function sx(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ux(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function px(e,t){return(px=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function fx(e,t){return!t||"object"!==lx(t)&&"function"!=typeof t?dx(e):t}function dx(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mx(e){return(mx=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function yx(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var bx=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&px(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=mx(n);if(o){var r=mx(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return fx(this,e)});function a(){var e;sx(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return yx(dx(e=i.call.apply(i,[this].concat(r))),"getMethodFromId",(function(t){return ye()(e.props.spatialMethodOptions,(function(e){return e&&e.id===t}))||null})),yx(dx(e),"renderHeader",(function(){var t=(0,ie.S$)(e.context.messages,"queryform.spatialfilter.spatial_filter_header");return c().createElement("span",null,c().createElement("span",{style:{cursor:"pointer"},onClick:e.props.actions.onExpandSpatialFilterPanel.bind(null,!e.props.spatialPanelExpanded)},t),c().createElement("button",{onClick:e.props.actions.onExpandSpatialFilterPanel.bind(null,!e.props.spatialPanelExpanded),className:"close"},e.props.spatialPanelExpanded?c().createElement(g.Glyphicon,{glyph:"glyphicon glyphicon-collapse-down"}):c().createElement(g.Glyphicon,{glyph:"glyphicon glyphicon-expand"})))})),yx(dx(e),"renderSpatialHeader",(function(){var t=e.getMethodFromId(e.props.spatialField.method);return c().createElement("div",null,c().createElement(g.Row,{className:"logicHeader inline-form filter-field-row filter-field-fixed-row"},c().createElement(g.Col,{xs:6},c().createElement("div",null,c().createElement(yp.ZP.Message,{msgId:"queryform.spatialfilter.filterType"}))),c().createElement(g.Col,{xs:6},c().createElement($s,{itemComponent:function(t){return c().createElement(BC,cx({customItemClassName:e.getMethodFromId(t.item)&&e.getMethodFromId(t.item).customItemClassName||""},t))},fieldOptions:e.props.spatialMethodOptions.map((function(t){return(0,ie.S$)(e.context.messages,t.name)||t.name})),placeholder:(0,ie.S$)(e.context.messages,"queryform.spatialfilter.combo_placeholder"),fieldName:"method",fieldRowId:(new Date).getTime(),fieldValue:(0,ie.S$)(e.context.messages,t?t.name:"")||t&&t.name||"",onUpdateField:e.updateSpatialMethod}))))})),yx(dx(e),"renderDwithin",(function(){return c().createElement(g.Row,{className:"container-fluid filter-field-fixed-row"},c().createElement(g.Col,{xs:6,className:"filter-text-desc"},c().createElement(yp.ZP.Message,{msgId:"queryform.spatialfilter.dwithin_label"})),c().createElement(g.Col,{xs:6},c().createElement(sn.Z,{type:"number",min:"0",defaultValue:"0",disabled:!e.props.spatialField.geometry,id:"queryform_dwithin_field",onChange:function(t){return e.props.actions.onChangeDwithinValue(t,name)}})))})),yx(dx(e),"renderZoneFields",(function(){return e.props.spatialField.method&&"ZONE"===e.props.spatialField.method&&e.props.spatialField.zoneFields&&e.props.spatialField.zoneFields.length>0?e.props.spatialField.zoneFields.map((function(t){return c().createElement(ax,{key:t.id,open:t.open,zoneId:t.id,url:t.url,typeName:t.typeName,wfs:t.wfs,busy:t.busy,label:t.label,values:t.values,value:t.value,valueField:t.valueField,textField:t.textField,searchText:t.searchText,searchMethod:t.searchMethod,searchAttribute:t.searchAttribute,sort:t.sort,error:t.error,disabled:t.disabled,dependsOn:t.dependson,groupBy:t.groupBy,multivalue:t.multivalue,onSearch:e.props.actions.zoneSearch,onFilter:e.props.actions.zoneFilter,onChange:e.props.actions.zoneChange})})):null})),yx(dx(e),"renderRoiPanel",(function(){var t=e.getMethodFromId(e.props.spatialField.method),r=t&&t.filterProps&&t.filterProps.valueField&&e.props.spatialField&&e.props.spatialField.value&&e.props.spatialField.value[t.filterProps.valueField];return c().createElement(g.Panel,null,c().createElement("div",{className:"container-fluid"},c().createElement(g.Row,{className:"filter-field-row filter-field-fixed-row"},c().createElement(g.Col,{xs:6},c().createElement("span",null,t&&t.name||t.id)),c().createElement(g.Col,{xs:6},c().createElement(FC,{originalValue:r,key:e.props.spatialField.method,options:t,autocompleteStreamFactory:yC.Vj,valueField:t&&t.filterProps&&t.filterProps.valueField,textField:t&&t.filterProps&&t.filterProps.valueField,url:t&&t.url,filter:"contains",onChangeSpatialFilterValue:e.props.actions.onChangeSpatialFilterValue,onChangeDrawingStatus:function(){var t;(t=e.props.actions).onChangeDrawingStatus.apply(t,arguments)},filterProps:t&&t.filterProps})))))})),yx(dx(e),"renderSpatialPanel",(function(t,r,n){return c().createElement(g.Panel,{className:"spatial-panel"},e.props.spatialMethodOptions.length>1?e.renderSpatialHeader():c().createElement("span",null),e.renderZoneFields(),e.props.spatialField.method&&e.getMethodFromId(e.props.spatialField.method)&&"wfsGeocoder"===e.getMethodFromId(e.props.spatialField.method).type?e.renderRoiPanel():null,e.props.spatialOperations.length>1?c().createElement(g.Panel,null,c().createElement("div",null,t),n&&"DWITHIN"===n.id?e.renderDwithin():null,c().createElement(g.Row,null,c().createElement(g.Col,{xs:12},r))):c().createElement("span",null))})),yx(dx(e),"renderButtons",(function(){var t=[],r=e.props.showDetailsButton&&e.props.spatialField.geometry&&(e.props.spatialField.method&&"BBOX"===e.props.spatialField.method||"Circle"===e.props.spatialField.method),n=e.props.spatialField.geometry&&e.props.spatialField.geometry.coordinates;return r&&t.push({glyph:"pencil",onClick:function(){return e.props.actions.onShowSpatialSelectionDetails(!0)},tooltipId:"queryform.spatialfilter.details.detail_button_label"}),n&&t.push({glyph:"clear-filter",tooltipId:"queryform.spatialfilter.remove",bsStyle:e.props.clearFilterOptions.buttonStyle,className:e.props.clearFilterOptions.className,onClick:function(){return e.resetSpatialFilter()}}),t})),yx(dx(e),"updateSpatialMethod",(function(t,r,n){e.props.actions.onShowSpatialSelectionDetails(!1);var o=e.props.spatialMethodOptions.filter((function(t){return n===((0,ie.S$)(e.context.messages,t.name)||t.name)}))[0].id,i=e.getMethodFromId(o);if(e.props.actions.onSelectSpatialMethod(o,r),"wfsGeocoder"!==e.getMethodFromId(o).type)switch(o){case"ZONE":e.changeDrawingStatus("clean","","queryform",[]);break;case"Viewport":e.changeDrawingStatus("clean","","queryform",[]),e.props.actions.onSelectViewportSpatialMethod();break;default:e.changeDrawingStatus("start",o,"queryform",[],{geodesic:!!vc()(i.geodesic)||i.geodesic,stopAfterDrawing:!0})}else e.changeDrawingStatus("clean","","queryform",[])})),yx(dx(e),"updateSpatialOperation",(function(t,r,n){var o=e.props.spatialOperations.filter((function(t){return n===(0,ie.S$)(e.context.messages,t.name)}))[0].id;e.props.actions.onSelectSpatialOperation(o,r)})),yx(dx(e),"resetSpatialFilter",(function(){e.changeDrawingStatus("clean","","queryform",[]),e.props.actions.onRemoveSpatialSelection(),e.props.actions.onShowSpatialSelectionDetails(!1)})),yx(dx(e),"changeDrawingStatus",(function(t,r,n,o,i){e.props.actions.onChangeDrawingStatus(t,void 0!==r?r:e.props.spatialField.method,n,o,i)})),e}return t=a,(r=[{key:"render",value:function(){var e=this,t=this.props.spatialOperations.filter((function(t){return e.props.spatialField.operation===t.id}))[0],r=c().createElement("span",null);"ZONE"!==this.props.spatialField.method&&"Viewport"!==this.props.spatialField.method&&this.getMethodFromId(this.props.spatialField.method)&&"wfsGeocoder"!==this.getMethodFromId(this.props.spatialField.method).type&&(r=this.props.spatialField.geometry?null:c().createElement("span",null,c().createElement("div",{className:"m-label m-caption text-center"},c().createElement(yp.ZP.Message,{msgId:"queryform.spatialfilter.draw_start_label"}))));var n=this.getMethodFromId(this.props.spatialField.method),o=this.props.showDetailsPanel?c().createElement(YC,{useMapProjection:this.props.useMapProjection,enableGeodesic:!!vc()(n.geodesic)||n.geodesic,geometry:this.props.spatialField.geometry,type:this.props.spatialField.method,onShowPanel:this.props.actions.onShowSpatialSelectionDetails,onChangeDrawingStatus:this.changeDrawingStatus,zoom:this.props.zoom,projection:this.props.projection}):c().createElement("span",null),i=c().createElement(g.Row,{className:"filter-field-row inline-form filter-field-fixed-row"},c().createElement(g.Col,{xs:6},c().createElement(yp.ZP.Message,{msgId:"queryform.spatialfilter.geometric_operation"})),c().createElement(g.Col,{xs:6},c().createElement($s,{fieldOptions:this.props.spatialOperations.map((function(t){return(0,ie.S$)(e.context.messages,t.name)})),fieldName:"operation",fieldRowId:(new Date).getTime(),fieldValue:(0,ie.S$)(this.context.messages,t?t.name:""),onUpdateField:this.updateSpatialOperation})));return c().createElement("div",{className:"query-filter-container"},this.props.withContainer?c().createElement(op.Z,{id:"spatialFilterPanel",header:this.renderHeader(),buttons:this.renderButtons(),collapsible:!0,expanded:this.props.spatialPanelExpanded,onSwitch:function(t){return e.props.actions.onExpandSpatialFilterPanel(t)}},this.renderSpatialPanel(i,r,t)):this.renderSpatialPanel(i,r,t),o)}}])&&ux(t.prototype,r),a}(c().Component);yx(bx,"propTypes",{useMapProjection:u().bool,spatialField:u().object,spatialOperations:u().array,spatialMethodOptions:u().array,spatialPanelExpanded:u().bool,showDetailsButton:u().bool,clearFilterOptions:u().object,showDetailsPanel:u().bool,withContainer:u().bool,actions:u().object,zoom:u().number,projection:u().string}),yx(bx,"contextTypes",{messages:u().object}),yx(bx,"defaultProps",{useMapProjection:!0,spatialField:{},spatialPanelExpanded:!0,showDetailsButton:!0,clearFilterOptions:{className:"square-button-sm no-border",buttonStyle:"default"},showDetailsPanel:!1,withContainer:!0,spatialMethodOptions:[],spatialOperations:[],actions:{onExpandSpatialFilterPanel:function(){},onSelectSpatialMethod:function(){},onSelectSpatialOperation:function(){},onChangeSpatialFilterValue:function(){},onChangeDrawingStatus:function(){},onRemoveSpatialSelection:function(){},onShowSpatialSelectionDetails:function(){},onSelectViewportSpatialMethod:function(){},onChangeRegion:function(){},onChangeDwithinValue:function(){},zoneFilter:function(){},zoneSearch:function(){},zoneChange:function(){}}});const gx=bx;function vx(){return(vx=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var hx=(0,r(17252).Z)((function(e){return c().createElement("div",vx({className:"square-button pull-right no-border",style:{display:"flex"}},e),c().createElement(g.Glyphicon,{glyph:"exclamation-mark",className:"text-danger"}))}));const Ox=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.loadingError,r=e.onToggleQuery,n=void 0===r?function(){}:r,o=e.buttonStyle,i=void 0===o?"default":o;return c().createElement("div",{className:"mapstore-block-width"},c().createElement(Je.Z,{id:"toc-query-close-button",key:"menu-button",className:"square-button no-border",bsStyle:i,onClick:function(){return n()}},c().createElement(g.Glyphicon,{glyph:"arrow-left"})),t&&c().createElement(hx,{popover:{text:c().createElement(b.Z,{msgId:"queryform.loadingError"})}})||c().createElement("div",{className:"square-button pull-right no-border",style:{display:"flex"}},c().createElement(g.Glyphicon,{glyph:"filter",className:"text-primary"})))};function wx(e){return(wx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ex(){return(Ex=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function Sx(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Px(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function jx(e,t){return(jx=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Cx(e,t){return!t||"object"!==wx(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function xx(e){return(xx=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Tx(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var kx=iC((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.crossLayerExpanded,r=void 0===t||t,n=e.spatialOperations,o=e.expandCrossLayerFilterPanel,i=void 0===o?function(){}:o,a=e.layers,l=void 0===a?[]:a,s=e.errorObj,u=e.loadingAttributes,p=e.loadingCapabilities,f=e.searchUrl,d=e.queryCollection,m=void 0===d?{}:d,y=e.attributes,v=void 0===y?[]:y,h=e.operation,O=e.updateLogicCombo,w=void 0===O?function(){}:O,E=e.resetCrossLayerFilter,S=void 0===E?function(){}:E,P=e.setOperation,j=void 0===P?function(){}:P,C=e.setQueryCollectionParameter,x=void 0===C?function(){}:C,T=e.addCrossLayerFilterField,k=void 0===T?function(){}:T,I=e.updateCrossLayerFilterField,A=void 0===I?function(){}:I,F=e.removeCrossLayerFilterField,D=void 0===F?function(){}:F,R=m.typeName,N=m.geometryName,M=m.filterFields,L=m.groupFields,_=void 0===L?[{id:1,logic:"OR",index:0}]:L,Z=l.filter((function(e){return!Yj(f,e)})),B=function(){return l.length&&Z.length?c().createElement(Ql.Z,{bsStyle:"link",text:c().createElement(b.Z,{msgId:"queryform.crossLayerFilter.errors.layersExcluded"})}):null};return c().createElement(op.Z,{loading:p,expanded:r&&!p&&!s,error:s,errorMsgId:"queryPanel",buttons:$j(R?[{glyph:"clear-filter",tooltipId:"queryform.crossLayerFilter.clear",onClick:function(){return S()}}]:[]),onSwitch:i,title:c().createElement(b.Z,{msgId:"queryform.crossLayerFilter.title"})},c().createElement(g.Row,{className:"inline-form filter-field-fixed-row"},c().createElement(g.Col,{xs:6},c().createElement("div",null,c().createElement(b.Z,{msgId:"queryform.crossLayerFilter.targetLayer"})," ",B())),c().createElement(g.Col,{xs:6},c().createElement(Hr.ZP,{clearable:!1,disabled:p||!!s,isLoading:u,options:l.filter((function(e){return Yj(f,e)})).map((function(e){return{label:e.title||e.name,value:e.name}})),placeholder:c().createElement(b.Z,{msgId:"queryform.crossLayerFilter.placeholder"}),filter:"contains",value:R,onChange:function(e){x("typeName",e&&e.value)}}))),R&&N?c().createElement(g.Row,{className:"inline-form filter-field-fixed-row"},c().createElement(g.Col,{xs:6},c().createElement("div",null,c().createElement(b.Z,{msgId:"queryform.crossLayerFilter.operation"}))),c().createElement(g.Col,{xs:6},c().createElement(qj,{value:h,onChange:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id;return j(t)},spatialOperations:Xj(n)}))):null,R&&N&&h?c().createElement(g.Row,{className:"filter-field-fixed-row"},c().createElement(g.Col,{xs:12},c().createElement(xp,{autocompleteEnabled:!1,withContainer:!1,attributes:v,groupLevels:-1,filterFields:M,actions:{onUpdateLogicCombo:w,onAddFilterField:k,onUpdateFilterField:A,onRemoveFilterField:D},groupFields:_,filterField:!0}))):null)})),Ix=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jx(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=xx(n);if(o){var r=xx(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Cx(this,e)});function a(){return Sx(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"render",value:function(){if(""!==this.props.featureTypeError)return c().createElement("div",null,c().createElement(Ox,{onToggleQuery:this.props.controlActions.onToggleQuery}),c().createElement("div",{style:{margin:"0 auto","text-align":"center"}},this.props.featureTypeErrorText));var e=c().createElement("div",{className:"m-header"},this.props.header,c().createElement(mC,{sendFilters:{attributeFilter:this.props.attributePanelExpanded,spatialFilter:this.props.spatialPanelExpanded,crossLayerFilter:this.props.crossLayerExpanded},params:this.props.params,filterFields:this.props.filterFields,groupFields:this.props.groupFields,spatialField:this.props.spatialField,toolbarEnabled:this.props.toolbarEnabled,searchUrl:this.props.searchUrl,showGeneratedFilter:this.props.showGeneratedFilter,featureTypeName:this.props.featureTypeName,ogcVersion:this.props.ogcVersion,filterType:this.props.filterType,actions:this.props.queryToolbarActions,resultTitle:this.props.resultTitle,pagination:this.props.pagination,sortOptions:this.props.sortOptions,crossLayerFilter:this.props.crossLayerFilterOptions.crossLayerFilter,hits:this.props.hits,allowEmptyFilter:this.props.allowEmptyFilter,emptyFilterWarning:this.props.emptyFilterWarning,appliedFilter:this.props.appliedFilter,storedFilter:this.props.storedFilter,advancedToolbar:this.props.advancedToolbar,loadingError:this.props.loadingError}));return this.props.attributes.length>0?c().createElement(Vr.Z,{header:e,className:"mapstore-query-builder",id:"query-form-panel"},c().createElement(xp,{buttonStyle:this.props.buttonStyle,removeGroupButtonIcon:this.props.removeGroupButtonIcon,autocompleteEnabled:this.props.autocompleteEnabled,maxFeaturesWPS:this.props.maxFeaturesWPS,attributes:this.props.attributes,groupLevels:this.props.groupLevels,filterFields:this.props.filterFields,groupFields:this.props.groupFields,removeButtonIcon:this.props.removeButtonIcon,addButtonIcon:this.props.addButtonIcon,attributePanelExpanded:this.props.attributePanelExpanded,actions:this.props.attributeFilterActions}),this.props.toolsOptions.hideSpatialFilter?null:c().createElement(gx,{useMapProjection:this.props.useMapProjection,spatialField:this.props.spatialField,clearFilterOptions:this.props.clearFilterOptions,spatialOperations:this.props.spatialOperations,spatialMethodOptions:this.props.spatialMethodOptions,showDetailsButton:this.props.showDetailsButton,spatialPanelExpanded:this.props.spatialPanelExpanded,showDetailsPanel:this.props.showDetailsPanel,actions:this.props.spatialFilterActions,zoom:this.props.zoom,projection:this.props.projection}),this.props.toolsOptions.hideCrossLayer?null:c().createElement(kx,Ex({spatialOperations:this.props.spatialOperations,crossLayerExpanded:this.props.crossLayerExpanded,searchUrl:this.props.searchUrl,featureTypeName:this.props.featureTypeName},this.props.crossLayerFilterOptions,this.props.crossLayerFilterActions))):c().createElement("div",{style:{margin:"0 auto",width:"60px"}},c().createElement(HP(),{spinnerName:"three-bounce",overrideSpinnerClassName:"spinner"}))}}])&&Px(t.prototype,r),a}(c().Component);Tx(Ix,"propTypes",{params:u().object,featureTypeConfigUrl:u().string,useMapProjection:u().bool,attributes:u().array,featureTypeError:u().string,featureTypeErrorText:u().node,groupLevels:u().number,maxFeaturesWPS:u().number,filterFields:u().array,groupFields:u().array,spatialField:u().object,removeButtonIcon:u().string,addButtonIcon:u().string,attributePanelExpanded:u().bool,showDetailsButton:u().bool,spatialPanelExpanded:u().bool,crossLayerExpanded:u().bool,showDetailsPanel:u().bool,toolbarEnabled:u().bool,searchUrl:u().string,showGeneratedFilter:u().oneOfType([u().bool,u().string]),filterType:u().string,featureTypeName:u().string,ogcVersion:u().string,attributeFilterActions:u().object,spatialFilterActions:u().object,queryToolbarActions:u().object,resultTitle:u().string,pagination:u().object,sortOptions:u().object,spatialOperations:u().array,spatialMethodOptions:u().array,crossLayerFilterOptions:u().object,crossLayerFilterActions:u().object,hits:u().bool,clearFilterOptions:u().object,buttonStyle:u().string,removeGroupButtonIcon:u().string,maxHeight:u().number,allowEmptyFilter:u().bool,autocompleteEnabled:u().bool,emptyFilterWarning:u().bool,header:u().node,zoom:u().number,projection:u().string,toolsOptions:u().object,appliedFilter:u().object,storedFilter:u().object,advancedToolbar:u().bool,loadingError:u().bool,controlActions:u().object}),Tx(Ix,"defaultProps",{params:{},featureTypeConfigUrl:null,useMapProjection:!0,groupLevels:1,buttonStyle:"default",removeGroupButtonIcon:"trash",groupFields:[],filterFields:[],attributes:[],spatialMethodOptions:[],spatialOperations:[],featureTypeError:"",spatialField:{},crossLayerFilter:null,removeButtonIcon:"trash",addButtonIcon:"glyphicon glyphicon-plus",attributePanelExpanded:!0,spatialPanelExpanded:!0,showDetailsPanel:!1,toolbarEnabled:!0,searchUrl:"",showGeneratedFilter:!1,featureTypeName:null,pagination:null,sortOptions:null,hits:!1,maxHeight:830,allowEmptyFilter:!1,autocompleteEnabled:!0,emptyFilterWarning:!1,advancedToolbar:!1,loadingError:!1,attributeFilterActions:{onAddGroupField:function(){},onAddFilterField:function(){},onRemoveFilterField:function(){},onUpdateFilterField:function(){},onUpdateExceptionField:function(){},onUpdateLogicCombo:function(){},onRemoveGroupField:function(){},onChangeCascadingValue:function(){},onExpandAttributeFilterPanel:function(){}},spatialFilterActions:{onExpandSpatialFilterPanel:function(){},onSelectSpatialMethod:function(){},onSelectSpatialOperation:function(){},onChangeDrawingStatus:function(){},onRemoveSpatialSelection:function(){},onShowSpatialSelectionDetails:function(){},onSelectViewportSpatialMethod:function(){},onChangeDwithinValue:function(){}},crossLayerFilterOptions:{},crossLayerFilterActions:{},queryToolbarActions:{onQuery:function(){},onReset:function(){},onChangeDrawingStatus:function(){},onSaveFilter:function(){},onRestoreFilter:function(){}},toolsOptions:{},controlActions:{onToggleQuery:function(){}}});const Ax=Ix;var Fx=r(10240),Dx=r.n(Fx),Rx=r(84069);const Nx={isAutoCompleteEnabled:function(e,t){return e.ofType(gy.S0).switchMap((function(e){var r=(0,Ar.y9)(e.url,{version:"1.0.0",REQUEST:"DescribeProcess",IDENTIFIER:"gs:PagedUnique"},(0,ve.kS)(t.getState()));return null===r?oa.Observable.of((0,yy.NV)(!1)):oa.Observable.fromPromise(Ay().post(r,null,{timeout:5e3,headers:{Accept:"application/json","Content-Type":"application/xml"}}).then((function(e){return e.data}))).switchMap((function(e){return Dx()(e,"<ows:ExceptionReport")?oa.Observable.of((0,yy.NV)(!1)):oa.Observable.of((0,yy.NV)(!0))})).catch((function(){return oa.Observable.of((0,yy.NV)(!1))}))}))},fetchAutocompleteOptionsEpic:function(e,t){return e.ofType(yy.l1).debounce((function(e){return oa.Observable.timer(e.fieldOptions.delayDebounce||0)})).filter((function(e){return"value"===e.fieldName&&"string"===e.fieldType&&t.getState().queryform.autocompleteEnabled})).switchMap((function(e){var r=t.getState(),n=(0,vS.Vx)(r),o=r.queryform&&r.queryform.filterFields&&r.queryform.filterFields.filter((function(t){return t.rowId===e.rowId}))[0];if("selected"===e.fieldOptions.selected)return oa.Observable.from([(0,yy.$J)(o,[],0)]);var i=(0,Rx.getWpsPayload)({attribute:o.attribute,layerName:(0,vy.HY)(r),layerFilter:(0,vS.Vc)(r)||(0,vS.hI)(r),maxFeatures:n,startIndex:(e.fieldOptions.currentPage-1)*n,value:e.fieldValue}),a=(0,Ar.y9)(r.query.url,{outputFormat:"json"},(0,ve.kS)(t.getState()));return null===a?oa.Observable.of((0,yy.NV)(!1)):oa.Observable.fromPromise(Ay().post(a,i,{timeout:6e4,headers:{Accept:"application/json","Content-Type":"application/xml"}}).then((function(e){return e.data}))).switchMap((function(t){var r=Bl()(t.values)?t.values:[t.values],n=t.size;return oa.Observable.from([(0,yy.$J)(o,r,n),(0,yy.js)(e.rowId,!0)])})).startWith((0,yy.jR)(!0,o)).catch((function(){return oa.Observable.from([(0,yy.$J)(o,[],0),(0,q.vU)({title:"warning",message:"warning",action:{label:"warning"},autoDismiss:3,position:"tr"}),(0,yy.js)(e.rowId,!0)])})).concat([(0,yy.jR)(!1,o)])}))}};function Mx(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Lx(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Mx(Object(r),!0).forEach((function(t){_x(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Mx(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _x(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const Zx={handleLayerFilterPanel:function(e,t){var r=t.getState;return e.ofType(B).switchMap((function(){var t,n=(0,H.Iz)(r()),o=n||{},i=o.url,a=o.name,l=o.layerFilter,c=n&&n.search&&n.search.url;return oa.Observable.of((0,gy.gT)(c||i,a),(0,yy.F)(l),(t=l,{type:N,filter:t}),(0,v.Xg)("queryPanel","enabled",!0)).merge(oa.Observable.of((0,gy.jG)()).filter((function(){return!d()(r(),"query.isLayerFilter")})),e.ofType(yy.Wm).switchMap((function(e){var t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.crossLayerFilter,r=e.spatialField,n=e.filterFields;return!!(n&&de()(n)||r&&r.method&&r.operation&&r.geometry||t&&t.collectGeometries&&t.operation)}(e.filterObj)?Lx({},d()(r(),"queryform",{})):void 0;return t&&(t.filterFields=t.attributePanelExpanded&&t.filterFields||[],t.spatialField=t.spatialPanelExpanded&&t.spatialField||null,t.crossLayerFilter=t.crossLayerExpanded&&(0,Nu.setupCrossLayerFilterDefaults)(t.crossLayerFilter)||null),oa.Observable.of(function(e,t){return(0,h.He)(e,{layerFilter:t})}(n.id,t))}))).let(function(e){return function(t){return t.takeUntil(e.ofType(v.kM).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.control,r=e.property;return"queryPanel"===t&&(!r||"enabled"===r)})).merge(e.ofType(by.nk)))}}(e)).concat(oa.Observable.from([(0,gy.jG)(),(0,yy.mc)(),(0,my.Yf)("clean","","queryform",[],{})]))}))},restoreSavedFilter:function(e,t){var r=t.getState;return e.ofType(_).switchMap((function(){var e={typeName:d()(r(),"state.query.typeName")},t=d()(r(),"state.query.url"),n=d()(r(),"layerFilter.persisted");return oa.Observable.of((0,my.Yf)("clean","","queryform",[]),(0,yy.F)(n),(0,yy.yC)(t,n,e),(0,gy.Xc)())}))},onApplyFilter:function(e,t){var r=t.getState;return e.ofType(Z).map((function(){return e=Lx({},d()(r(),"queryform",{})),{type:M,filter:e};var e}))}},Bx={updateSpatialFilterValue:function(e){return e.ofType(yy.Wi).switchMap((function(e){var t=e.feature,r=e.srsName,n=e.style,o=e.options;return oa.Observable.of((0,my.Yf)("drawOrEdit",t.geometry.type,"queryform",[t],{editEnabled:!1,stopAfterDrawing:!0,featureProjection:r},n)).concat(t&&o&&o.autoZoom?[(0,V.Px)(sS()(t),r)]:[])}))}};var zx=r(8575),Gx=r(85148);function Ux(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Wx(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ux(Object(r),!0).forEach((function(t){Vx(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ux(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Vx(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qx(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Hx(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?qx(Object(r),!0).forEach((function(t){$x(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qx(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function $x(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Kx(e){return(Kx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Yx=function(e){return{geometry:e.featureTypes[0].properties.filter((function(e){return 0===e.type.indexOf("gml:")})).map((function(e){return{label:e.name,attribute:e.name,type:"geometry",valueId:"id",valueLabel:"name",values:[]}})),original:e,attributes:Jj(e)}};function Xx(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Qx(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Xx(Object(r),!0).forEach((function(t){Jx(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xx(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Jx(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var eT={};var tT=r(97301),rT=r(46905);function nT(e){return(nT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oT(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function iT(e,t){return(iT=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function aT(e,t){return!t||"object"!==nT(t)&&"function"!=typeof t?lT(e):t}function lT(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function cT(e){return(cT=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function sT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function uT(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?sT(Object(r),!0).forEach((function(t){pT(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sT(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function pT(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var fT=yy.mc.bind(null,"query"),dT=(0,p.connect)((function(e){return{useMapProjection:e.queryform.useMapProjection,groupLevels:e.queryform.groupLevels,groupFields:e.queryform.groupFields,filterFields:e.queryform.filterFields,attributes:e.query&&e.query.typeName&&e.query.featureTypes&&e.query.featureTypes[e.query.typeName]&&e.query.featureTypes[e.query.typeName].attributes,featureTypeError:e.query&&e.query.typeName&&e.query.featureTypes&&e.query.featureTypes[e.query.typeName]&&e.query.featureTypes[e.query.typeName].error,spatialField:e.queryform.spatialField,showDetailsPanel:e.queryform.showDetailsPanel,toolbarEnabled:e.queryform.toolbarEnabled,attributePanelExpanded:e.queryform.attributePanelExpanded,autocompleteEnabled:e.queryform.autocompleteEnabled,crossLayerExpanded:e.queryform.crossLayerExpanded,crossLayerFilterOptions:uT({layers:(0,vS.GK)(e),crossLayerFilter:(0,vS.qh)(e)},e.queryform.crossLayerFilterOptions||{}),maxFeaturesWPS:e.queryform.maxFeaturesWPS,spatialPanelExpanded:e.queryform.spatialPanelExpanded,featureTypeConfigUrl:e.query&&e.query.url,searchUrl:e.query&&e.query.url,featureTypeName:e.query&&e.query.typeName,ogcVersion:"1.1.0",params:{typeName:e.query&&e.query.typeName},resultTitle:"Query Result",showGeneratedFilter:!1,allowEmptyFilter:!0,emptyFilterWarning:!0,maxHeight:e.map&&e.map.present&&e.map.present.size&&e.map.present.size.height,zoom:((0,X.Od)(e)||{}).zoom,projection:((0,X.Od)(e)||{}).projection}}),(function(e){return{attributeFilterActions:(0,rS.DE)({onAddGroupField:yy.kQ,onAddFilterField:yy.jW,onRemoveFilterField:yy.JG,onUpdateFilterField:yy.q$,onUpdateExceptionField:yy.OZ,onUpdateLogicCombo:yy.Nc,onRemoveGroupField:yy.I5,onChangeCascadingValue:yy.QL,toggleMenu:yy.js,onExpandAttributeFilterPanel:yy.I},e),spatialFilterActions:(0,rS.DE)({onChangeSpatialFilterValue:yy.uo,onExpandSpatialFilterPanel:yy.ku,onSelectSpatialMethod:yy.HT,onSelectViewportSpatialMethod:yy.lg,onSelectSpatialOperation:yy.VF,onChangeDrawingStatus:my.Yf,onRemoveSpatialSelection:yy.Ry,onShowSpatialSelectionDetails:yy.ZH,onChangeDwithinValue:yy.AQ,zoneFilter:yy.eJ,zoneSearch:yy.uM,zoneChange:yy.uP},e),queryToolbarActions:(0,rS.DE)({onQuery:yy.yC,onReset:fT,onSaveFilter:z,onRestoreFilter:G,storeAppliedFilter:U,onChangeDrawingStatus:my.Yf},e),crossLayerFilterActions:(0,rS.DE)({expandCrossLayerFilterPanel:yy.EU,setCrossLayerFilterParameter:yy.IV,addCrossLayerFilterField:yy.N5,updateCrossLayerFilterField:yy.bn,removeCrossLayerFilterField:yy.Bm,resetCrossLayerFilter:yy.F2},e),controlActions:(0,rS.DE)({onToggleQuery:v.Xi.bind(null,"queryPanel",null)},e)}}))(Ax),mT=(0,D.P1)([function(e){return e.controls&&e.controls.toolbar&&"toc"===e.controls.toolbar.active},H.Bt,function(e){return e.layers&&e.layers.settings||{expanded:!1,options:{opacity:1}}},function(e){return e.controls&&e.controls.queryPanel&&e.controls.queryPanel.enabled||!1},function(e){return(0,Ke.ic)(e,{height:!0})},db.Wy,vS.Vc,vS.hI,function(e){return e&&e.query&&e.query.isLayerFilter},H.P_],(function(e,t,r,n,o,i,a,l,c,s){return{enabled:e,groups:t,settings:r,querypanelEnabled:n,layout:i?{}:o,appliedFilter:a,storedFilter:l,advancedToolbar:c,loadingError:s}})),yT=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&iT(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=cT(n);if(o){var r=cT(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return aT(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),pT(lT(t=i.call(this,e)),"getNoBackgroundLayers",(function(e){return"background"!==e.name})),pT(lT(t),"renderSidebar",(function(){return c().createElement(Ye.Z,{open:t.props.querypanelEnabled,sidebar:t.renderQueryPanel(),sidebarClassName:"query-form-panel-container",touch:!1,styles:{sidebar:uT(uT({},t.props.layout),{},{zIndex:1024,width:600}),overlay:{zIndex:1023,width:0},root:{right:t.props.querypanelEnabled?0:"auto",width:"0",overflow:"visible"},content:{overflowY:"auto"}}},c().createElement("div",null))})),pT(lT(t),"onToggle",(function(){t.props.advancedToolbar&&!Nr()(t.props.appliedFilter,t.props.storedFilter)?t.setState((function(){return{showModal:!0}})):t.props.onToggleQuery()})),pT(lT(t),"restoreAndClose",(function(){t.setState((function(){return{showModal:!1}})),t.props.onRestoreFilter(),t.props.onToggleQuery()})),pT(lT(t),"storeAndClose",(function(){t.setState((function(){return{showModal:!1}})),t.props.onSaveFilter(),t.props.onToggleQuery()})),pT(lT(t),"renderQueryPanel",(function(){return c().createElement("div",{className:"mapstore-query-builder"},c().createElement(dT,{header:c().createElement(Ox,{loadingError:t.props.loadingError,onToggleQuery:t.onToggle}),spatialOperations:t.props.spatialOperations,spatialMethodOptions:t.props.spatialMethodOptions,toolsOptions:t.props.toolsOptions,featureTypeErrorText:c().createElement(jt.Z,{msgId:"layerProperties.featureTypeError"}),appliedFilter:t.props.appliedFilter,storedFilter:t.props.storedFilter,advancedToolbar:t.props.advancedToolbar,loadingError:t.props.loadingError}),c().createElement(m.Z,null,c().createElement(y.Z,{fade:!0,show:t.state.showModal,title:c().createElement(jt.Z,{msgId:"queryform.changedFilter"}),size:"xs",onClose:function(){return t.setState((function(){return{showModal:!1}}))},buttons:[{bsStyle:"primary",text:c().createElement(jt.Z,{msgId:"yes"}),onClick:t.storeAndClose},{bsStyle:"primary",text:c().createElement(jt.Z,{msgId:"no"}),onClick:t.restoreAndClose}]},c().createElement("div",{className:"ms-alert"},c().createElement("div",{className:"ms-alert-center"},c().createElement(jt.Z,{msgId:t.props.loadingError?"queryform.changedFilterWithErrorAlert":"queryform.changedFilterAlert"}))))))})),t.state={showModal:!1},t}return t=a,(r=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){!0===e.querypanelEnabled&&!1===this.props.querypanelEnabled&&this.props.onInit()}},{key:"render",value:function(){return this.renderSidebar()}}])&&oT(t.prototype,r),a}(c().Component);pT(yT,"propTypes",{id:u().number,buttonContent:u().node,groups:u().array,settings:u().object,querypanelEnabled:u().bool,groupStyle:u().object,groupPropertiesChangeHandler:u().func,layerPropertiesChangeHandler:u().func,onToggleGroup:u().func,onToggleLayer:u().func,onToggleQuery:u().func,onZoomToExtent:u().func,retrieveLayerData:u().func,onSort:u().func,onInit:u().func,onSettings:u().func,hideSettings:u().func,updateSettings:u().func,updateNode:u().func,removeNode:u().func,activateRemoveLayer:u().bool,activateLegendTool:u().bool,activateZoomTool:u().bool,activateSettingsTool:u().bool,visibilityCheckType:u().string,settingsOptions:u().object,layout:u().object,toolsOptions:u().object,appliedFilter:u().object,storedFilter:u().object,advancedToolbar:u().bool,onSaveFilter:u().func,onRestoreFilter:u().func}),pT(yT,"defaultProps",{groupPropertiesChangeHandler:function(){},layerPropertiesChangeHandler:function(){},retrieveLayerData:function(){},onToggleGroup:function(){},onToggleLayer:function(){},onToggleQuery:function(){},onZoomToExtent:function(){},onSettings:function(){},onInit:function(){},updateNode:function(){},removeNode:function(){},activateLegendTool:!0,activateZoomTool:!0,activateSettingsTool:!0,activateRemoveLayer:!0,visibilityCheckType:"checkbox",settingsOptions:{},querypanelEnabled:!1,layout:{},toolsOptions:{},onSaveFilter:function(){},onRestoreFilter:function(){}});const bT={QueryPanelPlugin:(0,p.connect)(mT,{groupPropertiesChangeHandler:h.WO,layerPropertiesChangeHandler:h.He,retrieveLayerData:W.k,onToggleGroup:(0,ne.$0)("groups",h.bh),onToggleLayer:(0,ne.$0)("layers",h.bh),onToggleQuery:v.Xi.bind(null,"queryPanel",null),onSort:(0,ne.dD)(ne.lD,h.MK),onSettings:h.RP,onInit:gy.Xc,onZoomToExtent:V.Px,hideSettings:h.sF,updateSettings:h.VP,updateNode:h.tV,removeNode:h.ZF,onSaveFilter:z,onRestoreFilter:G})(yT),reducers:{queryform:rT.Z,query:tT.Z,layerFilter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:eT,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N:return Qx(Qx({},eT),{},{persisted:t.filter,applied:t.filter});case _:return Qx(Qx({},e),{},{applied:e.persisted});case M:return Qx(Qx({},e),{},{applied:t.filter});case L:return Qx(Qx({},e),{},{persisted:e.applied});case yy.Eg:return Qx(Qx({},e),{},{applied:void 0});default:return e}}},epics:uT(uT(uT({featureTypeSelectedEpic:function(e,t){return e.ofType(gy.S0).filter((function(e){return e.url&&e.typeName})).switchMap((function(e){var r=t.getState();if((0,vy.hk)(r,e.typeName)){var n=Yx((0,vy.qj)(r,e.typeName)),o=n.geometry[0]&&n.geometry[0].attribute?n.geometry[0].attribute:"the_geom";return oa.Observable.of((0,yy.DD)(o))}return oa.Observable.defer((function(){return Ay().get(Ar.ZP.filterUrlParams(e.url,(0,ve.kS)(t.getState()))+"?service=WFS&version=1.1.0&request=DescribeFeatureType&typeName="+e.typeName+"&outputFormat=application/json")})).map((function(t){if("object"===Kx(t.data)&&t.data.featureTypes&&t.data.featureTypes[0]){var r=Yx(t.data),n=r.geometry[0]&&r.geometry[0].attribute?r.geometry[0].attribute:"the_geom";return oa.Observable.from([(0,yy.DD)(n),(0,gy.rG)(e.typeName,r)])}try{JSON.parse(t.data)}catch(t){return oa.Observable.from([(0,gy.t3)(e.typeName,"Error from WFS: "+t.message),q.vU({title:"warning",message:"layerProperties.featureTypeErrorInvalidJSON",autoDismiss:3,position:"tc"})])}return oa.Observable.from([(0,gy.t3)(e.typeName,"Error: feature types are empty")])})).mergeAll().catch((function(t){return oa.Observable.of((0,gy.t3)(e.typeName,t.message||t.statusText))}))}))},wfsQueryEpic:function(e,t){return e.ofType(gy.Qq).switchMap((function(r){var n,o,i,a=(o=(i=t.getState()).query&&i.query.featureTypes&&i.query.featureTypes[i.query.typeName]&&i.query.featureTypes[i.query.typeName].attributes&&i.query.featureTypes[i.query.typeName].attributes[0]&&i.query.featureTypes[i.query.typeName].attributes[0].attribute||null)?{sortBy:o,sortOrder:"A"}:{},l=(null==r||null===(n=r.filterObj)||void 0===n?void 0:n.sortOptions)||a,c=vy.b0.totalFeatures(t.getState()),s=Ar.ZP.filterUrlParams(r.searchUrl,(0,ve.kS)(t.getState())),u=(0,H.Iz)(t.getState())||{},p=u.layerFilter,f=u.params,m=ye()(Object.keys(f||{}),(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"cql_filter"===e.toLowerCase()})),y=(0,Nu.mergeFiltersToOGC)({ogcVersion:"1.1.0"},m,p,r.filterObj),b=function(e,t,r){var n=(0,gS.u$)(r),o=(0,Gx.jo)({id:n},"time")(r),i=(0,H.CA)(r,n)||{},a=d()(i,'params["time"]');if((0,gS.DK)(r)&&o&&a){var l=(0,zx.parse)(e)||{};return{url:(0,zx.format)(Wx(Wx({},l),{},{query:Wx(Wx({},l.query),{},{time:a})})),options:t}}return{url:e,options:t}}(s,r.queryOptions||{},t.getState()),g=b.url,v=b.options,h=Hx(Hx({},r.filterObj.pagination),{},{totalFeatures:c,sortOptions:l},v);return oa.Observable.merge((0,ky.Mc)(Hx(Hx({},u),{},{name:r.filterObj.featureTypeName||u.name,search:Hx(Hx({},u.search),{},{url:g})}),y,h).map((function(e){return(0,gy.w_)(e,r.searchUrl,r.filterObj,r.queryOptions,r.reason)})).catch((function(e){return oa.Observable.of((0,gy.Lm)(e))})).startWith((0,gy.Fs)(!0)).concat(oa.Observable.of((0,gy.Fs)(!1)))).takeUntil(e.ofType(gy.VN))}))},viewportSelectedEpic:function(e,t){return e.ofType(yy.On,V.pP).switchMap((function(e){var r=e.type===V.pP?e:(0,X.Od)(t.getState());if((e.type===yy.On||e.type===V.pP&&"Viewport"===(0,vS.BU)(t.getState()))&&r.bbox&&r.bbox.bounds&&r.bbox.crs){var n=Object.keys(r.bbox.bounds).reduce((function(e,t){return le()({},e,$x({},t,parseFloat(r.bbox.bounds[t])))}),{});return oa.Observable.of((0,yy.ds)(cn.default.getViewportGeometry(n,r.bbox.crs)))}return oa.Observable.empty()}))},redrawSpatialFilterEpic:function(e,t){return e.ofType(gy.R1).switchMap((function(){var e=t.getState(),r=(0,vS.vE)(e),n={type:"Feature",geometry:{type:(0,vS.a8)(e),coordinates:(0,vS.G$)(e)}},o=(0,vS.Nl)(e)?(0,my.Yf)("drawOrEdit",r.method||"","queryform",[n],{featureProjection:(0,vS.IM)(e),drawEnabled:!1,editEnabled:!1}):(0,my.Yf)("clean",r.method||"","queryform",[],{drawEnabled:!1,editEnabled:!1});return oa.Observable.of(o)}))}},Nx),Bx),Zx)};r(65288);var gT=r(53001),vT=r(18721),hT=r.n(vT),OT=r(92742),wT=r.n(OT),ET=r(5249),ST=r.n(ET),PT=r(33044);function jT(e){return(jT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function CT(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xT(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function TT(e,t){return(TT=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function kT(e,t){return!t||"object"!==jT(t)&&"function"!=typeof t?IT(e):t}function IT(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function AT(e){return(AT=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function FT(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var DT=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&TT(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=AT(n);if(o){var r=AT(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return kT(this,e)});function a(){var e;CT(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return FT(IT(e=i.call.apply(i,[this].concat(r))),"state",{showCopiedToolTip:!1}),e}return t=a,(r=[{key:"render",value:function(){var e=this;if(!this.props.url)return null;var t=this.props.addAuthentication?(0,PT.addAuthenticationToUrl)(this.props.url):this.props.url,r=this.state.showCopiedToolTip?"catalog.copied":"catalog.copyToClipboard",n=c().createElement(g.Tooltip,{id:"tooltip"},c().createElement(b.Z,{msgId:r})),o=c().createElement(ST(),{text:t,onCopy:this.props.onCopy},c().createElement(Xe.Z,{placement:"right",overlay:n,onExited:function(){return e.setState({showCopiedToolTip:!1})}},c().createElement(Je.Z,{bsSize:this.props.bsSize,bsStyle:"primary",className:"link-button",onClick:function(){return e.setState({showCopiedToolTip:!0})}},c().createElement(g.Glyphicon,{glyph:"paperclip"})," ",this.props.labelId&&c().createElement(b.Z,{msgId:this.props.labelId}))));return c().createElement("div",{className:"link-sharing"},c().createElement(g.FormGroup,{bsSize:this.props.bsSize},c().createElement(g.FormControl,{className:"link-input",type:"text",value:t,onChange:function(){}}),o))}}])&&xT(t.prototype,r),a}(c().Component);FT(DT,"propTypes",{url:u().string.isRequired,labelId:u().string,onCopy:u().func,bsSize:u().string,addAuthentication:u().bool}),FT(DT,"defaultProps",{onCopy:function(){},bsSize:"small",addAuthentication:!1});const RT=DT;function NT(e){return(NT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function MT(){return(MT=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function LT(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _T(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ZT(e,t){return(ZT=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function BT(e,t){return!t||"object"!==NT(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function zT(e){return(zT=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var GT=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ZT(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=zT(n);if(o){var r=zT(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return BT(this,e)});function a(){return LT(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"render",value:function(){if(!this.props.links||0===this.props.links.length)return null;var e=this.props,t=e.links,r=e.buttonSize,n=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["links","buttonSize"]),o=t.map((function(e,t){return c().createElement(RT,MT({key:t,url:e.url,labelId:e.labelId},n))})),i=c().createElement(g.Popover,{className:"links-popover",id:"links-popover"},c().createElement("h5",null,c().createElement(b.Z,{msgId:"catalog.share"})),o);return c().createElement(Xe.Z,{container:this.props.popoverContainer,positionLeft:150,placement:"top",trigger:"click",overlay:i},c().createElement(Je.Z,{bsSize:r,className:"square-button-md",bsStyle:"primary"},c().createElement(g.Glyphicon,{glyph:"link"})))}}])&&_T(t.prototype,r),a}(c().Component);!function(e,t,r){t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(GT,"propTypes",{links:u().array,onCopy:u().func,messages:u().object,locale:u().string,buttonSize:u().string,popoverContainer:u().object,addAuthentication:u().bool});const UT=GT;var WT=r(5055),VT=r.n(WT);function qT(){return(qT=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function HT(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var $T=(0,$e.Z)(Je.Z);const KT=function(e){var t,r,n=e.record,o=e.service,i=e.children,a=e.addLayer,s=void 0===a?function(){}:a,u=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["record","service","children","addLayer"]),p=(t=(0,l.useState)(!1),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=r){var n,o,i=[],a=!0,l=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(l)throw o}}return i}}(t,r)||function(e,t){if(e){if("string"==typeof e)return HT(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?HT(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),f=p[0],d=p[1];return c().createElement($T,qT({disabled:f},u,{onClick:function(){var e;d(!0),(e=n.tileMapUrl,Ay().get(e).then((function(e){return new Promise((function(t){VT().parseString(e.data,{explicitArray:!1},(function(e,r){return t(r)}))}))}))).then((function(e){d(!1),s((0,Vy.oR)(n,e,o))}))}}),f?c().createElement(gv.Z,null):i)};function YT(){return(YT=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var XT=(0,$e.Z)(Je.Z);const QT=function(e){var t=e.record,r=e.service,n=e.children,o=e.addLayer,i=void 0===o?function(){}:o,a=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["record","service","children","addLayer"]);return c().createElement(XT,YT({},a,{onClick:function(){i((0,Vy.eX)(t,r))}}),n)};var JT=r(3932),ek=r.n(JT),tk=r(7872);function rk(e){return(rk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nk(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ok(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ik(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ok(Object(r),!0).forEach((function(t){fk(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ok(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ak(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lk(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ck(e,t){return(ck=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function sk(e,t){return!t||"object"!==rk(t)&&"function"!=typeof t?uk(e):t}function uk(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pk(e){return(pk=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fk(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var dk=(0,$e.Z)(Je.Z),mk=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ck(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=pk(n);if(o){var r=pk(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return sk(this,e)});function a(){var e;ak(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return fk(uk(e=i.call.apply(i,[this].concat(r))),"state",{visibleExpand:!1}),fk(uk(e),"getTitle",(function(t){return pe()(t)?t[e.props.currentLocale]||t.default:t||""})),fk(uk(e),"renderThumb",(function(t,r){var n=t||ek();return c().createElement(g.Image,{className:"preview",src:n,alt:r&&e.getTitle(r.title)})})),fk(uk(e),"renderButtons",(function(t,r){if(!t||!t.references)return null;var n=(0,Vy.tW)(t),o=n.wms,i=n.wmts,a=n.tms,l=n.wfs,s=(0,Vy.FJ)(t).esri,u=t&&t.background,p=t&&"tileprovider"===t.type&&t.provider,f=[];if(u&&f.push(r?c().createElement(b.Z,{msgId:"catalog.backgroundAlreadyAdded"}):c().createElement(dk,{tooltipId:"catalog.addToMap",className:"square-button-md",bsStyle:"primary",bsSize:e.props.buttonSize,onClick:function(){var t=ik(ik({},u),{},{id:u.name,visibility:!1});e.props.onLayerAdd(t,{background:u})},key:"addlayer"},c().createElement(g.Glyphicon,{glyph:"plus"}))),o||i){var d=o?"wms":"wmts";f.push(c().createElement(dk,{tooltipId:"catalog.addToMap",className:"square-button-md",bsStyle:"primary",bsSize:e.props.buttonSize,onClick:function(){var r=e.makeLayer(d,o||i,t.format&&[t.format]||t.formats);r&&e.addLayer(r,{record:t})},key:"add".concat(d,"layer")},c().createElement(g.Glyphicon,{glyph:"plus"})))}if(s&&f.push(c().createElement(dk,{tooltipId:"catalog.addToMap",className:"square-button-md",bsStyle:"primary",bsSize:e.props.buttonSize,onClick:function(){e.addLayer((0,Vy.AD)(e.props.record,e.props.layerBaseConfig))},key:"addesrilayer"},c().createElement(g.Glyphicon,{glyph:"plus"}))),a&&f.push(c().createElement(KT,{service:e.props.service,key:"addTmsLayer",tooltipId:"catalog.addToMap",className:"square-button-md",bsStyle:"primary",bsSize:e.props.buttonSize,addLayer:e.addLayer,record:e.props.record},c().createElement(g.Glyphicon,{glyph:"plus"}))),l&&f.push(c().createElement(dk,{tooltipId:"catalog.addToMap",key:"addWFSLayer",className:"square-button-md",bsStyle:"primary",bsSize:e.props.buttonSize,onClick:function(){e.addLayer((0,Vy.LZ)(e.props.record,e.props.layerBaseConfig))}},c().createElement(g.Glyphicon,{glyph:"plus"}))),p&&f.push(c().createElement(QT,{key:"addTileProviderLayer",service:e.props.service,tooltipId:"catalog.addToMap",className:"square-button-md",bsStyle:"primary",bsSize:e.props.buttonSize,addLayer:e.addLayer,record:e.props.record},c().createElement(g.Glyphicon,{glyph:"plus"}))),e.props.showGetCapLinks){var m=(0,Vy.F8)(t);m.length>0&&f.push(c().createElement(UT,{key:"sharing-links",popoverContainer:uk(e),links:m,onCopy:e.props.onCopy,buttonSize:e.props.buttonSize,addAuthentication:e.props.addAuthentication}))}return f})),fk(uk(e),"renderDescription",(function(t){if(!t)return null;var r=(0,ie.S$)(e.context.messages,"catalog.notAvailable");return e.state.fullText&&t.metadataTemplate?c().createElement("div",{className:"catalog-metadata ql-editor"},c().createElement(jo.Z,{html:(0,bC.parseCustomTemplate)(t.metadataTemplate,t.metadata,(function(e){return"".concat(wT()(e.substring(2,e.length-1))," ").concat(r)}))})):t.metadataTemplate?"":Bl()(t.description)?t.description.join(", "):t.description})),fk(uk(e),"isLinkCopied",(function(t){return e.state[t]})),fk(uk(e),"setLinkCopiedStatus",(function(t,r){e.setState(fk({},t,r))})),fk(uk(e),"getLayerFormat",(function(t){return 0===t.length||t.filter((function(t){return t===e.props.defaultFormat})).length>0?e.props.defaultFormat:t[0]})),fk(uk(e),"makeLayer",(function(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[e.props.defaultFormat],o=(0,Vy.n0)(r.SRS);if(r.SRS.length>0&&!(0,cn.isAllowedSRS)(e.props.crs,o))return e.props.onError("catalog.srs_not_allowed"),null;var i=e.props.service&&e.props.service.localizedLayerStyles;return(0,Vy.ll)(e.props.record,t,ik({removeParams:e.props.authkeyParamNames},"wms"===t?{catalogURL:"csw"===e.props.catalogType&&e.props.catalogURL?e.props.catalogURL+"?request=GetRecordById&service=CSW&version=2.0.2&elementSetName=full&id="+e.props.record.identifier:null,format:e.getLayerFormat(n.filter((function(e){return 0===e.indexOf("image/")}))),formats:{imageFormats:e.props.formatOptions,infoFormats:e.props.infoFormatOptions}}:{format:e.getLayerFormat(n.filter((function(e){return 0===e.indexOf("image/")})))}),e.props.layerBaseConfig,i)})),fk(uk(e),"addLayer",(function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.background;if("backgroundSelector"===e.props.source)n?(e.props.onLayerAdd(ik(ik({},t),{},{group:"background"}),{source:e.props.source}),e.props.onAddBackground(t.id)):e.props.onAddBackgroundProperties({editing:!1,layer:t},!0);else{var o=e.props.zoomToLayer;e.props.onLayerAdd(t,{zoomToLayer:o})}})),fk(uk(e),"displayExpand",(function(){return(e.descriptionRuler?e.descriptionRuler.clientWidth:0)>(e.sideCardDesc?e.sideCardDesc.clientWidth:0)})),e}return t=a,(r=[{key:"componentDidMount",value:function(){var e=(0,ie.S$)(this.context.messages,"catalog.notAvailable"),t=this.props.record;this.setState({visibleExpand:!this.props.hideExpand&&(this.displayExpand()||!!(this.props.showTemplate&&t&&t.metadataTemplate&&(0,bC.parseCustomTemplate)(t.metadataTemplate,t.metadata,(function(t){return"".concat(wT()(t.substring(2,t.length-1))," ").concat(e)}))))})}},{key:"UNSAFE_componentWillMount",value:function(){document.addEventListener("click",this.handleClick,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.handleClick,!1)}},{key:"render",value:function(){var e,t=this,r=this.props.record,n=(0,Vy.tW)(r),o=n.wms,i=n.wmts,a=n.tms,l=n.wfs,s=(0,Vy.FJ)(r).esri,u=r&&"tileprovider"===r.type&&r.provider,p=r&&r.background,f=p&&de()((this.props.layers||[]).filter((function(e){return e.id===p.name||e.type===p.type&&e.source===p.source&&e.name===p.name})));return r?c().createElement("div",null,c().createElement(Md.Z,{style:{transform:"none",opacity:f?.4:1},fullText:this.state.fullText,preview:!this.props.hideThumbnail&&this.renderThumb(r&&r.thumbnail||p&&tk.Z[p.source][p.name],r),title:r&&this.getTitle(r.title),description:c().createElement("span",null,c().createElement("div",{className:!0,ref:function(e){t.sideCardDesc=e}},this.renderDescription(r))),caption:c().createElement("div",null,!this.props.hideIdentifier&&c().createElement("div",{className:"identifier"},r&&r.identifier),c().createElement("div",null,!o&&!i&&!s&&!p&&!a&&!u&&!l&&c().createElement("small",{className:"text-danger"},c().createElement(b.Z,{msgId:"catalog.missingReference"}))),!this.props.hideExpand&&c().createElement("div",{className:"ms-ruler",style:{visibility:"hidden",height:0,whiteSpace:"nowrap",position:"absolute"},ref:function(e){t.descriptionRuler=e}},this.renderDescription(r))),tools:c().createElement(qr.Z,{btnDefaultProps:{className:"square-button-md",bsStyle:"primary"},btnGroupProps:{style:{margin:10}},buttons:[].concat((e=(r&&this.renderButtons(r,f)||[]).map((function(e){return{Element:function(){return e}}})),function(e){if(Array.isArray(e))return nk(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return nk(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?nk(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[{glyph:this.state.fullText?"chevron-down":"chevron-left",visible:this.state.visibleExpand,tooltipId:this.state.fullText?"collapse":"expand",onClick:function(){return t.setState({fullText:!t.state.fullText})}}])})})):null}}])&&lk(t.prototype,r),a}(c().Component);fk(mk,"propTypes",{addAuthentication:u().bool,authkeyParamNames:u().array,buttonSize:u().string,catalogURL:u().string,catalogType:u().string,crs:u().string,currentLocale:u().string,hideThumbnail:u().bool,hideExpand:u().bool,hideIdentifier:u().bool,layerBaseConfig:u().object,onCopy:u().func,onError:u().func,onLayerAdd:u().func,record:u().object,showGetCapLinks:u().bool,zoomToLayer:u().bool,onPropertiesChange:u().func,onLayerChange:u().func,layers:u().array,onAdd:u().func,source:u().string,onAddBackgroundProperties:u().func,deletedId:u().string,clearModal:u().func,service:u().service,showTemplate:u().bool,defaultFormat:u().string,formatOptions:u().array,infoFormatOptions:u().array}),fk(mk,"defaultProps",{buttonSize:"small",crs:"EPSG:3857",currentLocale:"en-US",onAddBackgroundProperties:function(){},hideThumbnail:!1,hideIdentifier:!1,hideExpand:!1,layerBaseConfig:{},onCopy:function(){},onError:function(){},onLayerAdd:function(){},onPropertiesChange:function(){},onLayerChange:function(){},clearModal:function(){},style:{},showGetCapLinks:!1,zoomToLayer:!0,layers:[],onAdd:function(){},source:"metadataExplorer",showTemplate:!1,changeLayerProperties:function(){},defaultFormat:"image/png"}),fk(mk,"contextTypes",{messages:u().object});const yk=mk;function bk(e){return(bk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gk(){return(gk=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function vk(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hk(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ok(e,t){return(Ok=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function wk(e,t){return!t||"object"!==bk(t)&&"function"!=typeof t?Ek(e):t}function Ek(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Sk(e){return(Sk=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Pk(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var jk=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ok(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Sk(n);if(o){var r=Sk(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return wk(this,e)});function a(){var e;vk(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Pk(Ek(e=i.call.apply(i,[this].concat(r))),"renderRecordItem",(function(t){var r=e.props.recordItem||yk;return c().createElement(g.Col,gk({},e.props.column,{key:t.identifier}),c().createElement(r,{crs:e.props.crs,clearModal:e.props.clearModal,layers:e.props.layers,modalParams:e.props.modalParams,onAddBackgroundProperties:e.props.onAddBackgroundProperties,onAddBackground:e.props.onAddBackground,source:e.props.source,onLayerAdd:e.props.onLayerAdd,onPropertiesChange:e.props.onPropertiesChange,zoomToLayer:e.props.zoomToLayer,hideThumbnail:e.props.hideThumbnail,hideIdentifier:e.props.hideIdentifier,hideExpand:e.props.hideExpand,onError:e.props.onError,catalogURL:e.props.catalogURL,catalogType:e.props.catalogType,service:e.props.service,showTemplate:e.props.showTemplate,record:t,authkeyParamNames:e.props.authkeyParamNames,style:{height:"215px",maxHeight:"215px"},showGetCapLinks:e.props.showGetCapLinks,addAuthentication:e.props.addAuthentication,currentLocale:e.props.currentLocale,defaultFormat:e.props.defaultFormat,formatOptions:e.props.formatOptions,infoFormatOptions:e.props.infoFormatOptions,layerBaseConfig:e.props.layerBaseConfig}))})),e}return t=a,(r=[{key:"render",value:function(){if(this.props.records){var e=this.props.records instanceof Array?this.props.records:[this.props.records];return c().createElement(g.Grid,{className:"record-grid",fluid:!0,style:this.props.style},c().createElement(g.Row,null,e.map(this.renderRecordItem)))}return null}}])&&hk(t.prototype,r),a}(c().Component);Pk(jk,"propTypes",{crs:u().string,recordItem:u().element,catalogURL:u().string,catalogType:u().string,zoomToLayer:u().bool,onLayerAdd:u().func,onPropertiesChange:u().func,onError:u().func,records:u().array,authkeyParamNames:u().array,style:u().object,showGetCapLinks:u().bool,addAuthentication:u().bool,column:u().object,currentLocale:u().string,hideThumbnail:u().bool,hideIdentifier:u().bool,hideExpand:u().bool,source:u().string,onAddBackgroundProperties:u().func,modalParams:u().object,layers:u().object,clearModal:u().func,onAddBackground:u().func,showTemplate:u().bool,service:u().object,defaultFormat:u().string,formatOptions:u().array,infoFormatOptions:u().array,layerBaseConfig:u().object}),Pk(jk,"defaultProps",{column:{xs:12},currentLocale:"en-US",onLayerAdd:function(){},onPropertiesChange:function(){},onError:function(){},records:[],zoomToLayer:!0,layerBaseConfig:{},crs:"EPSG:3857"});const Ck=jk;function xk(e){return(xk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Tk(){return(Tk=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function kk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ik(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?kk(Object(r),!0).forEach((function(t){Lk(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kk(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ak(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Fk(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Dk(e,t){return(Dk=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Rk(e,t){return!t||"object"!==xk(t)&&"function"!=typeof t?Nk(e):t}function Nk(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Mk(e){return(Mk=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Lk(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var _k=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Dk(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Mk(n);if(o){var r=Mk(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return Rk(this,e)});function a(){var e;Ak(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return Lk(Nk(e=i.call.apply(i,[this].concat(r))),"state",{catalogURL:null}),Lk(Nk(e),"onSearchTextChange",(function(t){e.props.onChangeText(t.target.value)})),Lk(Nk(e),"onKeyDown",(function(t){13===t.keyCode&&e.search({services:e.props.services,selectedService:e.props.selectedService,searchText:e.props.searchText})})),Lk(Nk(e),"getServices",(function(){return(hT()(e.props.services,"default_map_backgrounds")?["default_map_backgrounds"]:[]).concat(Object.keys(bc()(e.props.services,"default_map_backgrounds"))).map((function(t){return le()({},e.props.services[t],{label:(0,ie.S$)(e.context.messages,e.props.services[t].title),value:t})}))})),Lk(Nk(e),"renderResult",(function(){return e.props.result?0===e.props.result.numberOfRecordsMatched?c().createElement("div",null,c().createElement(b.Z,{msgId:"catalog.noRecordsMatched"})):e.renderRecords():e.props.loadingError?e.renderError():null})),Lk(Nk(e),"renderError",(function(e){return c().createElement(g.Alert,{bsStyle:"danger"},c().createElement(b.Z,{msgId:e||"catalog.error"}))})),Lk(Nk(e),"renderLoading",(function(){return c().createElement("div",{className:"catalog-results loading"},c().createElement(ml.Z,{size:176}))})),Lk(Nk(e),"renderPagination",(function(){if(e.props.result){var t=e.props.result.numberOfRecordsMatched,r=e.props.result.numberOfRecordsReturned,n=e.props.searchOptions.startPosition,o=e.props.pageSize,i=Math.floor(n/o),a=Math.ceil(t/o);return c().createElement("div",{className:"catalog-pagination"},c().createElement(g.Pagination,{prev:!0,next:!0,first:!0,last:!0,ellipsis:!0,boundaryLinks:!0,bsSize:"small",items:a,maxButtons:5,activePage:i+1,onSelect:e.handlePage}),c().createElement("div",{className:"push-right"},c().createElement(b.Z,{msgId:"catalog.pageInfo",msgParams:{start:n,end:n+r-1,total:t}})))}return null})),Lk(Nk(e),"renderRecords",(function(){var t,r,n,o,i="",a=!1,l=!1;if(e.props.services&&e.props.services[e.props.selectedService]){var s=e.props.services[e.props.selectedService];vc()(s.metadataTemplate)||vc()(s.showTemplate)||(a=s.showTemplate,i=s.metadataTemplate),vc()(s.hideThumbnail)||(l=s.hideThumbnail)}return c().createElement("div",{className:"catalog-results"},c().createElement(Ck,Tk({},e.props.gridOptions,{crs:e.props.crs,key:"records",hideThumbnail:l,records:e.props.records.map((function(e){return a&&i?Ik(Ik({},e),{},{metadataTemplate:i}):e})),clearModal:e.props.clearModal,layers:e.props.layers,modalParams:e.props.modalParams,onAddBackgroundProperties:e.props.onAddBackgroundProperties,source:e.props.source,authkeyParamNames:e.props.authkeyParamNames,catalogURL:e.isValidServiceSelected()&&e.props.services[e.props.selectedService].url||"",service:e.props.services[e.props.selectedService],catalogType:e.props.services[e.props.selectedService]&&e.props.services[e.props.selectedService].type,showTemplate:e.props.services[e.props.selectedService].showTemplate,onLayerAdd:e.props.onLayerAdd,onPropertiesChange:e.props.onPropertiesChange,zoomToLayer:e.props.zoomToLayer,onError:e.props.onError,showGetCapLinks:e.props.showGetCapLinks,addAuthentication:e.props.addAuthentication,currentLocale:e.props.currentLocale,recordItem:e.props.recordItem,hideIdentifier:e.props.hideIdentifier,hideExpand:e.props.hideExpand,onAddBackground:e.props.onAddBackground,defaultFormat:e.props.services[e.props.selectedService]&&e.props.services[e.props.selectedService].format,formatOptions:(null===(t=e.props.services[e.props.selectedService])||void 0===t?void 0:t.url)===(null===(r=e.props.service)||void 0===r?void 0:r.url)?e.props.formatOptions:Vy.QQ,infoFormatOptions:(null===(n=e.props.services[e.props.selectedService])||void 0===n?void 0:n.url)===(null===(o=e.props.service)||void 0===o?void 0:o.url)?e.props.infoFormatOptions:(0,Vy.B8)(),layerBaseConfig:e.props.layerBaseConfig,onAdd:function(){e.search({services:e.props.services,selectedService:e.props.selectedService})}})))})),Lk(Nk(e),"renderButtons",(function(){var t=[];return e.props.includeSearchButton&&t.push(c().createElement(Je.Z,{bsStyle:"primary",style:e.props.buttonStyle,onClick:function(){return e.search({services:e.props.services,selectedService:e.props.selectedService,searchText:e.props.searchText})},className:e.props.buttonClassName,key:"catalog_search_button",disabled:e.props.loading||!e.isValidServiceSelected()},c().createElement(b.Z,{msgId:"catalog.search"}))),e.props.includeResetButton&&t.push(c().createElement(Je.Z,{style:e.props.buttonStyle,onClick:e.reset,key:"catalog_reset_button"},c().createElement(b.Z,{msgId:"catalog.reset"}))),t})),Lk(Nk(e),"renderTextSearch",(function(){var t=c().createElement(g.FormControl,{ref:"searchText",type:"text",style:{textOverflow:"ellipsis"},value:e.props.searchText,placeholder:(0,ie.S$)(e.context.messages,"catalog.textSearchPlaceholder"),onChange:e.onSearchTextChange,onKeyDown:e.onKeyDown});return e.props.wrapOptions?c().createElement(g.Panel,{collapsible:!0,defaultExpanded:!1,header:(0,ie.S$)(e.context.messages,"catalog.options")},t):t})),Lk(Nk(e),"isValidServiceSelected",(function(){return void 0!==e.props.services[e.props.selectedService]})),Lk(Nk(e),"search",(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.services,n=t.selectedService,o=t.start,i=void 0===o?1:o,a=t.searchText,l=void 0===a?"":a,c=r[n].url,s=r[n].type;e.props.onSearch({format:s,url:c,startPosition:i,maxRecords:e.props.pageSize,text:l||"",options:{service:e.props.services[n]}})})),Lk(Nk(e),"reset",(function(){e.props.onReset()})),Lk(Nk(e),"handlePage",(function(t){if(t){var r=(t-1)*e.props.pageSize+1;e.search({services:e.props.services,selectedService:e.props.selectedService,start:r,searchText:e.props.searchText})}})),e}return t=a,(r=[{key:"componentDidMount",value:function(){this.props.selectedService&&this.isValidServiceSelected()&&this.props.services[this.props.selectedService].autoload&&this.search({services:this.props.services,selectedService:this.props.selectedService,searchText:this.props.searchText})}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e!==this.props&&(("view"===e.mode&&"edit"===this.props.mode||e.services!==this.props.services||e.selectedService!==this.props.selectedService)&&e.active&&this.props.active&&e.selectedService&&e.services[e.selectedService]&&e.services[e.selectedService].autoload&&this.search({services:e.services,selectedService:e.selectedService,searchText:e.searchText}),e.active&&!1===this.props.active&&e.selectedService&&e.services[e.selectedService]&&e.services[e.selectedService].autoload&&this.search({services:e.services,selectedService:e.selectedService,searchText:e.searchText}))}},{key:"render",value:function(){var e=this;return c().createElement(Vr.Z,{key:"catalog-BorderLayout",bodyClassName:"ms2-border-layout-body catalog",header:c().createElement(g.Form,null,c().createElement(g.FormGroup,{controlId:"labelService",key:"labelService"},c().createElement(g.ControlLabel,null,c().createElement(b.Z,{msgId:"catalog.service"}))),c().createElement(g.FormGroup,{controlId:"service",key:"service"},c().createElement(g.InputGroup,null,c().createElement(Hr.ZP,{clearValueText:(0,ie.S$)(this.context.messages,"catalog.clearValueText"),noResultsText:(0,ie.S$)(this.context.messages,"catalog.noResultsText"),clearable:!0,options:this.getServices(),value:this.props.selectedService,onChange:function(t){return e.props.onChangeSelectedService(t&&t.value?t.value:"")},placeholder:(0,ie.S$)(this.context.messages,"catalog.servicePlaceholder")}),this.isValidServiceSelected()&&"default_map_backgrounds"!==this.props.selectedService?c().createElement(g.InputGroup.Addon,{className:"btn",onClick:function(){return e.props.onChangeCatalogMode("edit",!1)}},c().createElement(g.Glyphicon,{glyph:"pencil"})):null,c().createElement(g.InputGroup.Addon,{className:"btn",onClick:function(){return e.props.onChangeCatalogMode("edit",!0)}},c().createElement(g.Glyphicon,{glyph:"plus"})))),c().createElement(g.FormGroup,{controlId:"searchText",key:"searchText"},this.renderTextSearch()),c().createElement(g.FormGroup,{controlId:"buttons",key:"buttons"},this.renderButtons(),this.props.layerError?this.renderError(this.props.layerError):null)),footer:this.renderPagination()},this.props.loading?this.renderLoading():this.renderResult())}}])&&Fk(t.prototype,r),a}(c().Component);Lk(_k,"propTypes",{active:u().bool,searchText:u().string,addAuthentication:u().bool,buttonClassName:u().string,buttonStyle:u().object,currentLocale:u().string,loading:u().bool,format:u().string,crs:u().string,gridOptions:u().object,includeSearchButton:u().bool,includeResetButton:u().bool,loadingError:u().object,layerError:u().string,mode:u().string,onChangeCatalogMode:u().func,onChangeText:u().func,onChangeFormat:u().func,onChangeSelectedService:u().func,onPropertiesChange:u().func,onError:u().func,onLayerAdd:u().func,onReset:u().func,onSearch:u().func,onAddBackground:u().func,pageSize:u().number,records:u().array,authkeyParamNames:u().array,recordItem:u().element,result:u().object,searchOptions:u().object,selectedService:u().string,services:u().object,showGetCapLinks:u().bool,wrapOptions:u().bool,zoomToLayer:u().bool,hideThumbnail:u().bool,hideIdentifier:u().bool,hideExpand:u().bool,source:u().string,onAddBackgroundProperties:u().func,modalParams:u().object,layers:u().array,clearModal:u().func,formatOptions:u().array,infoFormatOptions:u().array,layerBaseConfig:u().object,service:u().object}),Lk(_k,"contextTypes",{messages:u().object}),Lk(_k,"defaultProps",{buttonClassName:"search-button",buttonStyle:{marginBottom:"10px",marginRight:"5px"},currentLocale:"en-US",format:"csw",includeSearchButton:!0,includeResetButton:!1,mode:"view",onChangeCatalogMode:function(){},onChangeFormat:function(){},onChangeText:function(){},onChangeSelectedService:function(){},onPropertiesChange:function(){},onError:function(){},onLayerAdd:function(){},onReset:function(){},onSearch:function(){},changeLayerProperties:function(){},pageSize:4,records:[],loading:!1,services:{},wrapOptions:!1,zoomToLayer:!0,formatOptions:Vy.QQ,layerBaseConfig:{},crs:"EPSG:3857",service:{}});const Zk=_k,Bk=function(e){var t=e.children,r=e.service,n=e.isLocalizedLayerStylesEnabled,o=e.onChangeMetadataTemplate,i=void 0===o?function(){}:o,a=e.onChangeServiceProperty,l=void 0===a?function(){}:a,s=e.onToggleTemplate,u=void 0===s?function(){}:s,p=e.onToggleThumbnail,f=void 0===p?function(){}:p;return c().createElement("div",null,c().createElement(g.FormGroup,{controlId:"autoload",key:"autoload"},c().createElement(g.Col,{xs:12},c().createElement(g.Checkbox,{value:"autoload",onChange:function(e){return l("autoload",e.target.checked)},checked:!vc()(r.autoload)&&r.autoload},c().createElement(b.Z,{msgId:"catalog.autoload"})))),c().createElement(g.FormGroup,{controlId:"thumbnail",key:"thumbnail"},c().createElement(g.Col,{xs:12},c().createElement(g.Checkbox,{onChange:function(){return f()},checked:!!vc()(r.hideThumbnail)||!r.hideThumbnail},c().createElement(b.Z,{msgId:"catalog.showPreview"})))),!(!n||vc()(r.type))&&"wms"===r.type&&c().createElement(g.FormGroup,{controlId:"localized-styles",key:"localized-styles"},c().createElement(g.Col,{xs:12},c().createElement(g.Checkbox,{"data-qa":"service-lacalized-layer-styles-option",onChange:function(e){return l("localizedLayerStyles",e.target.checked)},checked:!vc()(r.localizedLayerStyles)&&r.localizedLayerStyles},c().createElement(b.Z,{msgId:"catalog.enableLocalizedLayerStyles.label"})," ",c().createElement(Ql.Z,{text:c().createElement(b.Z,{msgId:"catalog.enableLocalizedLayerStyles.tooltip"})})))),!vc()(r.type)&&"csw"===r.type&&c().createElement(g.FormGroup,{controlId:"metadata-template",key:"metadata-template",className:"metadata-template-editor"},c().createElement(g.Col,{xs:12},c().createElement(g.Checkbox,{onChange:function(){return u()},checked:r&&r.showTemplate},c().createElement(b.Z,{msgId:"catalog.showTemplate"})),c().createElement("br",null)),r&&r.showTemplate&&c().createElement(g.Col,{xs:12},c().createElement("span",null,c().createElement("p",null,c().createElement(b.Z,{msgId:"layerProperties.templateFormatInfoAlert2",msgParams:{attribute:"{ }"}}),"  "),c().createElement("pre",null,c().createElement(b.Z,{msgId:"catalog.templateFormatDescriptionExample"})," ${ description }"))),c().createElement(g.Col,{xs:12},r&&r.showTemplate&&c().createElement(ui(),{modules:{toolbar:[[{size:["small",!1,"large","huge"]},"bold","italic","underline","blockquote"],[{list:"bullet"},{align:[]}],[{color:[]},{background:[]},"clean"],["link"]]},value:r.metadataTemplate||"",onChange:function(e){i(e&&"<p><br></p>"!==e?e:"")}}))),t)};function zk(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=r){var n,o,i=[],a=!0,l=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Gk(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Gk(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gk(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}r(3256),r(62193),r(96876);const Uk=function(e){var t=e.onValid,r=e.onError,n=e.json,o=void 0===n?{}:n,i=zk((0,l.useState)(JSON.stringify(o,!0,2)),2),a=i[0],s=i[1],u=zk((0,l.useState)(),2),p=u[0],f=u[1];return(0,l.useEffect)((function(){try{var e=JSON.parse(a);f(),t(e)}catch(e){f(e),r(e)}}),[a]),c().createElement("div",{className:"code-editor"},c().createElement(Xl.Controlled,{value:a,onBeforeChange:function(e,t,r){s(r)},options:{theme:"lesser-dark",mode:"application/json",lineNumbers:!0,styleSelectedText:!0,indentUnit:2,tabSize:2}}),p&&c().createElement("div",{className:"error-area"},c().createElement("div",{className:"error-area-header"},c().createElement(b.Z,{msgId:"contextCreator.configurePlugins.cfgParsingError.title"})),c().createElement("div",{className:"error-area-body"},c().createElement(b.Z,{msgId:"contextCreator.configurePlugins.cfgParsingError.body",msgParams:{error:p.message}},(function(e){return c().createElement("pre",{className:"error-msg"},e)})))))};var Wk={options:{}};const Vk=function(e){var t=e.service,r=void 0===t?{}:t,n=e.setValid,o=void 0===n?function(){}:n,i=e.onToggleThumbnail,a=void 0===i?function(){}:i,l=e.onChangeServiceProperty,s=void 0===l?function(){}:l,u=r.options||r.variants?{options:r.options||{},variants:r.variants}:void 0;return c().createElement("div",null,c().createElement(g.FormGroup,{controlId:"autoload",key:"autoload"},c().createElement(g.Col,{xs:12},c().createElement(g.Checkbox,{key:"autoload",value:"autoload",onChange:function(e){return s("autoload",e.target.checked)},checked:!vc()(r.autoload)&&r.autoload},c().createElement(b.Z,{msgId:"catalog.autoload"})),c().createElement(g.Checkbox,{key:"thumbnail",value:"thumbnail",onChange:function(){return a()},checked:!!vc()(r.hideThumbnail)||!r.hideThumbnail},c().createElement(b.Z,{msgId:"catalog.showPreview"})),"tms"===r.provider?c().createElement(g.Checkbox,{key:"forceDefaultTileGrid",value:"forceDefaultTileGrid",onChange:function(e){return s("forceDefaultTileGrid",e.target.checked)},checked:!vc()(r.forceDefaultTileGrid)&&r.forceDefaultTileGrid},c().createElement(b.Z,{msgId:"catalog.tms.forceDefaultTileGrid"})," ",c().createElement(Ql.Z,{text:c().createElement(b.Z,{msgId:"catalog.tms.forceDefaultTileGridDescription"})})):null),r.provider&&"custom"!==r.provider?null:c().createElement(g.Col,null,c().createElement(g.ControlLabel,null,c().createElement(b.Z,{msgId:"catalog.tms.customTMSConfiguration"}),"  ",c().createElement(Ql.Z,{text:c().createElement(xl.Z,{msgId:"catalog.tms.customTMSConfigurationHint"})})),c().createElement(Uk,{json:u||Wk,onValid:function(e){var t=e.options,n=e.variants;Nr()(t,r.options)||s("options",t),Nr()(n,r.variants)||s("variants",n),o(!0)},onError:function(){r.options&&s("options",void 0),r.variants&&s("variants",void 0),o(!1)}}))))};function qk(){return(qk=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var Hk=(0,bl.Z)("noResultsText")(Hr.ZP),$k=function(e){return e.map((function(e){return{label:"".concat(e,"x").concat(e),value:e}}))};const Kk=function(e){var t,r=e.service,n=e.formatOptions,o=e.onChangeServiceFormat,i=void 0===o?function(){}:o,a=e.onChangeServiceProperty,l=void 0===a?function(){}:a,s=e.tileSizeOptions,u=(e.currentWMSCatalogLayerSize,e.selectedService,e.onFormatOptionsFetch),p=void 0===u?function(){}:u,f=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["service","formatOptions","onChangeServiceFormat","onChangeServiceProperty","tileSizeOptions","currentWMSCatalogLayerSize","selectedService","onFormatOptionsFetch"]),d=$k(s);return c().createElement(Bk,qk({onChangeServiceProperty:l,service:r},f),c().createElement(g.FormGroup,{style:{display:"flex",alignItems:"center",paddingTop:15,borderTop:"1px solid #ddd"}},c().createElement(g.Col,{xs:6},c().createElement(g.ControlLabel,null,"Format")),c().createElement(g.Col,{xs:6},c().createElement(Hk,{isLoading:f.formatsLoading,onOpen:function(){return p(r.url)},value:r&&r.format,clearable:!0,noResultsText:f.formatsLoading?"catalog.format.loading":"catalog.format.noOption",options:f.formatsLoading?[]:n,onChange:function(e){return i(e&&e.value)}}))),c().createElement(g.FormGroup,{style:{display:"flex",alignItems:"center",paddingTop:15,borderTop:"1px solid #ddd"}},c().createElement(g.Col,{xs:6},c().createElement(g.ControlLabel,null,"WMS Layer tile size")),c().createElement(g.Col,{xs:6},c().createElement(Hk,{value:$k([(null===(t=r.layerOptions)||void 0===t?void 0:t.tileSize)||256])[0],options:d,onChange:function(e){return l("layerOptions",{tileSize:e&&e.value})}}))))};const Yk=function(e){var t=e.onToggleAdvancedSettings,r=void 0===t?function(){}:t,n=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["onToggleAdvancedSettings"]),o=n.service,i=void 0===o?{}:o,a=function(e){switch(e){case"tms":return Vk;case"wmts":case"wfs":return Bk;case"wms":case"csw":return Kk;default:return Bk}}(i.type);return c().createElement(op.Z,{useToolbar:!0,title:c().createElement(b.Z,{msgId:"catalog.advancedSettings"}),expanded:!vc()(i.showAdvancedSettings)&&i.showAdvancedSettings,onSwitch:r},c().createElement(a,n))};function Xk(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Qk=function(e){for(var t=0,r=Object.entries({wfs:"e.g. https://mydomain.com/geoserver/wfs",wmts:"e.g. https://mydomain.com/geoserver/gwc/service/wmts",wms:"e.g. https://mydomain.com/geoserver/wms",csw:"e.g. https://mydomain.com/geoserver/csw",tms:"e.g. https://mydomain.com/geoserver/gwc/service/tms/1.0.0"});t<r.length;t++){var n=(a=r[t],l=2,function(e){if(Array.isArray(e))return e}(a)||function(e,t){var r=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=r){var n,o,i=[],a=!0,l=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(l)throw o}}return i}}(a,l)||function(e,t){if(e){if("string"==typeof e)return Xk(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Xk(e,t):void 0}}(a,l)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=n[0],i=n[1];if(o===e.type)return i}var a,l;return!0},Jk=r(36882);function eI(e,t){if(e){if("string"==typeof e)return tI(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?tI(e,t):void 0}}function tI(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var rI=(0,bl.Z)("placeholder")(g.FormControl),nI="custom",oI="tms",iI=function(e){var t=e.service,r=void 0===t?{}:t,n=e.onChangeUrl,o=void 0===n?function(){}:n;return c().createElement(g.FormGroup,{controlId:"URL"},c().createElement(g.Col,{xs:12},c().createElement(g.ControlLabel,null,c().createElement(b.Z,{msgId:"catalog.url"})),c().createElement(rI,{type:"text",style:{textOverflow:"ellipsis"},placeholder:Qk(r),value:r&&r.url,onChange:function(e){return o(e.target.value)}})))},aI=function(e){return e===oI?"TMS 1.0.0":e},lI=function(e){var t,r,n,o,i=e.serviceTypes,a=void 0===i?[]:i,l=e.onChangeServiceProperty,s=e.service,u=void 0===s?{}:s,p=e.onChangeUrl,f=void 0===p?function(){}:p,m=e.onChangeTitle,y=void 0===m?function(){}:m,v=(0,Ar.u8)("allowedProviders")||d()(ye()(a||[],{name:"tms"}),"allowedProviders")||[],h=Object.keys(Jk.Z).filter((function(e){return"ALL"===v||v.indexOf(e)>=0})),O=u===oI?u:null==u||null===(t=u.provider)||void 0===t||null===(r=t.split)||void 0===r||null===(n=r.call(t,"."))||void 0===n?void 0:n[0],w=!O||O===nI,E=O===oI,S=E||w;return c().createElement(g.FormGroup,null,c().createElement(g.Col,{xs:12,sm:w?3:12,md:S?3:12},c().createElement(g.ControlLabel,null,c().createElement(b.Z,{msgId:"catalog.tms.provider"})),c().createElement(rI,{onChange:function(e){var t=e.target.value;l("provider","".concat(t)),t!==nI&&t!==oI?y(t):w||E||y("")},value:O,componentClass:"select"},[nI,oI].concat((o=h,function(e){if(Array.isArray(e))return tI(e)}(o)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(o)||eI(o)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())).map((function(e){return{name:e,label:aI(e)}})).map((function(e){return c().createElement("option",{value:e.name,key:e.name},e.label)})))),c().createElement(g.Col,{xs:12,sm:9,md:9},w?c().createElement(c().Fragment,null,c().createElement(g.ControlLabel,null,c().createElement(b.Z,{msgId:"catalog.tms.urlTemplate"}),"  ",c().createElement(Ql.Z,{text:c().createElement(xl.Z,{msgId:"catalog.tms.urlTemplateHint"})})),c().createElement(rI,{type:"text",style:{textOverflow:"ellipsis"},placeholder:"e.g. https://{s}.myUrl.com/{variant}/{z}/{x}/{y}",value:u&&u.url,onChange:function(e){return f(e.target.value)}})):E?c().createElement(c().Fragment,null,c().createElement(g.ControlLabel,null,c().createElement(b.Z,{msgId:"catalog.url"})),c().createElement(rI,{type:"text",style:{textOverflow:"ellipsis"},placeholder:Qk(u),value:u&&u.url,onChange:function(e){return f(e.target.value)}})):null))};const cI=function(e){var t,r,n=e.service,o=void 0===n?{}:n,i=e.serviceTypes,a=e.onChangeTitle,s=e.onChangeUrl,u=e.onChangeServiceProperty,p=e.onChangeType,f=e.setValid,d=void 0===f?function(){}:f,m=(t=(0,l.useState)(!1),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=r){var n,o,i=[],a=!0,l=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(l)throw o}}return i}}(t,r)||eI(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),y=m[0],v=m[1],h="tms"===o.type?lI:iI;return c().createElement(g.Form,{horizontal:!0},c().createElement(g.FormGroup,{controlId:"title",key:"type-title-row"},c().createElement(g.Col,{key:"type",xs:12,sm:3,md:3},c().createElement(g.ControlLabel,null,c().createElement(b.Z,{msgId:"catalog.type"})),c().createElement(rI,{onChange:function(e){return p(e.target.value)},value:o&&o.type,componentClass:"select"},i.map((function(e){return c().createElement("option",{value:e.name,key:e.name},e.label)})))),c().createElement(g.Col,{key:"title",xs:12,sm:9,md:9},c().createElement(g.ControlLabel,null,c().createElement(b.Z,{msgId:"catalog.serviceTitle"})),c().createElement(rI,{type:"text",style:{textOverflow:"ellipsis"},placeholder:"catalog.serviceTitlePlaceholder",value:o&&o.title,onChange:function(e){return a(e.target.value)}}))),c().createElement(h,{key:"url-row",serviceTypes:i,service:o,onChangeUrl:function(e){if(s(e),e){var t=!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=zx.parse(window.location.href).protocol,r=zx.parse(e).protocol;return"https:"!==t||t===r}(e);v(t),d(!t)}},onChangeTitle:a,onChangeServiceProperty:u}),y?c().createElement(g.Alert,{bsStyle:"danger"},c().createElement(b.Z,{msgId:"catalog.invalidUrlHttpProtocol"})):null)};function sI(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}r(13645),r(11344);var uI=r(31935);function pI(e){return(pI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fI(){return(fI=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function dI(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mI(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function yI(e,t){return(yI=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function bI(e,t){return!t||"object"!==pI(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function gI(e){return(gI=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function hI(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?vI(Object(r),!0).forEach((function(t){OI(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vI(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function OI(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var wI=(0,D.zB)({searchOptions:ve.bA,result:ve.SX,loadingError:ve.hm,selectedService:ve.Cb,mode:ve.eK,services:ve.b6,servicesWithBackgrounds:ve.PG,layerError:ve.Im,active:ve.$t,dockStyle:function(e){return(0,Ke.ic)(e,{height:!0})},searchText:ve.e8,group:ve.Mm,source:uI.YL,layers:H.l2,modalParams:uI.B0,authkeyParamNames:ve.kS,saving:ve.dP,openCatalogServiceList:ve.ZL,service:ve._S,format:ve.iH,selectedFormat:ve.Q7,options:ve.bA,layerOptions:ve.n7,tileSizeOptions:ve._x,currentLocale:Q.Pz,locales:Q.Ps,pageSize:ve.y,loading:ve.E2,crs:X.uy,isLocalizedLayerStylesEnabled:re.wk,formatsLoading:ve.BM,formatOptions:ve.am,infoFormatOptions:ve.LV}),EI=(0,R.compose)((0,R.withProps)((function(e){var t=e.result,r=e.selectedFormat,n=e.options,o=e.layerOptions,i=e.services,a=e.selectedService,l=e.locales;return{records:t&&(0,Vy.eL)(r,t,hI(hI({},n),{},{layerOptions:o,service:i[a]}),l)||[]}})),(0,R.defaultProps)({buttonStyle:{marginBottom:"10px",marginRight:"5px"},formatOptions:Vy.QQ}),(0,R.branch)((function(e){return"edit"===e.mode}),(0,R.renderComponent)((function(e){var t,r,n=e.service,o=void 0===n?{title:"",type:"wms",url:"",format:"image/png"}:n,i=e.serviceTypes,a=void 0===i?[{name:"csw",label:"CSW"}]:i,s=e.onChangeTitle,u=void 0===s?function(){}:s,p=e.onChangeUrl,f=void 0===p?function(){}:p,d=e.onChangeType,m=void 0===d?function(){}:d,y=e.id,v=e.urlTooltip,h=e.formatOptions,O=e.buttonStyle,w=e.saving,E=e.onChangeServiceFormat,S=void 0===E?function(){}:E,P=e.onChangeMetadataTemplate,j=void 0===P?function(){}:P,C=e.onToggleAdvancedSettings,x=void 0===C?function(){}:C,T=e.onChangeServiceProperty,k=void 0===T?function(){}:T,I=e.onToggleTemplate,A=void 0===I?function(){}:I,F=e.onToggleThumbnail,D=void 0===F?function(){}:F,R=e.onAddService,N=void 0===R?function(){}:R,M=e.onDeleteService,L=void 0===M?function(){}:M,_=e.onChangeCatalogMode,Z=void 0===_?function(){}:_,B=e.onFormatOptionsFetch,z=void 0===B?function(){}:B,G=e.selectedService,U=e.isLocalizedLayerStylesEnabled,W=e.tileSizeOptions,V=void 0===W?[256]:W,q=e.layerOptions,H=e.formatsLoading,$=(t=(0,l.useState)(!0),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=r){var n,o,i=[],a=!0,l=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(l)throw o}}return i}}(t,r)||function(e,t){if(e){if("string"==typeof e)return sI(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?sI(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),K=$[0],Y=$[1];return c().createElement(Vr.Z,{bodyClassName:"ms2-border-layout-body catalog",header:c().createElement(cI,{setValid:Y,service:o,serviceTypes:a,onChangeTitle:u,onChangeUrl:f,onChangeType:m,onChangeServiceProperty:k,urlTooltip:v})},c().createElement(g.Form,null,c().createElement(Yk,{setValid:Y,id:y,service:o,formatOptions:h,buttonStyle:O,saving:w,onChangeServiceFormat:S,onChangeMetadataTemplate:j,onToggleAdvancedSettings:x,onChangeServiceProperty:k,onToggleTemplate:A,onToggleThumbnail:D,isLocalizedLayerStylesEnabled:U,tileSizeOptions:V,currentWMSCatalogLayerSize:q.tileSize?q.tileSize:256,selectedService:G,onFormatOptionsFetch:z,formatsLoading:H}),c().createElement(g.FormGroup,{controlId:"buttons",key:"buttons"},c().createElement(g.Col,{xs:12},c().createElement(Je.Z,{style:O,disabled:w||!K,onClick:function(){return N()},key:"catalog_add_service_button"},w?c().createElement(HP(),{spinnerName:"circle",noFadeIn:!0,overrideSpinnerClassName:"spinner"}):null,c().createElement(b.Z,{msgId:"save"})),o&&!o.isNew?c().createElement(Je.Z,{style:O,onClick:function(){return L()},key:"catalog_delete_service_button"},c().createElement(b.Z,{msgId:"catalog.delete"})):null,c().createElement(Je.Z,{style:O,disabled:w,onClick:function(){return Z("view")},key:"catalog_back_view_button"},c().createElement(b.Z,{msgId:"cancel"}))))))}))))(Zk),SI=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yI(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=gI(n);if(o){var r=gI(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return bI(this,e)});function a(){return dI(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"render",value:function(){var e=this,t={group:this.props.group||void 0},r=c().createElement(EI,fI({layerBaseConfig:t},this.props,{services:"backgroundSelector"===this.props.source?this.props.servicesWithBackgrounds:this.props.services}));return c().createElement("div",{id:"catalog-root",className:this.props.active?"catalog-active":"",style:{width:"100%",height:"100%",pointerEvents:"none"}},c().createElement(Rj.Z,null,(function(t){var n=t.width;return c().createElement(Cy.Z,{open:e.props.active,size:e.props.width/n>1?n:e.props.width,position:"right",bsStyle:"primary",title:c().createElement(b.Z,{msgId:"catalog.title"}),onClose:function(){return e.props.closeCatalog()},glyph:"folder-open",zIndex:1031,style:e.props.dockStyle},c().createElement(g.Panel,{id:e.props.id,style:e.props.panelStyle,className:e.props.panelClassName},r))})))}}])&&mI(t.prototype,r),a}(c().Component);OI(SI,"propTypes",{id:u().string,source:u().string,active:u().bool,searchOnStartup:u().bool,serviceTypes:u().array,wrap:u().bool,wrapWithPanel:u().bool,panelStyle:u().object,panelClassName:u().string,closeCatalog:u().func,closeGlyph:u().string,buttonStyle:u().object,services:u().object,servicesWithBackgrounds:u().object,selectedService:u().string,style:u().object,dockProps:u().object,zoomToLayer:u().bool,isLocalizedLayerStylesEnabled:u().bool,width:u().number,dockStyle:u().object,group:u().string}),OI(SI,"defaultProps",{id:"mapstore-metadata-explorer",serviceTypes:[{name:"csw",label:"CSW"},{name:"wms",label:"WMS"},{name:"wmts",label:"WMTS"},{name:"tms",label:"TMS",allowedProviders:["OpenStreetMap","OpenSeaMap","Stamen"]},{name:"wfs",label:"WFS"}],active:!1,wrap:!1,modal:!0,wrapWithPanel:!1,panelStyle:{zIndex:100,overflow:"hidden",height:"100%"},panelClassName:"catalog-panel",closeCatalog:function(){},closeGlyph:"1-close",zoomToLayer:!0,width:660,dockProps:{dimMode:"none",fluid:!1,position:"right",zIndex:1030},dockStyle:{},group:null,services:{},servicesWithBackgrounds:{}});var PI=(0,p.connect)(wI,{clearModal:gT.V3,onSearch:ge.tt,onLayerAdd:ge.A4,closeCatalog:ge.wl,onChangeFormat:ge.BG,onChangeServiceFormat:ge.i3,onChangeUrl:ge.X7,onChangeType:ge.XM,onChangeTitle:ge.r1,onChangeMetadataTemplate:ge.Wf,onChangeText:ge.XW,onChangeServiceProperty:ge.L8,onChangeSelectedService:ge.Dw,onChangeCatalogMode:ge.In,onAddService:ge.M3,onToggleAdvancedSettings:ge.Ts,onToggleThumbnail:ge.XS,onToggleTemplate:ge.IT,onDeleteService:ge.wo,onError:ge.vG,onAddBackgroundProperties:gT.US,onFocusServicesList:ge.dL,onPropertiesChange:h.He,onAddBackground:gT.pW,onFormatOptionsFetch:ge.tx,onToggle:v.Xi.bind(null,"backgroundSelector",null),onLayerChange:v.Xg.bind(null,"backgroundSelector"),onStartChange:v.Xg.bind(null,"backgroundSelector","start")})(SI);const jI={MetadataExplorerPlugin:le()(PI,{BurgerMenu:{name:"metadataexplorer",position:5,text:c().createElement(b.Z,{msgId:"catalog.title"}),icon:c().createElement(g.Glyphicon,{glyph:"folder-open"}),action:v.Xg.bind(null,"metadataexplorer","enabled",!0,!0),doNotHide:!0},BackgroundSelector:{name:"MetadataExplorer",doNotHide:!0},TOC:{name:"MetadataExplorer",doNotHide:!0}}),reducers:{catalog:r(18163).Z},epics:r(56175).Z(Ce.Z)};var CI=r(58252);function xI(e){return(xI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function TI(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kI(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function II(e,t){return(II=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function AI(e,t){return!t||"object"!==xI(t)&&"function"!=typeof t?FI(e):t}function FI(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function DI(e){return(DI=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function RI(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var NI=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&II(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=DI(n);if(o){var r=DI(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return AI(this,e)});function a(){var e;TI(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return RI(FI(e=i.call.apply(i,[this].concat(r))),"getPanels",(function(){return e.props.items.filter((function(e){return e.tools})).reduce((function(e,t){return e.concat(t.tools.map((function(e,r){return{name:t.name+r,panel:e,cfg:t.cfg.toolsCfg?t.cfg.toolsCfg[r]:{}}})))}),[])})),RI(FI(e),"getTools",(function(){return e.props.items.sort((function(e,t){return e.position-t.position}))})),e}return t=a,(r=[{key:"render",value:function(){return c().createElement(CI.Z,{id:this.props.id,style:this.props.style,className:this.props.className,mapType:this.props.mapType,container:function(e){return c().createElement(g.Grid,{fluid:!0},c().createElement(g.Row,null,e.children.map((function(e,t){return c().createElement(g.Col,{key:t,xs:12,xsOffset:0,sm:6,smOffset:3},e)}))))},toolStyle:"primary",activeStyle:"default",stateSelector:"omnibar",tool:function(e){return c().createElement("div",null,e.children)},tools:this.getTools(),panels:this.getPanels()})}}])&&kI(t.prototype,r),a}(c().Component);RI(NI,"propTypes",{className:u().string,style:u().object,items:u().array,id:u().string,mapType:u().string}),RI(NI,"defaultProps",{items:[],className:"grid-home-container",style:{},id:"mapstore-grid-home",mapType:"leaflet"});const MI={GridContainerPlugin:NI,reducers:{}};function LI(e){return(LI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ZI(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_I(Object(r),!0).forEach((function(t){VI(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_I(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function BI(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zI(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function GI(e,t){return(GI=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function UI(e,t){return!t||"object"!==LI(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function WI(e){return(WI=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function VI(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var qI=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&GI(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=WI(n);if(o){var r=WI(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return UI(this,e)});function a(){return BI(this,a),i.apply(this,arguments)}return t=a,(r=[{key:"UNSAFE_componentWillMount",value:function(){var e=!this.props.editingAllowedRoles||Bl()(this.props.editingAllowedRoles)&&uo()(this.props.userRole)&&-1!==this.props.editingAllowedRoles.indexOf(this.props.userRole);this.props.onInit(this.props.styleService,e&&(0,_l.uW)(this.props.layer,this.props.styleService))}},{key:"render",value:function(){return c().createElement(Vr.Z,{className:"ms-style-editor-container",header:this.props.showToolbar?c().createElement("div",{className:"ms-style-editor-container-header"},this.props.header,c().createElement("div",{className:"text-center"},c().createElement(Dd,{enableSetDefaultStyle:this.props.enableSetDefaultStyle}))):null,footer:c().createElement("div",{style:{height:25}})},this.props.isEditing?c().createElement(xd,{config:this.props.editorConfig}):c().createElement(Nd,{showDefaultStyleIcon:this.props.canEdit&&this.props.enableSetDefaultStyle}))}}])&&zI(t.prototype,r),a}(c().Component);VI(qI,"propTypes",{layer:u().object,header:u().node,isEditing:u().bool,showToolbar:u().node.bool,onInit:u().func,styleService:u().object,userRole:u().string,editingAllowedRoles:u().array,enableSetDefaultStyle:u().bool,canEdit:u().bool,editorConfig:u().object}),VI(qI,"defaultProps",{layer:{},onInit:function(){},editingAllowedRoles:["ADMIN"],editorConfig:{}});var HI=(0,R.compose)(R.toClass,(0,R.branch)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.active;return!t}),(function(){return function(){return null}})),(0,p.connect)((0,D.P1)([Ll.ex,Ll.aN,Ll.Vf,Ll.p,te.L3,Ll.z_,Ll.Z0],(function(e,t,r,n,o,i,a){return{isEditing:"edit"===e,loading:t,layer:r,error:n,userRole:o,canEdit:i,styleService:a}})),{onInit:lo.E0,onUpdateParams:h.Xy},(function(e,t,r){var n,o,i,a=(null===(n=r.styleService)||void 0===n?void 0:n.baseUrl)===(null===(o=e.styleService)||void 0===o?void 0:o.baseUrl)&&(null===(i=e.styleService)||void 0===i?void 0:i.isStatic),l=r.styleService&&!a?ZI(ZI({},r.styleService),{},{isStatic:!0}):ZI({},e.styleService);return ZI(ZI(ZI(ZI({},r),e),t),{},{styleService:l})})),(0,ta.Z)((function(e){var t=e.error;return!!(null!=t&&t.availableStyles||null!=t&&t.global||null!=t&&t.parsingCapabilities)}),(function(e){var t=e.error;return{glyph:"exclamation-mark",title:c().createElement(xl.Z,{msgId:"styleeditor.errorTitle"}),description:c().createElement(xl.Z,{msgId:((null==t?void 0:t.availableStyles)?"styleeditor.missingAvailableStylesMessage":(null==t?void 0:t.parsingCapabilities)&&"styleeditor.parsingCapabilitiesError")||(null==t?void 0:t.global)&&"styleeditor.globalError"}),style:{display:"flex",width:"100%",height:"100%",overflow:"hidden"},mainViewStyle:{margin:"auto",width:300}}})),(0,ea.Z)((function(e){return"global"===e.loading}),{size:150,style:{margin:"auto"}},(function(e){return c().createElement("div",{style:{position:"relative",height:"100%",display:"flex"}},c().createElement(ml.Z,e))})),(0,R.compose)((0,p.connect)((function(){return{}}),{toggleStyleEditor:lo.Wv}),(0,R.lifecycle)({componentDidMount:function(){this.props.toggleStyleEditor(null,!0)}})))(qI);const $I={StyleEditorPlugin:le()(HI,{TOC:{priority:1,container:"TOCItemSettings"},TOCItemsSettings:{name:"StyleEditor",target:"style",priority:1,ToolbarComponent:Dd}}),reducers:{styleeditor:r(32244).Z},epics:r(94943).ZP};var KI=r(70335),YI=r(48401),XI="CHANGE_MOUSE_POSITION",QI="CHANGE_MOUSE_POSITION_CRS",JI="CHANGE_MOUSE_POSITION_STATE",eA=r(75140),tA=r(42454);function rA(e){return(rA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nA(){return(nA=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function oA(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function iA(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function aA(e,t){return(aA=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function lA(e,t){return!t||"object"!==rA(t)&&"function"!=typeof t?cA(e):t}function cA(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function sA(e){return(sA=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function uA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function pA(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?uA(Object(r),!0).forEach((function(t){fA(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uA(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function fA(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var dA=function(e,t,r){return t.showCenter&&e?e.center:t.showOnClick?r.clickPoint&&r.clickPoint.latlng?{x:r.clickPoint.latlng.lng,y:r.clickPoint.latlng.lat,crs:"EPSG:4326"}:{crs:"EPSG:4326"}:t},mA=(0,D.P1)([function(e){return e},X.Od,function(e){return(0,X.zT)(e)},function(e){return d()(e,"mousePosition.position")||{}},function(e){return d()(e,"mousePosition.crs")||"EPSG:4326"},function(e){return e.mapInfo||{}}],(function(e,t,r,n,o,i){return{enabled:r,mousePosition:dA(t,n,i),projectionDefs:(0,X.pb)(e),crs:o}})),yA=(0,p.connect)((function(e){return{pressed:(0,X.zT)(e),active:(0,X.zT)(e),tooltip:c().createElement(g.Tooltip,{id:"showMousePositionCoordinates"},c().createElement(b.Z,{msgId:"showMousePositionCoordinates"})),tooltipPlace:"left",pressedStyle:"success active",defaultStyle:"primary",glyphicon:"mouse",btnConfig:{bsSize:"small"}}}),{registerEventListener:V.H0,unRegisterEventListener:V.$X},(function(e,t){return pA(pA({},e),{},{onClick:function(){return e.active?t.unRegisterEventListener("mousemove","mouseposition"):t.registerEventListener("mousemove","mouseposition")}})}))(eA.Z),bA=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&aA(e,t)}(l,e);var t,n,o,i,a=(o=l,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=sA(o);if(i){var r=sA(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return lA(this,e)});function l(){var e;oA(this,l);for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return fA(cA(e=a.call.apply(a,[this].concat(n))),"getTemplate",(function(e){return r(5615)("./"+e).default})),e}return t=l,(n=[{key:"render",value:function(){var e=this.props,t=e.degreesTemplate,r=e.projectedTemplate,n=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["degreesTemplate","projectedTemplate"]);return c().createElement(tA.default,nA({degreesTemplate:this.getTemplate(t),projectedTemplate:this.getTemplate(r),toggle:c().createElement(yA,null)},n))}}])&&iA(t.prototype,n),l}(c().Component);fA(bA,"propTypes",{degreesTemplate:u().string,projectedTemplate:u().string}),fA(bA,"defaultProps",{degreesTemplate:"MousePositionLabelDMS",projectedTemplate:"MousePositionLabelYX"});var gA=(0,p.connect)(mA,{onCRSChange:function(e){return{type:QI,crs:e}}})(bA);const vA={MousePositionPlugin:le()(gA,{MapFooter:{name:"mousePosition",position:2,tool:!0,priority:1}}),reducers:{mousePosition:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{enabled:!0,position:null,crs:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case JI:return le()({},e,{enabled:t.enabled});case XI:return le()({},e,{position:t.position});case QI:return le()({},e,{crs:t.crs});case V.Jb:return le()({},e,{position:t.position,mouseOut:!1});case V.Uh:return le()({},e,{mouseOut:!0});default:return e}}}};var hA,OA,wA=r(1852),EA=r.n(wA),SA=r(97222),PA=r(25016),jA=r(8578),CA=r(86568),xA=r(28578),TA=r(26125),kA=r(69301),IA=r(18412),AA=r(64975);function FA(e){return(FA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function DA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function RA(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?DA(Object(r),!0).forEach((function(t){GA(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):DA(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function NA(){return(NA=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function MA(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function LA(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _A(e,t){return(_A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ZA(e,t){return!t||"object"!==FA(t)&&"function"!=typeof t?BA(e):t}function BA(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zA(e){return(zA=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function GA(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var UA=(0,D.P1)([function(e){return e.search||null},function(e){return e.controls&&e.controls.searchBookmarkConfig||null},function(e){return e.mapConfigRawData||{}},function(e){return(null==e?void 0:e.searchbookmarkconfig)||""}],(function(e,t,r,n){return{enabledSearchBookmarkConfig:t&&t.enabled||!1,error:e&&e.error,coordinate:e&&e.coordinate||{},loading:e&&e.loading,searchText:e?e.searchText:"",activeSearchTool:d()(e,"activeSearchTool","addressSearch"),format:d()(e,"format")||Ar.ZP.getConfigProp("defaultCoordinateFormat"),selectedItems:e&&e.selectedItems,mapInitial:r,bookmarkConfig:n||{}}})),WA=(0,p.connect)(UA,{onSearch:SA.tt,onChangeCoord:SA.TS,onChangeActiveSearchTool:SA.a,onClearCoordinatesSearch:fl.fU,onClearBookmarkSearch:PA.N3,onChangeFormat:SA.Zw,onToggleControl:v.Xi,onZoomToPoint:SA.Z,onPurgeResults:SA.kV,onSearchReset:SA.v2,onSearchTextChange:SA.k9,onCancelSelectedItem:SA.KG,onZoomToExtent:V.Px,onLayerVisibilityLoad:IE.H0})(jA.Z),VA=(0,D.P1)([X.Od,H.l2,function(e){return e.search||null}],(function(e,t,r){return{mapConfig:e,layers:t,results:r?r.results:null}})),qA=(0,p.connect)(VA,{onItemClick:SA.Jc,addMarker:SA._q,showGFI:SA.w4})(CA.Z),HA=(0,p.connect)((function(e){return{enabled:e.controls&&e.controls.search&&e.controls.search.enabled||!1,selectedServices:e&&e.search&&e.search.selectedServices,selectedItems:e&&e.search&&e.search.selectedItems,textSearchConfig:e&&e.searchconfig&&e.searchconfig.textSearchConfig}}),{onUpdateResultsStyle:SA.o$})((OA=hA=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_A(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=zA(n);if(o){var r=zA(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return ZA(this,e)});function a(){var e;MA(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return GA(BA(e=i.call.apply(i,[this].concat(r))),"getServiceOverrides",(function(t){return e.props.selectedItems&&e.props.selectedItems[e.props.selectedItems.length-1]&&d()(e.props.selectedItems[e.props.selectedItems.length-1],t)})),GA(BA(e),"getSearchOptions",(function(){var t=e.props,r=t.searchOptions,n=t.textSearchConfig;return n&&n.services&&n.services.length>0?n.override?le()({},r,{services:n.services}):le()({},r,{services:r.services.concat(n.services)}):r})),GA(BA(e),"getCurrentServices",(function(){var t=e.props.selectedServices,r=e.getSearchOptions();return t&&t.length>0?le()({},r,{services:t}):r})),GA(BA(e),"getSearchAndToggleButton",(function(){var t=c().createElement(WA,NA({key:"searchBar"},e.props,{searchOptions:e.getCurrentServices(),placeholder:e.getServiceOverrides("placeholder"),placeholderMsgId:e.getServiceOverrides("placeholderMsgId")}));return!0===e.props.withToggle?[c().createElement(AA.Z,null)].concat(e.props.enabled?[t]:null):Bl()(e.props.withToggle)?c().createElement("span",null,c().createElement(EA(),{query:"("+e.props.withToggle[0]+")"},c().createElement(AA.Z,null),e.props.enabled?t:null),c().createElement(EA(),{query:"("+e.props.withToggle[1]+")"},t)):t})),e}return t=a,(r=[{key:"componentDidMount",value:function(){this.props.onUpdateResultsStyle(RA(RA({},IA.be),this.props.resultsStyle))}},{key:"render",value:function(){return c().createElement("span",null,this.getSearchAndToggleButton(),c().createElement(qA,{fitToMapSize:this.props.fitResultsToMapSize,searchOptions:this.props.searchOptions,onUpdateResultsStyle:this.props.onUpdateResultsStyle,key:"nominatimresults"}))}}])&&LA(t.prototype,r),a}(c().Component),GA(hA,"propTypes",{splitTools:u().bool,showOptions:u().bool,isSearchClickable:u().bool,fitResultsToMapSize:u().bool,searchOptions:u().object,resultsStyle:u().object,selectedItems:u().array,selectedServices:u().array,userServices:u().array,withToggle:u().oneOfType([u().bool,u().array]),enabled:u().bool,textSearchConfig:u().object}),GA(hA,"defaultProps",{searchOptions:{services:[{type:"nominatim",priority:5}]},isSearchClickable:!1,splitTools:!0,resultsStyle:{color:"#3388ff",weight:4,dashArray:"",fillColor:"#3388ff",fillOpacity:.2},fitResultsToMapSize:!0,withToggle:!1,enabled:!0}),OA));const $A={SearchPlugin:le()(HA,{OmniBar:{name:"search",position:1,tool:!0,priority:1}}),epics:{searchEpic:xA.Mk,searchOnStartEpic:xA.h5,searchItemSelected:xA.XH,zoomAndAddPointEpic:xA.OY,textSearchShowGFIEpic:xA.Ls},reducers:{search:kA.Z,mapInfo:TA.Z}};var KA=r(94184),YA=r.n(KA);function XA(e){return(XA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function QA(){return(QA=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function JA(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function eF(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function tF(e,t){return(tF=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function rF(e,t){return!t||"object"!==XA(t)&&"function"!=typeof t?nF(e):t}function nF(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oF(e){return(oF=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function iF(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var aF=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&tF(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=oF(n);if(o){var r=oF(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return rF(this,e)});function a(){var e;JA(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return iF(nF(e=i.call.apply(i,[this].concat(r))),"state",{is:"active"}),iF(nF(e),"onClick",(function(){return e.props.onClick?e.props.onClick.bind(nF(e)):function(){}})),iF(nF(e),"onDisable",(function(){return e.props.onDisable?e.props.onDisable.bind(nF(e)):function(){}})),iF(nF(e),"onConfirm",(function(){return e.props.onConfirm?e.props.onConfirm():e.props.confirming&&e.props.confirming.onClick?e.props.confirming.onClick():function(){}})),iF(nF(e),"isDisabled",(function(){return"disabled"===e.state.is})),iF(nF(e),"isConfirming",(function(){return"confirming"===e.state.is})),iF(nF(e),"isActive",(function(){return!e.isConfirming()&&!e.isDisabled()})),iF(nF(e),"handleClick",(function(){return e.isConfirming()&&e.props.disableAfterConfirmed?(e.onConfirm(),e.onDisable(),void e.setState({is:"disabled"})):e.isConfirming()?(e.onConfirm(),void e.setState({is:"active"})):(e.onClick(),void e.setState({is:"confirming"}))})),iF(nF(e),"handleBlur",(function(){e.setState({is:"active"})})),e}return t=a,(r=[{key:"render",value:function(){var e=this.props,t=e.children,r=e.buttonProps,n=e.confirming,o=e.disabled,i=this.props,a=i.text,l=i.style,s=i.className,u=void 0===s?"btn btn-sm btn-danger":s,p=this.isDisabled(),f=this.isConfirming();return p&&(a=o&&o.text||"Loading...",u=o&&o.className||"btn btn-sm btn-secondary",l=o&&o.style||{}),f&&(a=n&&n.text||"Confirm?",u=n&&n.className||"btn btn-sm btn-warning",l=n&&n.style||{}),c().createElement("button",QA({className:YA()("confirm-button",u),style:l,onClick:this.handleClick,onBlur:this.handleBlur,disabled:p},r),t,t?" ":"",a)}}])&&eF(t.prototype,r),a}(c().Component);iF(aF,"propTypes",{disableAfterConfirmed:u().bool,resetOnBlur:u().bool,onConfirm:u().func,onDisable:u().func,onClick:u().func,text:u().oneOfType([u().string,u().node]),className:u().string,style:u().object,confirming:u().shape({text:u().oneOfType([u().string,u().node]),className:u().string,style:u().object,onClick:u().func}),disabled:u().shape({text:u().oneOfType([u().string,u().node]),className:u().string,style:u().object}),children:u().node,buttonProps:u().object}),iF(aF,"defaultProps",{resetOnBlur:!0});const lF=aF;var cF="SET_SEARCH_CONFIG_PROP",sF="RESET_SEARCH_CONFIG",uF="UPDATE_SERVICE";function pF(e){return(pF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fF(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dF(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function mF(e,t){return(mF=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function yF(e,t){return!t||"object"!==pF(t)&&"function"!=typeof t?bF(e):t}function bF(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gF(e){return(gF=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vF(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var hF=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&mF(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=gF(n);if(o){var r=gF(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return yF(this,e)});function a(){var e;fF(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return vF(bF(e=i.call.apply(i,[this].concat(r))),"getOptions",(function(){return 0===e.props.services.length?c().createElement("div",{className:"search-service-name"},c().createElement(b.Z,{msgId:"search.serviceslistempty"})):e.props.services.map((function(t,r){return c().createElement("div",{className:"search-service-item",key:r},c().createElement("span",{className:"search-service-name"},t.name),c().createElement(lF,{className:"list-remove-btn",onConfirm:function(){return e.remove(r)},text:c().createElement(g.Glyphicon,{glyph:"remove-circle"}),confirming:{className:"text-warning list-remove-btn",text:c().createElement(b.Z,{msgId:"search.confirmremove"})}}),c().createElement(g.Glyphicon,{onClick:function(){return e.edit(t,r)},glyph:"pencil"}))}))})),vF(bF(e),"edit",(function(t,r){e.props.onPropertyChange("init_service_values",t),e.props.onPropertyChange("service",t),e.props.onPropertyChange("editIdx",r),e.props.onPropertyChange("page",1)})),vF(bF(e),"toggleOverride",(function(){var t=e.props,r=t.services,n=t.override;e.props.onPropertyChange("textSearchConfig",{services:r,override:!n})})),vF(bF(e),"remove",(function(t){var r=e.props,n=r.services,o=r.override,i=n.filter((function(e,r){return r!==t}));e.props.onPropertyChange("textSearchConfig",{services:i,override:o})})),e}return t=a,(r=[{key:"render",value:function(){var e=this.props.override;return c().createElement("form",null,c().createElement(g.FormGroup,null,c().createElement(g.ControlLabel,null,c().createElement(b.Z,{msgId:"search.serviceslistlabel"})),c().createElement("div",{className:"services-list"},this.getOptions())),c().createElement(g.Checkbox,{checked:e,onChange:this.toggleOverride},c().createElement(b.Z,{msgId:"search.overriedservice"})))}}])&&dF(t.prototype,r),a}(c().Component);vF(hF,"propTypes",{services:u().array,override:u().bool,service:u().object,onPropertyChange:u().func}),vF(hF,"contextTypes",{messages:u().object}),vF(hF,"defaultProps",{services:[],override:!1,onPropertyChange:function(){}});const OF={Element:hF,validate:function(){return!0}};function wF(e){return(wF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function EF(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function SF(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function PF(e,t){return(PF=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function jF(e,t){return!t||"object"!==wF(t)&&"function"!=typeof t?CF(e):t}function CF(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xF(e){return(xF=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function TF(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var kF=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&PF(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=xF(n);if(o){var r=xF(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return jF(this,e)});function a(){var e;EF(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return TF(CF(e=i.call.apply(i,[this].concat(r))),"updateProp",(function(t,r){var n=r.target.value;"queriableAttributes"===t&&(n=n.split(","));var o=le()({},e.props.service.options,TF({},t,n));e.props.onPropertyChange("service",le()({},e.props.service,{options:o}))})),TF(CF(e),"updateName",(function(t){var r=t.target.value;e.props.onPropertyChange("service",le()({},e.props.service,{name:r}))})),TF(CF(e),"updateMaxFeatures",(function(t){var r=le()({},e.props.service.options,{maxFeatures:parseFloat(t[0],10)});e.props.onPropertyChange("service",le()({},e.props.service,{options:r}))})),e}return t=a,(r=[{key:"render",value:function(){var e=this.props.service,t=e.options,r=void 0===t?{}:t;return c().createElement("form",null,c().createElement("span",{className:"wfs-required-props-title"},c().createElement(b.Z,{msgId:"search.s_wfs_props_label"})),c().createElement(g.FormGroup,null,c().createElement(g.ControlLabel,null,c().createElement(b.Z,{msgId:"search.s_name"})),c().createElement(g.FormControl,{value:e.name,key:"name",type:"text",onChange:this.updateName})),c().createElement(g.FormGroup,null,c().createElement(g.ControlLabel,null,c().createElement(b.Z,{msgId:"search.s_url"})),c().createElement(g.FormControl,{value:r.url,key:"url",type:"text",onChange:this.updateProp.bind(null,"url")})),c().createElement(g.FormGroup,null,c().createElement(g.ControlLabel,null,c().createElement(b.Z,{msgId:"search.s_layer"})),c().createElement(g.FormControl,{value:r.typeName,key:"typeName",type:"text",onChange:this.updateProp.bind(null,"typeName")})),c().createElement(g.FormGroup,null,c().createElement(g.ControlLabel,null,c().createElement(b.Z,{msgId:"search.s_attributes"})),c().createElement(g.FormControl,{value:([r.queriableAttributes]||0).join(","),key:"queriableAttributes",type:"text",onChange:this.updateProp.bind(null,"queriableAttributes")})))}}])&&SF(t.prototype,r),a}(c().Component);TF(kF,"propTypes",{service:u().object,onPropertyChange:u().func}),TF(kF,"defaultProps",{service:{},onPropertyChange:function(){}});const IF={Element:kF,validate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,r=void 0===t?{}:t,n=e.name,o=void 0===n?"":n,i=r.url,a=void 0===i?"":i,l=r.typeName,c=void 0===l?"":l,s=r.queriableAttributes,u=void 0===s?"":s;return o.length>0&&a.length>0&&c.length>0&&u.length>0}};function AF(e){return(AF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function FF(){return(FF=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function DF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function RF(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?DF(Object(r),!0).forEach((function(t){zF(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):DF(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function NF(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function MF(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function LF(e,t){return(LF=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _F(e,t){return!t||"object"!==AF(t)&&"function"!=typeof t?ZF(e):t}function ZF(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function BF(e){return(BF=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function zF(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var GF=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&LF(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=BF(n);if(o){var r=BF(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return _F(this,e)});function a(){var e;NF(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return zF(ZF(e=i.call.apply(i,[this].concat(r))),"updateProp",(function(t,r,n){var o=d()(n,r||"target.value");e.props.onPropertyChange("service",le()({},e.props.service,zF({},t,o)))})),zF(ZF(e),"updatePriority",(function(t){e.props.onPropertyChange("service",le()({},e.props.service,{priority:parseFloat(t[0],10)}))})),zF(ZF(e),"updateLaunchInfoPanel",(function(t){var r=t&&t.value?t.value:"";"no_info"===r&&(r=void 0),e.props.onPropertyChange("service",RF(RF({},e.props.service),{},{launchInfoPanel:r,openFeatureInfoButtonEnabled:!1,forceSearchLayerVisibility:!1}))})),e}return t=a,(r=[{key:"render",value:function(){var e,t,r=this.props.service,n=this.props.launchInfoPanelOptions||[{label:(0,ie.S$)(this.context.messages,"search.s_launch_info_panel.no_info"),value:"no_info"},{label:(0,ie.S$)(this.context.messages,"search.s_launch_info_panel.all_layers"),value:"all_layers"},{label:(0,ie.S$)(this.context.messages,"search.s_launch_info_panel.single_layer"),value:"single_layer"}],o=(null==r?void 0:r.launchInfoPanel)||this.props.launchInfoPanelDefault;return c().createElement("form",null,c().createElement("span",{className:"wfs-required-props-title"},c().createElement(b.Z,{msgId:"search.s_result_props_label"})),c().createElement(g.FormGroup,null,c().createElement(g.ControlLabel,null,c().createElement(b.Z,{msgId:"search.s_title"})),c().createElement(g.FormControl,{value:r.displayName,key:"displayName",type:"text",placeholder:'e.g. "${properties.name}"',onChange:this.updateProp.bind(null,"displayName",null)})),c().createElement(g.FormGroup,null,c().createElement(g.ControlLabel,null,c().createElement(b.Z,{msgId:"search.s_description"})),c().createElement(g.FormControl,{value:r.subTitle,key:"subTitle",type:"text",onChange:this.updateProp.bind(null,"subTitle",null)})),c().createElement(g.FormGroup,null,c().createElement(g.ControlLabel,null,c().createElement(b.Z,{msgId:"search.s_priority"}),c().createElement(g.Label,{key:"priority-label",className:"slider-label"},parseInt(r.priority||1,10))),c().createElement(Io(),{key:"priority",start:[r.priority||1],step:1,range:{min:1,max:10},onSlide:this.updatePriority}),c().createElement("span",{className:"priority-info"},c().createElement(b.Z,{msgId:"search.s_priority_info"}))),c().createElement(g.FormGroup,null,c().createElement(g.ControlLabel,null,c().createElement(b.Z,{msgId:"search.s_launch_info_panel.label"})),c().createElement(Hr.ZP,FF({options:n,clearable:!1,value:o,onChange:this.updateLaunchInfoPanel},this.props.launchInfoPanelSelectOptions)),"single_layer"===o?c().createElement(g.FormGroup,null,c().createElement(g.Checkbox,{checked:null!==(e=null==r?void 0:r.openFeatureInfoButtonEnabled)&&void 0!==e&&e,onChange:this.updateProp.bind(null,"openFeatureInfoButtonEnabled","target.checked")},c().createElement(b.Z,{msgId:"search.s_launch_info_panel.openFeatureInfoButtonCheckbox"})),c().createElement(g.Checkbox,{checked:null!==(t=null==r?void 0:r.forceSearchLayerVisibility)&&void 0!==t&&t,onChange:this.updateProp.bind(null,"forceSearchLayerVisibility","target.checked")},c().createElement(b.Z,{msgId:"search.s_launch_info_panel.forceSearchLayerVisibility"}))):null,c().createElement("span",{className:"priority-info with-top-margin"},c().createElement(b.Z,{msgId:"search.s_launch_info_panel.".concat(o,"_description")}))))}}])&&MF(t.prototype,r),a}(c().Component);zF(GF,"propTypes",{service:u().object,launchInfoPanelOptions:u().array,launchInfoPanelDefault:u().string,launchInfoPanelSelectOptions:u().object,onPropertyChange:u().func}),zF(GF,"contextTypes",{messages:u().object}),zF(GF,"defaultProps",{service:{},launchInfoPanelDefault:"no_info",launchInfoPanelSelectOptions:{},onPropertyChange:function(){}});const UF={Element:GF,validate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.displayName&&e.displayName.length>0}};function WF(e){return(WF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function VF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function qF(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?VF(Object(r),!0).forEach((function(t){JF(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):VF(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function HF(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $F(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function KF(e,t){return(KF=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function YF(e,t){return!t||"object"!==WF(t)&&"function"!=typeof t?XF(e):t}function XF(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function QF(e){return(QF=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function JF(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var eD=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&KF(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=QF(n);if(o){var r=QF(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return YF(this,e)});function a(){var e;HF(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return JF(XF(e=i.call.apply(i,[this].concat(r))),"updateProp",(function(t,r){var n=r.target.value,o=le()({},e.props.service.options,JF({},t,n));e.props.onPropertyChange("service",le()({},e.props.service,{options:o}))})),JF(XF(e),"updateSliderProps",(function(t,r){var n=qF(qF({},e.props.service.options),{},JF({},t,parseInt(r[0],10)));e.props.onPropertyChange("service",qF(qF({},e.props.service),{},{options:n}))})),e}return t=a,(r=[{key:"render",value:function(){var e=this.props.service.options,t=void 0===e?{}:e;return c().createElement("form",null,c().createElement("span",{className:"wfs-required-props-title"},c().createElement(b.Z,{msgId:"search.s_wfs_opt_props_label"})),c().createElement(g.FormGroup,null,c().createElement(g.ControlLabel,null,c().createElement(b.Z,{msgId:"search.s_sort"})),c().createElement(g.FormControl,{value:t.sortBy,key:"sortBy",type:"text",onChange:this.updateProp.bind(null,"sortBy")})),c().createElement(g.FormGroup,null,c().createElement(g.ControlLabel,null,c().createElement(b.Z,{msgId:"search.s_max_features"})),c().createElement(Io(),{key:"maxFeatures",start:[t.maxFeatures||1],range:{min:1,max:50},onSlide:this.updateSliderProps.bind(null,"maxFeatures")}),c().createElement(g.Label,{key:"maxFeatures-label",className:"slider-label"},t.maxFeatures||1)),c().createElement(g.FormGroup,null,c().createElement(g.ControlLabel,null,c().createElement(b.Z,{msgId:"search.s_max_zoom"})),c().createElement(Io(),{key:"maxZoomLevel",start:[t.maxZoomLevel||21],range:{min:1,max:35},onSlide:this.updateSliderProps.bind(null,"maxZoomLevel")}),c().createElement(g.Label,{key:"maxZoomLevel-label",className:"slider-label"},t.maxZoomLevel||21)))}}])&&$F(t.prototype,r),a}(c().Component);JF(eD,"propTypes",{service:u().object,onPropertyChange:u().func}),JF(eD,"defaultProps",{service:{},onPropertyChange:function(){}});const tD={Element:eD,validate:function(){return!0}};function rD(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nD(e){return(nD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function iD(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?oD(Object(r),!0).forEach((function(t){fD(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oD(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function aD(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lD(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function cD(e,t){return(cD=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function sD(e,t){return!t||"object"!==nD(t)&&"function"!=typeof t?uD(e):t}function uD(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pD(e){return(pD=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fD(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var dD=(0,$e.Z)(Je.Z),mD=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&cD(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=pD(n);if(o){var r=pD(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return sD(this,e)});function a(){var e;aD(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return fD(uD(e=i.call.apply(i,[this].concat(r))),"canProceed",(function(){var t=e.props,r=t.page,n=t.pages,o=t.service;return n[r].validate(o)})),fD(uD(e),"isDirty",(function(){var t=e.props,r=t.service,n=t.initServiceValues;return!Nr()(r,n)})),fD(uD(e),"renderFooter",(function(){var t=e.props,r=t.page,n=t.pages;return 0===r?c().createElement("span",{role:"footer"},c().createElement(dD,{onClick:e.addService,bsStyle:"primary"},c().createElement(jt.Z,{msgId:"search.addbtn"}))):r===n.length-1?c().createElement("span",{role:"footer"},c().createElement(dD,{onClick:e.prev,bsStyle:"primary"},c().createElement(jt.Z,{msgId:"search.prevbtn"})),c().createElement(dD,{disabled:!e.canProceed(),onClick:e.update,bsStyle:"success"},c().createElement(jt.Z,{msgId:"search.savebtn"}))):c().createElement("span",{role:"footer"},1===r&&e.isDirty()?c().createElement(lF,{onConfirm:e.prev,bsStyle:"primary",confirming:{text:c().createElement(jt.Z,{msgId:"search.cancelconfirm"})},text:c().createElement(jt.Z,{msgId:"search.cancelbtn"})}):c().createElement(dD,{onClick:e.prev,bsStyle:"primary"},c().createElement(jt.Z,{msgId:1===r?"search.cancelbtn":"search.prevbtn"})),c().createElement(dD,{disabled:!e.canProceed(),onClick:e.next,bsStyle:"primary"},c().createElement(jt.Z,{msgId:"search.nextbtn"})))})),fD(uD(e),"onClose",(function(){e.props.toggleControl("searchservicesconfig"),e.props.restServiceConfig(0)})),fD(uD(e),"addService",(function(){var t=e.props.newService;e.props.onPropertyChange("init_service_values",t),e.props.onPropertyChange("service",t),e.props.onPropertyChange("page",1)})),fD(uD(e),"prev",(function(){var t=e.props.page;t>1?e.props.onPropertyChange("page",t-1):1===t&&e.props.restServiceConfig(0)})),fD(uD(e),"next",(function(){var t=e.props,r=t.page;r<t.pages.length-1&&e.props.onPropertyChange("page",r+1)})),fD(uD(e),"update",(function(){var t=e.props,r=t.service,n=t.editIdx;e.props.updateService(r,n)})),e}return t=a,(r=[{key:"render",value:function(){var e=this.props,t=e.enabled,r=e.pages,n=e.page,o=e.id,i=e.panelStyle,a=e.panelClassName,l=e.titleText,s=e.closeGlyph,u=e.onPropertyChange,p=e.service,f=e.textSearchConfig,d=void 0===f?{}:f,y=e.containerClassName,b=r&&r[n]||null;return t?c().createElement(m.Z,null,c().createElement(zn.Z,{id:o,style:iD(iD({},i),{},{display:t?"block":"none"}),containerClassName:y,className:a,draggable:!1,modal:!0},c().createElement("span",{role:"header"},c().createElement("span",null,l),this.isDirty()?c().createElement(lF,{className:"close",confirming:{text:c().createElement(jt.Z,{msgId:"search.cancelconfirm"}),className:"btn btn-sm btn-warning services-config-editor-confirm-close"},onConfirm:this.onClose,bsStyle:"primary",text:c().createElement(g.Glyphicon,{glyph:s})}):c().createElement("button",{onClick:this.onClose,className:"close"},s?c().createElement(g.Glyphicon,{glyph:s}):c().createElement("span",null,"×"))),c().createElement("div",{role:"body",className:"services-config-editor"},c().createElement(b.Element,{services:d.services,override:d.override,onPropertyChange:u,service:p})),this.renderFooter())):null}}])&&lD(t.prototype,r),a}(c().Component);fD(mD,"propTypes",{id:u().string,enabled:u().bool,panelStyle:u().object,panelClassName:u().string,containerClassName:u().string,closeGlyph:u().string,titleText:u().oneOfType([u().string,u().element]),toggleControl:u().func,pages:u().arrayOf(u().shape({Element:u().func.isRequired,validate:u().func.isRequired})),page:u().number,service:u().object,initServiceValues:u().object,onPropertyChange:u().func,newService:u().object.isRequired,updateService:u().func,restServiceConfig:u().func,textSearchConfig:u().object,editIdx:u().number}),fD(mD,"defaultProps",{id:"search-services-config-editor",enabled:!1,panelStyle:{minWidth:"400px",zIndex:2e3,position:"absolute",top:"100px",minHeight:"300px",left:"calc(50% - 150px)",backgroundColor:"white"},panelClassName:"toolbar-panel",containerClassName:"",closeGlyph:"1-close",titleText:c().createElement(jt.Z,{msgId:"search.configpaneltitle"}),closePanel:function(){},onPropertyChange:function(){},page:0,newService:{type:"wfs",name:"",displayName:"",subTitle:"",priority:1,options:{url:"",typeName:"",queriableAttributes:"",sortBy:"",maxFeatures:5,srsName:"EPSG:4326"}}});var yD=(0,p.connect)((function(e){var t=e.controls,r=void 0===t?{}:t,n=e.searchconfig,o=void 0===n?{}:n;return{enabled:r.searchservicesconfig&&r.searchservicesconfig.enabled||!1,pages:[OF,IF,UF,tD],page:o&&o.page||0,service:o&&o.service,initServiceValues:o&&o.init_service_values,textSearchConfig:o&&o.textSearchConfig,editIdx:o&&o.editIdx}}),{toggleControl:v.Xi,onPropertyChange:function(e,t){return{type:cF,property:e,value:t}},restServiceConfig:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return{type:sF,page:e}},updateService:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;return{type:uF,service:e,idx:t}}})(mD),bD=(0,p.connect)((0,D.P1)([function(e){return e.search||null},function(e){var t,r;return(null==e||null===(t=e.controls)||void 0===t||null===(r=t.searchservicesconfig)||void 0===r?void 0:r.enabled)||!1}],(function(e,t){return{activeTool:d()(e,"activeSearchTool","addressSearch"),enabled:t}})),{onToggleControl:v.Xi})((function(e){var t=e.activeTool,r=e.enabled,n=e.onToggleControl;return"addressSearch"===t?c().createElement(dD,{bsStyle:"default",pullRight:!0,className:"square-button-md no-border",tooltipId:"search.searchservicesbutton",tooltipPosition:"bottom",onClick:function(){r||n("searchservicesconfig")}},c().createElement(g.Glyphicon,{glyph:"cog"})):null}));const gD=(0,O.rx)("SearchServicesConfig",{component:yD,containers:{Search:{name:"SearchServicesConfigButton",target:"button",component:bD}},reducers:{searchconfig:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case cF:return le()({},e,rD({},t.property,t.value));case IE.ok:var r=t.config.map.text_search_config||t.config.map.text_serch_config;return le()({},e,{textSearchConfig:r});case v.l:case sF:return le()({},e,{service:void 0,page:t.page,init_service_values:void 0,editIdx:void 0});case uF:var n=(e.textSearchConfig&&e.textSearchConfig.services||[]).slice(),o=le()({},t.service,{priority:parseInt(t.service.priority,10)});return-1!==t.idx?n[t.idx]=o:n.push(o),le()({},e,{service:void 0,page:0,init_service_values:void 0,editIdx:void 0,textSearchConfig:{services:n,override:e.textSearchConfig&&e.textSearchConfig.override||!1}});default:return e}}}});var vD="SWIPE:SET_ACTIVE",hD="SWIPE:SET_MODE",OD="SWIPE:SET_SWIPE_TOOL_DIRECTION",wD="SWIPE:SET_SPY_TOOL_RADIUS";function ED(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"active";return{type:vD,active:e,prop:t}}function SD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function PD(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?SD(Object(r),!0).forEach((function(t){jD(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):SD(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function jD(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const CD={resetLayerSwipeSettingsEpic:function(e,t){return e.ofType(h.c7).switchMap((function(e){var r=e.nodeType,n=t.getState();return $(n).active&&"group"===r?oa.Observable.of(ED(!1)):oa.Observable.empty()}))},deactivateSwipeToolOnSwitchMaps:function(e,t){return e.ofType(by.nk).switchMap((function(){return $(t.getState()).active?oa.Observable.of(ED(!1)):oa.Observable.empty()}))}};function xD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function TD(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?xD(Object(r),!0).forEach((function(t){kD(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xD(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function kD(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ID=[{label:"Horizontal",value:"cut-horizontal"},{label:"Vertical",value:"cut-vertical"}],AD=function(e){var t=e.spyModeSettings,r=e.onSetSpyToolRadius;return c().createElement("div",{className:"mapstore-swipe-settings-spy"},c().createElement("h4",null,c().createElement(b.Z,{msgId:"toc.radius"})),c().createElement("div",{className:"mapstore-slider with-tooltip"},c().createElement(Io(),{tooltips:!0,step:10,start:[t.radius],range:{min:[20],max:[100]},onChange:function(e){return r(e[0])}})))},FD=function(e){var t=e.swipeModeSettings,r=e.onSetSwipeToolDirection;return c().createElement("div",{className:"mapstore-swipe-settings-slider"},c().createElement("h4",null,c().createElement(b.Z,{msgId:"toc.direction"})),c().createElement(Hr.ZP,{styles:{menuPortal:function(e){return TD(TD({},e),{},{zIndex:3100})}},onChange:function(e){var t=e.value;return r(t)},clearable:!1,value:ye()(ID,["value",t.direction]),options:ID}))},DD=(0,D.P1)([$,Y,K],(function(e,t,r){return{configuring:(null==e?void 0:e.configuring)||!1,toolMode:(null==e?void 0:e.mode)||"swipe",swipeModeSettings:t,spyModeSettings:r}}));const RD=(0,p.connect)(DD,{onSetConfigurationActive:ED,onSetSwipeToolDirection:function(e){return{type:OD,direction:e}},onSetSpyToolRadius:function(e){return{type:wD,radius:e}}})((function(e){var t=e.configuring,r=e.toolMode,n=e.swipeModeSettings,o=e.spyModeSettings,i=e.onSetConfigurationActive,a=void 0===i?function(){}:i,l=e.onSetSpyToolRadius,s=void 0===l?function(){}:l,u=e.onSetSwipeToolDirection,p=void 0===u?function(){}:u;return c().createElement("div",{className:"mapstore-swipe-settings"},c().createElement(Bn.Z,{title:"spy"===r?c().createElement(b.Z,{msgId:"toc.spyconfiguration"}):c().createElement(b.Z,{msgId:"toc.swipeconfiguration"}),open:t,onClose:function(){return a(!1,"configuring")},enableFooter:!1,draggable:!0,size:"xs",bodyClassName:"mapstore-swipe-setiings-modal-body",dialogClassName:" mapstore-swipe-settings-modal",glyph:"transfer"},"spy"===r?c().createElement(AD,{spyModeSettings:o,onSetSpyToolRadius:s}):c().createElement(FD,{swipeModeSettings:n,onSetSwipeToolDirection:p})))}));var ND=r(85294),MD=r.n(ND);const LD=function(e){var t=e.map,r=e.layer,n=e.type,o=e.getWidth,i=e.getHeight,a=e.circleCutProp,c=(0,l.useCallback)((function(e){var r=e.context,n=o()*t.pixelRatio_;r.save(),r.beginPath(),r.rect(n,0,r.canvas.width-n,r.canvas.height),r.strokeStyle="rgba(0,0,0,0.5)",r.clip()}),[r,n]),s=(0,l.useCallback)((function(e){e.context.restore()}),[r,n]),u=(0,l.useCallback)((function(e){var r=e.context,n=i()*t.pixelRatio_;r.save(),r.beginPath(),r.rect(0,n,r.canvas.width,r.canvas.height-n),r.clip()}),[r,n]),p=(0,l.useCallback)((function(e){var t=e.context,r=e.frameState.pixelRatio;t.save(),t.beginPath();var n=a.getMousePosition();n&&(t.arc(n[0]*r,n[1]*r,a.radius*r,0,2*Math.PI),t.lineWidth=5*r,t.strokeStyle="rgba(0,0,0,0.5)",t.stroke()),t.clip()}),[r,n,a]);return(0,l.useEffect)((function(){var e=t.getLayers().getArray().filter((function(e){return e.get("msId")===r}))[0];if(e){switch(n){case"cut-vertical":!function(e,t,r){e.on("precompose",t),e.on("postcompose",r)}(e,c,s);break;case"cut-horizontal":!function(e,t,r){e.on("precompose",t),e.on("postcompose",r)}(e,u,s);break;case"circle":!function(e,t,r){e.on("precompose",t),e.on("postcompose",r)}(e,p,s)}return t.render(),function(){e.un("precompose",c),e.un("precompose",u),e.un("precompose",p),e.un("postcompose",s),t.render()}}return function(){return t.render()}}),[r,n,a]),null};function _D(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=r){var n,o,i=[],a=!0,l=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ZD(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ZD(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ZD(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var BD=function(e){var t=e.type,r=e.map,n=e.widthRef,o=_D((0,l.useState)(),2),i=o[0],a=o[1],s=_D((0,l.useState)(!0),2),u=s[0],p=s[1],f=function(){a({x:0,y:0}),n.current=r.getProperties().size[0]/2};return(0,l.useEffect)((function(){return window.addEventListener("resize",f),function(){window.removeEventListener("resize",f)}}),[t]),(0,l.useEffect)((function(){n.current=r.getProperties().size[0]/2}),[t]),c().createElement(MD(),{position:i,bounds:"parent",onStart:function(){return p(!1)},onDrag:function(e,t){return function(e,t){n.current+=t.deltaX,a({x:t.x,y:t.y}),r.render()}(0,t)},onStop:function(){return p(!0)}},c().createElement("div",{className:"mapstore-swipe-slider",style:{height:"100%",top:"0px",left:"".concat(r.getProperties().size[0]/2,"px"),width:"8px",cursor:"col-resize"}},u&&c().createElement("div",{className:"ms-vertical-swipe-slider-arrows",style:{top:"".concat(r.getProperties().size[1]/2-26,"px")}},c().createElement("div",{className:"ms-slider-arrows"},c().createElement(g.Glyphicon,{glyph:"chevron-left"})),c().createElement("div",{className:"ms-slider-arrows"},c().createElement(g.Glyphicon,{glyph:"chevron-right"})))))},zD=function(e){var t=e.type,r=e.map,n=e.heightRef,o=_D((0,l.useState)(),2),i=o[0],a=o[1],s=_D((0,l.useState)(!0),2),u=s[0],p=s[1],f=function(){a({x:0,y:0}),n.current=r.getProperties().size[1]/2};return(0,l.useEffect)((function(){return window.addEventListener("resize",f),function(){window.removeEventListener("resize",f)}}),[t]),(0,l.useEffect)((function(){n.current=r.getProperties().size[1]/2}),[t]),c().createElement(MD(),{position:i,bounds:"parent",onStart:function(){return p(!1)},onDrag:function(e,t){return function(e,t){n.current+=t.deltaY,a({x:t.x,y:t.y}),r.render()}(0,t)},onStop:function(){return p(!0)}},c().createElement("div",{className:"mapstore-swipe-slider",style:{height:"8px",top:"".concat(r.getProperties().size[1]/2,"px"),left:"0px",width:"100%",cursor:"row-resize"}},u&&c().createElement("div",{className:"ms-horizontal-swipe-slider-arrows",style:{left:"".concat(r.getProperties().size[0]/2-26,"px")}},c().createElement("div",{className:"ms-slider-arrows"},c().createElement(g.Glyphicon,{glyph:"chevron-up"})),c().createElement("div",{className:"ms-slider-arrows"},c().createElement(g.Glyphicon,{glyph:"chevron-down"})))))};const GD=function(e){var t=e.map,r=e.layer,n=e.type,o=void 0===n?"cut-vertical":n,i=e.active,a=(0,l.useRef)(),s=(0,l.useRef)();return r&&i?c().createElement(c().Fragment,null,"cut-vertical"===o&&c().createElement(BD,{widthRef:s,map:t,type:o}),"cut-horizontal"===o&&c().createElement(zD,{heightRef:a,map:t,type:o}),c().createElement(LD,{map:t,layer:r,type:o,getWidth:function(){return s.current},getHeight:function(){return a.current}})):null},UD=function(e){var t=e.layer,r=e.map,n=e.active,o=e.radius,i=(0,l.useRef)(),a=(0,l.useCallback)((function(e){i.current=r.getEventPixel(e),r.render()}),[t,o]),s=(0,l.useCallback)((function(){i.current=null,r.render()}),[t,o]);(0,l.useEffect)((function(){var e=r.getTargetElement();return e.addEventListener("mousemove",a),e.addEventListener("mouseout",s),function(){e.removeEventListener("mousemove",a),e.removeEventListener("mouseout",s)}}),[]);var u={radius:o,getMousePosition:function(){return i.current}};return t&&n?c().createElement(LD,{map:r,layer:t,type:"circle",circleCutProp:u}):null};function WD(){return(WD=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var VD=(0,$e.Z)(g.SplitButton),qD={title:c().createElement(g.Glyphicon,{glyph:"transfer"}),tooltipId:"toc.compareTool",tooltipPosition:"top",className:"square-button-md no-border",pullRight:!0},HD=function(e){var t=e.swipeSettings,r=e.onSetActive,n=e.onSetSwipeMode,o=e.status;return c().createElement(VD,WD({onClick:function(){t.active||"LAYER"!==o?r(!1):r(!0)},bsStyle:null!=t&&t.active?"success":"primary"},qD),c().createElement(g.MenuItem,{active:"swipe"===(null==t?void 0:t.mode),onClick:function(){n("swipe"),r(!0)}},c().createElement(g.Glyphicon,{glyph:"vert-dashed"}),c().createElement(b.Z,{msgId:"toc.swipe"})),c().createElement(g.MenuItem,{active:"spy"===(null==t?void 0:t.mode),onClick:function(){n("spy"),r(!0)}},c().createElement(g.Glyphicon,{glyph:"search"}),c().createElement(b.Z,{msgId:"toc.spyGlass"})),c().createElement(g.MenuItem,{onClick:function(){t.configuring||"LAYER"!==o?r(!1,"configuring"):r(!0,"configuring")}},c().createElement(g.Glyphicon,{glyph:"cog"}),c().createElement(b.Z,{msgId:"toc.configureTool"})))};HD.propTypes={swipeSettings:u().object,status:u().string,onSetActive:u().func,onSetSwipeMode:u().func},HD.defaultProps={status:"LAYER",onSetSwipeMode:function(){},onSetActive:function(){}};const $D=HD;var KD=(0,D.P1)([H.Iz,$,Y,K],(function(e,t,r,n){return{layer:null==e?void 0:e.id,active:t.active||!1,swipeModeSettings:r,spyModeSettings:n,mode:(null==t?void 0:t.mode)||"swipe"}})),YD=(0,p.connect)(KD,null)((function(e){var t=e.mode,r=e.map,n=e.layer,o=e.active,i=e.swipeModeSettings,a=e.spyModeSettings;return"spy"===t?c().createElement(UD,{map:r,layer:n,active:o,radius:a.radius}):c().createElement(GD,{map:r,layer:n,active:o,type:i.direction})}));const XD=(0,O.rx)("Swipe",{options:{disablePluginIf:"{state('mapType') === 'leaflet' || state('mapType') === 'cesium'}"},component:RD,containers:{TOC:{name:"Swipe",target:"toolbar",selector:function(e){return"LAYER"===e.status},Component:(0,p.connect)((0,D.P1)($,(function(e){return{swipeSettings:e}})),{onSetActive:ED,onSetSwipeMode:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"swipe";return{type:hD,mode:e}}})($D)},Map:{name:"Swipe",Tool:YD}},reducers:{swipe:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case vD:return le()({},e,jD({},t.prop,t.active));case hD:return le()({},e,{mode:t.mode});case OD:var r=PD(PD({},e.swipe),{},{direction:t.direction});return le()({},e,{swipe:r});case wD:var n=PD(PD({},e.spy),{},{radius:t.radius});return le()({},e,{spy:n});default:return e}}},epics:CD});r(52780);var QD="CHANGE_LOCATE_STATE",JD="LOCATE_ERROR";function eR(e){return{type:QD,state:e}}var tR=r(97671),rR=r.n(tR);function nR(e){return(nR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oR(){return(oR=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function iR(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function aR(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function lR(e,t){return(lR=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function cR(e,t){return!t||"object"!==nR(t)&&"function"!=typeof t?sR(e):t}function sR(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function uR(e){return(uR=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pR(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.e(610).then(r.t.bind(r,10844,23));var fR=!1,dR=!1,mR=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&lR(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=uR(n);if(o){var r=uR(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return cR(this,e)});function a(){var e;iR(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return pR(sR(e=i.call.apply(i,[this].concat(r))),"onClick",(function(){var t;switch(e.props.locate){case"FOLLOWING":t="DISABLED";break;case"ENABLED":t="FOLLOWING";break;case"DISABLED":t="ENABLED";break;case"LOCATING":case"PERMISSION_DENIED":t="DISABLED"}e.props.onClick(t)})),pR(sR(e),"renderButton",(function(){var t="PERMISSION_DENIED"===e.props.locate;return c().createElement(Je.Z,oR({id:e.props.id,disabled:t},e.props.btnConfig,{onClick:e.onClick,bsStyle:e.getBtnStyle(),style:e.props.style}),c().createElement(g.Glyphicon,{glyph:e.props.glyph}),e.props.text,e.props.help)})),pR(sR(e),"renderLoadingButton",(function(){var t=c().createElement("img",{src:rR(),style:{display:"inline-block",margin:"0px",padding:0,background:"transparent",border:0},alt:"..."});return c().createElement(Je.Z,oR({id:e.props.id,onClick:e.onClick},e.props.btnConfig,{bsStyle:e.getBtnStyle(),style:e.props.style}),t)})),pR(sR(e),"addTooltip",(function(t){var r=c().createElement(g.Tooltip,{id:"locate-tooltip"},c().createElement(b.Z,{msgId:e.props.tooltip}));return c().createElement(Xe.Z,{placement:e.props.tooltipPlace,key:"{overlay-trigger.".concat(e.props.id,"-").concat(e.props.tooltip,"}"),overlay:r},t)})),pR(sR(e),"getBtnStyle",(function(){var t=e.props,r=t.locate,n=t.bsStyle;return"FOLLOWING"!==r&&"ENABLED"!==r||(n="success active"),n})),e}return t=a,(r=[{key:"UNSAFE_componentWillMount",value:function(){var e=this;"PERMISSION_DENIED"===this.props.locate||fR||dR||(fR=!0,navigator.geolocation.getCurrentPosition((function(){fR=!1,dR=!0}),(function(t){fR=!1,1===t.code&&e.props.onClick("PERMISSION_DENIED")})))}},{key:"render",value:function(){var e="LOCATING"===this.props.locate?this.renderLoadingButton():this.renderButton();return this.props.tooltip?this.addTooltip(e):e}}])&&aR(t.prototype,r),a}(c().Component);pR(mR,"propTypes",{id:u().string,hide:u().bool,btnConfig:u().object,text:u().oneOfType([u().string,u().element]),help:u().oneOfType([u().string,u().element]),locate:u().string,onClick:u().func,tooltip:u().element,tooltipPlace:u().string,style:u().object,bsStyle:u().string,glyph:u().string}),pR(mR,"defaultProps",{id:"locate-btn",onClick:function(){},locate:"DISABLED",tooltipPlace:"left",bsStyle:"default",glyph:"1-position-1",btnConfig:{className:"square-button"}});const yR=mR;var bR=r(86450);function gR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function vR(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?gR(Object(r),!0).forEach((function(t){hR(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gR(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function hR(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function OR(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var wR=(0,p.connect)((function(e){return{locate:e.locate&&e.locate.state||"DISABLED",tooltip:e.locate&&"FOLLOWING"===e.locate.state?"locate.tooltipDeactivate":"locate.tooltip"}}),{onClick:eR})(yR);const ER=(0,O.rx)("Locate",{component:wR,options:{disablePluginIf:"{state('mapType') === 'cesium'}"},containers:{Toolbar:{name:"locate",position:2,tool:!0,icon:c().createElement(g.Glyphicon,{glyph:"screenshot"}),help:c().createElement(jt.Z,{msgId:"helptexts.locateBtn"}),priority:1},Map:{name:"Locate",Tool:(0,p.connect)((function(e){return{status:e.locate&&e.locate.state,messages:e.locale&&e.locale.messages?e.locale.messages.locate:void 0}}),{changeLocateState:eR,onLocateError:function(e){return{type:JD,error:e}}})((function(e){var t,r,n=e.map,o=e.mapType,i=e.status,a=e.messages,c=e.maxZoom,s=e.changeLocateState,u=e.onLocateError,p=e.rateControl,f=(0,l.useRef)(),d=(t=(0,bR.default)(o,"locate"),r=3,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=r){var n,o,i=[],a=!0,l=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(l)throw o}}return i}}(t,r)||function(e,t){if(e){if("string"==typeof e)return OR(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?OR(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),m=d[0],y=d[1],b=d[2];(0,l.useEffect)((function(){b&&u(b)}),[b]);var g=function(e){i!==e&&s(e)},v=function(e){u(e.message),s("DISABLED")};function h(){return{locateOptions:vR(vR({},void 0!==c&&{maxZoom:c}),void 0!==p&&{rateControl:p})}}return(0,l.useEffect)((function(){if(m){var e=h();f.current=new y,f.current.start({map:n,options:e,messages:a,status:i,onStateChange:g,onLocationError:v})}return function(){var e;null===(e=f.current)||void 0===e||e.clear()}}),[m]),(0,l.useEffect)((function(){var e,t=h();null===(e=f.current)||void 0===e||e.update({status:i,messages:a,options:t})}),[i,a,m,c]),null})),priority:1}},reducers:{locate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{state:"DISABLED"},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case QD:return le()({},e,{state:t.state});case JD:return le()({},e,{error:t.error});default:return e}}}});var SR="LAYERDOWNLOAD:CHECK_WPS_AVAILABILITY",PR="LAYERDOWNLOAD:CHECKING_WPS_AVAILABILITY",jR="LAYERDOWNLOAD:DOWNLOAD_FEATURES",CR="LAYERDOWNLOAD:DOWNLOAD_FINISHED",xR="LAYERDOWNLOAD:FORMAT_SELECTED",TR="LAYERDOWNLOAD:CLEAR_DOWNLOAD_OPTIONS",kR="LAYERDOWNLOAD:FORMAT_FETCH",IR="LAYERDOWNLOAD:FORMAT_UPDATE",AR="LAYERDOWNLOAD:SET_SERVICE",FR="LAYERDOWNLOAD:SET_EXPORT_DATA_RESULTS",DR="LAYERDOWNLOAD:ADD_EXPORT_DATA_RESULT",RR="LAYERDOWNLOAD:UPDATE_EXPORT_DATA_RESULT",NR="LAYERDOWNLOAD:REMOVE_EXPORT_DATA_RESULT",MR="LAYERDOWNLOAD:REMOVE_EXPORT_DATA_RESULTS",LR="LAYERDOWNLOAD:CHECK_EXPORT_DATA_ENTRIES",_R="LAYERDOWNLOAD:CHECKING_EXPORT_DATA_ENTRIES",ZR="LAYERDOWNLOAD:SERIALIZE_COOKIE",BR="LAYERDOWNLOAD:SHOW_INFO_BUBBLE_MESSAGE",zR="LAYERDOWNLOAD:SHOW_INFO_BUBBLE",GR="LAYERDOWNLOAD:SET_INFO_BUBBLE_MESSAGE",UR=function(e){return{type:PR,checking:e}},WR=function(e,t){return{type:xR,key:e,value:t}},VR=function(){return{type:CR}},qR=function(e){return{type:AR,service:e}},HR=function(e){return{type:FR,results:e}},$R=function(e,t){return{type:RR,id:e,newProps:t}},KR=function(e){return{type:_R,checking:e}},YR=function(e,t,r,n){return{type:BR,msgId:e,msgParams:t,level:r,duration:n}},XR=function(e){return{type:zR,show:e}},QR=function(e,t,r){return{type:GR,msgId:e,msgParams:t,level:r}},JR=function(e){var t;return null==e||null===(t=e.layerdownload)||void 0===t?void 0:t.service},eN=(0,D.P1)(gS.Rd,vy.X1,H.Iz,(function(e,t,r){return e?t:null!=r&&r.name?{featureTypeName:r.name,filterType:"OGC",ogcVersion:"1.1.0"}:null})),tN=function(e){var t;return null==e||null===(t=e.layerdownload)||void 0===t?void 0:t.results},rN=r(35400);function nN(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}const oN=function(e){var t,r,n=e.cropDataSetVisible,o=void 0!==n&&n,i=e.cropDataSetEnabled,a=void 0!==i&&i,l=e.donwloadFilteredVisible,s=void 0!==l&&l,u=e.downloadFilteredEnabled,p=void 0!==u&&u,f=e.advancedOptionsVisible,d=void 0!==f&&f,m=e.compressionOptions,y=void 0===m?["CCITT RLE","LZW","JPEG","ZLib","PackBits","Deflate"]:m,v=e.selectedCompression,h=e.tileWidth,O=e.tileHeight,w=e.quality,E=e.onChange,S=void 0===E?function(){}:E,P=(t=c().useState(!1),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=r){var n,o,i=[],a=!0,l=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(l)throw o}}return i}}(t,r)||function(e,t){if(e){if("string"==typeof e)return nN(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?nN(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),j=P[0],C=P[1];return c().createElement(c().Fragment,null,o&&c().createElement("div",{className:"mapstore-downloadwpsoptions-menuitem"},c().createElement(Vb.Z,{checked:a,onClick:function(e){return S("cropDataSet",e)}}),c().createElement(b.Z,{msgId:"layerdownload.cropDataSet"})),s&&c().createElement("div",{className:"mapstore-downloadwpsoptions-menuitem"},c().createElement(Vb.Z,{checked:p,onClick:function(e){return S("downloadFilteredDataSet",e)}}),c().createElement(b.Z,{msgId:"layerdownload.downloadFilteredDataSet"})),d&&c().createElement("div",{className:"mapstore-downloadwpsoptions-advanced-options"},c().createElement(g.Button,{className:"no-border",onClick:function(){return C(!j)}},c().createElement(g.Glyphicon,{glyph:"chevron-".concat(j?"down":"right")})),c().createElement(b.Z,{msgId:"layerdownload.advancedOptions"})),j&&d&&c().createElement("div",{className:"mapstore-downloadwpsoptions-advanced"},c().createElement("div",{className:"mapstore-downloadwpsoptions-advanced-menuitem"},c().createElement(b.Z,{msgId:"layerdownload.compression"}),c().createElement(Hr.ZP,{clearable:!0,value:v,options:y.map((function(e){return uo()(e)?{value:e,label:e}:e})),onChange:function(e){return S("compression",null==e?void 0:e.value)}})),c().createElement("div",{className:"mapstore-downloadwpsoptions-advanced-menuitem"},c().createElement(b.Z,{msgId:"layerdownload.quality"}),c().createElement("div",{className:"mapstore-downloadwpsoptions-advanced-menuitem-control"},c().createElement(g.FormControl,{placeholder:"0.75",type:"number",min:"0",max:"1",value:w||"",onChange:function(e){return S("quality",e.target.value)}}))),c().createElement("div",{className:"mapstore-downloadwpsoptions-advanced-menuitem"},c().createElement(b.Z,{msgId:"layerdownload.tileWidth"}),c().createElement("div",{className:"mapstore-downloadwpsoptions-advanced-menuitem-control"},c().createElement(g.FormControl,{placeholder:"256",type:"number",min:"0",value:h||"",onChange:function(e){return S("tileWidth",e.target.value&&e.target.value.length>0?"".concat(parseInt(e.target.value,10)):"")}}),c().createElement("span",null,"px"))),c().createElement("div",{className:"mapstore-downloadwpsoptions-advanced-menuitem"},c().createElement(b.Z,{msgId:"layerdownload.tileHeight"}),c().createElement("div",{className:"mapstore-downloadwpsoptions-advanced-menuitem-control"},c().createElement(g.FormControl,{placeholder:"256",type:"number",min:"0",value:O||"",onChange:function(e){return S("tileHeight",e.target.value&&e.target.value.length>0?"".concat(parseInt(e.target.value,10)):"")}}),c().createElement("span",null,"px")))))};function iN(e){return(iN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function aN(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function lN(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function cN(e,t){return(cN=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function sN(e,t){return!t||"object"!==iN(t)&&"function"!=typeof t?uN(e):t}function uN(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pN(e){return(pN=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fN(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var dN=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&cN(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=pN(n);if(o){var r=pN(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return sN(this,e)});function a(){var e;aN(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return fN(uN(e=i.call.apply(i,[this].concat(r))),"getSelectedFormat",(function(){return d()(e.props,"downloadOptions.selectedFormat")})),fN(uN(e),"getSelectedSRS",(function(){return d()(e.props,"downloadOptions.selectedSrs")||e.props.defaultSrs||d()(de()(e.props.srsList),"name")})),e}return t=a,(r=[{key:"render",value:function(){var e,t=this;return c().createElement("form",null,c().createElement("label",null,c().createElement(b.Z,{msgId:"layerdownload.format"})),c().createElement(Hr.ZP,{clearable:!1,isLoading:this.props.formatsLoading,onOpen:function(){return t.props.formatOptionsFetch(t.props.layer)},value:null===(e=this.props.downloadOptions)||void 0===e?void 0:e.selectedFormat,noResultsText:c().createElement(b.Z,{msgId:"layerdownload.format"}),onChange:function(e){return t.props.onChange("selectedFormat",e.value)},options:this.props.formats.map((function(e){return{value:e.name,label:e.label||e.name}}))}),c().createElement("label",null,c().createElement(b.Z,{msgId:"layerdownload.srs"})),c().createElement(Hr.ZP,{clearable:!1,value:this.getSelectedSRS(),onChange:function(e){return t.props.onChange("selectedSrs",e.value)},options:this.props.srsList.map((function(e){return{value:e.name,label:e.label||e.name}}))}),this.props.wpsOptionsVisible&&c().createElement(oN,{cropDataSetVisible:!0,donwloadFilteredVisible:this.props.downloadFilteredVisible,advancedOptionsVisible:this.props.wpsAdvancedOptionsVisible,cropDataSetEnabled:this.props.downloadOptions.cropDataSet,downloadFilteredEnabled:this.props.downloadOptions.downloadFilteredDataSet,selectedCompression:this.props.downloadOptions.compression,quality:this.props.downloadOptions.quality,tileWidth:this.props.downloadOptions.tileWidth,tileHeight:this.props.downloadOptions.tileHeight,onChange:this.props.onChange}),this.props.virtualScroll?null:c().createElement(g.Checkbox,{checked:this.props.downloadOptions.singlePage,onChange:function(){return t.props.onChange("singlePage",!t.props.downloadOptions.singlePage)}},c().createElement(b.Z,{msgId:"layerdownload.downloadonlycurrentpage"})))}}])&&lN(t.prototype,r),a}(c().Component);fN(dN,"propTypes",{downloadOptions:u().object,formatOptionsFetch:u().func,formats:u().array,srsList:u().array,onChange:u().func,defaultSrs:u().string,wpsOptionsVisible:u().bool,wpsAdvancedOptionsVisible:u().bool,downloadFilteredVisible:u().bool,layer:u().object,formatsLoading:u().bool,virtualScroll:u().bool}),fN(dN,"defaultProps",{downloadOptions:{},formatsLoading:!1,formats:[],srsList:[],wpsOptionsVisible:!1,wpsAdvancedOptionsVisible:!1,downloadFilteredVisible:!1,virtualScroll:!0});const mN=dN;function yN(e){return(yN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bN(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gN(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function vN(e,t){return(vN=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function hN(e,t){return!t||"object"!==yN(t)&&"function"!=typeof t?ON(e):t}function ON(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wN(e){return(wN=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function EN(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var SN=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vN(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=wN(n);if(o){var r=wN(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return hN(this,e)});function a(){var e;bN(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return EN(ON(e=i.call.apply(i,[this].concat(r))),"onClose",(function(){e.props.onClose()})),EN(ON(e),"renderIcon",(function(){return e.props.loading?c().createElement("div",{style:{float:"left"}},c().createElement(HP(),{spinnerName:"circle",noFadeIn:!0})):c().createElement(g.Glyphicon,{glyph:"download"})})),EN(ON(e),"handleExport",(function(){var t=e.props,r=t.url,n=t.filterObj,o=t.downloadOptions,i=t.defaultSrs,a=t.srsList,l=t.onExport,c=t.layer,s=o&&o.selectedSrs||i||(a[0]||{}).name;l(r||c.url,n,le()({},o,{selectedSrs:s}))})),e}return t=a,(r=[{key:"componentDidMount",value:function(){this.props.onMount()}},{key:"componentWillUnmount",value:function(){this.props.onUnmount()}},{key:"componentDidUpdate",value:function(e){this.props.enabled!==e.enabled&&this.props.enabled&&(this.props.onClearDownloadOptions(),"wms"===this.props.layer.type&&this.props.onCheckWPSAvailability(this.props.url||this.props.layer.url))}},{key:"render",value:function(){var e,t,r,n=this,o=function(e){return n.props.formats.filter((function(t){var r,o,i=t.validServices,a=t.type,l=void 0===a?"vector":a;return(!i||eE()(i,(function(t){return t===e}))>-1)&&("vector"===l&&(null===(r=n.props.layer.search)||void 0===r?void 0:r.url)||"raster"===l&&!(null!==(o=n.props.layer.search)&&void 0!==o&&o.url))}))},i=o("wfs"),a=o("wps"),l=i.length>0?i.filter((function(e){return n.props.wfsFormats.find((function(t){return t.name.toLowerCase()===e.name.toLowerCase()}))})):this.props.wfsFormats;return this.props.enabled?c().createElement(zn.Z,{id:"mapstore-export",draggable:!1,modal:!0},c().createElement("span",{role:"header"},c().createElement("span",{className:"about-panel-title"},c().createElement(b.Z,{msgId:"layerdownload.title"})),c().createElement("button",{onClick:this.onClose,className:"settings-panel-close close"},this.props.closeGlyph?c().createElement(g.Glyphicon,{glyph:this.props.closeGlyph}):c().createElement("span",null,"×"))),c().createElement("div",{role:"body"},this.props.checkingWPSAvailability?c().createElement(ml.Z,{size:100,style:{margin:"0 auto"}}):"wfs"!==this.props.service||null!==(e=this.props.layer.search)&&void 0!==e&&e.url?c().createElement(mN,{downloadOptions:this.props.downloadOptions,onChange:this.props.onDownloadOptionChange,formatOptionsFetch:"wfs"===this.props.service?this.props.onFormatOptionsFetch:function(){},formatsLoading:this.props.formatsLoading,formats:"wfs"===this.props.service?l:a,srsList:this.props.srsList,defaultSrs:this.props.defaultSrs,wpsOptionsVisible:"wps"===this.props.service,wpsAdvancedOptionsVisible:!(null!==(t=this.props.layer.search)&&void 0!==t&&t.url),downloadFilteredVisible:!(null===(r=this.props.layer.search)||void 0===r||!r.url),layer:this.props.layer,virtualScroll:this.props.virtualScroll}):c().createElement(rN.Z,{title:c().createElement(b.Z,{msgId:"layerdownload.noSupportedServiceFound"})})),!this.props.checkingWPSAvailability&&c().createElement("div",{role:"footer"},c().createElement(Je.Z,{bsStyle:"primary",className:"download-button",disabled:!this.props.downloadOptions.selectedFormat||this.props.loading,onClick:this.handleExport},this.renderIcon()," ",c().createElement(b.Z,{msgId:"layerdownload.export"})))):null}}])&&gN(t.prototype,r),a}(c().Component);EN(SN,"propTypes",{filterObj:u().object,closeGlyph:u().string,url:u().string,service:u().string,onMount:u().func,onUnmount:u().func,enabled:u().bool,loading:u().bool,checkingWPSAvailability:u().bool,onClose:u().func,onExport:u().func,onCheckWPSAvailability:u().func,onDownloadOptionChange:u().func,onClearDownloadOptions:u().func,onFormatOptionsFetch:u().func,downloadOptions:u().object,wfsFormats:u().array,formats:u().array,srsList:u().array,defaultSrs:u().string,layer:u().object,formatsLoading:u().bool,virtualScroll:u().bool}),EN(SN,"defaultProps",{onMount:function(){},onUnmount:function(){},onExport:function(){},onClose:function(){},onCheckWPSAvailability:function(){},onDownloadOptionChange:function(){},onClearDownloadOptions:function(){},onFormatOptionsFetch:function(){},checkingWPSAvailability:!1,layer:{},closeGlyph:"1-close",service:"wfs",wfsFormats:[],formats:[{name:"application/json",label:"GeoJSON",type:"vector",validServices:["wps"]},{name:"application/arcgrid",label:"ArcGrid",type:"raster",validServices:["wps"]},{name:"image/tiff",label:"TIFF",type:"raster",validServices:["wps"]},{name:"image/png",label:"PNG",type:"raster",validServices:["wps"]},{name:"image/jpeg",label:"JPEG",type:"raster",validServices:["wps"]},{name:"application/wfs-collection-1.0",label:"wfs-collection-1.0",type:"vector",validServices:["wps"]},{name:"application/wfs-collection-1.1",label:"wfs-collection-1.1",type:"vector",validServices:["wps"]},{name:"application/zip",label:"Shapefile",type:"vector",validServices:["wps"]},{name:"text/csv",label:"CSV",type:"vector",validServices:["wps"]}],formatsLoading:!1,srsList:[{name:"native",label:"Native"},{name:"EPSG:4326",label:"WGS84"}],virtualScroll:!0,downloadOptions:{}});const PN=SN;var jN=c().createElement(g.Button,{bsStyle:"primary",bsSize:"small",className:"mapstore-exportdataresults-item-failed"},c().createElement(g.Glyphicon,{glyph:"exclamation-sign"}));const CN=(0,ta.Z)((function(e){var t=e.results;return!(void 0===t?[]:t).length}),{title:c().createElement(b.Z,{msgId:"exportDataResults.emptyStateMessage"})})((function(e){var t=e.loading,r=void 0!==t&&t,n=e.results,o=void 0===n?[]:n,i=e.currentLocale,a=e.onRemoveResult,l=void 0===a?function(){}:a;return r?c().createElement(ml.Z,{size:100,style:{margin:"0 auto",padding:"10px"}}):c().createElement("div",{className:"mapstore-exportdataresults-container"},o.map((function(e){var t=e.id,r=e.layerName,n=e.layerTitle,o=e.startTime,a=e.status,s=e.result,u=(0,ne.in)({name:r,title:n},i),p=new Date(o),f=function(e){return e<10?"0".concat(e):"".concat(e)},d="".concat(f(p.getDate()),"/").concat(f(p.getMonth()+1),"/").concat(p.getFullYear()," ").concat(f(p.getHours()),":").concat(f(p.getMinutes()));return c().createElement("div",{key:t,className:"mapstore-exportdataresults-item"},c().createElement("div",{className:"mapstore-exportdataresults-item-name"},u),c().createElement("div",{className:"mapstore-exportdataresults-item-date"},d),c().createElement("div",{className:"mapstore-exportdataresults-item-buttons"},"pending"===a&&c().createElement(ml.Z,{size:22,style:{marginLeft:"2px"}}),"failed"===a&&s&&s.msgId?c().createElement(Xe.Z,{placement:"top",overlay:c().createElement(g.Tooltip,{id:"exportresults-failure-tooltip"},c().createElement(b.Z,{msgId:s.msgId,msgParams:s.msgParams}))},jN):null,"failed"!==a||s&&s.msgId?null:jN,"completed"===a&&c().createElement("a",{href:s},c().createElement(g.Button,{bsStyle:"primary",bsSize:"small"},c().createElement(g.Glyphicon,{glyph:"floppy-disk"}))),c().createElement(g.Button,{bsStyle:"primary",bsSize:"small",onClick:function(){return l(t)}},c().createElement(g.Glyphicon,{glyph:"trash"}))))})))}));function xN(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}const TN=function(e){var t,r=e.show,n=e.arrowDirection,o=void 0===n?"bottom":n,i=e.className,a=e.containerClassName,l=e.children;return c().createElement("div",{className:YA().apply(void 0,["mapstore-info-bubble"].concat((t=r?["mapstore-info-bubble-visible"]:[],function(e){if(Array.isArray(e))return xN(e)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,t){if(e){if("string"==typeof e)return xN(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?xN(e,t):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[i]))},c().createElement("div",{className:YA()("mapstore-info-bubble-container",a)},c().createElement("div",{className:YA()("mapstore-info-bubble-arrow-container","arrow-".concat(o))},c().createElement("div",{className:"mapstore-info-bubble-arrow"})),c().createElement("div",{className:"mapstore-info-bubble-inner"},l)))},kN=function(e){var t=e.msgId,r=e.msgParams,n=e.level,o=void 0===n?"normal":n,i=e.className;return c().createElement("div",{className:YA()("mapstore-info-bubble-default-inner","mapstore-info-bubble-default-inner-level-".concat(o),i)},t?c().createElement(b.Z,{msgId:t,msgParams:r}):null)};var IN=r(9669),AN=r.n(IN),FN=r(93220),DN=r.n(FN),RN=r(78598),NN=r(7526),MN=r(63516),LN=r(3674),_N=r.n(LN),ZN=r(27835);function BN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function zN(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?BN(Object(r),!0).forEach((function(t){GN(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):BN(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function GN(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function UN(e){return function(e){if(Array.isArray(e))return VN(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||WN(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function WN(e,t){if(e){if("string"==typeof e)return VN(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?VN(e,t):void 0}}function VN(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var qN=function(e){var t=e.type,r=e.data;return"TEXT"===t?(0,Dy.XA)((0,Dy.p5)((0,Dy.Rr)(r.data),r.mimeType)):(0,Dy.fA)(r.mimeType,r.href,r.method,(0,Dy.Rr)(r.requestBodyData))},HN=function(e,t,r){if(e&&t){var n=(0,ZN.mG)(e,(a=(i={layerName:t.layerName,ROI:t.ROI,roiCRS:t.roiCRS,dataFilter:t.dataFilter,targetCRS:t.targetCRS}).layerName,l=i.ROI,c=i.roiCRS,s=i.dataFilter,u=i.targetCRS,(0,ZN.Uh)("gs:DownloadEstimator",[(0,Dy.qP)("layerName",(0,Dy.XA)((0,Dy.gN)(a)))].concat(UN(l?[(0,Dy.qP)("ROI",qN(l))]:[]),UN(c?[(0,Dy.qP)("RoiCRS",(0,Dy.XA)((0,Dy.gN)(c)))]:[]),UN(s?[(0,Dy.qP)("filter",qN(s))]:[]),UN(u?[(0,Dy.qP)("targetCRS",(0,Dy.XA)((0,Dy.gN)(u)))]:[])))),{outputsExtractor:(0,ZN.dr)(ZN.ai)}),o=(0,ZN.mG)(e,function(e){var t=e.layerName,r=e.dataFilter,n=e.outputFormat,o=e.targetCRS,i=e.roiCRS,a=e.ROI,l=e.cropToROI,c=e.asynchronous,s=e.outputAsReference,u=e.resultOutput,p=e.writeParameters;return(0,ZN.Uh)("gs:Download",[(0,Dy.qP)("layerName",(0,Dy.XA)((0,Dy.gN)(t))),(0,Dy.qP)("outputFormat",(0,Dy.XA)((0,Dy.gN)(n)))].concat(UN(a?[(0,Dy.qP)("ROI",qN(a))]:[]),UN(r?[(0,Dy.qP)("filter",qN(r))]:[]),UN(o?[(0,Dy.qP)("targetCRS",(0,Dy.XA)((0,Dy.gN)(o)))]:[]),UN(i?[(0,Dy.qP)("RoiCRS",(0,Dy.XA)((0,Dy.gN)(i)))]:[]),[(0,Dy.qP)("cropToROI",(0,Dy.XA)((0,Dy.gN)(l?"true":"false")))],UN(p&&_N()(p).length>0?[(0,Dy.XJ)(DN()(p).map((function(e){var t,r,n=(r=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var r=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=r){var n,o,i=[],a=!0,l=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(l)throw o}}return i}}(t,r)||WN(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=n[0],i=n[1];return(0,Dy.Dx)(o,i)})).join(""))]:[])),(0,Dy.DK)(c?(0,Dy.Tr)(!0,!0,s?(0,Dy.t$)(u,!0,"result"):(0,Dy.En)("result",u)):(0,Dy.En)("result",u)))}(zN(zN({},bc()(t,"notifyDownloadEstimatorSuccess")),{},{outputAsReference:!!t.asynchronous&&t.outputAsReference})),r,{headers:{"Content-Type":"application/xml",Accept:"application/xml, ".concat(t.resultOutput||"application/zip")}});return n.catch((function(){throw new Error("DownloadEstimatorException")})).mergeMap((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(e.length>0&&"result"===e[0].identifier&&"true"===e[0].data)return t.notifyDownloadEstimatorSuccess?oa.Observable.of("DownloadEstimatorSuccess").concat(o):o;throw new Error("DownloadEstimatorFailed")}))}var i,a,l,c,s,u;return oa.Observable.empty()},$N=[{outputFormat:"shape-zip",extension:"zip"},{outputFormat:"csv",extension:"csv"},{outputFormat:"excel",extension:"xls"},{outputFormat:"excel2007",extension:"xlsx"},{outputFormat:"dxf",extension:"dxf"},{outputFormat:"dxf-zip",extension:"zip"},{outputFormat:"application/vnd.google-earth.kml+xml",extension:"kml"},{outputFormat:"application/json",extension:"json"},{outputFormat:"gml3",extension:"gml"},{outputFormat:"GML2",extension:"gml"},{outputFormat:"application/vnd.googlxml",extension:"kml"},{outputFormat:"OGR-CSV",extension:"csv"},{outputFormat:"OGR-FileGDB",extension:"gdb"},{outputFormat:"OGR-GPKG",extension:"gpkg"},{outputFormat:"OGR-KML",extension:"kml"},{outputFormat:"OGR-MIF",extension:"mif"},{outputFormat:"OGR-TAB",extension:"tab"},{outputFormat:"SHAPE-ZIP",extension:"zip"},{outputFormat:"gml32",extension:"gml"},{outputFormat:"application/x-gpk",extension:"gpk"}];function KN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function YN(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?KN(Object(r),!0).forEach((function(t){XN(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):KN(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function XN(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function QN(e){return function(e){if(Array.isArray(e))return eM(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||JN(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function JN(e,t){if(e){if("string"==typeof e)return eM(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?eM(e,t):void 0}}function eM(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var tM={gml3:"GML3.1",GML2:"GML2","DXF-ZIP":"DXF-ZIP","application/vnd.google-earth.kml+xml":"KML","OGR-CSV":"OGR-CSV","OGR-FileGDB":"OGR-GeoDatabase","OGR-GPKG":"OGR-GeoPackage","OGR-KML":"OGR-KML","OGR-MIF":"OGR-MIF","OGR-TAB":"OGR-TAB","SHAPE-ZIP":"Shapefile",gml32:"GML3.2","application/json":"GeoJSON",csv:"CSV","application/x-gpkg":"GeoPackage",excel:"excel",excel2007:"excel2007"},rM=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.url,r=e.filterObj,n=void 0===r?{}:r,o=e.downloadOptions,i=void 0===o?{}:o,a=(0,Nu.toOGCFilter)(n.featureTypeName,n,n.ogcVersion,n.sortOptions,!1,null,null,i.selectedSrs);return oa.Observable.defer((function(){return AN().post((0,Ar.$F)(t+"?service=WFS&outputFormat=".concat(i.selectedFormat)),a,{timeout:6e4,responseType:"arraybuffer",headers:{"Content-Type":"application/xml"}})}))},nM=function(e){var t,r=d()(e,"filterObj.featureTypeName"),n=(t=d()(e,"downloadOptions.selectedFormat"),de()($N.filter((function(e){return e.outputFormat===t})))||function(e){var t=e.split(/[^\w]/)[1];return t?{outputFormat:e,extension:t.toLowerCase()}:void 0}(t));return n&&n.extension?r+"."+n.extension:r},oM=function(e){return e.query&&e.query.featureTypes&&e.query.featureTypes[e.query.typeName]&&e.query.featureTypes[e.query.typeName].attributes&&e.query.featureTypes[e.query.typeName].attributes[0]&&e.query.featureTypes[e.query.typeName].attributes[0].attribute||null},iM=function(e){switch(e.code){case"ProcessFailed":return{msgId:"layerdownload.wpsExecuteError.processFailed",msgParams:{exceptionReport:e.message}};case"NoStatusLocation":case"NoExecutionId":case"UnexpectedProcessStatus":return{msgId:"layerdownload.wpsExecuteError.badResponse",msgParams:{eCode:e.code}};case"ExecuteProcessXHRFailed":return{msgId:"layerdownload.wpsExecuteError.executeProcessXhrFailed"};case"GetExecutionStatusXHRFailed":return{msgId:"layerdonwload.wpsExecuteError.getExecutionStatusXhrFailed"};default:return{msgId:"layerdownload.wpsExecuteError.unexpectedError"}}},aM=function(e){var t=(0,te.np)(e);if(null!=t&&t.id){var r=document.cookie.split(";").filter((function(e){return e.indexOf("exportDataResults_".concat(t.id,"="))>-1}))[0];if(r){var n=JSON.parse(decodeURIComponent(r.split("=")[1])).results;return oa.Observable.of(HR(n.filter((function(e){return"pending"!==e.status}))))}}return oa.Observable.empty()},lM=function(e){return e.ofType(SR).switchMap((function(e){var t=e.url;return Ry(t,"gs:DownloadEstimator,gs:Download").switchMap((function(e){return oa.Observable.defer((function(){return new Promise((function(t,r){return(0,WT.parseString)(e.data,{tagNameProcessors:[NN.stripPrefix]},(function(e,n){return e?r(e):t(n)}))}))}))})).flatMap((function(e){var t,r,n,o,i,a,l,c,s=[null==e||null===(t=e.ProcessDescriptions)||void 0===t||null===(r=t.ProcessDescription)||void 0===r||null===(n=r[0])||void 0===n||null===(o=n.Identifier)||void 0===o?void 0:o[0],null==e||null===(i=e.ProcessDescriptions)||void 0===i||null===(a=i.ProcessDescription)||void 0===a||null===(l=a[1])||void 0===l||null===(c=l.Identifier)||void 0===c?void 0:c[0]];return oa.Observable.of(qR(eE()(s,(function(e){return"gs:DownloadEstimator"===e}))>-1&&eE()(s,(function(e){return"gs:Download"===e}))>-1?"wps":"wfs"),UR(!1))})).catch((function(){return oa.Observable.of(qR("wfs"),UR(!1))})).startWith(UR(!0))}))},cM=function(e){return e.ofType(h.HN).switchMap((function(e){var t;return oa.Observable.from([(0,v.Xi)("layerdownload"),WR("singlePage",!1)].concat(QN(null!==(t=e.layer.search)&&void 0!==t&&t.url?[(0,gy.rP)(e.layer.url,{featureTypeName:e.layer.name})]:[])))}))},sM=function(e){return e.ofType(kR).switchMap((function(e){return(0,ky.ED)(e).map((function(e){return t=function(e){var t=d()(e,"WFS_Capabilities.OperationsMetadata.Operation"),r=ye()(t,(function(e){return"GetFeature"===e.name})),n=d()(r,"Parameter"),o=ye()(n,(function(e){return"outputFormat"===e.name})).Value,i=oS()(tM,o);return DN()(i).map((function(e){var t,r,n=(r=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var r=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=r){var n,o,i=[],a=!0,l=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(l)throw o}}return i}}(t,r)||JN(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());return{name:n[0],label:n[1]}}))}(e),{type:IR,wfsFormats:t};var t}))}))},uM=function(e,t){return e.ofType(jR).switchMap((function(r){var n,o,i,a,l=t.getState(),c=l.featuregrid.virtualScroll,s=void 0!==c&&c,u=JR(l),p=(0,H.Iz)(l),f=(0,X.pQ)(l),m=(0,Q.Pz)(l);return"wps"===u?(n=r.downloadOptions.cropDataSet&&!!f&&!!f.bounds,o={layerName:p.name,outputFormat:r.downloadOptions.selectedFormat,asynchronous:!0,outputAsReference:!0,targetCRS:r.downloadOptions.selectedSrs&&"native"!==r.downloadOptions.selectedSrs?r.downloadOptions.selectedSrs:void 0,cropToROI:n,dataFilter:r.downloadOptions.downloadFilteredDataSet?{type:"TEXT",data:{mimeType:"text/plain; subtype=filter/1.0",data:(0,Nu.mergeFiltersToOGC)({ogcVersion:"1.0.0",addXmlnsToRoot:!0,xmlnsToAdd:['xmlns:ogc="http://www.opengis.net/ogc"','xmlns:gml="http://www.opengis.net/gml"']},p.layerFilter,r.filterObj)}}:void 0,ROI:n?{type:"TEXT",data:{mimeType:"application/json",data:JSON.stringify((0,cn.bboxToFeatureGeometry)(f.bounds))}}:void 0,roiCRS:n?f.crs||"EPSG:4326":void 0,writeParameters:YN(YN(YN({},r.downloadOptions.tileWidth?{tilewidth:r.downloadOptions.tileWidth}:{}),r.downloadOptions.tileHeight?{tileheight:r.downloadOptions.tileHeight}:{}),r.downloadOptions.compression?YN({compression:r.downloadOptions.compression},r.downloadOptions.quality?{quality:r.downloadOptions.quality}:{}):{}),notifyDownloadEstimatorSuccess:!0},i={id:Br()(),layerName:p.name,layerTitle:p.title,status:"pending"},a={outputsExtractor:(0,ZN.dr)(ZN.RW)},HN(r.url,o,a).takeUntil(e.ofType(NR).filter((function(e){return e.id===i.id})).take(1)).flatMap((function(e){var t,r;return"DownloadEstimatorSuccess"===e?oa.Observable.of((r=YN(YN({},i),{},{startTime:(new Date).getTime()}),{type:DR,result:r}),YR("layerdownload.exportResultsMessages.newExport"),VR(),(0,v.Xi)("layerdownload","enabled")):(t=oa.Observable).of.apply(t,QN(e&&e.length>0&&e[0].href?[$R(i.id,{status:"completed",result:e[0].href}),YR("layerdownload.exportResultsMessages.exportSuccess",{layerTitle:(0,ne.in)(p,m)},"success")]:[$R(i.id,{status:"failed",result:{msgId:"layerdonwload.exportResultsMessages.invalidHref"}}),YR("layerdownload.exportResultsMessages.exportFailure",{layerTitle:(0,ne.in)(p,m)},"danger")]))})).catch((function(e){var t;return(t=oa.Observable).of.apply(t,QN(e.message&&e.message.indexOf("DownloadEstimator")>-1?[(0,q.vU)({error:e,title:"layerdownload.error.downloadEstimatorTitle",message:"layerdownload.error.downloadEstimatorFailed"}),VR()]:[$R(i.id,{status:"failed",result:iM(e)}),YR("layerdownload.exportResultsMessages.exportFailure",{layerTitle:(0,ne.in)(p,m)},"danger")]))}))):rM({url:r.url,downloadOptions:r.downloadOptions,filterObj:YN(YN({},r.filterObj),{},{pagination:!s&&d()(r,"downloadOptions.singlePage")?r.filterObj&&r.filterObj.pagination:null})}).do((function(e){var t=e.data;if("application/xml"===e.headers["content-type"]){var r=String.fromCharCode.apply(null,new Uint8Array(t));if(0===r.indexOf("<ows:ExceptionReport"))throw r}})).catch((function(){return rM({url:r.url,downloadOptions:r.downloadOptions,filterObj:YN(YN({},r.filterObj),{},{pagination:!s&&d()(r,"downloadOptions.singlePage")?r.filterObj&&r.filterObj.pagination:null,sortOptions:(e=oM(t.getState()),e?{sortBy:e,sortOrder:"A"}:{})})}).do((function(e){var t=e.data,n=e.headers;if("application/xml"===n["content-type"]){var o=String.fromCharCode.apply(null,new Uint8Array(t));if(0===o.indexOf("<ows:ExceptionReport"))throw o}(0,RN.saveAs)(new Blob([t],{type:n&&n["content-type"]}),nM(r))}));var e})).do((function(e){var t=e.data,n=e.headers;(0,RN.saveAs)(new Blob([t],{type:n&&n["content-type"]}),nM(r))})).map((function(){return VR()})).catch((function(e){return oa.Observable.of((0,q.vU)({error:e,title:"layerdownload.error.title",message:"layerdownload.error.invalidOutputFormat",autoDismiss:5,position:"tr"}),VR())}))}))},pM=function(e,t){return e.ofType(v.kM).filter((function(e){return"queryPanel"===e.control&&!(0,J._d)(t.getState())&&(0,J.lI)(t.getState())})).switchMap((function(){return oa.Observable.of((0,v.Xi)("layerdownload"))}))},fM=function(e){return e.ofType(BR).concatMap((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return oa.Observable.of(QR(e.msgId,e.msgParams,e.level),XR(!0)).delay(10).concat(oa.Observable.of(XR(!1)).delay(e.duration||3e3)).concat(oa.Observable.empty().delay(1e3))}))},dM=function(e,t){return e.ofType(LR).exhaustMap((function(){var e=t.getState(),r=(tN(e)||[]).filter((function(e){return"completed"===e.status}));return r.length>0?oa.Observable.forkJoin(r.map((function(e){var t=e.result,r=t.indexOf("executionId="),n=t.slice(r),o=n.indexOf("&"),i=(o>-1?n.slice(0,o):n).slice(12),a=t.indexOf("?"),l=t.slice(0,a);return(0,ZN.W5)(l,i).let(Fy.oB).catch((function(){return oa.Observable.of(null)})).map((function(t){return t?null:e.id}))}))).flatMap((function(e){return oa.Observable.of((t=e.filter((function(e){return!!e})),{type:MR,ids:t}),{type:ZR},KR(!1));var t})).startWith(KR(!0)):oa.Observable.empty()}))},mM=function(e,t){return e.ofType(DR,NR,RR,ZR).filter((function(){return(0,te.jl)(t.getState())})).do((function(){var e=t.getState(),r=tN(e),n=(0,te.np)(e).id,o=JSON.stringify({results:r});document.cookie="exportDataResults_".concat(n,"=").concat(encodeURIComponent(o))})).flatMap((function(){return oa.Observable.empty()}))},yM=function(e){return e.ofType(IE.ok).switchMap((function(){return e.ofType(MN.Nv).switchMap((function(){return oa.Observable.of(HR([]))})).takeUntil(e.ofType(by.nk))}))},bM=function(e,t){return e.ofType(IE.ok).switchMap((function(){return aM(t.getState()).concat(e.ofType(MN.XP).switchMap((function(){return aM(t.getState())})).takeUntil(e.ofType(by.nk)))}))};function gM(e){return function(e){if(Array.isArray(e))return vM(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return vM(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?vM(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vM(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function hM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function OM(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?hM(Object(r),!0).forEach((function(t){wM(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hM(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function wM(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const EM=(0,O.rx)("LayerDownload",{component:(0,p.connect)((0,D.zB)({url:vy.Bu,filterObj:eN,enabled:function(e){var t,r;return null==e||null===(t=e.controls)||void 0===t||null===(r=t.layerdownload)||void 0===r?void 0:r.enabled},downloadOptions:function(e){var t;return null==e||null===(t=e.layerdownload)||void 0===t?void 0:t.downloadOptions},loading:function(e){var t;return null==e||null===(t=e.layerdownload)||void 0===t?void 0:t.loading},wfsFormats:function(e){var t;return null==e||null===(t=e.layerdownload)||void 0===t?void 0:t.wfsFormats},formatsLoading:function(e){var t;return null==e||null===(t=e.layerdownload)||void 0===t?void 0:t.formatsLoading},layer:H.Iz,service:JR,checkingWPSAvailability:function(e){var t;return null==e||null===(t=e.layerdownload)||void 0===t?void 0:t.checkingWPSAvailability},virtualScroll:function(e){return e&&e.featuregrid&&e.featuregrid.virtualScroll}}),{onExport:function(e,t,r){return{type:jR,url:e,filterObj:t,downloadOptions:r}},onDownloadOptionChange:WR,onClearDownloadOptions:function(){return{type:TR}},onFormatOptionsFetch:function(e){return{type:kR,layer:e}},onCheckWPSAvailability:function(e){return{type:SR,url:e}},onMount:function(){return(0,v.Xg)("layerdownload","available",!0)},onUnmount:function(){return(0,v.Xg)("layerdownload","available",!1)},onClose:function(){return(0,v.Xi)("layerdownload")}})(PN),containers:{TOC:{doNotHide:!0,name:"LayerDownload"},MapFooter:{name:"LayerDownload",position:1,tool:(0,p.connect)((0,D.zB)({active:function(e){var t,r;return null==e||null===(t=e.controls)||void 0===t||null===(r=t.exportDataResults)||void 0===r?void 0:r.enabled},showInfoBubble:function(e){var t;return null==e||null===(t=e.layerdownload)||void 0===t?void 0:t.showInfoBubble},infoBubbleMessage:function(e){var t;return null==e||null===(t=e.layerdownload)||void 0===t?void 0:t.infoBubbleMessage},checkingExportDataEntries:function(e){var t;return null==e||null===(t=e.layerdownload)||void 0===t?void 0:t.checkingExportDataEntries},results:tN,currentLocale:Q.Pz}),{onToggle:v.Xi.bind(null,"exportDataResults","enabled"),onActive:function(){return{type:LR}},onRemoveResult:function(e){return{type:NR,id:e}}})((function(e){var t=e.active,r=void 0!==t&&t,n=e.showInfoBubble,o=void 0!==n&&n,i=e.infoBubbleMessage,a=void 0===i?{}:i,l=e.checkingExportDataEntries,s=e.results,u=void 0===s?[]:s,p=e.currentLocale,f=e.onToggle,d=void 0===f?function(){}:f,m=e.onActive,y=void 0===m?function(){}:m,v=e.onRemoveResult;return c().useEffect((function(){r&&y()}),[r]),c().createElement(c().Fragment,null,u.length>0?c().createElement("div",{id:"mapstore-export-data-results-button-container"},c().createElement(Xe.Z,{placement:"left",overlay:c().createElement(g.Tooltip,{id:"mapstore-export-data-results-tooltip"},c().createElement(b.Z,{msgId:"exportDataResults.title"}))},c().createElement(g.Button,{bsStyle:"primary",bsSize:"small",onClick:function(){return d()}},c().createElement(g.Glyphicon,{glyph:"download"}))),c().createElement(TN,{show:o,className:"mapstore-export"},c().createElement(kN,a))):null,c().createElement(zn.Z,{id:"mapstore-export-data-results",style:{display:r?"block":"none"},draggable:!1,modal:!0},c().createElement("span",{role:"header"},c().createElement("span",{className:"about-panel-title"},c().createElement(b.Z,{msgId:"exportDataResults.title"})),c().createElement("button",{onClick:function(){return d()},className:"settings-panel-close close"},c().createElement(g.Glyphicon,{glyph:"1-close"}))),c().createElement("div",{role:"body"},c().createElement(CN,{loading:l,results:u,currentLocale:p,onRemoveResult:v}))))}))}},epics:o,reducers:{layerdownload:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{downloadOptions:{singlePage:!0}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case jR:return OM(OM({},e),{},{loading:!0});case xR:return OM(OM({},e),{},{downloadOptions:OM(OM({},e.downloadOptions),{},wM({},t.key,t.value))});case TR:return OM(OM({},e),{},{downloadOptions:{singlePage:!0}});case kR:return OM(OM({},e),{},{layer:t.layer,wfsFormats:[],formatsLoading:!0});case CR:return OM(OM({},e),{},{loading:!1});case IR:return OM(OM({},e),{},{wfsFormats:t.wfsFormats,formatsLoading:!1});case AR:return OM(OM({},e),{},{service:t.service});case PR:return OM(OM({},e),{},{checkingWPSAvailability:t.checking});case FR:return OM(OM({},e),{},{results:t.results});case DR:return OM(OM({},e),{},{results:[].concat(gM(e.results||[]),[t.result])});case RR:var r=eE()(e.results||[],{id:t.id});return OM(OM({},e),{},{results:r>-1?[].concat(gM(e.results.slice(0,r)),[OM(OM({},e.results[r]),t.newProps||{})],gM(e.results.slice(r+1))):e.results});case NR:return OM(OM({},e),{},{results:(e.results||[]).filter((function(e){return e.id!==t.id}))});case MR:return OM(OM({},e),{},{results:(e.results||[]).filter((function(e){return-1===eE()(t.ids,(function(t){return t===e.id}))}))});case zR:return OM(OM({},e),{},{showInfoBubble:t.show});case GR:return OM(OM({},e),{},{infoBubbleMessage:{msgId:t.msgId,msgParams:t.msgParams,level:t.level}});case _R:return OM(OM({},e),{},{checkingExportDataEntries:t.checking});default:return e}}}});var SM="GEONODE:SAVING_RESOURCE",PM="GEONODE:SAVE_SUCCESS",jM="GEONODE:SAVE_ERROR",CM="GEONODE:CLEAR_SAVE",xM="GEONODE:SAVE_CONTENT",TM="GEONODE:UPDATE_RESOURCE_BEFORE_SAVE";function kM(){return{type:CM}}function IM(e,t,r){return{type:xM,id:e,metadata:t,reload:r}}function AM(e){return{type:TM,id:e}}var FM=r(25108),DM="GEONODE:RESOURCE_LOADING",RM="GEONODE:SET_RESOURCE",NM="GEONODE:RESOURCE_ERROR",MM="GEONODE:UPDATE_RESOURCE_PROPERTIES",LM="GEONODE:SET_RESOURCE_TYPE",_M="GEONODE:SET_NEW_RESOURCE",ZM="GEONODE:SET_RESOURCE_ID",BM="GEONODE:SET_RESOURCE_PERMISSIONS";function zM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function GM(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?zM(Object(r),!0).forEach((function(t){UM(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zM(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function UM(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const WM=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case DM:return GM(GM({},e),{},{loading:!0});case RM:return GM(GM({},e),{},{error:null,data:t.data,loading:!1});case NM:return GM(GM({},e),{},{data:null,error:t.error,loading:!1});case MM:return GM(GM({},e),{},{data:GM(GM({},e.data),t.properties)});case LM:return GM(GM({},e),{},{type:t.resourceType});case _M:return GM(GM({},e),{},{isNew:!0});case ZM:return GM(GM({},e),{},{id:t.id});case BM:return GM(GM({},e),{},{permissions:t.permissions});default:return e}},VM=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case SM:return{saving:!0};case PM:return{success:t.success,saving:!1};case jM:return{error:t.error,saving:!1};case CM:return{};default:return e}};function qM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function HM(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?qM(Object(r),!0).forEach((function(t){$M(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qM(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function $M(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var KM={},YM=(0,D.zB)({catalogServices:(0,D.zB)({services:ve.b6,selectedService:ve.Cb}),widgetsConfig:(0,D.zB)({widgets:jm.zm,layouts:jm.p,collapsed:jm.lF}),mapInfoConfiguration:ee.bI,dimensionData:(0,D.zB)({currentTime:Gx.WT,offsetTime:Gx.ns}),timelineData:(0,D.zB)({selectedLayer:AE.Li})}),XM=(r(30084),r(52628)),QM=r.n(XM);r(82492),r(13880);QM()({CASCADE:"cascade"}),QM()({TITLE:"title",PARAGRAPH:"paragraph",IMMERSIVE:"immersive",BANNER:"banner"}),QM()({IMAGE:"image",MAP:"map",VIDEO:"video"}),QM()({EDIT:"edit",VIEW:"view"}),r(24684);r(30236),r(36808);var JM="/api/v2/resources",eL="/api/v2/geostories";function tL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function rL(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tL(Object(r),!0).forEach((function(t){nL(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tL(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function nL(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oL(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var iL={map:function(e,t,r,n){var o,i=(0,X.Od)(e)||{},a=(0,H.l2)(e),l=(0,H.Bt)(e),c=(0,uI.Mz)(e),s=function(e){return e.searchconfig&&e.searchconfig.textSearchConfig}(e),u=function(e){return e.searchbookmarkconfig&&e.searchbookmarkconfig.bookmarkSearchConfig}(e),p=function(e){var t=Object.keys(KM).reduce((function(t,r){return HM(HM({},t),{},$M({},r,KM[r](e)))}),{});return HM(HM({},YM(e)),t)}(e),f=(0,oe.saveMapConfiguration)(i,a,l,c,s,u,p),d=r.name,m=r.description,y=r.thumbnail,b={name:d,data:f,attributes:[{type:"string",name:"title",value:d,label:"Title"},{type:"string",name:"abstract",value:m,label:"Abstract"}].concat((o=y?[{type:"string",name:"thumbnail",value:y,label:"Thumbnail"}]:[],function(e){if(Array.isArray(e))return oL(e)}(o)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(o)||function(e,t){if(e){if("string"==typeof e)return oL(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?oL(e,t):void 0}}(o)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()))};return t?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(0,Ar.u8)("genode_rest_api")||"/mapstore/rest/";return Ay().patch("".concat(r,"resources/").concat(e,"/"),t,{params:{full:!0}}).then((function(e){return e.data}))}(t,rL(rL({},b),{},{id:t})):function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(0,Ar.u8)("genode_rest_api")||"/mapstore/rest/";return Ay().post("".concat(t,"resources/"),e,{timeout:1e4,params:{full:!0}}).then((function(e){return e.data}))}(b).then((function(e){return n&&(window.location.href="".concat((0,Ar.u8)("geonode_url"),"maps/").concat(e.id,"/edit")),e.data}))},geostory:function(e,t,r,n){var o=function(e){return d()(e,"geostory.currentStory")}(e),i=(0,te.np)(e),a={title:r.name,abstract:r.description,data:JSON.stringify(o),thumbnail_url:r.thumbnail};return t?function(e,t){return Ay().patch("".concat(eL,"/").concat(e),t,{params:{include:["data"]}}).then((function(e){return e.data.geostory}))}(t,a):function(e){return Ay().post("".concat(eL),e,{params:{include:["data"]}}).then((function(e){return e.data.geostory}))}(rL({name:r.name+" "+AP()(),owner:i.name},a)).then((function(e){return n&&(window.location.href="".concat((0,Ar.u8)("geonode_url"),"apps/").concat(e.pk,"/edit")),e.data}))}};const aL={gnSaveContent:function(e,t){return e.ofType(xM).switchMap((function(e){var r,n=t.getState(),o=(null===(r=n.gnresource)||void 0===r?void 0:r.type)||"map";return oa.Observable.defer((function(){return iL[o](n,e.id,e.metadata,e.reload)})).switchMap((function(t){return oa.Observable.of({type:PM,success:t},(r={title:e.metadata.name,abstract:e.metadata.description,thumbnail_url:e.metadata.thumbnail},{type:MM,properties:r}));var r})).catch((function(e){return oa.Observable.of(function(e){return{type:jM,error:e}}(e.data||e.message))})).startWith({type:SM})}))},gnUpdateResource:function(e,t){return e.ofType(TM).switchMap((function(e){var r,n=(null===(r=t.getState().gnresource)||void 0===r?void 0:r.data)||{};return!e.id||n.pk&&e.id&&n.pk+""==e.id+""?oa.Observable.empty():oa.Observable.defer((function(){return t=e.id,Ay().get("".concat(JM,"/").concat(t)).then((function(e){return e.data.resource}));var t})).switchMap((function(e){return oa.Observable.of({type:RM,data:e})})).catch((function(e){return oa.Observable.of(function(e){return{type:NM,error:e}}(e.data||e.message))})).startWith({type:DM})}))}};var lL=r(14068);function cL(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=r){var n,o,i=[],a=!0,l=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(l)throw o}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return sL(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?sL(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sL(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var uL=(0,bl.Z)("placeholder")(g.FormControl);function pL(e){var t=e.update,r=e.error,n=e.success,o=e.labelId,i=e.resource,a=e.contentId,s=e.saving,u=e.loading,p=e.enabled,f=e.onClose,d=e.onSave,m=e.onInit,v=e.onClear,h=e.thumbnailOptions,O=cL((0,l.useState)(),2),w=O[0],E=O[1],S=cL((0,l.useState)(),2),P=S[0],j=S[1],C=cL((0,l.useState)(""),2),x=C[0],T=C[1],k=cL((0,l.useState)(""),2),I=k[0],A=k[1],F=cL((0,l.useState)(!1),2),D=F[0],R=F[1],N=(0,l.useRef)();N.current={contentId:a,resource:i},(0,l.useEffect)((function(){p?m(N.current.contentId):v()}),[p]),(0,l.useEffect)((function(){if(!u){var e=N.current.resource||{};E(e.thumbnail_url),T(e.title),A(e.abstract),j(!1),R(e.title?void 0:"error")}}),[p,u]);var M=u||s;return c().createElement(y.Z,{title:c().createElement(b.Z,{msgId:o}),show:p,fitContent:!0,clickOutEnabled:!1,buttons:M?[]:[{text:c().createElement(b.Z,{msgId:"close"}),onClick:function(){return f()}},{text:c().createElement(b.Z,{msgId:o}),disabled:!!D,onClick:function(){return d(t?a:void 0,{thumbnail:w,name:x,description:I},!0)}}],onClose:M?null:function(){return f()}},r&&c().createElement(g.Alert,{bsStyle:"danger",style:{margin:0}},c().createElement("div",null,c().createElement(b.Z,{msgId:"map.mapError.errorDefault"}))),n&&c().createElement(g.Alert,{bsStyle:"success",style:{margin:0}},c().createElement("div",null,c().createElement(b.Z,{msgId:"saveDialog.saveSuccessMessage"}))),c().createElement(g.Form,null,c().createElement(g.FormGroup,{validationState:P?"error":void 0},c().createElement(g.ControlLabel,null,c().createElement(b.Z,{msgId:"map.thumbnail"})),c().createElement(lL.Z,{thumbnail:w,thumbnailOptions:h,message:c().createElement(b.Z,{msgId:"map.message"}),onUpdate:function(e){E(e),j(!1)},onError:function(e){j(e)}}),P&&c().createElement("div",null,c().createElement("div",null,c().createElement(b.Z,{msgId:"map.error"})),c().createElement("div",null,P.indexOf&&-1!==P.indexOf("FORMAT")&&c().createElement("small",null,c().createElement(b.Z,{msgId:"map.errorFormat"}))),c().createElement("div",null,P.indexOf&&-1!==P.indexOf("SIZE")&&c().createElement("small",null,c().createElement(b.Z,{msgId:"map.errorSize"}))))),c().createElement(g.FormGroup,{validationState:D},c().createElement(g.ControlLabel,null,c().createElement(b.Z,{msgId:"saveDialog.name"})),c().createElement(uL,{placeholder:"saveDialog.namePlaceholder",value:x,onChange:function(e){T(e.target.value),R(e.target.value?void 0:"error")},onBlur:function(e){R(e.target.value?void 0:"error")}})),c().createElement(g.FormGroup,null,c().createElement(g.ControlLabel,null,c().createElement(b.Z,{msgId:"saveDialog.description"})),c().createElement(uL,{placeholder:"saveDialog.descriptionPlaceholder",value:I,onChange:function(e){return A(e.target.value)}}))),M&&c().createElement("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(255, 255, 255, 0.8)",zIndex:2,display:"flex",alignItems:"center",justifyContent:"center"}},c().createElement(ml.Z,{size:70})))}pL.propTypes={update:u().bool,labelId:u().string,contentId:u().oneOfType([u().string,u().number]),resource:u().object,loading:u().bool,enabled:u().bool,onClose:u().func,onSave:u().func,onInit:u().func,onClear:u().func,error:u().oneOfType([u().string,u().object]),success:u().oneOfType([u().string,u().object]),thumbnailOptions:u().object},pL.defaultProps={update:!1,resource:{},loading:!1,enabled:!1,onClose:function(){},onSave:function(){},onInit:function(){},onClear:function(){},thumbnailOptions:{width:300,height:250,type:"image/jpeg",quality:.9,contain:!1}};const fL=pL;function dL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function mL(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yL(){return(yL=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var bL=(0,p.connect)((0,D.P1)([function(e){var t,r;return null==e||null===(t=e.controls)||void 0===t||null===(r=t.save)||void 0===r?void 0:r.enabled},X._H,function(e){var t;return null==e||null===(t=e.gnresource)||void 0===t?void 0:t.data},function(e){var t;return null==e||null===(t=e.gnresource)||void 0===t?void 0:t.loading},function(e){var t;return null==e||null===(t=e.gnsave)||void 0===t?void 0:t.saving},function(e){var t;return null==e||null===(t=e.gnsave)||void 0===t?void 0:t.error},function(e){var t;return null==e||null===(t=e.gnsave)||void 0===t?void 0:t.success},function(e){var t;return null==e||null===(t=e.gnresource)||void 0===t?void 0:t.id}],(function(e,t,r,n,o,i,a,l){return{enabled:e,contentId:l||(null==t?void 0:t.id),resource:r,loading:n,saving:o,error:i,success:a}})),{onClose:v.Xi.bind(null,"save",null),onInit:AM,onSave:IM,onClear:kM})((function(e){return c().createElement(fL,yL({},e,{update:!0,labelId:"save"}))}));const gL=(0,O.rx)("Save",{component:bL,containers:{BurgerMenu:{name:"save",position:30,text:c().createElement(b.Z,{msgId:"save"}),icon:c().createElement(g.Glyphicon,{glyph:"floppy-open"}),action:v.Xi.bind(null,"save",null),selector:(0,D.P1)(te.jl,(function(e){var t;return null==e||null===(t=e.gnresource)||void 0===t?void 0:t.isNew}),(function(e){var t,r;return null==e||null===(t=e.gnresource)||void 0===t||null===(r=t.permissions)||void 0===r?void 0:r.canEdit}),(function(e){var t,r;return null==e||null===(t=e.gnresource)||void 0===t||null===(r=t.permissions)||void 0===r?void 0:r.type}),(function(e,t,r,n){return{style:!e||t||!r&&n?{display:"none"}:{}}}))}},epics:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?dL(Object(r),!0).forEach((function(t){mL(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dL(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},aL),reducers:{gnresource:WM,gnsave:VM,controls:FM.Z}});function vL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function hL(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function OL(){return(OL=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var wL=(0,p.connect)((0,D.P1)([function(e){var t,r;return null==e||null===(t=e.controls)||void 0===t||null===(r=t.saveAs)||void 0===r?void 0:r.enabled},X._H,function(e){var t;return null==e||null===(t=e.gnresource)||void 0===t?void 0:t.data},function(e){var t;return null==e||null===(t=e.gnresource)||void 0===t?void 0:t.loading},function(e){var t;return null==e||null===(t=e.gnsave)||void 0===t?void 0:t.saving},function(e){var t;return null==e||null===(t=e.gnsave)||void 0===t?void 0:t.error},function(e){var t;return null==e||null===(t=e.gnsave)||void 0===t?void 0:t.success},function(e){var t;return null==e||null===(t=e.gnresource)||void 0===t?void 0:t.id}],(function(e,t,r,n,o,i,a,l){return{enabled:e,contentId:l||(null==t?void 0:t.id),resource:r,loading:n,saving:o,error:i,success:a}})),{onClose:v.Xi.bind(null,"saveAs",null),onInit:AM,onSave:IM,onClear:kM})((function(e){return c().createElement(fL,OL({},e,{labelId:"saveAs"}))}));const EL=(0,O.rx)("SaveAs",{component:wL,containers:{BurgerMenu:{name:"saveAs",position:30,text:c().createElement(b.Z,{msgId:"saveAs"}),icon:c().createElement(g.Glyphicon,{glyph:"floppy-open"}),action:v.Xi.bind(null,"saveAs",null),selector:(0,D.P1)(te.jl,(function(e){return{style:e?{}:{display:"none"}}}))}},epics:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?vL(Object(r),!0).forEach((function(t){hL(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vL(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},aL),reducers:{gnresource:WM,gnsave:VM,controls:FM.Z}});var SL=(0,$e.Z)(ST());const PL=function(e){var t=e.shareUrl,r=void 0===t?"":t,n=e.copied,o=void 0!==n&&n,i=e.onCopy,a=void 0===i?function(){}:i,l=e.onMouseLeave,s=void 0===l?function(){}:l;return c().createElement(SL,{text:r,tooltipId:o?"share.msgCopiedUrl":"share.msgToCopyUrl",tooltipPosition:"bottom",key:o.toString(),onCopy:function(){return a(r)}},c().createElement(Je.Z,{bsStyle:"primary",onMouseLeave:function(){return s()}},c().createElement(g.Glyphicon,{glyph:"copy"})))};function jL(e){return(jL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function CL(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xL(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function TL(e,t){return(TL=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function kL(e,t){return!t||"object"!==jL(t)&&"function"!=typeof t?IL(e):t}function IL(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function AL(e){return(AL=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function FL(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var DL=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&TL(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=AL(n);if(o){var r=AL(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return kL(this,e)});function a(){var e;CL(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return FL(IL(e=i.call.apply(i,[this].concat(r))),"state",{copied:!1,forceDrawer:!1,connections:!1}),FL(IL(e),"renderTools",(function(){return c().createElement(c().Fragment,null,e.props.showTOCToggle&&c().createElement(g.Checkbox,{checked:e.state.forceDrawer,onChange:function(){return e.setState({forceDrawer:!e.state.forceDrawer})}},c().createElement(b.Z,{msgId:"share.forceDrawer"})),e.props.showConnectionsParamToggle&&c().createElement(g.Checkbox,{checked:e.state.connections,onChange:function(){return e.setState({connections:!e.state.connections})}},c().createElement(b.Z,{msgId:"share.showConnections"})))})),FL(IL(e),"generateUrl",(function(){var t=zx.parse(e.props.shareUrl,!0);return e.state.forceDrawer&&(t.query.forceDrawer=!0),e.state.connections&&(t.query.connections=!0),zx.format(t)})),e}return t=a,(r=[{key:"render",value:function(){var e=this,t='<iframe style="border: none;" height="400" width="600" src="'+this.generateUrl(this.props.shareUrl)+'"></iframe>';return c().createElement("div",{className:"input-link"},c().createElement("div",{className:"input-link-head"},c().createElement("h4",null,c().createElement(b.Z,{msgId:"share.embeddedLinkTitle"})),c().createElement(PL,{copied:this.state.copied,shareUrl:t,onCopy:function(){return e.setState({copied:!0})},onMouseLeave:function(){return e.setState({copied:!1})}})),c().createElement("div",{className:"input-link-tools"},this.renderTools()),c().createElement("pre",null,c().createElement("code",null,t)))}}])&&xL(t.prototype,r),a}(c().Component);FL(DL,"propTypes",{shareUrl:u().string,showTOCToggle:u().bool,showConnectionsParamToggle:u().bool}),FL(DL,"defaultProps",{showTOCToggle:!0,shareUrl:""});const RL=DL;function NL(e){return(NL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ML(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function LL(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _L(e,t){return(_L=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ZL(e,t){return!t||"object"!==NL(t)&&"function"!=typeof t?BL(e):t}function BL(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zL(e){return(zL=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function GL(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var UL=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_L(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=zL(n);if(o){var r=zL(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return ZL(this,e)});function a(){var e;ML(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return GL(BL(e=i.call.apply(i,[this].concat(r))),"state",{copied:!1}),e}return t=a,(r=[{key:"render",value:function(){var e=this;return c().createElement("div",{className:"input-link"},c().createElement("div",{className:"input-link-head"},c().createElement("h4",null,c().createElement(b.Z,{msgId:"share.directLinkTitle"})),c().createElement(PL,{copied:this.state.copied,shareUrl:this.props.shareUrl,onCopy:function(){return e.setState({copied:!0})},onMouseLeave:function(){return e.setState({copied:!1})}})),c().createElement("pre",{style:{padding:0}},c().createElement(g.FormControl,{readOnly:!0,type:"text",value:this.props.shareUrl,onFocus:function(e){return e.target.select()}})))}}])&&LL(t.prototype,r),a}(c().Component);GL(UL,"propTypes",{shareUrl:u().string});const WL=UL;function VL(e){var t=e.resourceId,r=e.pathTemplate,n=e.enabled,o=e.onClose,i=function(e){var t=e.resourceId,r=e.pathTemplate,n=zx.parse(location.href),o=n.host,i=n.protocol,a=r.replace(/\{id\}/g,t);return zx.format({host:o,protocol:i,pathname:a})}({resourceId:t,pathTemplate:r});return c().createElement(y.Z,{modalClassName:"gn-share-modal",title:c().createElement(b.Z,{msgId:"share.title"}),show:n,fitContent:!0,clickOutEnabled:!1,onClose:function(){return o()}},c().createElement(WL,{shareUrl:i}),c().createElement(RL,{showTOCToggle:!1,shareUrl:i}))}VL.propTypes={resourceId:u().oneOfType([u().number,u().string]),pathTemplate:u().string,enabled:u().bool,onClose:u().func},VL.defaultProps={resourceId:null,pathTemplate:"/apps/{id}/embed",enabled:!1,onClose:function(){}};var qL=(0,p.connect)((0,D.P1)([function(e){var t,r;return null==e||null===(t=e.controls)||void 0===t||null===(r=t.share)||void 0===r?void 0:r.enabled},function(e){var t;return null==e||null===(t=e.gnresource)||void 0===t?void 0:t.id},X._H],(function(e,t,r){return{enabled:e,resourceId:t||(null==r?void 0:r.id)}})),{onClose:v.Xi.bind(null,"share",null)})(VL);const HL=(0,O.rx)("Share",{component:qL,containers:{BurgerMenu:{name:"share",position:1e3,text:c().createElement(b.Z,{msgId:"share.title"}),icon:c().createElement(g.Glyphicon,{glyph:"share-alt"}),action:v.Xi.bind(null,"share",null),selector:(0,D.P1)((function(e){var t;return null==e||null===(t=e.gnresource)||void 0===t?void 0:t.isNew}),(function(e){var t;return null==e||null===(t=e.gnresource)||void 0===t?void 0:t.id}),X._H,(function(e,t,r){return{style:!e&&(t||null!=r&&r.id)?{}:{display:"none"}}}))}},epics:{},reducers:{controls:FM.Z}});var $L=r(65986),KL=r(75751),YL=r(46618),XL=r(21625),QL=r(79870),JL={plugins:{AddGroupPlugin:A,IdentifyPlugin:F.default,TOCPlugin:Ue,MapPlugin:We.default,ToolbarPlugin:Ve.default,DrawerMenuPlugin:zt,ZoomAllPlugin:Gt.default,MapLoadingPlugin:Ut.default,OmniBarPlugin:Wt.default,BackgroundSelectorPlugin:Vt.default,FullScreenPlugin:qt.Z,ZoomInPlugin:Ht.default,ZoomOutPlugin:$t.default,ExpanderPlugin:Kt.default,BurgerMenuPlugin:Yt.default,UndoPlugin:Pr,RedoPlugin:Pr,ScaleBoxPlugin:jr.default,MapFooterPlugin:Cr.default,PrintPlugin:xr.default,MeasurePlugin:io,FilterLayerPlugin:ao,TOCItemsSettingsPlugin:Pm,WidgetsPlugin:fy,WidgetsBuilderPlugin:Qw,WidgetsTrayPlugin:_E,NotificationsPlugin:tS,FeatureEditorPlugin:Wj,QueryPanelPlugin:bT,SavePlugin:gL,SaveAsPlugin:EL,MetadataExplorerPlugin:jI,GridContainerPlugin:MI,StyleEditorPlugin:$I,TimelinePlugin:KI.default,PlaybackPlugin:YI.default,MousePositionPlugin:vA,SearchPlugin:$A,SearchServicesConfigPlugin:gD,SwipePlugin:XD,LocatePlugin:ER,SharePlugin:HL,LayerDownloadPlugin:EM,AddReducersAndEpics:{reducers:{security:$L.Z,maps:KL.Z,maplayout:YL.Z},epics:i.ZP}},requires:{ReactSwipe:XL.Z,SwipeHeader:QL.Z}};const e_=a.A?(0,a.A)(JL):JL},83775:(e,t,r)=>{(e.exports=r(9252)()).push([e.id,".msgapi #mapstore-elevation {\n    width: 100%;\n    /*margin-top: -46px;*/\n    height: 80px;\n    padding: 0 5px;\n}\n\n.msgapi label#mapstore-elevation-label {\n    margin-top: 10px;\n}\n\n.msgapi .custom-tooltip {\n    width: auto;\n    margin: 0;\n    line-height: 24px;\n    border: 1px solid #C1C1C1;\n    background-color: rgba(255, 255, 255, 0.8);\n    padding: 5px;\n}\n.msgapi .custom-tooltip  .label {\n  margin: 0;\n  color: #82CA9D;\n  font-weight: bold;\n  font-size: 16px;\n}\n",""])},59297:(e,t,r)=>{(e.exports=r(9252)()).push([e.id,"\n.msgapi .featuregrid-toolbar {\n    margin-top: 5px;\n    margin-bottom: 5px;\n}\n\n.msgapi #featuregrid-toolbar .btn {\n    overflow: hidden;\n}\n",""])},28492:(e,t,r)=>{(e.exports=r(9252)()).push([e.id,"",""])},74704:(e,t,r)=>{(e.exports=r(9252)()).push([e.id," .msgapi #mapstore-mouseposition {\n    z-index: 10;\n    top: -10px;\n    right: 45%;\n    position: absolute;\n    margin: 8px;\n    text-shadow: -1px -1px 1px #000,\n                  1px -1px 1px #000,\n                 -1px  1px 1px #000,\n                  1px  1px 1px #000;\n}\n\n.msgapi #mapstore-mouseposition .label {\n    max-width: 350px;\n    min-width: 200px;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n    vertical-align: middle;\n\n}\n\n.msgapi #mapstore-mouseposition .label-info {\n    background-color:rgba(91,192,222,0);\n    color: white;\n    font-size: 110%;\n}\n\n.msgapi #mapstore-mouseposition h5 {\n    display: inline-block;\n}\n\n\n.msgapi #mapstore-mousepositionsettings .form-group {\n    margin-bottom: 0 !important;\n}\n\n.msgapi #mapstore-mousepositionsettings select, .msgapi #mapstore-mousepositionsettings button {\n    width: 60% !important;\n    float: right;\n    height: 35px;\n}\n\n.msgapi #mapstore-mousepositionsettings label {\n    width: 100% !important;\n}\n\n\n.msgapi #mapstore-mouseposition .label-info {\n    white-space: normal;\n    color: black;\n    font-size: 110%;\n    padding: 0;\n}\n\n.msgapi #mapstore-mouseposition {\n    bottom: 5px;\n    right: 264px;\n    top: auto;\n    margin: 0;\n    text-shadow: none;\n    background-color: white;\n    width: 160px;\n    height: 46px;\n    padding-left: 5px;\n    padding-top: 2px;\n}\n\n.msgapi #mapstore-mouseposition h5 {\n    margin-top: 5px;\n}\n\n.msgapi .mouseposition-separator {\n    display: block;\n}\n\n.msgapi #mapstore-mouseposition-mobile {\n        bottom: 25px;\n        right: 30px;\n        z-index: 10;\n        position: absolute;\n        text-shadow: -1px -1px 1px #000, 1px -1px 1px #000, -1px 1px 1px #000, 1px 1px 1px #000;\n    }\n\n.msgapi #mapstore-mouseposition-mobile .label {\n        display: inline-block;\n        max-width: 280px;\n        min-width: 200px;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n        vertical-align: middle;\n}\n\n.msgapi #mapstore-mouseposition-mobile .label-info {\n        background-color:rgba(91,192,222,0);\n        color: white;\n        font-size: 90%;\n}\n\n.msgapi #mapstore-mouseposition .form-group {\n    float: right;\n}\n\n.msgapi #mapstore-mouseposition .form-group .control-label {\n    display: none;\n}\n\n.msgapi #mapstore-mouseposition .form-group select {\n    width: 90px;\n    font-size: 11px;\n    padding: 2px;\n}\n",""])},85323:(e,t,r)=>{(e.exports=r(9252)()).push([e.id,'\n\n.msgapi .ql-snow .ms-ql-iframe-tooltip[data-mode=video]::before {\n    content: "Enter iframe url:";\n}\n\n\n',""])},15198:(e,t,r)=>{(e.exports=r(9252)()).push([e.id,"/* Menu Button */\n.msgapi .drawer-menu-button {\n    position: absolute;\n    z-index:1000;\n    left: 30px;\n    top: 8px;\n    width:30px;\n    background: transparent;\n    outline: none;\n    border: transparent;\n    font-size: 14px;\n}\n\n.msgapi .drawer-menu-button:hover {\n    background: transparent;\n}\n\n.msgapi #drawer-menu-button:active{\n    box-shadow: none;\n}\n\n.msgapi #mapstore-drawermenu > div > div:nth-child(2) {\n    display: none;\n}\n\n.msgapi .nav-content #background-switcher .thumbnail {\n    border-radius: 0 !important;\n    margin-bottom: 40px;\n    width: 220px !important;\n}\n.msgapi .nav-content #background-switcher .thumbnail img {\n    border-radius: 0 !important;\n    height: 90px;\n    width: 220px !important;\n}\n\n.msgapi .nav-content #background-switcher .thumbnail .caption {\n    font-size: 14px !important;\n    text-align: left !important;\n    top: -20px !important;\n    position: absolute !important;\n}\n\n.msgapi .nav-content #background-switcher {\n    margin-top: 10px;\n}\n\n.msgapi #mapstore-drawermenu .panel {\n    border: none;\n    box-shadow: none;\n}\n\n.msgapi div.nav-menu {\n    -webkit-transform:   translate3d(300px, 0, 0);\n    -moz-transform: \t translate3d(300px, 0, 0);\n    -ms-transform: \t\t translate3d(300px, 0, 0);\n    -o-transform: \t\t translate3d(300px, 0, 0);\n    box-shadow: 2px 0px 15px #A7A7A7;\n}\n\n.msgapi .nav-menu  .navHeader {\n    height: 50px;\n}\n.msgapi .nav-menu > .nav-content .navHeader .title{\n    font-size: 16px;\n    position: absolute;\n    margin: 13px;\n    font-weight: bold;\n}\n.msgapi .nav-content  .section {\n    margin-bottom: 2px;\n}\n.msgapi .nav-content  .section .sectionHeader{\n    padding: 5px;\n    cursor: pointer;\n}\n.msgapi .nav-content .section .sectionHeader>.glyphicon{\n    /* Firefox */\n    -moz-transition: all .3s ease;\n    /* WebKit */\n    -webkit-transition: all .3s ease;\n    /* Opera */\n    -o-transition: all .3s ease;\n    /* Standard */\n    transition: all .3s ease;\n}\n.msgapi .nav-content  .section .sectionTitle{\n    padding-left: 10px;\n\n}\n.msgapi .nav-content  .section .sectionContent{\n    -moz-transition: max-height .3s ease;\n    -webkit-transition: max-height .3s ease;\n    -o-transition: max-height .3s ease;\n    transition: max-height .3s ease;\n\n    box-shadow: inset 0px 0px 10px rgba(0,0,0,.5);\n    padding: 5px;\n}\n\n.msgapi .navButtons {\n    float: right;\n}\n\n.msgapi #drawer-menu-button {\n     position: absolute;\n}\n",""])},98065:(e,t,r)=>{(e.exports=r(9252)()).push([e.id,".msgapi #locate-btn {\n    position: absolute;\n    z-index: 1000;\n    right: 10px;\n    bottom: 150px;\n}\n\n.msgapi #mapstore-toolbar #locate-btn {\n    position: static;\n}\n",""])},85985:(e,t,r)=>{(e.exports=r(9252)()).push([e.id,".msgapi div.record-grid {\n    padding-left: 0;\n    padding-right: 0;\n}\n\n.msgapi div.record-grid .record-item{\n    height: auto;\n}\n.msgapi div.record-grid .record-item .panel-body{\n    padding: 0;\n}\n\n.msgapi #mapstore-catalog-panel button.search-button {\n    margin-bottom: 10px;\n}\n\n.msgapi #mapstore-catalog-panel .record-item {\n    min-height: 150px;\n}\n.msgapi #catalog-root {\n    position: static!important;\n}\n\n/*\n!important is needed because the library we used\nuse inline style which cannot be overridden unless\nwe use !important*/\n@media (max-width: 500px) {\n    .msgapi div .catalog-sidebar.nav-menu {\n        width: 100% !important\n    }\n}\n\n.msgapi #mapstore-metadata-explorer{\n    margin-bottom: 0\n}\n",""])},12485:e=>{e.exports='<html>\n  <head>\n    <title>Geoserver GetFeatureInfo output</title>\n  </head>\n    <style type="text/css">\n    \ttable.featureInfo, table.featureInfo td, table.featureInfo th {\n    \t\tborder:1px solid #ddd;\n    \t\tborder-collapse:collapse;\n    \t\tmargin:0;\n    \t\tpadding:0;\n    \t\tfont-size: 90%;\n    \t\tpadding:.2em .1em;\n    \t}\n    \ttable.featureInfo th {\n    \t    padding:.2em .2em;\n    \t\tfont-weight:bold;\n    \t\tbackground:#eee;\n    \t}\n    \ttable.featureInfo td{\n    \t\tbackground:#fff;\n    \t}\n    \ttable.featureInfo tr.odd td{\n    \t\tbackground:#eee;\n    \t}\n    \ttable.featureInfo caption{\n    \t\ttext-align:left;\n    \t\tfont-size:100%;\n    \t\tfont-weight:bold;\n    \t\tpadding:.2em .2em;\n    \t}\n    </style>\n  <body>\n    <table class="featureInfo">\n      <caption class="featureInfo">states</caption>\n      <tr>\n        <th>fid</th>\n          <th >STATE_NAME</th>\n          <th >STATE_FIPS</th>\n          <th >SUB_REGION</th>\n          <th >STATE_ABBR</th>\n          <th >LAND_KM</th>\n      </tr>\n      <tr>\n        <td>states.29</td>\n        <td>Wyoming</td>\n        <td>56</td>\n        <td>Mtn</td>\n        <td>WY</td>\n        <td>251500.801</td>\n      </tr>\n    </table>\n    <br/>\n  </body>\n</html>'},20135:e=>{e.exports='{\n  "type": "FeatureCollection",\n  "totalFeatures": "unknown",\n  "features": [\n      {\n    "type": "Feature",\n    "id": "states.29",\n    "geometry": {\n      "type": "MultiPolygon",\n      "coordinates": [\n        [\n          [\n            [-1.15831389980175E7, 5115884.78673627],\n            [-1.158334883525764E7, 5095927.61163692],\n            [-1.158318319185534E7, 5069757.00399456],\n            [-1.158292671174856E7, 5012817.65726345],\n            [-1.168119588467766E7, 5011501.68893432],\n            [-1.171952218348237E7, 5011805.51696107],\n            [-1.182245230349099E7, 5012358.03633596],\n            [-1.183643948618967E7, 5012535.77548496],\n            [-1.189613934986567E7, 5012118.79424704],\n            [-1.194496385588862E7, 5012366.44384074],\n            [-1.201338092624966E7, 5012844.6510808],\n            [-1.213912753436923E7, 5012116.58180143],\n            [-1.224530617975818E7, 5011994.45558498],\n            [-1.225209889508638E7, 5012037.8190659],\n            [-1.23620611786479E7, 5011845.33978484],\n            [-1.236213086464914E7, 5050542.48847943],\n            [-1.236206540878855E7, 5098070.44035716],\n            [-1.236180135895639E7, 5160419.97558219],\n            [-1.23615872915756E7, 5236675.5279452],\n            [-1.236185657342383E7, 5315010.76063796],\n            [-1.236166543785814E7, 5355424.25785557],\n            [-1.236158395199088E7, 5390784.55533999],\n            [-1.236198815306194E7, 5462754.83859328],\n            [-1.236211728367126E7, 5538995.97145504],\n            [-1.236212318360428E7, 5568867.31982516],\n            [-1.236232444924363E7, 5620854.95417318],\n            [-1.229288824894438E7, 5620316.91583206],\n            [-1.2288781895568E7, 5621314.94100872],\n            [-1.224456390139357E7, 5621970.64383454],\n            [-1.222273014174734E7, 5621455.36603028],\n            [-1.209203215399677E7, 5621150.43241323],\n            [-1.205128866376898E7, 5621546.67495262],\n            [-1.201067341359458E7, 5621492.04691732],\n            [-1.182865814246373E7, 5620919.18090556],\n            [-1.180215653392956E7, 5621084.9446589],\n            [-1.169794913408358E7, 5621495.03806919],\n            [-1.169313957548385E7, 5621693.24344854],\n            [-1.158383374295954E7, 5621104.15015297],\n            [-1.158379210946998E7, 5554761.48947335],\n            [-1.158396710370951E7, 5493626.06569343],\n            [-1.158382183177402E7, 5488039.68771347],\n            [-1.158379377926234E7, 5442710.58976854],\n            [-1.158361967557875E7, 5388962.94229949],\n            [-1.158375815702529E7, 5385191.61647555],\n            [-1.158342865133254E7, 5312442.79715209],\n            [-1.15834303211249E7, 5253508.54391938],\n            [-1.158312797738791E7, 5160957.12459852],\n            [-1.15831389980175E7, 5115884.78673627]\n          ]\n        ]\n      ]\n    },\n    "geometry_name": "the_geom",\n    "properties": {\n      "STATE_NAME": "Wyoming",\n      "STATE_FIPS": "56",\n      "SUB_REGION": "Mtn",\n      "STATE_ABBR": "WY",\n      "LAND_KM": 251500.801,\n      "WATER_KM": 1848.149,\n      "PERSONS": 453588,\n      "FAMILIES": 119825,\n      "HOUSHOLD": 168839,\n      "MALE": 227007,\n      "FEMALE": 226581,\n      "WORKERS": 164561,\n      "DRVALONE": 153679,\n      "CARPOOL": 28109,\n      "PUBTRANS": 2963,\n      "EMPLOYED": 207868,\n      "UNEMPLOY": 13112,\n      "SERVICE": 71419,\n      "MANUAL": 29157,\n      "P_MALE": 0.5,\n      "P_FEMALE": 0.5,\n      "SAMP_POP": 83202,\n      "bbox": [-1.236232444924363E7, 5011501.68893432, -1.158292671174856E7, 5621970.64383454]\n    }\n  }],\n  "crs": {\n    "type": "name",\n    "properties": {\n      "name": "urn:ogc:def:crs:EPSG::3857"\n    }\n  },\n  "bbox": [-1.236232444924363E7, 5011501.68893432, -1.158292671174856E7, 5621970.64383454]\n}'},71062:e=>{e.exports="Results for FeatureType 'http://www.openplans.org/topp:states':\n--------------------------------------------\nthe_geom = [GEOMETRY (Polygon) with 48 points]\nSTATE_NAME = Wyoming\nSTATE_FIPS = 56\nSUB_REGION = Mtn\nSTATE_ABBR = WY\nLAND_KM = 251500.801\nWATER_KM = 1848.149\nPERSONS = 453588.0\nFAMILIES = 119825.0\nHOUSHOLD = 168839.0\nMALE = 227007.0\nFEMALE = 226581.0\nWORKERS = 164561.0\nDRVALONE = 153679.0\nCARPOOL = 28109.0\nPUBTRANS = 2963.0\nEMPLOYED = 207868.0\nUNEMPLOY = 13112.0\nSERVICE = 71419.0\nMANUAL = 29157.0\nP_MALE = 0.5\nP_FEMALE = 0.5\nSAMP_POP = 83202.0\n--------------------------------------------"},57845:(e,t,r)=>{var n=r(83775);"string"==typeof n&&(n=[[e.id,n,""]]),r(14246)(n,{}),n.locals&&(e.exports=n.locals)},49548:(e,t,r)=>{var n=r(59297);"string"==typeof n&&(n=[[e.id,n,""]]),r(14246)(n,{}),n.locals&&(e.exports=n.locals)},65207:(e,t,r)=>{var n=r(28492);"string"==typeof n&&(n=[[e.id,n,""]]),r(14246)(n,{}),n.locals&&(e.exports=n.locals)},94889:(e,t,r)=>{var n=r(74704);"string"==typeof n&&(n=[[e.id,n,""]]),r(14246)(n,{}),n.locals&&(e.exports=n.locals)},89531:(e,t,r)=>{var n=r(85323);"string"==typeof n&&(n=[[e.id,n,""]]),r(14246)(n,{}),n.locals&&(e.exports=n.locals)},16385:(e,t,r)=>{var n=r(15198);"string"==typeof n&&(n=[[e.id,n,""]]),r(14246)(n,{}),n.locals&&(e.exports=n.locals)},52780:(e,t,r)=>{var n=r(98065);"string"==typeof n&&(n=[[e.id,n,""]]),r(14246)(n,{}),n.locals&&(e.exports=n.locals)},65288:(e,t,r)=>{var n=r(85985);"string"==typeof n&&(n=[[e.id,n,""]]),r(14246)(n,{}),n.locals&&(e.exports=n.locals)},3932:(e,t,r)=>{e.exports=r.p+"MapStore2/web/client/components/catalog/img/default.jpg"},97671:e=>{e.exports="data:image/gif;base64,R0lGODlhEAALAPQAAP///zMzM+Hh4dnZ2e7u7jc3NzMzM1dXV5qamn9/f8fHx05OTm5ubqGhoYKCgsrKylFRUTY2NnFxcerq6t/f3/b29l9fX+Li4vT09MTExLKystTU1PHx8QAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCwAAACwAAAAAEAALAAAFLSAgjmRpnqSgCuLKAq5AEIM4zDVw03ve27ifDgfkEYe04kDIDC5zrtYKRa2WQgAh+QQJCwAAACwAAAAAEAALAAAFJGBhGAVgnqhpHIeRvsDawqns0qeN5+y967tYLyicBYE7EYkYAgAh+QQJCwAAACwAAAAAEAALAAAFNiAgjothLOOIJAkiGgxjpGKiKMkbz7SN6zIawJcDwIK9W/HISxGBzdHTuBNOmcJVCyoUlk7CEAAh+QQJCwAAACwAAAAAEAALAAAFNSAgjqQIRRFUAo3jNGIkSdHqPI8Tz3V55zuaDacDyIQ+YrBH+hWPzJFzOQQaeavWi7oqnVIhACH5BAkLAAAALAAAAAAQAAsAAAUyICCOZGme1rJY5kRRk7hI0mJSVUXJtF3iOl7tltsBZsNfUegjAY3I5sgFY55KqdX1GgIAIfkECQsAAAAsAAAAABAACwAABTcgII5kaZ4kcV2EqLJipmnZhWGXaOOitm2aXQ4g7P2Ct2ER4AMul00kj5g0Al8tADY2y6C+4FIIACH5BAkLAAAALAAAAAAQAAsAAAUvICCOZGme5ERRk6iy7qpyHCVStA3gNa/7txxwlwv2isSacYUc+l4tADQGQ1mvpBAAIfkECQsAAAAsAAAAABAACwAABS8gII5kaZ7kRFGTqLLuqnIcJVK0DeA1r/u3HHCXC/aKxJpxhRz6Xi0ANAZDWa+kEAA7AAAAAAAAAAAA"},18845:(e,t,r)=>{e.exports=r.p+"MapStore2/web/client/components/style/vector/iconNotFound.png"},72810:()=>{},36631:()=>{},86799:()=>{}}]);