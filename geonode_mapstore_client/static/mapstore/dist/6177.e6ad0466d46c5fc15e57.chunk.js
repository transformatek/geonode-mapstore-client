(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[6177,2259],{47805:(e,t,r)=>{"use strict";r.r(t),r.d(t,{cqlToOgc:()=>D,escapeCQLStrings:()=>P,checkOperatorValidity:()=>M,isCrossLayerFilterValid:()=>j,setupCrossLayerFilterDefaults:()=>k,ogcDateField:()=>q,ogcListField:()=>H,ogcStringField:()=>U,ogcBooleanField:()=>K,ogcNumberField:()=>X,processOGCSimpleFilterField:()=>Q,toOGCFilterParts:()=>z,toOGCFilter:()=>W,processOGCFilterGroup:()=>J,processOGCFilterFields:()=>$,getGmlPointElement:()=>Y,getGmlPolygonElement:()=>ee,getGmlLineStringElement:()=>te,processOGCGeometry:()=>re,processOGCSpatialFilter:()=>oe,getGetFeatureBase:()=>ne,getCrossLayerCqlFilter:()=>ie,processOGCCrossLayerFilter:()=>ae,toCQLFilter:()=>le,processCQLFilterGroup:()=>se,getCQLGeometryElement:()=>ce,processCQLSpatialFilter:()=>ue,cqlDateField:()=>pe,cqlStringField:()=>de,cqlBooleanField:()=>ge,cqlNumberField:()=>fe,findSubGroups:()=>me,cqlListField:()=>Oe,processCQLFilterFields:()=>ye,processCQLSimpleFilterField:()=>Fe,getOgcAllPropertyValue:()=>ve,getSLD:()=>he,getWFSFilterData:()=>we,isLikeOrIlike:()=>Se,isFilterEmpty:()=>be,isFilterValid:()=>Ce,composeAttributeFilters:()=>Te,reprojectFilterInNativeCrs:()=>Ge,normalizeFilterCQL:()=>xe,mergeFiltersToOGC:()=>Ee});var o=r(65692),n=r(78889),i=r(99321),a=r(89291),l=r(89737),s=r(2245),c=r.n(s),u=r(90183),p=r(27361),d=r.n(p),g=r(14293),f=r.n(g),m=r(52353),O=r.n(m),y=r(1469),F=r.n(y),v=r(13311),h=r.n(v),w=r(30998),S=r.n(w),b=r(47037),C=r.n(b),L=r(85564),T=r.n(L);function G(e){return function(e){if(Array.isArray(e))return x(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return x(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?x(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=new Array(t);r<t;r++)o[r]=e[r];return o}function E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E(Object(r),!0).forEach((function(t){N(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function N(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var I,D=function(e,t){var r=c()(t);return(0,l.Z)(r)((0,a.read)(e))},P=function(e){return e&&e.replace?e.replace(/\'/g,"''"):e},M=function(e,t){return!f()(e)&&"isNull"!==t||!O()(e)&&"isNull"===t},j=function(e){return d()(e,"operation",!1)&&d()(e,"collectGeometries.queryCollection.typeName",!1)&&d()(e,"collectGeometries.queryCollection.geometryName",!1)},B=function(e){return'"'+e+'"'},k=function(e){if(!e||!d()(e,"collectGeometries.queryCollection"))return null;if(d()(e,"collectGeometries.queryCollection")){var t=(d()(e,"collectGeometries.queryCollection.filterFields")||[]).filter((function(e){return M(e.value,e.operator)})),r=d()(e,"collectGeometries.queryCollection.groupFields")||[{id:1,index:0,logic:"OR"}];return _(_({},e),{},{collectGeometries:_(_({},e.collectGeometries),{},{queryCollection:_(_({},e.collectGeometries.queryCollection),{},{filterFields:t,groupFields:r})})})}return null},R=function(e){return e?"1.0"===e?"1.0.0":"1.1"===e?"1.1.0":e:"2.0"},A={ogc:{startTag:"<ogc:PropertyName>",endTag:"</ogc:PropertyName>"},fes:{startTag:"<fes:ValueReference>",endTag:"</fes:ValueReference>"}},q=function(e,t,r,o){var n;if("><"===t){if(r.startDate&&r.endDate){var a=r.startDate.toISOString?r.startDate.toISOString():r.startDate,l=r.endDate.toISOString?r.endDate.toISOString():r.endDate;n=i.ogcComparisonOperators[t](o,A[o].startTag+e+A[o].endTag+"<"+o+":LowerBoundary><"+o+":Literal>"+a+"</"+o+":Literal></"+o+":LowerBoundary><"+o+":UpperBoundary><"+o+":Literal>"+l+"</"+o+":Literal></"+o+":UpperBoundary>")}}else if(r.startDate){var s=r.startDate.toISOString?r.startDate.toISOString():r.startDate;n=i.ogcComparisonOperators[t](o,A[o].startTag+e+A[o].endTag+"<"+o+":Literal>"+s+"</"+o+":Literal>")}return n},H=function(e,t,r,o){var n;return f()(r)||(n=i.ogcComparisonOperators[t](o,A[o].startTag+e+A[o].endTag+"<"+o+":Literal>"+r+"</"+o+":Literal>")),n},U=function(e,t,r,o){var n;return M(r,t)&&(n="isNull"===t?i.ogcComparisonOperators[t](o,A[o].startTag+e+A[o].endTag):"="===t?i.ogcComparisonOperators[t](o,A[o].startTag+e+A[o].endTag+"<"+o+":Literal>"+r+"</"+o+":Literal>"):i.ogcComparisonOperators[t](o,A[o].startTag+e+A[o].endTag+"<"+o+":Literal>*"+r+"*</"+o+":Literal>")),n},K=function(e,t,r,o){var n="";return M(r,t)&&"="===t&&""!==r&&(n=i.ogcComparisonOperators[t](o,A[o].startTag+e+A[o].endTag+"<"+o+":Literal>"+r+"</"+o+":Literal>")),n},X=function(e,t,r,o){var n;if("><"===t)f()(r)||null===r.lowBound||void 0===r.lowBound||null!==r.upBound&&void 0!==r.upBound?f()(r)||null===r.upBound||void 0===r.upBound||null!==r.lowBound&&void 0!==r.lowBound?f()(r)||null===r.upBound||void 0===r.upBound||null===r.lowBound||void 0===r.lowBound||(n=i.ogcComparisonOperators[t](o,A[o].startTag+e+A[o].endTag+"<"+o+":LowerBoundary><"+o+":Literal>"+r.lowBound+"</"+o+":Literal></"+o+":LowerBoundary><"+o+":UpperBoundary><"+o+":Literal>"+r.upBound+"</"+o+":Literal></"+o+":UpperBoundary>")):n=i.ogcComparisonOperators["<="](o,A[o].startTag+e+A[o].endTag+"<"+o+":Literal>"+r.upBound+"</"+o+":Literal>"):n=i.ogcComparisonOperators[">="](o,A[o].startTag+e+A[o].endTag+"<"+o+":Literal>"+r.lowBound+"</"+o+":Literal>");else{var a=f()(r)||null===r.lowBound||void 0===r.lowBound?r:r.lowBound;f()(a)||(n=i.ogcComparisonOperators[t](o,A[o].startTag+e+A[o].endTag+"<"+o+":Literal>"+a+"</"+o+":Literal>"))}return n},Q=function(e,t){var r="";switch(e.type){case"date":r=q(e.attribute,e.operator,e.values,t);break;case"number":r=X(e.attribute,e.operator,e.values,t);break;case"string":r=U(e.attribute,e.operator,e.values,t);break;case"boolean":r=K(e.attribute,e.operator,e.values,t);break;case"list":e.values&&e.values.length>0&&(r=e.values.reduce((function(r,o){var n=null===o||"null"===o?"isNull":"=";return r+U(e.attribute,n,o,t)}),""),r=i.ogcLogicalOperators.OR(t,r))}return r},V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.typeName,r=e.geometryName,o=e.cqlFilter,n=void 0===o?"INCLUDE":o;return"queryCollection('".concat(t,"', '").concat(r,"','").concat(P(n),"')")},Z=function(e){return"collectGeometries(".concat(e,")")},z=function(e,t,r){var o,a,l,s,c=[];if(e.filterFields&&e.filterFields.length>0)""!==(o=e.groupFields&&e.groupFields.length>0?I.processOGCFilterGroup(e.groupFields[0],e,r):I.processOGCFilterFields(null,e,r))&&c.push(o);else if(e.simpleFilterFields&&e.simpleFilterFields.length>0){var u=i.ogcLogicalOperators.AND(r,e.simpleFilterFields.map((function(e){return Q(e,r)})).join(""));c.push(u)}if(F()(e.spatialField)?(s=h()(e.spatialField,(function(e){return"BBOX"===e.operation})))||(l=e.spatialField):e.spatialField&&("BBOX"===e.spatialField.operation?s=e.spatialField:l=[e.spatialField]),s){if(F()(s.geometry&&s.geometry.extent[0])){var p=s.geometry.extent.reduce((function(e,o){var n=Object.assign({},s);return s.geometry.extent=o,e+I.processOGCSpatialFilter(t,n,r)}),"");a=i.ogcLogicalOperators.OR(r,p)}c.push(a)}else if(l&&(l=l.filter((function(e){return e&&e.geometry&&e.operation}))).length>0){var d=l.map((function(e){return I.processOGCSpatialFilter(t,e,r)})).join("");a=l.length>1?i.ogcLogicalOperators[e.spatialFieldOperator||"AND"](r,d):d,c.push(a)}if(e.crossLayerFilter&&e.crossLayerFilter.operation){var g=_(_({},e.crossLayerFilter),{},{attribute:e.crossLayerFilter.attribute});Array.isArray()?g.forEach((function(e){return c.push(I.processOGCCrossLayerFilter(e,r))})):c.push(I.processOGCCrossLayerFilter(g,r))}return e.options&&e.options.cqlFilter&&c.push(D(e.options.cqlFilter,{filterNS:r,wfsVersion:t,gmlVersion:(0,n.wfsToGmlVersion)(t)})),c},W=function(e,t,r){var o,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"EPSG:4326";try{o=t instanceof Object?t:JSON.parse(t)}catch(e){return e}var c=R(r||"2.0"),u="2.0"===c?"fes":"ogc",p=I.getGetFeatureBase(c,o.pagination,i,a,t&&t.options),d=I.toOGCFilterParts(o,c,u),g="";return d.length>0&&(g="<"+u+":Filter>",1===d.length?g+=d[0]:(g+="<"+u+":And>",d.forEach((function(e){g+=e})),g+="</"+u+":And>"),g+="</"+u+":Filter>"),p+="<wfs:Query ".concat("2.0"===c?"typeNames":"typeName",'="').concat(e,'" ').concat("native"!==s&&'srsName="'.concat(s,'"')||"",">"),p+=g,l&&(p+=l.map((function(e){return A[u].startTag+e+A[u].endTag})).join("")),n&&n.sortBy&&n.sortOrder&&(p+="<"+u+":SortBy><"+u+":SortProperty>"+A[u].startTag+n.sortBy+A[u].endTag+"<"+u+":SortOrder>"+n.sortOrder+"</"+u+":SortOrder></"+u+":SortProperty></"+u+":SortBy>"),p+"</wfs:Query></wfs:GetFeature>"},J=function(e,t,r){var o=I.processOGCFilterFields(e,t,r),n=I.findSubGroups(e,t.groupFields);return n.length>0&&n.forEach((function(e){o+=I.processOGCFilterGroup(e,t,r)})),""!==o?i.ogcLogicalOperators[e.logic](r,o):""},$=function(e,t,r){var o=e?t.filterFields.filter((function(t){return t.groupId===e.id&&M(t.value,t.operator)})):t.filterFields.filter((function(e){return M(e.value,e.operator)}));return o.length?o.reduce((function(e,t){var o;switch(t.type){case"date":case"date-time":case"time":o=q(t.attribute,t.operator,t.value,r);break;case"number":o=X(t.attribute,t.operator,t.value,r);break;case"string":o=U(t.attribute,t.operator,t.value,r);break;case"boolean":o=K(t.attribute,t.operator,t.value,r);break;case"list":o=H(t.attribute,t.operator,t.value,r)}return"isNull"===t.operator&&(o=U(t.attribute,t.operator,t.operator,r)),o&&e.push(o),e}),[]).join(""):""},Y=function(e,t,r){return(0,o.pointElement)(e,t,(0,n.wfsToGmlVersion)(r))},ee=function(e,t,r){return(0,o.polygonElement)(e,t,(0,n.wfsToGmlVersion)(r))},te=function(e,t,r){return(0,o.lineStringElement)(e,t,(0,n.wfsToGmlVersion)(r))},re=function(e,t){return(0,o.processOGCGeometry)((0,n.wfsToGmlVersion)(e),t)},oe=function(e,t,r){if(t.collectGeometries)return I.processOGCCrossLayerFilter(t);var a=A[r].startTag+t.attribute+A[r].endTag;switch(t.operation){case"INTERSECTS":case"DWITHIN":case"WITHIN":case"CONTAINS":a+=(0,o.processOGCGeometry)((0,n.wfsToGmlVersion)(e),t.geometry),"DWITHIN"===t.operation&&(a+="<"+r+':Distance units="m">'+(t.geometry.distance||0)+"</"+r+":Distance>");break;case"BBOX":var l=t.geometry.extent[0]+" "+t.geometry.extent[1],s=t.geometry.extent[2]+" "+t.geometry.extent[3];a+='<gml:Envelope srsName="'+t.geometry.projection+'"><gml:lowerCorner>'+l+"</gml:lowerCorner><gml:upperCorner>"+s+"</gml:upperCorner></gml:Envelope>"}return i.ogcSpatialOperators[t.operation](r,a)},ne=function(e,t,r,o){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},i=R(e),a="<wfs:GetFeature ";switch(a+=o?'outputFormat="'+o+'" ':"",a+=t&&(t.startIndex||0===t.startIndex)?'startIndex="'+t.startIndex+'" ':"",a+=n.viewParams?' viewParams="'.concat(n.viewParams,'" '):"",i){case"1.0.0":a+=t&&t.maxFeatures?'maxFeatures="'+t.maxFeatures+'" ':"",a=r?a+' resultType="hits"':a,a+='service="WFS" version="'+i+'" outputFormat="GML2" xmlns:gml="http://www.opengis.net/gml" xmlns:wfs="http://www.opengis.net/wfs" xmlns:ogc="http://www.opengis.net/ogc" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" '+(n.noSchemaLocation?"":'xsi:schemaLocation="http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.0.0/WFS-basic.xsd"')+">";break;case"1.1.0":a+=t&&t.maxFeatures?'maxFeatures="'+t.maxFeatures+'" ':"",a=r?a+' resultType="hits"':a,a+='service="WFS" version="'+i+'" xmlns:gml="http://www.opengis.net/gml" xmlns:wfs="http://www.opengis.net/wfs" xmlns:ogc="http://www.opengis.net/ogc" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" '+(n.noSchemaLocation?"":'xsi:schemaLocation="http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.1.0/wfs.xsd"')+">";break;default:a+=t&&t.maxFeatures?'count="'+t.maxFeatures+'" ':"",a=r&&!t?a+' resultType="hits"':a,a+='service="WFS" version="'+i+'" xmlns:wfs="http://www.opengis.net/wfs/2.0" xmlns:fes="http://www.opengis.net/fes/2.0" xmlns:gml="http://www.opengis.net/gml/3.2" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" '+(n.noSchemaLocation?"":'xsi:schemaLocation="http://www.opengis.net/wfs/2.0 http://schemas.opengis.net/wfs/2.0/wfs.xsd http://www.opengis.net/gml/3.2 http://schemas.opengis.net/gml/3.2.1/gml.xsd"')+">"}return a},ie=function(e){return d()(e,"collectGeometries.queryCollection.cqlFilter")||(d()(e,"collectGeometries.queryCollection.filterFields")||[]).length>0&&(d()(e,"collectGeometries.queryCollection.groupFields")||[]).length>0&&I.toCQLFilter(e.collectGeometries.queryCollection)||"INCLUDE"},ae=function(e,t){var r=t||"ogc",o=A[r].startTag+e.attribute+A[r].endTag;if(e.collectGeometries){var n=I.getCrossLayerCqlFilter(e);o+='<ogc:Function name="collectGeometries"><ogc:Function name="queryCollection">'+"<ogc:Literal>".concat(e.collectGeometries.queryCollection.typeName,"</ogc:Literal>")+"<ogc:Literal>".concat(e.collectGeometries.queryCollection.geometryName,"</ogc:Literal>")+"<ogc:Literal><![CDATA[".concat(n,"]]></ogc:Literal>")+"</ogc:Function></ogc:Function>"}return"DWITHIN"===e.operation&&(o+="<"+r+':Distance units="m">'+(e.distance||0)+"</"+r+":Distance>"),i.ogcSpatialOperators[e.operation](r,o)},le=function(e){var t;try{t=e instanceof Object?e:JSON.parse(e)}catch(e){return e}var r,o,n=[];if(t.filterFields&&t.filterFields.length>0)(r=I.processCQLFilterGroup(t.groupFields[0],t))&&n.push(r);else if(t.simpleFilterFields&&t.simpleFilterFields.length>0){var i=t.simpleFilterFields.reduce((function(e,t){var r=e,o=I.processCQLSimpleFilterField(t);return!1!==o&&(r=e.length>0?e+" AND ("+o+")":"("+o+")"),r}),"");i=i.length>0?i:"INCLUDE",n.push(i)}if(t.spatialField&&(o=I.processCQLSpatialFilter(t))&&n.push(o),t.crossLayerFilter){var a=t.crossLayerFilter,l=a.operation,s=a.attribute,c=a.collectGeometries&&a.collectGeometries.queryCollection;if(l&&s&&c){var u=c.typeName,p=c.geometryName,d=I.getCrossLayerCqlFilter(a),g=Z(V({typeName:u,geometryName:p,cqlFilter:d}));n.push("".concat(l,"(").concat(s,",").concat(g,")"))}}return n.length?"("+(n.length>1?n.join(") AND ("):n[0])+")":null},se=function(e,t){var r="NOR"===e.logic?_(_({},e),{},{logic:"AND",negateAll:!0}):e,o=I.processCQLFilterFields(r,t),n=I.findSubGroups(r,t.groupFields);if(n.length>0){var i=n.map((function(e){return(r.negateAll?"NOT (":"(")+I.processCQLFilterGroup(e,t)+")"})).join(" "+r.logic+" ");return o?[o,i].join(" "+r.logic+" "):i}return o},ce=function(e,t){var r=t+"(";switch(t){case"Point":r+=e.join(" ");break;case"MultiPoint":e.forEach((function(t,o){r+=t.join(" "),r+=o<e.length-1?", ":""}));break;case"Polygon":e.forEach((function(t,n){r+="(";var i=(0,o.closePolygon)(t).map((function(e){return e[0]+" "+e[1]}));r+=i.join(", "),r+=")",r+=n<e.length-1?", ":""}));break;case"MultiPolygon":e.forEach((function(t,n){r+="(",t.forEach((function(e,n){r+="(";var i=(0,o.closePolygon)(e).map((function(e){return e[0]+" "+e[1]}));r+=i.join(", "),r+=")",r+=n<t.length-1?", ":""})),r+=")",r+=n<e.length-1?", ":""}))}return r+=")"},ue=function(e){var t=(F()(e.spatialField)?e.spatialField:[e.spatialField]).filter((function(e){return e&&e.geometry&&e.operation})),r="";return t.forEach((function(o,n){if(r+=o.operation+'("'+o.attribute+'",',o.collectGeometries&&o.collectGeometries.queryCollection)r+=Z(V(o.collectGeometries.queryCollection));else{var i=o.geometry.projection||"";i=2===i.split(":").length?"SRID="+i.split(":")[1]+";":"",r+=i+I.getCQLGeometryElement(o.geometry.coordinates,o.geometry.type)}r+=")",n<t.length-1&&(r+=" ".concat(e.spatialFieldOperator||"AND"," "))})),r},pe=function(e,t,r){var o;return"><"===t?r.startDate&&r.endDate&&(o="("+e+">='"+(r.startDate.toISOString?r.startDate.toISOString():r.startDate)+"' AND "+e+"<='"+(r.endDate.toISOString?r.endDate.toISOString():r.endDate)+"')"):r.startDate&&(o=e+t+"'"+(r.startDate.toISOString?r.startDate.toISOString():r.startDate)+"'"),o},de=function(e,t,r){var o,n=B(e);return f()(r)||(o="isNull"===t?"isNull("+n+")=true":"="===t?n+t+"'"+P(r)+"'":"ilike"===t?"strToLowerCase("+n+") LIKE '%"+P(r).toLowerCase()+"%'":n+" LIKE '%"+P(r)+"%'"),o},ge=function(e,t,r){var o="";return f()(r)||""===r||"="===t&&(o='"'+e+'"'+t+"'"+r+"'"),o},fe=function(e,t,r){var o,n=B(e);if("><"===t)f()(r)||null===r.lowBound||void 0===r.lowBound||null!==r.upBound&&void 0!==r.upBound?f()(r)||null===r.upBound||void 0===r.upBound||null!==r.lowBound&&void 0!==r.lowBound?f()(r)||null===r.upBound||void 0===r.upBound||null===r.lowBound||void 0===r.lowBound||(o="("+n+">='"+r.lowBound+"' AND "+n+"<='"+r.upBound+"')"):o="("+n+"<='"+r.upBound+"')":o="("+n+">='"+r.lowBound+"')";else{var i=f()(r)||null===r.lowBound||void 0===r.lowBound?r:r.lowBound;f()(i)||(o=n+" "+t+" '"+i+"'")}return o},me=function(e,t){return t.filter((function(t){return t.groupId===e.id}))},Oe=function(e,t,r){return I.cqlStringField(e,t,r)},ye=function(e,t){var r=t.filterFields.filter((function(t){return t.groupId===e.id})),o=[];return r&&(r.forEach((function(t){var r;switch(t.type){case"date":case"time":case"date-time":r=I.cqlDateField(t.attribute,t.operator,t.value);break;case"number":r=I.cqlNumberField(t.attribute,t.operator,t.value);break;case"string":r=I.cqlStringField(t.attribute,t.operator,t.value);break;case"boolean":r=I.cqlBooleanField(t.attribute,t.operator,t.value);break;case"list":r=I.cqlListField(t.attribute,t.operator,t.value)}r&&o.push(e.negateAll?"NOT ("+r+")":r)})),o=o.join(" "+e.logic+" ")),o},Fe=function(e){var t=!1;switch(e.type){case"date":t=I.cqlDateField(e.attribute,e.operator,e.values);break;case"number":t=I.cqlNumberField(e.attribute,e.operator,e.values);break;case"string":t=I.cqlStringField(e.attribute,e.operator,e.values);break;case"boolean":t=I.cqlBooleanField(e.attribute,e.operator,e.values);break;case"list":if(e.values.length!==e.optionsValues.length){var r=!1,o=e.values.reduce((function(e,t){return null===t||"null"===t?r=!0:e.push("'"+t+"'"),e}),[]);t=o.length>0?e.attribute+" IN("+o.join(",")+")":t,r&&(t=t?t+" OR isNull("+e.attribute+")=true":"isNull("+e.attribute+")=true")}}return!!(t&&t.length>0)&&t},ve=function(e,t){return'<wfs:GetPropertyValue service="WFS" valueReference=\''.concat(t,'\'\n                version="2.0" xmlns:fes="http://www.opengis.net/fes/2.0"\n                xmlns:gml="http://www.opengis.net/gml/3.2"\n                xmlns:wfs="http://www.opengis.net/wfs/2.0"\n                xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n                xsi:schemaLocation="http://www.opengis.net/wfs/2.0 http://schemas.opengis.net/wfs/2.0/wfs.xsd http://www.opengis.net/gml/3.2 http://schemas.opengis.net/gml/3.2.1/gml.xsd">\n                    <wfs:Query typeNames="').concat(e,'"/>\n            </wfs:GetPropertyValue>')},he=function(e,t,r){var o=I.toOGCFilter(e,t,r),n=o.search("<".concat(I.nsplaceholder,":Filter>"));if(-1!==n){var i=o.search("</wfs:Query>");o=o.substr(n,i-n)}else o="";return'<StyledLayerDescriptor version="1.0.0"\n            xsi:schemaLocation="http://www.opengis.net/sld StyledLayerDescriptor.xsd" xmlns:ogc="http://www.opengis.net/ogc" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:gml="http://www.opengis.net/gml" xmlns:gsml="urn:cgi:xmlns:CGI:GeoSciML:2.0" xmlns:sld="http://www.opengis.net/sld" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><NamedLayer><Name>'.concat(e,"</Name><UserStyle><FeatureTypeStyle><Rule >").concat(o,'<PointSymbolizer><Graphic><Mark><WellKnownName>circle</WellKnownName><Fill><CssParameter name="fill">#0000FF</CssParameter></Fill></Mark><Size>20</Size></Graphic></PointSymbolizer></Rule></FeatureTypeStyle></UserStyle></NamedLayer></StyledLayerDescriptor>')},we=function(e,t){return"string"==typeof e?e:"OGC"===e.filterType?I.toOGCFilter(e.featureTypeName,_(_({},e),{},{options:t}),e.ogcVersion,e.sortOptions,e.hits):I.toCQLFilter(e)},Se=function(e){return"ilike"===e||"like"===e},be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.filterFields,r=void 0===t?[]:t,o=e.spatialField,n=void 0===o?{}:o,i=e.crossLayerFilter,a=void 0===i?{}:i;return!(r.filter((function(e){return e.value||0===e.value})).length>0||n.geometry||a&&a.attribute&&a.operation)},Ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.filterFields&&e.filterFields.length>0||e.simpleFilterFields&&e.simpleFilterFields.length>0||e.spatialField&&e.spatialField.geometry&&e.spatialField.operation||F()(e.spatialField)&&S()(e.spatialField,(function(e){return e.operation&&e.geometry}))>-1||e.crossLayerFilter&&e.crossLayerFilter.collectGeometries&&e.crossLayerFilter.collectGeometries.queryCollection&&e.crossLayerFilter.collectGeometries.queryCollection.geometryName&&e.crossLayerFilter.collectGeometries.queryCollection.typeName},Le=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return T()(t.filter((function(e){return!!e})))},Te=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"AND",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"AND",o={id:(new Date).getTime(),index:0,logic:t};return e.reduce((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.filterFields,i=void 0===n?[]:n,a=t.groupFields,l=void 0===a?[]:a,s=t.spatialField,c=arguments.length>2?arguments[2]:void 0;return{groupFields:e.groupFields.concat(i.length>0&&l.map((function(e){return{groupId:0===e.index&&o.id||"".concat(e.groupId,"_").concat(c),logic:e.logic,id:"".concat(e.id,"_").concat(c),index:1+e.index}}))||[]),filterFields:e.filterFields.concat(i.map((function(e){return _(_({},e),{},{groupId:"".concat(e.groupId,"_").concat(c)})}))),spatialField:Le(e.spatialField,s),spatialFieldOperator:r}}),{groupFields:[o],filterFields:[],spatialField:[]})},Ge=function(e,t){var r,o=e.spatialField.geometry.projection,n=e.spatialField.geometry.center,i=e.spatialField.geometry.radius,a=(0,u.reprojectGeoJson)(e.spatialField.geometry,e.spatialField.geometry.projection||"EPSG:3857",t).coordinates,l=n&&[(r=(0,u.reproject)(n,o,t)).x,r.y],s=i&&(0,u.reproject)([i,0],o,t).x;return _(_({},e),{},{spatialField:_(_({},e.spatialField),{},{geometry:_(_({},e.spatialField.geometry),{},{center:l,radius:s,coordinates:a,projection:t})})})},xe=function(e,t){return e&&e.spatialField&&e.spatialField.geometry&&e.spatialField.geometry.coordinates&&e.spatialField.geometry.coordinates[0]&&(e.spatialField.projection||"EPSG:3857")!==t?t?I.reprojectFilterInNativeCrs(e,t):_(_({},e),{},{spatialField:void 0}):e},Ee=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.nsPlaceholder,r=void 0===t?"ogc":t,o=e.ogcVersion,i=void 0===o?"2.0":o,s=e.addXmlnsToRoot,u=void 0!==s&&s,p=e.xmlnsToAdd,d=void 0===p?[]:p,g=c()({filterNS:r,wfsVersion:i,gmlVersion:(0,n.wfsToGmlVersion)(i)}),f=(0,l.Z)(g),m=arguments.length,O=new Array(m>1?m-1:0),y=1;y<m;y++)O[y-1]=arguments[y];var F=g.filter(g.and.apply(g,G(T()(O.filter((function(e){return!!e&&(C()(e)||Ce(e)&&!e.disabled)})).map((function(e){return C()(e)?[f((0,a.read)(e))]:z(e,i,r)}))))));if(u){var v=F.indexOf(">");return"".concat(F.slice(0,v)).concat(d.length>0?" ".concat(d.join(" ")):"").concat(F.slice(v))}return F};I={processOGCFilterGroup:J,processOGCFilterFields:$,processOGCCrossLayerFilter:ae,getGetFeatureBase:ne,toOGCFilterParts:z,findSubGroups:me,toCQLFilter:le,getCrossLayerCqlFilter:ie,processCQLFilterGroup:se,processCQLSimpleFilterField:Fe,processCQLSpatialFilter:ue,processCQLFilterFields:ye,getCQLGeometryElement:ce,cqlStringField:de,cqlDateField:pe,cqlNumberField:fe,cqlBooleanField:ge,cqlListField:Oe,toOGCFilter:W,reprojectFilterInNativeCrs:Ge,processOGCSpatialFilter:oe,mergeFiltersToOGC:Ee}},52259:(e,t,r)=>{"use strict";r.r(t),r.d(t,{DEFAULT_SCREEN_DPI:()=>z,METERS_PER_UNIT:()=>W,GOOGLE_MERCATOR:()=>J,EXTENT_TO_ZOOM_HOOK:()=>$,ZOOM_TO_EXTENT_HOOK:()=>Y,RESOLUTIONS_HOOK:()=>ee,RESOLUTION_HOOK:()=>te,COMPUTE_BBOX_HOOK:()=>re,GET_PIXEL_FROM_COORDINATES_HOOK:()=>oe,GET_COORDINATES_FROM_PIXEL_HOOK:()=>ne,registerHook:()=>ae,getHook:()=>le,executeHook:()=>se,clearHooks:()=>ce,dpi2dpm:()=>ue,dpi2dpu:()=>pe,getSphericalMercatorScale:()=>de,getGoogleMercatorScale:()=>ge,getSphericalMercatorScales:()=>fe,getGoogleMercatorScales:()=>me,getResolutionsForScales:()=>Oe,getGoogleMercatorResolutions:()=>ye,getResolutions:()=>Fe,getScales:()=>ve,getZoomFromResolution:()=>he,defaultGetZoomForExtent:()=>we,getZoomForExtent:()=>Se,getCurrentResolution:()=>be,getCenterForExtent:()=>Ce,getBbox:()=>Le,isNearlyEqual:()=>Te,mapUpdated:()=>Ge,transformExtent:()=>xe,groupSaveFormatted:()=>Ee,saveMapConfiguration:()=>_e,generateNewUUIDs:()=>Ne,mergeMapConfigs:()=>Ie,addRootParentGroup:()=>De,isSimpleGeomType:()=>Pe,getSimpleGeomType:()=>Me,getIdFromUri:()=>je,parseLayoutValue:()=>Be,prepareMapObjectToCompare:()=>ke,updateObjectFieldKey:()=>Re,compareMapChanges:()=>Ae,createRegisterHooks:()=>qe,default:()=>He});var o=r(47037),n=r.n(o),i=r(92742),a=r.n(i),l=r(81763),s=r.n(l),c=r(78718),u=r.n(c),p=r(27361),d=r.n(p),g=r(13311),f=r.n(g),m=r(67523),O=r.n(m),y=r(66604),F=r.n(y),v=r(3674),h=r.n(v),w=r(44908),S=r.n(w),b=r(87185),C=r.n(b),L=r(18446),T=r.n(L),G=r(41609),x=r.n(G),E=r(30998),_=r.n(E),N=r(50361),I=r.n(N),D=r(22762),P=r.n(D),M=r(24261),j=r.n(M),B=r(90183),k=r(61868),R=r(24262),A=r(27418),q=r.n(A);function H(e){return(H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function U(e,t){if(null==e)return{};var r,o,n=function(e,t){if(null==e)return{};var r,o,n={},i=Object.keys(e);for(o=0;o<i.length;o++)r=i[o],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)r=i[o],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function K(e){return function(e){if(Array.isArray(e))return X(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return X(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?X(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function X(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=new Array(t);r<t;r++)o[r]=e[r];return o}function Q(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function V(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(r),!0).forEach((function(t){Z(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Q(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Z(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var z=96,W={m:1,degrees:111194.87428468118,ft:.3048,"us-ft":1200/3937},J={RADIUS:6378137,TILE_WIDTH:256,ZOOM_FACTOR:2},$="EXTENT_TO_ZOOM_HOOK",Y="ZOOM_TO_EXTENT_HOOK",ee="RESOLUTIONS_HOOK",te="RESOLUTION_HOOK",re="COMPUTE_BBOX_HOOK",oe="GET_PIXEL_FROM_COORDINATES_HOOK",ne="GET_COORDINATES_FROM_PIXEL_HOOK",ie={};function ae(e,t){ie[e]=t}function le(e){return ie[e]}function se(e,t,r){var o=le(e);return o?t(o):r?r():null}function ce(){ie={}}function ue(e){return e*(100/2.54)}function pe(e,t){var r=(0,B.getUnits)(t||"EPSG:3857");return W[r]*ue(e||z)}function de(e,t,r,o,n){return 2*Math.PI*e/(t*Math.pow(r,o)/ue(n||z))}function ge(e,t){return de(J.RADIUS,J.TILE_WIDTH,J.ZOOM_FACTOR,e,t)}function fe(e,t,r,o,n,i){for(var a=[],l=o;l<=n;l++)a.push(de(e,t,r,l,i));return a}function me(e,t,r){return fe(J.RADIUS,J.TILE_WIDTH,J.ZOOM_FACTOR,e,t,r)}function Oe(e,t,r){var o=pe(r,t);return e.map((function(e){return e/o}))}function ye(e,t,r){return Oe(me(e,t,r),"EPSG:3857",r)}function Fe(){return le("RESOLUTIONS_HOOK")?le("RESOLUTIONS_HOOK")():ye(0,21,z)}function ve(e,t){var r=pe(t,e);return Fe().map((function(e){return e*r}))}function he(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Fe(),r=t.map((function(t,r){return{diff:Math.abs(t-e),zoom:r}})),o=P()(r,"diff"),n=o.zoom;return n}function we(e,t,r,o,n,i){var a=e[2]-e[0],l=e[3]-e[1],s=Math.abs(a/t.width),c=Math.abs(l/t.height),u=Math.max(s,c),p=(i||Oe(me(r,o,n||z),"EPSG:3857",n)).reduce((function(e,t,r){var o=Math.abs(t-u);return o>e.diff?e:{diff:o,zoom:r}}),{diff:Number.POSITIVE_INFINITY,zoom:0}).zoom;return Math.max(0,Math.min(p,o))}function Se(e,t,r,o,n){return le("EXTENT_TO_ZOOM_HOOK")?le("EXTENT_TO_ZOOM_HOOK")(e,t,r,o,n):we(e,t,r,o,n,le("RESOLUTIONS_HOOK")?le("RESOLUTIONS_HOOK")(e,t,r,o,n,ue(n||z)):null)}function be(e,t,r,o){return le("RESOLUTION_HOOK")?le("RESOLUTION_HOOK")(e,t,r,o):ye(t,r,o)[e]}function Ce(e,t){var r=(e[2]-e[0])/2,o=(e[3]-e[1])/2;return{x:e[0]+r,y:e[1]+o,crs:t}}function Le(e,t){return se("COMPUTE_BBOX_HOOK",(function(r){return r(e,t)}))}var Te=function(e,t){return void 0!==e&&void 0!==t&&e.toFixed(12)-t.toFixed(12)==0};function Ge(e,t){var r,o,n,i;return!(!e||x()(e)||!t||x()(t)||Te(null==t||null===(r=t.center)||void 0===r?void 0:r.x,null==e||null===(o=e.center)||void 0===o?void 0:o.x)&&Te(null==t||null===(n=t.center)||void 0===n?void 0:n.y,null==e||null===(i=e.center)||void 0===i?void 0:i.y)&&(null==t?void 0:t.zoom)===(null==e?void 0:e.zoom))}function xe(e,t,r,o){var n=(0,B.getUnits)(e);return"ft"===n?{width:r/W.ft,height:o/W.ft}:"us-ft"===n?{width:r/W["us-ft"],height:o/W["us-ft"]}:"degrees"===n?{width:r/(111132.92-559.82*Math.cos(2*t.y)+1.175*Math.cos(4*t.y)),height:o/(111412.84*Math.cos(t.y)-93.5*Math.cos(3*t.y))}:{width:r,height:o}}var Ee=function(e){return{id:e.id,title:e.title,description:e.description,tooltipOptions:e.tooltipOptions,tooltipPlacement:e.tooltipPlacement,expanded:e.expanded}};function _e(e,t,r,o,n,i,a){var l={center:e.center,maxExtent:e.maxExtent,projection:e.projection,units:e.units,mapInfoControl:e.mapInfoControl,zoom:e.zoom,mapOptions:e.mapOptions||{}},s=t.map((function(e){return(0,R.z8)(e)})),c=r.reduce((function(e,t){return e.concat((0,R.ar)(t))}),[].concat(r.map((function(e){return e.id})))).map((function(e){var t=(0,R.Mk)(r,e);return t&&t.nodes?Ee(t):null})).filter((function(e){return e})),u=o.filter((function(e){return!!e.thumbnail})),p=(0,R.V5)(s),d=s.map((function(e){return q()({},e,{tileMatrixSet:e.tileMatrixSet&&e.tileMatrixSet.length>0,matrixIds:e.matrixIds&&Object.keys(e.matrixIds)})})),g=_()(d,(function(e){return"annotations"===e.id}));if(-1!==g){var f=d[g].features.map((function(e){return"FeatureCollection"===e.type?V(V({},e),{},{features:e.features.map((function(e){return e.properties.geometryGeodesic?(0,k.t8)("properties.geometryGeodesic",null,e):e}))}):e.properties.geometryGeodesic?(0,k.t8)("properties.geometryGeodesic",null,e):{}}));d[g]=(0,k.t8)("features",f,d[g])}return V({version:2,map:q()({},l,{layers:d,groups:c,backgrounds:u,text_search_config:n,bookmark_search_config:i},!x()(p)&&{sources:p}||{})},a)}var Ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=I()(e),r=V(V({},d()(e,"map.layers",[]).reduce((function(e,t){return V(V({},e),{},Z({},t.id,"annotations"===t.id?t.id:j()()))}),{})),d()(e,"widgetsConfig.widgets",[]).reduce((function(e,t){return V(V({},e),{},Z({},t.id,j()()))}),{}));return(0,k.t8)("map.backgrounds",d()(e,"map.backgrounds",[]).map((function(e){return V(V({},e),{},{id:r[e.id]})})),(0,k.t8)("widgetsConfig",{collapsed:F()(O()(d()(e,"widgetsConfig.collapsed",{}),(function(e,t){return r[t]})),(function(e){return V(V({},e),{},{layouts:F()(e.layouts,(function(e){return V(V({},e),{},{i:r[e.i]})}))})})),layouts:F()(d()(e,"widgetsConfig.layouts",{}),(function(e){return e.map((function(e){return V(V({},e),{},{i:r[e.i]})}))})),widgets:d()(e,"widgetsConfig.widgets",[]).map((function(e){return V(V({},e),{},{id:r[e.id],layer:V(V({},d()(e,"layer",{})),{},{id:r[d()(e,"layer.id")]})})}))},(0,k.t8)("map.layers",d()(e,"map.layers",[]).map((function(e){return V(V({},e),{},{id:r[e.id]})})),t)))},Ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map((function(e){return u()(e,h()(e).filter((function(t){return void 0!==e[t]})))}))},o=Ne(t),n=[].concat(K(d()(e,"map.backgrounds",[])),K(d()(o,"map.backgrounds",[]))),i=r(d()(e,"map.layers",[])),a=r(d()(o,"map.layers",[])),l=f()(i,(function(e){return"annotations"===e.id})),s=f()(a,(function(e){return"annotations"===e.id})),c=[].concat(K(a.filter((function(e){return"annotations"!==e.id}))),K(i.filter((function(e){return"annotations"!==e.id}))),K(l||s?[V(V(V({},l||{}),s||{}),{},{features:[].concat(K(d()(l,"features",[])),K(d()(s,"features",[])))})]:[])),p=c.filter((function(e){return"background"===e.group})),g=_()(p,(function(e){return e.visibility})),m=d()(e,"map.sources",{}),O=d()(o,"map.sources",{}),y=V(V({},m),O),F=d()(e,"widgetsConfig",{}),v=d()(o,"widgetsConfig",{});return V(V(V({},o),e),{},{catalogServices:V(V({},d()(e,"catalogServices",{})),{},{services:V(V({},d()(e,"catalogServices.services",{})),d()(o,"catalogServices.services",{}))}),map:V(V(V({},o.map),e.map),{},{backgrounds:n,groups:C()([].concat(K(d()(e,"map.groups",[])),K(d()(o,"map.groups",[]))),(function(e,t){return e.id===t.id})),layers:[].concat(K(p.slice(0,g+1)),K(p.slice(g+1).map((function(e){return V(V({},e),{},{visibility:!1})}))),K(c.filter((function(e){return"background"!==e.group})))),sources:x()(y)?void 0:y}),widgetsConfig:{collapsed:V(V({},F.collapsed),v.collapsed),layouts:S()([].concat(K(h()(F.layouts)),K(h()(v.layouts)))).reduce((function(e,t){return V(V({},e),{},Z({},t,[].concat(K(d()(F,"layouts.".concat(t),[])),K(d()(v,"layouts.".concat(t),[])))))}),{}),widgets:[].concat(K(d()(F,"widgets",[])),K(d()(v,"widgets",[])))},timelineData:V(V({},d()(e,"timelineData",{})),d()(o,"timelineData",{})),dimensionData:V(V({},d()(e,"dimensionData",{})),d()(o,"dimensionData",{}))})},De=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"RootGroup",r=d()(e,"map.groups",[]),o=r.filter((function(e){return"Default"!==e.id})),n=f()(r,(function(e){return"Default"===e.id})),i=n&&{id:j()(),title:t,expanded:n.expanded},a=n?[].concat(K(o.map((function(e){var t=e.id,r=U(e,["id"]);return V({id:"".concat(i.id,".").concat(t)},r)}))),[i]):o;return V(V({},e),{},{map:V(V({},e.map),{},{groups:a,layers:d()(e,"map.layers",[]).map((function(e){var t,r=e.group;return V(V({},U(e,["group"])),{},{group:!n||"background"===r||"Default"!==r&&r?n&&(null===(t=f()(a,(function(e){var t=e.id;return t.slice(t.indexOf(".")+1)===r})))||void 0===t?void 0:t.id)||r:i.id})}))})})};function Pe(e){switch(e){case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":case"Text":return!1;case"Point":case"Circle":case"LineString":case"Polygon":default:return!0}}function Me(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Point";switch(e){case"Point":case"LineString":case"Polygon":case"Circle":return e;case"MultiPoint":case"Marker":return"Point";case"MultiLineString":return"LineString";case"MultiPolygon":return"Polygon";case"GeometryCollection":return"GeometryCollection";case"Text":return"Point";default:return e}}var je=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:/data\/(\d+)/,r=decodeURIComponent(e),o=t.exec(r);return o&&o.length&&o.length>1?o[1]:null},Be=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return n()(e)&&-1!==e.indexOf("%")?parseFloat(a()(e))*t/100:s()(e)?e:0},ke=function e(t){var r=["apiKey","time","args","fixed"],o=function(e){return r.reduce((function(t,r){return t||e===r}),!1)};Object.keys(t).forEach((function(r){var n=t[r],i=H(n);"object"!==i||null===n||o(r)?"undefined"!==i&&n&&!o(r)||delete t[r]:(e(n),Object.keys(n).length||delete t[r])}))},Re=function(e,t,r){e[t]&&(Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(e,t)),delete e[t])},Ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=["map.layers","map.backgrounds","map.text_search_config","map.bookmark_search_config","map.text_serch_config","map.zoom","widgetsConfig"],o=u()(I()(e),r),n=u()(I()(t),r);return Re(o.map,"text_serch_config","text_search_config"),Re(n.map,"text_serch_config","text_search_config"),ke(o),ke(n),T()(o,n)},qe=function(){var e={};return{registerHook:function(t,r){e[t]=r},getHook:function(t){return e[t]},executeHook:function(t,r,o){var n=e[t];return n?r(n):o?o():null}}};const He={createRegisterHooks:qe,EXTENT_TO_ZOOM_HOOK:$,RESOLUTIONS_HOOK:ee,RESOLUTION_HOOK:te,COMPUTE_BBOX_HOOK:re,GET_PIXEL_FROM_COORDINATES_HOOK:oe,GET_COORDINATES_FROM_PIXEL_HOOK:ne,DEFAULT_SCREEN_DPI:z,ZOOM_TO_EXTENT_HOOK:Y,registerHook:ae,getHook:le,dpi2dpm:ue,getSphericalMercatorScales:fe,getSphericalMercatorScale:de,getGoogleMercatorScales:me,getGoogleMercatorResolutions:ye,getGoogleMercatorScale:ge,getResolutionsForScales:Oe,getZoomForExtent:Se,defaultGetZoomForExtent:we,getCenterForExtent:Ce,getResolutions:Fe,getScales:ve,getBbox:Le,mapUpdated:Ge,getCurrentResolution:be,transformExtent:xe,saveMapConfiguration:_e,generateNewUUIDs:Ne,mergeMapConfigs:Ie,addRootParentGroup:De,isSimpleGeomType:Pe,getSimpleGeomType:Me,getIdFromUri:je,parseLayoutValue:Be,prepareMapObjectToCompare:ke,updateObjectFieldKey:Re,compareMapChanges:Ae,clearHooks:ce}}}]);