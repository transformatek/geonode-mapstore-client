(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[3689],{25016:(e,t,r)=>{"use strict";function n(e,t){return{type:"SET_SEARCH_BOOKMARK_CONFIG",property:e,value:t}}r.d(t,{N3:()=>n})},15047:(e,t,r)=>{"use strict";r.d(t,{b:()=>d});var n=r(27418),o=r.n(n);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var l=function(e){return null===e?[]:e.map((function(e){return{properties:i({},e),id:e.osm_id,type:"Feature",bbox:e.boundingbox.map((function(e){return parseFloat(e)})).reduce((function(e,t,r){return e[function(e){switch(e){case 0:return 1;case 1:return 3;case 2:return 0;case 3:return 2;default:return-1}}(r)]=t,e}),[]),geometry:e.geojson||{type:"Point",coordinates:[parseFloat(e.lon),parseFloat(e.lat)]}}}))},s=r(59286),u=r(32420);var f=function(e){var t,r=e.searchText,n=e.staticFilter,o=e.blacklist,a=e.item,i=e.queriableAttributes,c=e.predicate,l=(0,s.generateTemplateString)(n||"")(a),u=r.split(" ").filter((function(e){return e})).filter((function(e){return o.indexOf(e.toLowerCase())<0}));return 0===u.length&&(u=r?[r]:[]),u.length>0&&(t="(".concat(u.map((function(e){return i.map((function(t){return"".concat(t," ").concat(c," '%").concat(e.replace("'","''"),"%'")})).join(" OR ")})).join(") AND (")).concat(")")),t?t.concat(l):l||null},p={nominatim:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{returnFullData:!1};return r(47310).Z.geocode(e,t).then((function(e){return t.returnFullData?e:l(e.data)}))},wfs:function(e,t){var r=t.url,n=t.typeName,a=t.queriableAttributes,i=void 0===a?[]:a,c=t.outputFormat,l=void 0===c?"application/json":c,s=t.predicate,p=void 0===s?"ILIKE":s,m=t.staticFilter,d=void 0===m?"":m,h=t.blacklist,y=void 0===h?[]:h,b=t.item,v=t.fromTextToFilter,g=void 0===v?f:v,O=t.returnFullData,S=void 0!==O&&O,_=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(t,["url","typeName","queriableAttributes","outputFormat","predicate","staticFilter","blacklist","item","fromTextToFilter","returnFullData"]),E=g({searchText:e,staticFilter:d,blacklist:y,item:b,queriableAttributes:i,predicate:p});return u.DH(r,o()({maxFeatures:10,typeName:n,outputFormat:l,cql_filter:E},_)).then((function(e){return S?e:e.features}))}},m={setService:function(e,t){p[e]=t},getService:function(e){return p[e]?p[e]:null}},d={Services:p,Utils:m}},53329:(e,t,r)=>{"use strict";r.d(t,{Z:()=>b});var n=r(45697),o=r.n(n),a=r(5053),i=r.n(a),c=r(69175);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(l,e);var t,r,n,o,a=(n=l,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=d(n);if(o){var r=d(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return m(this,e)});function l(){return u(this,l),a.apply(this,arguments)}return t=l,(r=[{key:"render",value:function(){return this.context.intl?i().createElement(c.FormattedDate,s({value:this.props.value},this.props.dateParams)):i().createElement("span",null,this.props.value&&this.props.value.toString()||"")}}])&&f(t.prototype,r),l}(i().Component);h(y,"propTypes",{value:o().object,dateParams:o().object}),h(y,"contextTypes",{intl:o().object}),h(y,"defaultProps",{value:new Date});const b=y},8578:(e,t,r)=>{"use strict";r.d(t,{Z:()=>fe});var n=r(5053),o=r.n(n),a=r(30294),i=r(41609),c=r.n(i),l=r(52353),s=r.n(l),u=r(5346),f=r(15135),p=r(24261),m=r.n(p);function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var h=(0,f.Z)(a.DropdownButton),y={disabled:!1,className:"square-button-md",noCaret:!0,idDropDown:m()()},b={title:o().createElement(a.Glyphicon,{glyph:"menu-hamburger"}),tooltipId:"search.changeSearchInputField",tooltipPosition:"bottom",className:"square-button-md no-border",pullRight:!0};const v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.menuItems,r=void 0===t?[]:t,n=e.disabled,a=void 0!==n&&n;return o().createElement(h,d({disabled:a},y,b),r.length?r.map((function(e){return e})):null)},g=function(e){var t=e.className,r=e.style,n=e.children;return o().createElement("div",{id:"map-search-bar",style:r,className:"MapSearchBar"+(t?" "+t:"")},n)};var O=r(45697),S=r.n(O),_=r(86638);function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=r){var n,o,a=[],i=!0,c=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(c)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return C(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?C(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var w=function(e,t){var r=e.show,n=e.autoFocusOnSelect,i=void 0===n||n,c=e.selectedItems,l=void 0===c?[]:c,s=e.className,u=e.style,f=void 0===u?{textOverflow:"ellipsis"}:u,p=e.placeholder,m=e.placeholderMsgId,d=e.hideOnBlur,h=void 0===d||d,y=e.searchText,b=void 0===y?"":y,v=e.typeAhead,g=void 0===v||v,O=e.delay,S=void 0===O?1e3:O,C=e.blurResetDelay,w=void 0===C?300:C,j=e.onSearch,P=void 0===j?function(){}:j,I=e.onSearchTextChange,k=void 0===I?function(){}:I,T=e.onCancelSelectedItem,x=void 0===T?function(){}:T,R=e.onPurgeResults,A=void 0===R?function(){}:R,N=o().useRef(),F=o().useRef(),V=E(o().useState(),2),D=V[0],M=V[1],Z=E(o().useState(),2),B=Z[0],G=Z[1],q=E(o().useState(!1),2),L=q[0],z=q[1];o().useEffect((function(){var e=F.current;if(i&&l&&(e<l.length||!e&&1===l.length)){var t=N.current;t&&t.focus instanceof Function&&setTimeout((function(){return t.focus()}),200)}F.current=l&&l.length})),o().useEffect((function(){L&&(P(),z(!1))}),[L,P]);var H="search.addressSearch";if(!p&&t.messages){var K=(0,_.S$)(t.messages,m||H);K&&(H=K)}else H=p;return r&&o().createElement(a.FormControl,{className:"searchInput".concat(s?" ".concat(s):""),key:"search-input",placeholder:H,type:"text",inputRef:function(e){N.current=e},style:f,value:b,onKeyDown:function(e){switch(e.keyCode){case 13:P();break;case 8:!b&&l&&l.length>0&&x(l[l.length-1])}},onBlur:function(){h&&(D&&clearTimeout(D),M(setTimeout((function(){A()}),w)))},onFocus:function(){g&&b&&P()},onChange:function(e){var t=e.target.value;k(t),g&&(B&&clearTimeout(B),G(setTimeout((function(){z(!0)}),S)))}})};w.contextTypes={messages:S().object};const j=w;var P=r(27418),I=r.n(P),k=r(72986),T=r.n(k),x=r(80717);function R(){return(R=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function A(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function N(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?A(Object(r),!0).forEach((function(t){F(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function F(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const V=function(e){var t=e.loading,r=(e.splitTools,e.toolbarProps),n=void 0===r?{}:r,a=e.toolbarButtons,i=void 0===a?[]:a,c=e.children;return o().createElement("span",{className:"search-toolbar-options"},t&&o().createElement(T(),{style:I()({},{position:"absolute"},N({},{right:"69px",zIndex:1,top:"13px"})),spinnerName:"pulse",noFadeIn:!0}),o().createElement(x.Z,R({btnGroupProps:{className:"btn-group-menu-options"},transitionProps:null,btnDefaultProps:{className:"square-button-md",bsStyle:"primary"}},n,{buttons:i})),c)};var D=r(89208),M=r(4116),Z=r(25016),B=r(1550),G=r(81808);function q(){return(q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function L(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=r){var n,o,a=[],i=!0,c=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){c=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(c)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return z(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?z(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function H(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function K(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?H(Object(r),!0).forEach((function(t){U(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):H(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function U(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var W=(0,r(93451).Z)(["placeholder","clearValueText","noResultsText"])(M.ZP),$={searchByBookmark:function(e,t,r,n,o){var a,i,l=e.options,s=void 0===l?{}:l,u=e.layerVisibilityReload;void 0!==u&&u?t(K(K({},r),{},{map:K(K({},r.map),{},{bookmark_search_config:n})}),null,{bounds:[s.west,s.south,s.east,s.north],crs:(null==r||null===(a=r.map)||void 0===a||null===(i=a.center)||void 0===i?void 0:i.crs)||"EPSG:4326"}):s&&!c()(s)&&o([s.west,s.south,s.east,s.north],"EPSG:4326")},searchIcon:function(e,t){var r=t.onLayerVisibilityLoad,n=t.mapInitial,o=t.bookmarkConfig,a=t.onZoomToExtent;return{tooltipId:"bookmarkSearch"===e?"search.zoomToBookmark":"",tooltipPosition:"bottom",visible:"bookmarkSearch"===e&&!(null!=o&&o.zoomOnSelect),disabled:"bookmarkSearch"===e&&!o.selected,onClick:function(){"bookmarkSearch"===e&&$.searchByBookmark(o.selected,r,n,o.bookmarkSearchConfig||{},a)}}}},X=function(e){var t=e.bookmarkConfig,r=e.onPropertyChange,a=e.onLayerVisibilityLoad,i=e.mapInitial,l=e.onZoomToExtent,s=L((0,n.useState)([]),2),u=s[0],f=s[1],p=t||{},m=p.selected,d=void 0===m?{}:m,h=p.bookmarkSearchConfig,y=void 0===h?{}:h,b=p.zoomOnSelect,v=void 0===b||b,g=y.bookmarks,O=void 0===g?[]:g,S=$.searchByBookmark;return(0,n.useEffect)((function(){c()(O)||f(O.map((function(e){return e.title})))}),[O]),o().createElement("div",{className:"search-select"},o().createElement("div",{style:{flex:"1 1 0%",padding:"0px 4px"}},o().createElement(W,q({},{clearable:!0,isSearchable:!0,isClearable:!0},{onChange:function(e){var t=e&&e.value||"",n=L(O.filter((function(r,n){return r.title===t&&n===e.idx})),1)[0];r("selected",n),v&&S(n,a,i,y,l)},value:(null==d?void 0:d.title)||"",options:u.map((function(e,t){return{label:e,value:e,idx:t}})),placeholder:"search.b_placeholder",clearValueText:"search.b_clearvalue",noResultsText:"search.b_noresult"}))))};X.propTypes={bookmarkConfig:S().object.isRequired,onPropertyChange:S().func.isRequired};const Y=(0,D.connect)((function(e){return{bookmarkConfig:e.searchbookmarkconfig||{}}}),{onPropertyChange:Z.N3,onZoomToExtent:B.Px,onLayerVisibilityLoad:G.H0})(X);var Q=r(81763),J=r.n(Q),ee=r(99509),te=r(77900),re=r(97222),ne={clearCoordinates:function(e,t){e({owner:"search"}),t("lat",""),t("lon","")},areValidCoordinates:function(e){return J()(null==e?void 0:e.lon)&&J()(null==e?void 0:e.lat)},zoomToPoint:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:12;e({x:parseFloat(t.lon),y:parseFloat(t.lat)},r,"EPSG:4326")},coordinateFormatChange:function(e,t,r,n){return{buttonConfig:{title:o().createElement(a.Glyphicon,{glyph:"cog"}),tooltipId:"search.changeSearchInputField",tooltipPosition:"bottom",className:"square-button-md no-border",pullRight:!0},menuOptions:[{active:"decimal"===e,onClick:function(){return t("decimal")},text:o().createElement(u.Z,{msgId:"search.decimal"})},{active:"aeronautical"===e,onClick:function(){return t("aeronautical")},text:o().createElement(u.Z,{msgId:"search.aeronautical"})}],visible:r&&"coordinatesSearch"===n,Element:te.Z}},removeIcon:function(e,t,r,n){return{visible:"coordinatesSearch"===e&&(J()(t.lon)||J()(t.lat)),onClick:function(){return ne.clearCoordinates(r,n)}}},searchIcon:function(e,t,r,n){return{visible:"coordinatesSearch"===e,onClick:function(){"coordinatesSearch"===e&&ne.areValidCoordinates(t)&&ne.zoomToPoint(r,t,n)}}},coordinatesMenuItem:function(e){var t=e.activeTool,r=e.searchText,n=e.clearSearch,i=e.onChangeActiveSearchTool,c=e.onClearBookmarkSearch;return o().createElement(a.MenuItem,{active:"coordinatesSearch"===t,onClick:function(){void 0!==r&&""!==r&&n(),c("selected"),i("coordinatesSearch"),document.dispatchEvent(new MouseEvent("click"))}},o().createElement(a.Glyphicon,{glyph:"search-coords"})," ",o().createElement(u.Z,{msgId:"search.coordinatesSearch"}))}},oe=function(e){var t=e.coordinate,r=void 0===t?{}:t,n=e.format,i=e.onClearCoordinatesSearch,c=e.onZoomToPoint,l=e.onChangeCoord,s=e.defaultZoomLevel,f=e.aeronauticalOptions,p=void 0===f?{seconds:{decimals:4,step:1e-4}}:f,m=e.constraintsCoordEditor,d=void 0===m?{decimal:{lat:{min:-90,max:90},lon:{min:-180,max:180}}}:m,h=ne.zoomToPoint,y=ne.areValidCoordinates,b=function(e,t){var r=isNaN(parseFloat(t))?"":parseFloat(t);l(e,r),y()||i({owner:"search"})},v=function(){h(c,r,s)};return o().createElement("div",{className:"coordinateEditor",style:{flexWrap:"decimal"===n?"nowrap":"wrap"}},o().createElement(a.Row,{className:"entryRow ".concat(n)},o().createElement(a.FormGroup,null,o().createElement(a.InputGroup,null,o().createElement(a.InputGroup.Addon,{style:{minWidth:45}},o().createElement(u.Z,{msgId:"search.latitude"})),o().createElement(ee.Z,{format:n,aeronauticalOptions:p,coordinate:"lat",idx:1,value:r.lat,constraints:d,onChange:function(e){return b("lat",e)},onKeyDown:function(){y(r)&&v()}})))),o().createElement(a.Row,{className:"entryRow ".concat(n)},o().createElement(a.FormGroup,null,o().createElement(a.InputGroup,null,o().createElement(a.InputGroup.Addon,{style:{minWidth:45}},o().createElement(u.Z,{msgId:"search.longitude"})),o().createElement(ee.Z,{format:n,aeronauticalOptions:p,coordinate:"lon",idx:2,value:r.lon,constraints:d,onChange:function(e){return b("lon",e)},onKeyDown:function(){y(r)&&v()}})))))};oe.propTypes={coordinate:S().object,format:S().string,onClearCoordinatesSearch:S().func,onZoomToPoint:S().func,onChangeCoord:S().func,defaultZoomLevel:S().number};const ae=(0,D.connect)((function(e){return{coordinate:e.search.coordinate||{}}}),{onZoomToPoint:re.Z,onChangeCoord:re.TS})(oe);function ie(e){return function(e){if(Array.isArray(e))return ce(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return ce(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ce(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ce(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function le(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function se(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?le(Object(r),!0).forEach((function(t){ue(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):le(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ue(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const fe=function(e){var t,r=e.activeSearchTool,n=void 0===r?"addressSearch":r,i=e.removeIcon,l=void 0===i?"1-close":i,f=e.searchIcon,p=void 0===f?"search":f,m=e.isSearchClickable,d=void 0===m||m,h=e.splitTools,y=e.searchText,b=void 0===y?"":y,O=e.maxResults,S=void 0===O?15:O,_=e.searchOptions,E=e.loading,C=e.delay,w=e.blurResetDelay,P=e.typeAhead,I=e.coordinate,k=void 0===I?{}:I,T=e.selectedItems,x=void 0===T?[]:T,R=e.defaultZoomLevel,A=void 0===R?12:R,N=e.enabledSearchBookmarkConfig,F=void 0!==N&&N,D=e.error,M=e.format,Z=void 0===M?"decimal":M,B=e.placeholder,G=e.placeholderMsgId,q=void 0===G?"search.addressSearch":G,L=e.showOptions,z=void 0===L||L,H=e.showAddressSearchOption,K=void 0===H||H,U=e.showCoordinatesSearchOption,W=void 0===U||U,X=e.showBookMarkSearchOption,Q=void 0===X||X,J=e.onSearch,ee=e.onSearchReset,te=e.onSearchTextChange,re=e.onCancelSelectedItem,oe=e.onChangeCoord,ce=void 0===oe?function(){}:oe,le=e.onChangeActiveSearchTool,ue=void 0===le?function(){}:le,fe=e.onClearCoordinatesSearch,pe=void 0===fe?function(){}:fe,me=e.onChangeFormat,de=void 0===me?function(){}:me,he=e.onToggleControl,ye=void 0===he?function(){}:he,be=e.onZoomToPoint,ve=void 0===be?function(){}:be,ge=e.onClearBookmarkSearch,Oe=void 0===ge?function(){}:ge,Se=e.onPurgeResults,_e=e.items,Ee=void 0===_e?[]:_e,Ce=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["activeSearchTool","removeIcon","searchIcon","isSearchClickable","splitTools","searchText","maxResults","searchOptions","loading","delay","blurResetDelay","typeAhead","coordinate","selectedItems","defaultZoomLevel","enabledSearchBookmarkConfig","error","format","placeholder","placeholderMsgId","showOptions","showAddressSearchOption","showCoordinatesSearchOption","showBookMarkSearchOption","onSearch","onSearchReset","onSearchTextChange","onCancelSelectedItem","onChangeCoord","onChangeActiveSearchTool","onClearCoordinatesSearch","onChangeFormat","onToggleControl","onZoomToPoint","onClearBookmarkSearch","onPurgeResults","items"]),we=function(e){var t=e.searchText,r=e.selectedItems,n=e.searchOptions,o=e.maxResults,a=e.onSearch,i=void 0===a?function(){}:a,c=e.onSearchReset,l=void 0===c?function(){}:c;return function(){var e=t,a=function(){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15;return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reduce((function(t,r){var n;return t+((null==r||null===(n=r.options)||void 0===n?void 0:n.maxFeatures)||e)}),0)||e}(null==n?void 0:n.services,o);void 0!==e&&""!==e||r&&0!==r.length?void 0!==e&&""!==e&&i(e,n,a):l()}}({searchText:b,selectedItems:x,searchOptions:_,maxResults:S,onSearch:J,onSearchReset:ee}),je=function(){ee()},Pe=[];if(K&&Pe.push(o().createElement(a.MenuItem,{active:"addressSearch"===n,onClick:function(){pe({owner:"search"}),Oe("selected"),ue("addressSearch")}},o().createElement(a.Glyphicon,{glyph:p})," ",o().createElement(u.Z,{msgId:"search.addressSearch"}))),W&&Pe.push(o().createElement(ne.coordinatesMenuItem,{activeTool:n,searchText:b,clearSearch:je,onChangeActiveSearchTool:ue,onClearBookmarkSearch:Oe})),Q&&!c()(Ee)){var Ie,ke=Ce.bookmarkConfig||{},Te=ke.allowUser,xe=ke.bookmarkSearchConfig,Re=Ee.find((function(e){return"SearchByBookmark"===e.name}))||{};if(Re.menuItem){var Ae=Re.menuItem;Pe.push(o().createElement(Ae,null))}Re.bookmarkConfig&&(t=se(se({},Re.bookmarkConfig(ye,F,n)),!Te&&{visible:!1})),Te||0!==(null==xe||null===(Ie=xe.bookmarks)||void 0===Ie?void 0:Ie.length)||"bookmarkSearch"!==n||ue("addressSearch")}var Ne,Fe=function(){if(z){if("coordinatesSearch"===n)return ne.coordinateFormatChange(Z,de,z,n);if("bookmarkSearch"===n)return t}return null};return o().createElement(g,null,o().createElement(a.FormGroup,null,o().createElement("div",{className:"input-group",style:{display:"flex"}},x&&x.map((function(e,t){return o().createElement("span",{key:"selected-item"+t,className:"input-group-addon"},o().createElement("div",{className:"selectedItem-text"},e.text))})),o().createElement(j,{show:"addressSearch"===n,delay:C,typeAhead:P,blurResetDelay:w,placeholder:B,placeholderMsgId:q,searchText:b,selectedItems:x,onSearch:we,onSearchTextChange:te,onCancelSelectedItem:re,onPurgeResults:Se}),"coordinatesSearch"===n&&W&&o().createElement(ae,{format:Z,defaultZoomLevel:A,onClearCoordinatesSearch:pe}),"bookmarkSearch"===n&&Q&&o().createElement(Y,{mapInitial:Ce.mapInitial}),o().createElement(V,{splitTools:!1,toolbarButtons:[].concat(ie(Fe()?[se({},Fe())]:[]),ie(Ee.filter((function(e){return"button"===e.target})).map((function(e){var t=e.component;return{visible:!!z,Element:t}}))),[se({glyph:l,className:"square-button-md no-border",bsStyle:"default",pullRight:!0,loading:!s()(E)&&E,visible:"addressSearch"===n&&(""!==b||x&&x.length>0),onClick:function(){"addressSearch"===n&&je()}},"coordinatesSearch"===n&&ne.removeIcon(n,k,pe,ce)),se(se({glyph:p,className:"square-button-md no-border "+(d||"addressSearch"!==n?"magnifying-glass clickable":"magnifying-glass"),bsStyle:"default",pullRight:!0,tooltipPosition:"bottom",visible:!("addressSearch"!==n||(""!==b||x&&x.length>0)&&h),onClick:function(){return d&&we()}},"coordinatesSearch"===n&&ne.searchIcon(n,k,ve,A)),"bookmarkSearch"===n&&$.searchIcon(n,Ce)),{tooltip:(Ne=D,Ne?o().createElement(u.Z,{msgId:Ne.msgId||"search.generic_error",msgParams:{message:Ne.message,serviceType:Ne.serviceType}}):null),tooltipPosition:"bottom",className:"square-button-md no-border",glyph:"warning-sign",bsStyle:"danger",glyphClassName:"searcherror",visible:!!D,onClick:je},{visible:z,renderButton:o().createElement(v,{disabled:z,menuItems:Pe})}])}))))}},86568:(e,t,r)=>{"use strict";r.d(t,{Z:()=>F});var n=r(5053),o=r.n(n),a=r(45697),i=r.n(a),c=r(13311),l=r.n(c),s=r(27418),u=r.n(s),f=r(27361),p=r.n(f),m=r(80717),d=r(59286);function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e,t){return!t||"object"!==h(t)&&"function"!=typeof t?O(e):t}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(c,e);var t,r,n,a,i=(n=c,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=S(n);if(a){var r=S(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return g(this,e)});function c(){var e;y(this,c);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return _(O(e=i.call.apply(i,[this].concat(r))),"onClick",(function(){var t=e.props.item;e.props.onItemClick(t)})),e}return t=c,(r=[{key:"render",value:function(){if(void 0===this.props.item)return null;var e=this.props.item;return o().createElement("div",{key:e.osm_id,className:"search-result",style:e.resultCssStyle,onClick:this.onClick},o().createElement("div",{className:"search-result-left-container"},o().createElement("div",{className:"icon"}," ",o().createElement("img",{src:e.icon})),o().createElement("div",{className:"text-result-title"},p()(e,this.props.displayName)||(0,d.generateTemplateString)(this.props.displayName||"")(e)),o().createElement("small",{className:"text-info"},this.props.subTitle&&p()(e,this.props.subTitle)||(0,d.generateTemplateString)(this.props.subTitle||"")(e))),o().createElement("div",{className:"search-result-right-container"},o().createElement("div",{className:"search-result-tools"},o().createElement(m.Z,{btnDefaultProps:{className:"square-button-md",bsStyle:"primary"},buttons:this.props.tools}))))}}])&&b(t.prototype,r),c}(o().Component);_(E,"propTypes",{subTitle:i().string,item:i().object,displayName:i().string,idField:i().string,icon:i().string,onItemClick:i().func,tools:i().array}),_(E,"defaultProps",{displayName:"properties.display_name",idField:"id",icon:"properties.icon",tools:[]});const C=E;var w=r(40797),j=r(18412);function P(e){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function I(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function k(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function T(e,t){return(T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(e,t){return!t||"object"!==P(t)&&"function"!=typeof t?R(e):t}function R(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function N(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var F=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&T(e,t)}(c,e);var t,r,n,a,i=(n=c,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=A(n);if(a){var r=A(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return x(this,e)});function c(){var e;I(this,c);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return N(R(e=i.call.apply(i,[this].concat(r))),"onItemClick",(function(t){e.props.onItemClick(t,e.props.mapConfig)})),N(R(e),"renderResults",(function(){return e.props.results.map((function(t,r){var n,a=e.findService(t)||{},i=l()(e.props.layers,{name:null===(n=a.options)||void 0===n?void 0:n.typeName}),c=(0,j.zA)(a),s=!(0,j.Tv)(i,a);return o().createElement(C,{subTitle:a.subTitle,idField:a.idField,displayName:a.displayName,key:t.osm_id||t.id||"res_"+r,item:t,onItemClick:e.onItemClick,tools:[{id:"open-gfi",keyProp:"open-gfi",visible:c,disabled:s,glyph:"info-sign",tooltipId:c&&s?"search.layerMustBeVisible":"search.showGFI",onClick:function(r){r.stopPropagation(),e.props.showGFI(t)}}]})}))})),N(R(e),"findService",(function(t){var r=e.props.searchOptions&&e.props.searchOptions.services;if(null!==t.__SERVICE__)if(r&&"string"==typeof t.__SERVICE__){for(var n=0;n<r.length;n++)if(r[n]&&r[n].id===t.__SERVICE__)return r[n];for(var o=0;o<r.length;o++)if(r[o]&&r[o].type===t.__SERVICE__)return r[o]}else if("object"===P(t.__SERVICE__))return t.__SERVICE__;return null})),e}return t=c,(r=[{key:"render",value:function(){var e=this.props.notFoundMessage;e||(e=o().createElement(w.ZP.Message,{msgId:"noresultfound"}));var t=this.props.containerStyle,r=this.props.mapConfig&&this.props.mapConfig.size;if(this.props.fitToMapSize&&r){var n=r.width-this.props.sizeAdjustment.width,a=r.height-this.props.sizeAdjustment.height;t=u()({},this.props.containerStyle,{maxWidth:n,maxHeight:a})}return this.props.results?0===this.props.results.length?o().createElement("div",{className:"search-result-list",style:u()({padding:"10px",textAlign:"center"},t)},e):o().createElement("div",{className:"search-result-list",style:t},this.renderResults()):null}}])&&k(t.prototype,r),c}(o().Component);N(F,"propTypes",{results:i().array,layers:i().array,searchOptions:i().object,mapConfig:i().object,fitToMapSize:i().bool,containerStyle:i().object,sizeAdjustment:i().object,onItemClick:i().func,addMarker:i().func,afterItemClick:i().func,showGFI:i().func,notFoundMessage:i().oneOfType([i().object,i().string])}),N(F,"defaultProps",{layers:[],sizeAdjustment:{width:0,height:110},containerStyle:{zIndex:1e3},onItemClick:function(){},addMarker:function(){},afterItemClick:function(){},showGFI:function(){}})},28578:(e,t,r)=>{"use strict";r.d(t,{Mk:()=>A,XH:()=>N,Ls:()=>F,OY:()=>V,h5:()=>D});var n=r(89255),o=r(94707),a=r.n(o),i=r(35385),c=r.n(i),l=r(27418),s=r.n(l),u=r(89734),f=r.n(u),p=r(14293),m=r.n(p),d=r(75110),h=r(60604),y=r(21914),b=r(1550),v=r(80416),g=r(97222),O=r(90183),S=r(18412),_=r(59286),E=r(15047),C=r(32420),w=r(88798),j=r(7877);function P(e){return function(e){if(Array.isArray(e))return I(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return I(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?I(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function T(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach((function(t){x(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function x(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var R=function(e,t){return(0,w.mx)(e,T({},(0,j.oq)(t)))},A=function(e){return e.ofType(g.bj).debounceTime(250).switchMap((function(t){return n.Observable.from((t.services||[{type:"nominatim",priority:5}]).map((function(e){var r=E.b.Utils.getService(e.type);if(!r){var o=new Error("Service Missing");return o.msgId="search.service_missing",o.serviceType=e.type,n.Observable.of(o).do((function(e){throw e}))}return n.Observable.defer((function(){return r(t.searchText,e.options).then((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t.map((function(t){return T(T({},t),{},{__SERVICE__:e,__PRIORITY__:e.priority||0})}))}))})).retryWhen((function(e){return e.delay(200).scan((function(e,t){if(e>=2)throw t;return e+1}),0)}))}))).mergeAll().scan((function(e,t){return f()([].concat(P(e),P(t)),["__PRIORITY__"])})).map((function(e){return(0,g.WN)(e.slice(0,t.maxResults||15),!1)})).startWith((0,g.yo)(!0)).takeUntil(e.ofType(g.Av,g.M8,g.dX)).concat([(0,g.yo)(!1)]).catch((function(e){var t=T(T({msgId:"search.generic_error"},e),{},{message:e.message,stack:e.stack});return n.Observable.from([(0,g.kE)(t),(0,g.yo)(!1)])}))}))},N=function(e,t){return e.ofType(g.dX).switchMap((function(e){var r=n.Observable.of(e.item).concatMap((function(t){if(t&&t.__SERVICE__&&t.__SERVICE__.geomService){var r=(0,_.generateTemplateString)(t.__SERVICE__.geomService.options.staticFilter||"")(t);return n.Observable.fromPromise(E.b.Utils.getService(t.__SERVICE__.geomService.type)("",s()({},t.__SERVICE__.geomService.options,{staticFilter:r})).then((function(e){return s()({},t,{geometry:O.default.mergeToPolyGeom(e)})})))}return n.Observable.of(e.item)})).concatMap((function(e){var r=e.bbox||e.properties.bbox||a()(e),n=[(0,b.Px)([r[0],r[1],r[2],r[3]],"EPSG:4326",e.__SERVICE__&&e.__SERVICE__.options&&e.__SERVICE__.options.maxZoomLevel||21),(0,g._q)(e)];if(e.__SERVICE__&&!m()(e.__SERVICE__.launchInfoPanel)&&e.__SERVICE__.options&&e.__SERVICE__.options.typeName){var o=c()(e).geometry.coordinates,i={lng:o[0],lat:o[1]},l=e.__SERVICE__.options.typeName;if(o){var s=t.getState(),u=l&&(0,d.dT)(s,l),f=null,p=[],h={},O=!1;return"single_layer"===e.__SERVICE__.launchInfoPanel&&(O=e.__SERVICE__.forceSearchLayerVisibility,p=[l],f=e.id,h=x({},e.__SERVICE__.options.typeName,{info_format:R(u,s),featureid:f})),[].concat(P(O&&u?[(0,v.He)(u.id,{visibility:!0})]:[]),P(e.__SERVICE__.openFeatureInfoButtonEnabled?[]:[(0,y.lK)({latlng:i},l,p,h,f)]),[(0,y.HP)()],n)}}return n})),o=e.item,i=o&&o.__SERVICE__&&o.__SERVICE__.then,l=i?n.Observable.of((0,g.QJ)(i.map((function(e){return T(T({},e),{},{options:T({item:o},e.options)})})),{text:(0,_.generateTemplateString)(o.__SERVICE__.displayName||"")(o),placeholder:o.__SERVICE__.nestedPlaceholder&&(0,_.generateTemplateString)(o.__SERVICE__.nestedPlaceholder||"")(o),placeholderMsgId:o.__SERVICE__.nestedPlaceholderMsgId&&(0,_.generateTemplateString)(o.__SERVICE__.nestedPlaceholderMsgId||"")(o)},(0,_.generateTemplateString)(o.__SERVICE__.searchTextTemplate||"")(o))):n.Observable.empty(),u=o.__SERVICE__&&o.__SERVICE__.searchTextTemplate,f=u?n.Observable.of((0,g.k9)((0,_.generateTemplateString)(u)(o))):n.Observable.empty();return n.Observable.of((0,g.kV)()).concat(r,l,f)}))},F=function(e,t){return e.ofType(g.al).switchMap((function(e){var r,o,i,l,s,u,f=e.item,p=t.getState(),m=null==f||null===(r=f.__SERVICE__)||void 0===r||null===(o=r.options)||void 0===o?void 0:o.typeName,h=m&&(0,d.dT)(p,m),O=f.bbox||f.properties.bbox||a()(f),_=c()(f).geometry.coordinates,E={lng:_[0],lat:_[1]},C=f.id;return _&&(0,S.zA)(null==f?void 0:f.__SERVICE__)&&(0,S.Tv)(h,null==f?void 0:f.__SERVICE__)?(i=n.Observable).of.apply(i,P(null!=f&&null!==(l=f.__SERVICE__)&&void 0!==l&&l.forceSearchLayerVisibility&&h?[(0,v.He)(h.id,{visibility:!0})]:[]).concat([(0,y.lK)({latlng:E},m,[m],x({},m,{info_format:R(h,p),featureid:C}),C),(0,y.HP)(),(0,b.Px)([O[0],O[1],O[2],O[3]],"EPSG:4326",(null==f||null===(s=f.__SERVICE__)||void 0===s||null===(u=s.options)||void 0===u?void 0:u.maxZoomLevel)||21),(0,g._q)(f)])):n.Observable.empty()}))},V=function(e,t){return e.ofType(g.b4).switchMap((function(e){var r={type:"Feature",geometry:{type:"Point",coordinates:[e.pos.x,e.pos.y]}},o=t.getState();return n.Observable.from([(0,h.W)("search","search","overlay",{features:[r],type:"vector",name:"searchPoints",id:"searchPoints",visibility:!0,style:o.search&&o.search.style||S.be}),(0,b.xy)(e.pos,e.zoom,e.crs)])}))},D=function(e,t){return e.ofType(g.Vc).switchMap((function(e){var r=e.layer,o=e.cql_filter,a=t.getState();if(0===(0,d.OX)(a).filter((function(e){return e.name===r})).length)return n.Observable.of((0,g.Tw)());var i=(0,d.dT)(a,r);return i&&o?n.Observable.defer((function(){return(0,C.DH)(i.url,{maxFeatures:1,typeName:r,srsName:"EPSG:4326",outputFormat:"application/json",cql_filter:o}).then((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.features&&e.features.length&&T(T({},e.features[0]),{},{typeName:r})}))})).switchMap((function(e){var t=e.type,r=e.geometry,a=e.typeName,i=c()({type:t,geometry:r}).geometry.coordinates,l={lng:i[0],lat:i[1]};return i?n.Observable.of((0,y.lK)({latlng:l},a,[a],x({},a,{cql_filter:o})),(0,y.HP)()):n.Observable.empty()})).catch((function(){return n.Observable.of((0,g.I3)())})):n.Observable.empty()}))}},64975:(e,t,r)=>{"use strict";r.d(t,{Z:()=>g});var n=r(5053),o=r.n(n),a=r(45697),i=r.n(a),c=r(89208),l=r(30294),s=r(82904),u=r(38560);function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(c,e);var t,r,n,a,i=(n=c,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=y(n);if(a){var r=y(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return h(this,e)});function c(){return p(this,c),i.apply(this,arguments)}return t=c,(r=[{key:"render",value:function(){var e=this;return o().createElement(u.Z,{onClick:function(){return e.props.onToggle(e.props.pressed)},bsStyle:this.props.pressed?"default":"primary",className:"square-button search-toggle"},o().createElement(l.Glyphicon,{glyph:"search"}))}}])&&m(t.prototype,r),c}(o().Component);b(v,"propTypes",{pressed:i().bool,onToggle:i().func}),b(v,"defaultProps",{pressed:!1,onToggle:function(){}});const g=(0,c.connect)((function(e){return{pressed:e.controls&&e.controls.search&&e.controls.search.enabled||!1}}),{onToggle:s.Xi.bind(null,"search",null)})(v)},69301:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var n=r(97222),o=r(82904),a=r(27418),i=r.n(a);function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u(e){return function(e){if(Array.isArray(e))return f(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return f(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?f(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}const p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.NN:return i()({},e,{loading:t.loading});case n.O7:return i()({},e,{error:t.error});case n.gs:return i()({},e,{searchText:t.searchText,error:null});case n.p7:var r=t.results;return!0===t.append&&e&&e.results&&(r=[].concat(u(e.results),u(t.results))),i()({},e,{results:r,error:null});case n.Av:return i()({},e,{results:null,error:null});case n.wn:return i()({},e,{markerPosition:t.markerPosition,markerLabel:t.markerLabel});case n.Gh:return i()({},e,{highlightedFeature:t.highlightedFeature});case n.M8:return{style:e.style||{}};case o.l:return null;case n.C2:return i()({},e,{selectedServices:t.services,searchText:t.searchText,selectedItems:(e.selectedItems||[]).concat(t.items)});case n.oQ:return i()({},{selectedItems:e.selectedItems&&e.selectedItems.filter((function(e){return e!==t.item})),searchText:""===e.searchText&&t.item&&t.item.text?t.item.text.substring(0,t.item.text.length):e.searchText});case n.x2:return i()({},e,{style:t.style});case n.Y7:return l(l({},e),{},{activeSearchTool:t.activeSearchTool});case n.GI:return l(l({},e),{},{format:t.format});case n.KP:return l(l({},e),{},{coordinate:l(l({},e.coordinate),{},s({},t.coord,t.val))});default:return e}}}}]);