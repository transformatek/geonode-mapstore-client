(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[2259],{52259:(e,t,n)=>{"use strict";n.r(t),n.d(t,{DEFAULT_SCREEN_DPI:()=>q,METERS_PER_UNIT:()=>Y,GOOGLE_MERCATOR:()=>$,EXTENT_TO_ZOOM_HOOK:()=>J,ZOOM_TO_EXTENT_HOOK:()=>Q,RESOLUTIONS_HOOK:()=>ee,RESOLUTION_HOOK:()=>te,COMPUTE_BBOX_HOOK:()=>ne,GET_PIXEL_FROM_COORDINATES_HOOK:()=>re,GET_COORDINATES_FROM_PIXEL_HOOK:()=>oe,registerHook:()=>ae,getHook:()=>ue,executeHook:()=>ce,clearHooks:()=>se,dpi2dpm:()=>le,dpi2dpu:()=>fe,getSphericalMercatorScale:()=>Oe,getGoogleMercatorScale:()=>pe,getSphericalMercatorScales:()=>de,getGoogleMercatorScales:()=>ge,getResolutionsForScales:()=>me,getGoogleMercatorResolutions:()=>ye,getResolutions:()=>_e,getScales:()=>ve,getZoomFromResolution:()=>Ee,defaultGetZoomForExtent:()=>Se,getZoomForExtent:()=>he,getCurrentResolution:()=>Te,getCenterForExtent:()=>be,getBbox:()=>Me,isNearlyEqual:()=>Ie,mapUpdated:()=>Re,transformExtent:()=>Ce,groupSaveFormatted:()=>xe,saveMapConfiguration:()=>Pe,generateNewUUIDs:()=>He,mergeMapConfigs:()=>we,addRootParentGroup:()=>ke,isSimpleGeomType:()=>Ne,getSimpleGeomType:()=>Ue,getIdFromUri:()=>Ge,parseLayoutValue:()=>Ke,prepareMapObjectToCompare:()=>De,updateObjectFieldKey:()=>je,compareMapChanges:()=>Le,createRegisterHooks:()=>Fe,default:()=>Ae});var r=n(47037),o=n.n(r),i=n(92742),a=n.n(i),u=n(81763),c=n.n(u),s=n(78718),l=n.n(s),f=n(27361),O=n.n(f),p=n(13311),d=n.n(p),g=n(67523),m=n.n(g),y=n(66604),_=n.n(y),v=n(3674),E=n.n(v),S=n(44908),h=n.n(S),T=n(87185),b=n.n(T),M=n(18446),I=n.n(M),R=n(41609),C=n.n(R),x=n(30998),P=n.n(x),H=n(50361),w=n.n(H),k=n(22762),N=n.n(k),U=n(24261),G=n.n(U),K=n(90183),D=n(61868),j=n(24262),L=n(27418),F=n.n(L);function A(e){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function X(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function Z(e){return function(e){if(Array.isArray(e))return z(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?z(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function V(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){W(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function W(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var q=96,Y={m:1,degrees:111194.87428468118,ft:.3048,"us-ft":1200/3937},$={RADIUS:6378137,TILE_WIDTH:256,ZOOM_FACTOR:2},J="EXTENT_TO_ZOOM_HOOK",Q="ZOOM_TO_EXTENT_HOOK",ee="RESOLUTIONS_HOOK",te="RESOLUTION_HOOK",ne="COMPUTE_BBOX_HOOK",re="GET_PIXEL_FROM_COORDINATES_HOOK",oe="GET_COORDINATES_FROM_PIXEL_HOOK",ie={};function ae(e,t){ie[e]=t}function ue(e){return ie[e]}function ce(e,t,n){var r=ue(e);return r?t(r):n?n():null}function se(){ie={}}function le(e){return e*(100/2.54)}function fe(e,t){var n=(0,K.getUnits)(t||"EPSG:3857");return Y[n]*le(e||q)}function Oe(e,t,n,r,o){return 2*Math.PI*e/(t*Math.pow(n,r)/le(o||q))}function pe(e,t){return Oe($.RADIUS,$.TILE_WIDTH,$.ZOOM_FACTOR,e,t)}function de(e,t,n,r,o,i){for(var a=[],u=r;u<=o;u++)a.push(Oe(e,t,n,u,i));return a}function ge(e,t,n){return de($.RADIUS,$.TILE_WIDTH,$.ZOOM_FACTOR,e,t,n)}function me(e,t,n){var r=fe(n,t);return e.map((function(e){return e/r}))}function ye(e,t,n){return me(ge(e,t,n),"EPSG:3857",n)}function _e(){return ue("RESOLUTIONS_HOOK")?ue("RESOLUTIONS_HOOK")():ye(0,21,q)}function ve(e,t){var n=fe(t,e);return _e().map((function(e){return e*n}))}function Ee(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:_e(),n=t.map((function(t,n){return{diff:Math.abs(t-e),zoom:n}})),r=N()(n,"diff"),o=r.zoom;return o}function Se(e,t,n,r,o,i){var a=e[2]-e[0],u=e[3]-e[1],c=Math.abs(a/t.width),s=Math.abs(u/t.height),l=Math.max(c,s),f=(i||me(ge(n,r,o||q),"EPSG:3857",o)).reduce((function(e,t,n){var r=Math.abs(t-l);return r>e.diff?e:{diff:r,zoom:n}}),{diff:Number.POSITIVE_INFINITY,zoom:0}).zoom;return Math.max(0,Math.min(f,r))}function he(e,t,n,r,o){return ue("EXTENT_TO_ZOOM_HOOK")?ue("EXTENT_TO_ZOOM_HOOK")(e,t,n,r,o):Se(e,t,n,r,o,ue("RESOLUTIONS_HOOK")?ue("RESOLUTIONS_HOOK")(e,t,n,r,o,le(o||q)):null)}function Te(e,t,n,r){return ue("RESOLUTION_HOOK")?ue("RESOLUTION_HOOK")(e,t,n,r):ye(t,n,r)[e]}function be(e,t){var n=(e[2]-e[0])/2,r=(e[3]-e[1])/2;return{x:e[0]+n,y:e[1]+r,crs:t}}function Me(e,t){return ce("COMPUTE_BBOX_HOOK",(function(n){return n(e,t)}))}var Ie=function(e,t){return void 0!==e&&void 0!==t&&e.toFixed(12)-t.toFixed(12)==0};function Re(e,t){var n,r,o,i;return!(!e||C()(e)||!t||C()(t)||Ie(null==t||null===(n=t.center)||void 0===n?void 0:n.x,null==e||null===(r=e.center)||void 0===r?void 0:r.x)&&Ie(null==t||null===(o=t.center)||void 0===o?void 0:o.y,null==e||null===(i=e.center)||void 0===i?void 0:i.y)&&(null==t?void 0:t.zoom)===(null==e?void 0:e.zoom))}function Ce(e,t,n,r){var o=(0,K.getUnits)(e);return"ft"===o?{width:n/Y.ft,height:r/Y.ft}:"us-ft"===o?{width:n/Y["us-ft"],height:r/Y["us-ft"]}:"degrees"===o?{width:n/(111132.92-559.82*Math.cos(2*t.y)+1.175*Math.cos(4*t.y)),height:r/(111412.84*Math.cos(t.y)-93.5*Math.cos(3*t.y))}:{width:n,height:r}}var xe=function(e){return{id:e.id,title:e.title,description:e.description,tooltipOptions:e.tooltipOptions,tooltipPlacement:e.tooltipPlacement,expanded:e.expanded}};function Pe(e,t,n,r,o,i,a){var u={center:e.center,maxExtent:e.maxExtent,projection:e.projection,units:e.units,mapInfoControl:e.mapInfoControl,zoom:e.zoom,mapOptions:e.mapOptions||{}},c=t.map((function(e){return(0,j.z8)(e)})),s=n.reduce((function(e,t){return e.concat((0,j.ar)(t))}),[].concat(n.map((function(e){return e.id})))).map((function(e){var t=(0,j.Mk)(n,e);return t&&t.nodes?xe(t):null})).filter((function(e){return e})),l=r.filter((function(e){return!!e.thumbnail})),f=(0,j.V5)(c),O=c.map((function(e){return F()({},e,{tileMatrixSet:e.tileMatrixSet&&e.tileMatrixSet.length>0,matrixIds:e.matrixIds&&Object.keys(e.matrixIds)})})),p=P()(O,(function(e){return"annotations"===e.id}));if(-1!==p){var d=O[p].features.map((function(e){return"FeatureCollection"===e.type?V(V({},e),{},{features:e.features.map((function(e){return e.properties.geometryGeodesic?(0,D.t8)("properties.geometryGeodesic",null,e):e}))}):e.properties.geometryGeodesic?(0,D.t8)("properties.geometryGeodesic",null,e):{}}));O[p]=(0,D.t8)("features",d,O[p])}return V({version:2,map:F()({},u,{layers:O,groups:s,backgrounds:l,text_search_config:o,bookmark_search_config:i},!C()(f)&&{sources:f}||{})},a)}var He=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=w()(e),n=V(V({},O()(e,"map.layers",[]).reduce((function(e,t){return V(V({},e),{},W({},t.id,"annotations"===t.id?t.id:G()()))}),{})),O()(e,"widgetsConfig.widgets",[]).reduce((function(e,t){return V(V({},e),{},W({},t.id,G()()))}),{}));return(0,D.t8)("map.backgrounds",O()(e,"map.backgrounds",[]).map((function(e){return V(V({},e),{},{id:n[e.id]})})),(0,D.t8)("widgetsConfig",{collapsed:_()(m()(O()(e,"widgetsConfig.collapsed",{}),(function(e,t){return n[t]})),(function(e){return V(V({},e),{},{layouts:_()(e.layouts,(function(e){return V(V({},e),{},{i:n[e.i]})}))})})),layouts:_()(O()(e,"widgetsConfig.layouts",{}),(function(e){return e.map((function(e){return V(V({},e),{},{i:n[e.i]})}))})),widgets:O()(e,"widgetsConfig.widgets",[]).map((function(e){return V(V({},e),{},{id:n[e.id],layer:V(V({},O()(e,"layer",{})),{},{id:n[O()(e,"layer.id")]})})}))},(0,D.t8)("map.layers",O()(e,"map.layers",[]).map((function(e){return V(V({},e),{},{id:n[e.id]})})),t)))},we=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map((function(e){return l()(e,E()(e).filter((function(t){return void 0!==e[t]})))}))},r=He(t),o=[].concat(Z(O()(e,"map.backgrounds",[])),Z(O()(r,"map.backgrounds",[]))),i=n(O()(e,"map.layers",[])),a=n(O()(r,"map.layers",[])),u=d()(i,(function(e){return"annotations"===e.id})),c=d()(a,(function(e){return"annotations"===e.id})),s=[].concat(Z(a.filter((function(e){return"annotations"!==e.id}))),Z(i.filter((function(e){return"annotations"!==e.id}))),Z(u||c?[V(V(V({},u||{}),c||{}),{},{features:[].concat(Z(O()(u,"features",[])),Z(O()(c,"features",[])))})]:[])),f=s.filter((function(e){return"background"===e.group})),p=P()(f,(function(e){return e.visibility})),g=O()(e,"map.sources",{}),m=O()(r,"map.sources",{}),y=V(V({},g),m),_=O()(e,"widgetsConfig",{}),v=O()(r,"widgetsConfig",{});return V(V(V({},r),e),{},{catalogServices:V(V({},O()(e,"catalogServices",{})),{},{services:V(V({},O()(e,"catalogServices.services",{})),O()(r,"catalogServices.services",{}))}),map:V(V(V({},r.map),e.map),{},{backgrounds:o,groups:b()([].concat(Z(O()(e,"map.groups",[])),Z(O()(r,"map.groups",[]))),(function(e,t){return e.id===t.id})),layers:[].concat(Z(f.slice(0,p+1)),Z(f.slice(p+1).map((function(e){return V(V({},e),{},{visibility:!1})}))),Z(s.filter((function(e){return"background"!==e.group})))),sources:C()(y)?void 0:y}),widgetsConfig:{collapsed:V(V({},_.collapsed),v.collapsed),layouts:h()([].concat(Z(E()(_.layouts)),Z(E()(v.layouts)))).reduce((function(e,t){return V(V({},e),{},W({},t,[].concat(Z(O()(_,"layouts.".concat(t),[])),Z(O()(v,"layouts.".concat(t),[])))))}),{}),widgets:[].concat(Z(O()(_,"widgets",[])),Z(O()(v,"widgets",[])))},timelineData:V(V({},O()(e,"timelineData",{})),O()(r,"timelineData",{})),dimensionData:V(V({},O()(e,"dimensionData",{})),O()(r,"dimensionData",{}))})},ke=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"RootGroup",n=O()(e,"map.groups",[]),r=n.filter((function(e){return"Default"!==e.id})),o=d()(n,(function(e){return"Default"===e.id})),i=o&&{id:G()(),title:t,expanded:o.expanded},a=o?[].concat(Z(r.map((function(e){var t=e.id,n=X(e,["id"]);return V({id:"".concat(i.id,".").concat(t)},n)}))),[i]):r;return V(V({},e),{},{map:V(V({},e.map),{},{groups:a,layers:O()(e,"map.layers",[]).map((function(e){var t,n=e.group;return V(V({},X(e,["group"])),{},{group:!o||"background"===n||"Default"!==n&&n?o&&(null===(t=d()(a,(function(e){var t=e.id;return t.slice(t.indexOf(".")+1)===n})))||void 0===t?void 0:t.id)||n:i.id})}))})})};function Ne(e){switch(e){case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":case"Text":return!1;case"Point":case"Circle":case"LineString":case"Polygon":default:return!0}}function Ue(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Point";switch(e){case"Point":case"LineString":case"Polygon":case"Circle":return e;case"MultiPoint":case"Marker":return"Point";case"MultiLineString":return"LineString";case"MultiPolygon":return"Polygon";case"GeometryCollection":return"GeometryCollection";case"Text":return"Point";default:return e}}var Ge=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:/data\/(\d+)/,n=decodeURIComponent(e),r=t.exec(n);return r&&r.length&&r.length>1?r[1]:null},Ke=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return o()(e)&&-1!==e.indexOf("%")?parseFloat(a()(e))*t/100:c()(e)?e:0},De=function e(t){var n=["apiKey","time","args","fixed"],r=function(e){return n.reduce((function(t,n){return t||e===n}),!1)};Object.keys(t).forEach((function(n){var o=t[n],i=A(o);"object"!==i||null===o||r(n)?"undefined"!==i&&o&&!r(n)||delete t[n]:(e(o),Object.keys(o).length||delete t[n])}))},je=function(e,t,n){e[t]&&(Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(e,t)),delete e[t])},Le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=["map.layers","map.backgrounds","map.text_search_config","map.bookmark_search_config","map.text_serch_config","map.zoom","widgetsConfig"],r=l()(w()(e),n),o=l()(w()(t),n);return je(r.map,"text_serch_config","text_search_config"),je(o.map,"text_serch_config","text_search_config"),De(r),De(o),I()(r,o)},Fe=function(){var e={};return{registerHook:function(t,n){e[t]=n},getHook:function(t){return e[t]},executeHook:function(t,n,r){var o=e[t];return o?n(o):r?r():null}}};const Ae={createRegisterHooks:Fe,EXTENT_TO_ZOOM_HOOK:J,RESOLUTIONS_HOOK:ee,RESOLUTION_HOOK:te,COMPUTE_BBOX_HOOK:ne,GET_PIXEL_FROM_COORDINATES_HOOK:re,GET_COORDINATES_FROM_PIXEL_HOOK:oe,DEFAULT_SCREEN_DPI:q,ZOOM_TO_EXTENT_HOOK:Q,registerHook:ae,getHook:ue,dpi2dpm:le,getSphericalMercatorScales:de,getSphericalMercatorScale:Oe,getGoogleMercatorScales:ge,getGoogleMercatorResolutions:ye,getGoogleMercatorScale:pe,getResolutionsForScales:me,getZoomForExtent:he,defaultGetZoomForExtent:Se,getCenterForExtent:be,getResolutions:_e,getScales:ve,getBbox:Me,mapUpdated:Re,getCurrentResolution:Te,transformExtent:Ce,saveMapConfiguration:Pe,generateNewUUIDs:He,mergeMapConfigs:we,addRootParentGroup:ke,isSimpleGeomType:Ne,getSimpleGeomType:Ue,getIdFromUri:Ge,parseLayoutValue:Ke,prepareMapObjectToCompare:De,updateObjectFieldKey:je,compareMapChanges:Le,clearHooks:se}}}]);