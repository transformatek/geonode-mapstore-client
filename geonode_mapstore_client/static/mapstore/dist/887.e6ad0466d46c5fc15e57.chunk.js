(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[887],{59979:(e,t,n)=>{"use strict";n.d(t,{Z:()=>g});var r=n(5053),o=n.n(r),i=n(52595),a=n(30294),c=n(57557),s=n.n(c),u=n(64386),l=n.n(u);function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const g=function(e){return function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(g,t);var n,r,c,u,f=(c=g,u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=v(c);if(u){var n=v(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return b(this,e)});function g(){return m(this,g),f.apply(this,arguments)}return n=g,(r=[{key:"render",value:function(){var t=null,n=this.props,r=n.popoverOptions,c=n.keyProp,u=function(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}(n,["popoverOptions","keyProp"]);return o().createElement("span",{className:"mapstore-info-popover"},o().createElement(e,p({},s()(u,["renderPopover","tooltipId"]),{key:c,ref:function(e){t=e}})),o().createElement(i.Z,{placement:r.placement,shouldUpdatePosition:!0,show:!0,target:function(){return l().findDOMNode(t)}},o().createElement(a.Popover,r.props,r.content)))}}])&&d(n.prototype,r),g}(o().Component)}},6724:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var r=n(5053),o=n.n(r),i=n(49848),a=function(e,t,n){var r=n.maskContainerStyle,a=n.maskStyle,c=n.className,s=n.white;return function(n){return(0,i.nest)((function(n){return o().createElement("div",{className:"ms2-mask-container ".concat(c||""," ").concat(e(n)?"":"ms2-mask-empty"),style:r},n.children,e(n)?o().createElement("div",{className:"ms2-mask"+(s?" white-mask":""),style:a},t(n)):null)}),n)}};const c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.alwaysWrap,o=void 0===r||r,c=n.white,s=void 0!==c&&c,u=n.maskContainerStyle,l=void 0===u?{}:u,f=n.maskStyle,p=void 0===f?{}:f,m=n.className;return o?a(e,t,{maskContainerStyle:l,maskStyle:p,className:m,white:s}):(0,i.branch)(e,a((function(){return!0}),t,{maskContainerStyle:l,maskStyle:p,white:s}))}},26325:(e,t,n)=>{"use strict";n.d(t,{ZP:()=>x});var r=n(89255),o=n(47037),i=n.n(o),a=n(27361),c=n.n(a),s=n(91175),u=n.n(s),l=n(84596),f=n.n(l),p=n(30381),m=n.n(p),d=n(89919),y=n(1550),b=n(57676),v=n(57604),g=n(80416),h=n(97395),O=n(75110),w=n(97291),P=n(85148),j=n(55237),S=n(96361);function T(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=n){var r,o,i=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){c=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(c)throw o}}return i}}(e,t)||I(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e){return function(e){if(Array.isArray(e))return D(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||I(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e,t){if(e){if("string"==typeof e)return D(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?D(e,t):void 0}}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){A(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function A(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var R="time",_=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(0,w.Li)(e),r=(0,w.uy)(e),o=(0,w.Ry)(e),i=(0,w.F3)(n)(e);return[o,r,"time",C({limit:1},t),i]},L=function(e,t,n){if((0,w.uy)(e))return r.Observable.forkJoin(S.Ci.apply(void 0,k(_(e,{sort:"asc",fromValue:n}))).map((function(e){return e.DomainValues.Domain.split(",")})).map((function(e){return T(e,1)[0]})).catch((function(e){return e&&r.Observable.of(null)})),S.Ci.apply(void 0,k(_(e,{sort:"desc",fromValue:n}))).map((function(e){return e.DomainValues.Domain.split(",")})).map((function(e){return T(e,1)[0]})).catch((function(e){return e&&r.Observable.of(null)}))).map((function(e){return(0,j.Qn)(e.filter((function(e){return!!e})),n)||n}));var o=(0,P.aK)((0,O.CA)(e,t))(e);return r.Observable.of((0,j.Qn)(o,n)||n)},$=function(e){return i()(e)?e:e.toISOString()},M=function(e,t,n){var o=t.domain.split("--"),i=(0,w.YK)(n())||{start:new Date(o[0]),end:new Date(o[1])},a=(0,j.un)(i,20),s=a.range,l=a.resolution,p=(0,O.CA)(n(),e).name,m=A({},R,"".concat($(s.start),"/").concat($(s.end)));return(0,S.ot)(t.source.url,p,R,A({},R,"".concat($(s.start),"/").concat($(s.end))),l,(0,w.F3)(e)(n())).merge((0,S.i8)(t.source.url,p,m,C(C({},(0,w.F3)(e)(n())),{},{expandLimit:20}))).scan((function(e,t){return C(C({},e),t)}),{}).switchMap((function(e){var t,n=e.Histogram,o=e.Domains,i=c()(u()(f()(c()(o,"DimensionDomain")||[]).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.Identifier;return t===R}))),"Domain");try{t=n&&n.Values&&n.Values.split(",").map((function(e){return parseInt(e,10)}))||[]}catch(e){t=[]}var a=i&&i.indexOf("--")<0&&i.split(",");return r.Observable.of({range:s,histogram:n&&n.Domain?{values:t,domain:n.Domain}:void 0,domain:i?{values:a}:void 0})}))};const x={setTimelineCurrentTime:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.getState,o=void 0===n?function(){}:n;return e.ofType(b.qx).throttleTime(100).switchMap((function(e){var t=e.time,n=e.group,i=o();return n?L(i,n,t).switchMap((function(e){var t=(0,w.YK)(i)||{},n=t.start,o=t.end,a=[];if(n&&o&&(m()(e).isBefore(n)||m()(e).isAfter(o))){var c=m()(o).diff(n);a=[(0,b.y3)({start:m()(e).subtract(c/2),end:m()(e).add(c/2)})]}return r.Observable.from([].concat(k(a),[(0,v.yR)(e)]))})).let((0,d.hP)((0,b.aA)(!1,!0),(0,b.aA)(!1,!1))):r.Observable.of((0,v.yR)(t))}))},settingInitialOffsetValue:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.getState,o=void 0===n?function(){}:n;return e.ofType(b.JU).switchMap((function(e){var t=o(),n=(0,P.WT)(t),i=(0,w.YK)(t);if(e.enabled){var a=i||{},c=a.start,s=void 0===c?0:c,u=a.end,l=void 0===u?432e6:u,f=(0,P.ns)(t),p=m()(l).diff(s),d=i?m()(s).add(p/2).toISOString():m()(new Date).toISOString(),y=m()(n||d).add(p/5),g=e.enabled&&!n?r.Observable.of((0,v.yR)(d)):r.Observable.empty(),h=e.enabled&&!f||e.enabled&&m()(f).diff(n)<0?r.Observable.of((0,v.pF)(y.toISOString())):r.Observable.empty(),O=i?r.Observable.empty():r.Observable.of((0,b.y3)({start:m()(d).add(-1*p/2),end:m()(d).add(p/2)}));return g.concat(h).concat(O)}return r.Observable.of((0,v.pF)())}))},updateRangeDataOnRangeChange:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.getState,o=void 0===n?function(){}:n;return e.ofType(b.Lv).merge(e.ofType(y.pP).filter((function(){return(0,w.cX)(o())})),e.ofType(b.w)).debounceTime(400).merge(e.ofType(v.XV).debounceTime(50)).switchMap((function(){var e,t=(0,P.m$)(o())||{},n=Object.keys(t).filter((function(e){return t[e]&&t[e].domain&&(0,j._q)(t[e].domain)||(0,w.cX)(o())}));return(e=r.Observable).merge.apply(e,k(n.map((function(e){return M(e,t[e],o).map((function(t){var n=t.range,r=t.histogram,o=t.domain;return(0,b.cO)(e,n,r,o)})).startWith((0,b.aA)(e,!0)).catch((function(){return r.Observable.of((0,h.vU)({uid:"error_with_timeline_update",title:"timeline.errors.multidim_error_title",message:"timeline.errors.multidim_error_message"}))})).concat(r.Observable.of((0,b.aA)(e,!1)))}))))}))},syncTimelineGuideLayer:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.getState,o=void 0===n?function(){}:n;return e.ofType(b.cb).merge(e.ofType(g.sb,g.yS).withLatestFrom(e.ofType(b._V),(function(e,t){var n=t.layerId;return n&&!(0,w.rV)(o()).some((function(e){return e.id===n}))})).filter((function(e){return!!e}))).switchMap((function(){var e=o(),t=c()((0,w.rV)(e),"[0].id");return(0,w.en)(e)&&t?r.Observable.of((0,b.kq)(t)):r.Observable.empty()}))},snapTimeGuideLayer:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.getState,r=void 0===n?function(){}:n;return e.ofType(b._V).filter((function(e){return(null==e?void 0:e.layerId)&&(0,w.en)(r())})).switchMap((function(e){var t=e.layerId;return L(r(),t,(0,P.WT)(r())||(new Date).toISOString()).filter((function(e){return e})).map((function(e){return(0,v.yR)(e)}))}))}}},42850:(e,t,n)=>{"use strict";n.d(t,{Z:()=>Ee});var r=n(5053),o=n.n(r),i=n(89208),a=n(47037),c=n.n(a),s=n(70735),u=n.n(s),l=n(14293),f=n.n(l),p=n(85148),m=n(57676),d=n(97291),y=n(57604),b=n(62187),v=n(76843),g=n(22222),h=n(84715),O=n(49848),w=n(6724),P=n(5346),j=n(75480),S=n(92742),T=n.n(S),k=n(30381),I=n.n(k),D=n(55237);function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){A(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function A(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var R=function(e,t){return I()(t).diff(e)>0};const _=(0,O.withHandlers)({clickHandler:function(e){var t=e.selectedLayer,n=e.offsetEnabled,r=e.status,o=e.setCurrentTime,i=void 0===o?function(){}:o,a=e.selectGroup,c=void 0===a?function(){}:a;return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=e.time,a=e.group,s=e.what,u=e.event;if("PLAY"!==r)switch(s){case"group-label":a&&"PLAY"!==r&&c(a);break;default:var l=u&&u.target&&u.target.closest(".vis-custom-time"),f=l&&l.getAttribute("class"),p=f&&T()(f.replace("vis-custom-time",""));o&&!n&&"startPlaybackTime"!==p&&"endPlaybackTime"!==p&&i(o.toISOString(),t)}}},timechangedHandler:function(e){var t=e.currentTime,n=e.setOffset,r=void 0===n?function(){}:n,o=e.setCurrentTime,i=void 0===o?function(){}:o,a=e.currentTimeRange,c=void 0===a?{}:a,s=e.playbackRange,u=e.setPlaybackRange,l=void 0===u?function(){}:u,f=e.selectedLayer;return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.time,o=e.id;if("startPlaybackTime"!==o&&"endPlaybackTime"!==o)"currentTime"===o&&(c.end?R(n,c.end)?i(n.toISOString(),null):(i(c.end),r(n.toISOString())):i(n.toISOString(),f)),"offsetTime"===o&&(R(t,n)?r(n.toISOString()):(i(n.toISOString()),r(t)));else{var a=C(C({},s),{},A({},o,n.toISOString())),u=(0,D.og)(a.startPlaybackTime,a.endPlaybackTime),p=u.start,m=u.end;R(p,m)&&l({startPlaybackTime:p,endPlaybackTime:m})}}}});function L(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L(Object(n),!0).forEach((function(t){M(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function M(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x(e){return function(e){if(Array.isArray(e))return H(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return H(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?H(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const N=(0,O.compose)((0,O.withPropsOnChange)(["rangeItems","playbackRange","playbackEnabled","selectedLayer"],(function(e){var t=e.rangeItems,n=void 0===t?[]:t,r=e.playbackEnabled,o=e.playbackRange;return{rangeItems:r&&o&&void 0!==o.startPlaybackTime&&void 0!==o.endPlaybackTime?[].concat(x(n),[$($({id:"playback-range"},(0,D.og)(o.startPlaybackTime,o.endPlaybackTime)),{},{type:"background",className:"ms-playback-range"})]).filter((function(e){return e})):n}})),(0,O.compose)((0,O.withHandlers)({onUpdate:function(e){var t=e.moveCurrentRange,n=void 0===t?function(){}:t;return function(e){var t=e.id,r=e.start;"current-range"===t&&n(r.toISOString())}}}),(0,O.withPropsOnChange)(["options","onUpdate"],(function(e){var t=e.options,n=void 0===t?{}:t,r=e.onUpdate,o=void 0===r?function(){}:r;return{options:$($({},n),{},{snap:null,editable:{add:!1,updateTime:!1,updateGroup:!1,remove:!1,overrideItems:!1},onMove:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;o(e),t(e)}})}})),(0,O.withPropsOnChange)(["rangeItems","currentTime","offsetEnabled","selectedLayer","currentTimeRange","readOnly"],(function(e){var t=e.currentTimeRange,n=e.rangeItems,r=void 0===n?[]:n,o=e.readOnly;return{rangeItems:e.offsetEnabled&&void 0!==t.start&&void 0!==t.end?[].concat(x(r),[$($({id:"current-range",editable:{updateTime:!o,updateGroup:!1,remove:!1}},(0,D.og)(t.start,t.end)),{},{type:"background",className:"ms-current-range"})]).filter((function(e){return e})):r}}))),(0,O.withPropsOnChange)(["currentTime","playbackRange","playbackEnabled","offsetEnabled","currentTimeRange"],(function(e){var t=e.currentTime,n=e.playbackRange,r=e.playbackEnabled,o=e.offsetEnabled,i=e.currentTimeRange;return{customTimes:[t?{currentTime:t}:{},r&&n&&n.startPlaybackTime&&n.endPlaybackTime?n:{},o&&i?{offsetTime:i.end}:{}].reduce((function(e,t){return t?$($({},e),t):$({},e)}),{})}})));var Z=n(45697),V=n.n(Z),U=n(16307),W=n.n(U),G=(n(61805),n(91966)),F=n.n(G),B=n(3674),K=n.n(B),Y=n(25325),q=n.n(Y),z=n(71843),J=n.n(z),X=n(66073),Q=n.n(X),ee=n(57557),te=n.n(ee),ne=n(28583),re=n.n(ne);function oe(e){return(oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ie(e){return function(e){if(Array.isArray(e))return ae(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return ae(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ae(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ce(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function se(e,t){return(se=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ue(e,t){return!t||"object"!==oe(t)&&"function"!=typeof t?le(e):t}function le(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fe(e){return(fe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}W().timeline.components.items.BackgroundItem.prototype._createDomElement=function(){this.dom||(this.dom={},this.dom.box=document.createElement("div"),this.dom.frame=document.createElement("div"),this.dom.frame.className="vis-item-overflow",this.dom.box.appendChild(this.dom.frame),this.dom.content=document.createElement("div"),this.dom.content.className="vis-item-content",this.dom.frame.appendChild(this.dom.content),this.dom.box["timeline-item"]=this,this.dirty=!0)};var me=function(){},de=["currentTimeTick","click","contextmenu","doubleClick","groupDragged","changed","rangechange","rangechanged","select","drop","timechange","timechanged","mouseOver","mouseMove","mouseleave","itemover","itemout","mouseDown","mouseUp"],ye={},be={};Q()(de,(function(e){return ye[e]=V().func,be["".concat(e,"Handler")]=me,[ye,be]}));var ve={items:V().array,rangeItems:V().array,groups:V().array,options:V().object,selectionOptions:V().object,selection:V().array,customTimes:V().shape({datetime:V().instanceOf(Date),id:V().string}),animate:V().oneOfType([V().bool,V().object]),currentTime:V().oneOfType([V().string,V().instanceOf(Date),V().number])},ge=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&se(e,t)}(c,e);var t,n,r,i,a=(r=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=fe(r);if(i){var n=fe(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return ue(this,e)});function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),pe(le(t=a.call(this,e)),"setAllItems",(function(e){t.$el.setItems([].concat(ie(e||[]),ie(t.props.rangeItems||[])))})),pe(le(t),"setItems",(function(e){(e.length||0)+(t.props.rangeItems&&t.props.rangeItems.length||0)>0?t.$el.initialFitDone?t.setAllItems(e):(t.setAllItems(e),t.$el.emit("changed")):t.$el.initialRangeChangeDone&&t.setAllItems(e)})),t.state={customTimes:[]},t}return t=c,(n=[{key:"componentDidMount",value:function(){var e=this,t=this.refs.container;this.$el=new(W().Timeline)(t,void 0,this.props.options),de.forEach((function(t){return e.$el.on(t,e.props["".concat(t,"Handler")])})),this.init()}},{key:"shouldComponentUpdate",value:function(e){var t=this.props,n=t.items,r=t.groups,o=t.options,i=t.selection,a=t.customTimes,c=t.readOnly,s=t.rangeItems,u=n!==e.items,l=r!==e.groups,f=o!==e.options,p=a!==e.customTimes,m=i!==e.selection,d=c!==e.readOnly,y=s!==e.rangeItems;return u||l||f||p||m||d||y}},{key:"componentDidUpdate",value:function(e){this.init(e)}},{key:"componentWillUnmount",value:function(){this.$el.destroy()}},{key:"render",value:function(){return o().createElement("div",{ref:"container",className:this.props.readOnly?"read-only-timeline":"",onMouseOut:this.props.onMouseOutHandler})}},{key:"init",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.props,r=n.items,o=n.rangeItems,i=n.groups,a=n.options,c=n.selection,s=n.selectionOptions,l=void 0===s?{}:s,f=n.customTimes,p=n.animate,m=void 0===p||p,d=n.currentTime,y=a;if(m&&(y=te()(a,"start","end"),a.start&&a.end?this.$el.setWindow(a.start,a.end,{animation:m}):this.$el.setWindow(I()().subtract(1,"month"),I()().add(1,"month"),{animation:m})),this.$el.setOptions(y),i.length>0){var b=new(W().DataSet);b.add(i),this.$el.setGroups(b)}if(r&&r!==t.items)this.setItems(r);else if(o!==t.rangeItems){var v=this.$el&&this.$el.itemsData&&this.$el.itemsData.getDataSet();if(v){var g=J()(o||[],t.rangeItems||[],"id"),h=u()(o||[],t.rangeItems||[],"id"),O=u()(t.rangeItems||[],o||[],"id");g.map((function(e){return v.update(e)})),h.map((function(e){return v.add(e)})),O.map((function(e){var t=e.id;return v.remove(t)}))}else this.setItems(r)}this.$el.setSelection(c,l),d&&this.$el.setCurrentTime(d);var w=K()(this.state.customTimes),P=K()(f),j=F()(P,w),S=F()(w,P),T=q()(w,P);Q()(S,(function(t){return e.$el.removeCustomTime(t)})),Q()(j,(function(t){var n=f[t];e.$el.addCustomTime(n,t)})),Q()(T,(function(t){var n=f[t];e.$el.setCustomTime(n,t)})),this.setState({customTimes:f}),(this.props.readOnly!==t.readOnly||this.props.readOnly&&j.length>0)&&Q()(this.$el.customTimes,(function(n){e.props.readOnly?n.hammer.off("panstart panmove panend"):!0===t.readOnly&&(n.hammer.on("panstart",n._onDragStart.bind(n)),n.hammer.on("panmove",n._onDrag.bind(n)),n.hammer.on("panend",n._onDragEnd.bind(n)))}))}}])&&ce(t.prototype,n),c}(o().Component);pe(ge,"propTypes",re()(ve,ye)),pe(ge,"defaultProps",re()({items:[],groups:[],options:{},selection:[],customTimes:{}},be));const he=ge;function Oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function we(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Oe(Object(n),!0).forEach((function(t){Pe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Oe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Pe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var je=(0,h.o)((function(e,t){return e===t||!f()(e)&&!f()(t)&&e.id===t.id&&e.title===t.title&&e.name===t.name}))(d.rV,(function(e){return e})),Se=(0,O.compose)((0,i.connect)((0,g.P1)(d.YK,d.__,je,d.E2,(function(e,t,n,r){return{viewRange:e,items:t,layers:n,loading:r}}))),(0,O.withPropsOnChange)((function(e,t){var n=e.layers,r=void 0===n?[]:n,o=e.loading,i=e.selectedLayer,a=t.layers,c=t.loading,s=t.selectedLayer,l=e.hideLayersName!==t.hideLayersName;return o!==c||i!==s||l||r&&a&&r.length!==a.length||u()(r,a||[],(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id,n=e.title,r=e.name;return t+n+r})).length>0}),(function(e){var t=e.layers,n=void 0===t?[]:t,r=e.loading,o=void 0===r?{}:r,i=e.selectedLayer;return{groups:n.map((function(e){return{id:e.id,className:(o[e.id]?"loading":"")+(e.id&&e.id===i?" selected":""),content:'<div class="timeline-layer-label-container">'+(o[e.id]?'<div class="timeline-layer-icon"><div class="timeline-spinner"></div></div>':'<div class="timeline-layer-icon">'.concat(e.id&&e.id===i?'<i class="glyphicon glyphicon-time"></i>':"","</div>"))+'<div class="timeline-layer-title">'.concat(c()(e.title)?e.title:e.name,"</div>")+"</div>"}}))}}))),Te=(0,O.compose)((0,i.connect)((0,g.P1)(p.WT,d.m_,(function(e,t){return{currentTime:e,currentTimeRange:t}})),{setCurrentTime:m.HM,moveCurrentRange:y.PZ,setOffset:y.pF})),ke=(0,O.compose)((0,i.connect)((0,g.zB)({playbackRange:v.KC,status:v.dS}),{setPlaybackRange:b.VS})),Ie=(0,O.compose)((0,i.connect)((0,g.P1)(d.Li,(function(e){return{selectedLayer:e}})),{selectGroup:m.kq})),De=(0,O.compose)((0,i.connect)((function(){return{}}),{rangechangedHandler:m.y3}));const Ee=(0,O.compose)(Te,ke,Ie,_,De,Se,(0,O.defaultProps)({key:"timeline",options:{maxHeight:"90%",verticalScroll:!0,stack:!1,showMajorLabels:!0,showCurrentTime:!1,zoomMin:10,zoomable:!0,type:"background",margin:{item:0,axis:0},format:{minorLabels:{minute:"h:mma",hour:"ha"}},itemsAlwaysDraggable:!0,moment:function(e){return I()(e).utc()}}}),(0,O.withPropsOnChange)(["viewRange","options"],(function(e){var t=e.viewRange,n=void 0===t?{}:t;return{options:we(we({},e.options),n)}})),(0,O.withPropsOnChange)(["status"],(function(e){return{readOnly:"PLAY"===e.status}})),N,(0,w.Z)((function(e){var t=e.loading;return t&&t.timeline}),(function(){return o().createElement("div",{style:{margin:"auto",fontWeight:"bold"}},o().createElement(j.Z,{style:{display:"inline-block",verticalAlign:"middle"}}),o().createElement(P.Z,{msgId:"loading"}))}),{white:!0}))(he)},89168:(e,t,n)=>{"use strict";n.d(t,{Z:()=>w});var r=n(5053),o=n.n(r),i=n(89255),a=n(5346),c=n(30294),s=n(57676),u=n(97291),l=n(49848),f=n(15135),p=n(22222),m=n(89208),d=n(59979),y=n(38560);function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var O=(0,l.compose)((0,l.withProps)({collapseHintPopoverOptions:{placement:"top",props:{title:o().createElement("span",null,o().createElement(c.Glyphicon,{glyph:"time"})," ",o().createElement("strong",null,o().createElement(a.Z,{msgId:"timeline.collapsed.title"})))},content:o().createElement(a.Z,{msgId:"timeline.collapsed.tooltip"})}}),(0,l.mapPropsStream)((function(e){return e.combineLatest(function(e){return e.distinctUntilKeyChanged("collapsed").filter((function(e){return e.collapsed})).take(1).switchMap((function(e){var t=e.collapseHintPopoverOptions;return i.Observable.timer(5e3).startWith({popoverOptions:t}).concat(i.Observable.of({}))})).startWith({})}(e),(function(e,t){return g(g({},e),t)}))})),(0,l.branch)((function(e){return e.popoverOptions}),d.Z,f.Z))(y.Z);const w=(0,l.compose)((0,m.connect)((0,p.P1)(u.zb,u.qJ,(function(e,t){return{collapsed:e,visible:t}})),{setCollapsed:s.w2}),(0,l.branch)((function(e){return!e.visible}),l.renderNothing),(0,l.withHandlers)({onClick:function(e){var t=e.collapsed,n=e.setCollapsed;return function(){return n(!t)}}}),(0,l.withProps)((function(e){var t=e.collapsed;return{bsStyle:t?"primary":"success",tooltipId:t?"timeline.show":"timeline.hide"}})))((function(e){return o().createElement(O,b({},e,{bsSize:"xsmall"}),o().createElement(c.Glyphicon,{glyph:"time"}))}))},55545:(e,t,n)=>{"use strict";n.d(t,{Z:()=>m});var r=n(80416),o=n(82904),i=n(57676),a=n(61868),c=n(28583),s=n.n(c),u=n(35937),l=n.n(u),f=n(18721),p=n.n(f);const m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{settings:{autoSelect:!0,collapsed:!1}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case i.M5:return(0,a.t8)("settings.collapsed",t.collapsed,e);case i.w:return(0,a.t8)("settings.mapSync",t.mapSync,e);case i.Lv:return(0,a.t8)("range",{start:t.start,end:t.end},e);case i.iv:return(0,a.t8)("rangeData[".concat(t.layerId,"]"),{range:t.range,histogram:t.histogram,domain:t.domain},e);case i.br:return t.layerId?(0,a.t8)("loading[".concat(t.layerId,"]"),t.loading,e):(0,a.t8)("loading.timeline",t.loading,e);case i._V:return(0,a.t8)("selectedLayer",t.layerId,e);case r.sb:var n=e;return s()({},e,{rangeData:p()(n.rangeData,t.node)?l()(n.rangeData,(function(e,n){return n!==t.node})):n.rangeData,loading:p()(n.rangeData,t.node)?l()(n.loading,(function(e,n){return n!==t.node})):n.loading,selectedLayer:e.selectedLayer===t.node?void 0:e.selectedLayer});case o.l:return s()({},e,{range:void 0,rangeData:void 0,selectedLayer:void 0,loading:void 0,MouseEvent:void 0});case i.p:return(0,a.t8)("settings.showHiddenLayers",t.showHiddenLayers,e);default:return e}}}}]);