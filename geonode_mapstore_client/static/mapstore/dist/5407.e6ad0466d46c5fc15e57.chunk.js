(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[5407],{90173:(e,n,r)=>{e.exports=r(10761)},37275:(e,n,r)=>{"use strict";r.d(n,{$F:()=>D,jQ:()=>T,y9:()=>L,wJ:()=>I,qg:()=>K,jS:()=>F,pT:()=>B,u8:()=>J,nv:()=>X,ZP:()=>Z});var t=r(90173),o=r(45697),i=r.n(o),a=r(8575),u=r(9669),s=r.n(u),c=r(1469),l=r.n(c),p=r(13218),f=r.n(p),d=r(66654),g=r.n(d),m=r(14293),y=r.n(m),w=r(27418),b=r.n(w),v=r(82702),h=r(50456),x=r.n(h);function P(e){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function S(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?O(Object(r),!0).forEach((function(n){j(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function j(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}var C=t.default?new t.default.Proj("EPSG:4326"):null,E=i().shape({x:i().number.isRequired,y:i().number.isRequired,crs:i().string}),U=a.parse(window.location.href,!0).query,k="localConfig.json",_={proxyUrl:"/mapstore/proxy/?url=",geoStoreUrl:"/rest/geostore/",printUrl:"/mapstore/print/info.json",translationsPath:"translations",extensionsRegistry:"extensions.json",extensionsFolder:"",configurationFolder:"",contextPluginsConfiguration:"pluginsConfig.json",projectionDefs:[],themePrefix:"ms2",bingApiKey:null,mapquestApiKey:null,defaultSourceType:"gxp_wmssource",backgroundGroup:"background",userSessions:{enabled:!1}},q=function(e,n,r,t){var o=e.mapId;return{configUrl:o?(t||_.geoStoreUrl)+"data/"+o:_.configurationFolder+(e.config||n||"config")+"."+(r||"json"),legacy:!!o}},D=function(e){var n=e.split("?");if(n.length>2){var r=n.slice(1);return n[0]+"?"+r.join("&")}return e},M=function(e,n){var r=D(e).split("?"),t="";if(r.length>=2&&r[1]){var o=r[1].split(/[&;]/g).filter((function(e){return!!e}));o.forEach((function(e,r){var i=e.split("=");if(-1===n.indexOf(i[0].toLowerCase())){var a=r===o.length-1?"":"&";t+=i.join("=")+a}}))}return t?r[0]+"?"+t:r[0]},T=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return y()(e)||""===e?null:M(D(e),n)},L=function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(e){var t=a.parse(T(e,r),!0),o=null;if(g()(t.pathname,"wfs")||g()(t.pathname,"wms")||g()(t.pathname,"ows"))return o=t.pathname.replace(/(wms|ows|wfs|wps)$/,"wps"),a.format(b()({},t,{search:null,pathname:o},{query:b()(S({service:"WPS"},n),t.query)}))}return null},I=function(e){k=e},K=function(e,n){var r=l()(e)?{x:e[0],y:e[1]}:e,o=e.crs||n||"EPSG:4326",i="EPSG:4326"!==o?t.default.transform(new t.default.Proj(o),C,r):r;return b()({},i,{crs:"EPSG:4326"})},R=function(e){return"bing"===e.type&&(e.apiKey=_.bingApiKey),"mapquest"===e.type&&(e.apiKey=_.mapquestApiKey),e},A=function(e,n){return e.id||(e.id=e.name+"__"+n),e},G=function(e){var n=e;return(n.match(/\{.*?\}/g)||[]).forEach((function(e){var r=_[e.substring(1,e.length-1)];void 0!==r&&(n=n.replace(e,r||""))})),n},z=function(e){return e.url&&(l()(e.url)?e.url=e.url.map((function(e){return G(e)})):e.url=G(e.url)),e},F=function(e){var n=e.layers,r=e.groups,t=e.plugins,o=function(e,n){if(null==e)return{};var r,t,o=function(e,n){if(null==e)return{};var r,t,o={},i=Object.keys(e);for(t=0;t<i.length;t++)r=i[t],n.indexOf(r)>=0||(o[r]=e[r]);return o}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(t=0;t<i.length;t++)r=i[t],n.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,["layers","groups","plugins"]);return o.center=K(o.center),{map:o,layers:n.map(R,e).map(A).map(z),groups:r,plugins:t}},W=function(e,n){var r,t=n;for(r in n||(t=_.defaultSourceType),e)e.hasOwnProperty(r)&&(e[r].ptype||(e[r].ptype=t))},$=function(e){return e&&-1!==e.indexOf("?")?e.split("?")[0]:e},N=function(e,n){if(e.baseParams=n.baseParams,n.url){var r=a.parse(n.url,!0);for(var t in r.query)"REQUEST"===t.toUpperCase()&&delete r.query[t];e.baseParams=b()({},e.baseParams,r.query)}e.url=$(n.url)},Q=function(e,n,r){var t,o,i,a;for(o=0;o<e.length;o++){(a=n[(i=e[o]).source])&&N(i,a);var u=a.ptype;i.type=u?u.replace(/^gxp_(.*)source$/i,"$1"):"unknown",i&&(r.indexOf(a&&a.ptype)>=0?i.group===_.backgroundGroup&&(i.visibility=i.visibility||!1,t&&t.visibility?i.visibility&&(t.visibility=!1,t=i):t=i):i.visibility=!1)}t&&(t.visibility=!0)},B=function(e){var n=e.map,r=e.gsSources||e.sources,t=n.layers.filter((function(e){return r[e.source]})),o=K(n.center,n.projection),i=n.zoom,a=n.maxExtent||n.extent;return W(r,e.defaultSourceType),Q(t,r,["gxp_osmsource","gxp_wmssource","gxp_googlesource","gxp_bingsource","gxp_mapquestsource","gxp_olsource"]),F({center:o,zoom:i,maxExtent:a,layers:t,projection:n.projection||"EPSG:3857"})},H=function(e){return e.proxyUrl?e.proxyUrl:_.proxyUrl},J=function(e){return _[e]},X=function(e,n){_[e]=n};const Z={PropTypes:{center:E,config:i().shape({center:E,zoom:i().number.isRequired}),mapStateSource:i().string},getParsedUrl:L,getDefaults:function(){return S({},_)},setLocalConfigurationFile:I,loadConfiguration:function(){return k?s().get(k).then((function(e){return"object"===P(e.data)&&(_=b()({},_,e.data)),S({},_)})):new v.Promise((function(e){e(S({},_))}))},getCenter:K,normalizeConfig:F,getUserConfiguration:function(e,n,r){return q(U,e,n,r)},getConfigurationOptions:q,getConfigUrl:function(e){var n=e.mapId,r=n,t=e.config;try{var o=parseInt(r,10);isNaN(o)&&(t=n,r=null)}catch(e){t=n,r=null}return q({mapId:r,config:t})},convertFromLegacy:B,setupSources:W,normalizeSourceUrl:$,copySourceOptions:N,setupLayers:Q,mergeConfigs:function(e,n){return e.map=n.map,e.gsSources=n.gsSources||n.sources,e},getProxyUrl:H,cleanDuplicatedQuestionMarks:D,getUrlWithoutParameters:M,filterUrlParams:T,getProxiedUrl:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=!(0===e.indexOf("http")),t=!r&&e.match(/([^:]*:)\/\/([^:]*:?[^@]*@)?([^:\/\?]*):?([^\/\?]*)/);if(t){var o=window.location;r=t[1]===o.protocol&&t[3]===o.hostname;var i=t[4],a=o.port,u=0===o.protocol.indexOf("https")?443:80;i=""===i?u+"":i+"",a=""===a?u+"":a+"",r=r&&i===a}if(!r){var s=H(n);if(s){var c=[];f()(s)&&(c=s.useCORS||[],s=s.url);var l=c.reduce((function(n,r){return n||0===e.indexOf(r)}),!1);if(!l)return s+encodeURIComponent(e)}}return e},getBrowserProperties:function(){var e="ActiveXObject"in window,n=e&&!document.addEventListener,r=e&&window.location.hash===!!window.MSInputMethodContext&&!!document.documentMode,t=navigator.userAgent.toLowerCase(),o=-1!==t.indexOf("webkit"),i=-1!==t.indexOf("chrome"),a=-1!==t.indexOf("safari")&&-1===t.indexOf("chrome"),u=-1!==t.indexOf("phantom"),s=-1!==t.indexOf("android"),c=-1!==t.search("android [23]"),l=-1!==t.indexOf("gecko"),p=x().any,f=!window.PointerEvent&&window.MSPointerEvent,d=window.PointerEvent&&window.navigator.pointerEnabled&&window.navigator.maxTouchPoints||f,g="devicePixelRatio"in window&&window.devicePixelRatio>1||"matchMedia"in window&&window.matchMedia("(min-resolution:144dpi)")&&window.matchMedia("(min-resolution:144dpi)").matches,m=document.documentElement,y=e&&"transition"in m.style,w="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!c,b="MozPerspective"in m.style,v="OTransition"in m.style,h=!window.L_DISABLE_3D&&(y||w||b||v)&&!u,P=!window.L_NO_TOUCH&&!u&&(d||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch);return{ie:e,ie11:r,ielt9:n,webkit:o,gecko:l&&!o&&!window.opera&&!e,android:s,android23:c,chrome:i,safari:a,ie3d:y,webkit3d:w,gecko3d:b,opera3d:v,any3d:h,mobile:p,mobileWebkit:p&&o,mobileWebkit3d:p&&w,mobileOpera:p&&window.opera,touch:P,msPointer:f,pointer:d,retina:g}},setApiKeys:R,setUrlPlaceholders:z,replacePlaceholders:G,setLayerId:A,getConfigProp:J,setConfigProp:X,removeConfigProp:function(e){delete _[e]}}},45968:()=>{}}]);