(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[4068],{14068:(e,t,n)=>{"use strict";n.d(t,{Z:()=>f});var r=n(24852),o=n.n(r),a=n(55033),i=n.n(a),u=n(32425),l=n(83139),c=n(80717);function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function d(e){return function(e){if(Array.isArray(e))return v(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||m(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){if(e){if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(e,t):void 0}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const f=(0,r.forwardRef)((function(e,t){var n,a,v=e.className,f=void 0===v?"ms-thumbnail":v,h=e.label,p=e.loading,g=e.message,y=e.error,b=e.thumbnail,w=e.removeGlyph,E=void 0===w?"trash":w,A=e.removeTooltipId,z=void 0===A?"removeThumbnail":A,j=e.style,I=void 0===j?{}:j,S=e.maxFileSize,k=void 0===S?5e5:S,C=e.supportedImageTypes,N=void 0===C?["image/png","image/jpeg","image/jpg"]:C,O=e.thumbnailOptions,P=e.dropZoneProps,x=void 0===P?{className:"ms-thumbnail-dropzone",activeClassName:"ms-thumbnail-dropzone-active",rejectClassName:"ms-thumbnail-dropzone-reject"}:P,R=e.onUpdate,L=void 0===R?function(){}:R,T=e.onError,q=void 0===T?function(){}:T,D=e.onRemove,U=e.toolbarButtons,Z=(0,r.useRef)(),_=(n=(0,r.useState)(),a=2,function(e){if(Array.isArray(e))return e}(n)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,u=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(u)throw o}}return a}}(n,a)||m(n,a)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),F=_[0],H=_[1];if((0,r.useEffect)((function(){return Z.current=!0,function(){Z.current=!1}}),[]),p||F)return o().createElement("div",{className:"dropzone-thumbnail-container".concat(f?" ".concat(f):""," ms-loading")},o().createElement(u.Z,{size:70}));var M=o().createElement(c.Z,{btnDefaultProps:{className:"square-button-md no-border"},buttons:U||[{glyph:E,visible:!(!D||!b),tooltipId:z,onClick:function(e){var t;null==e||null===(t=e.stopPropagation)||void 0===t||t.call(e),null==D||D()}}]});return o().createElement("div",{className:"dropzone-thumbnail-container".concat(f?" ".concat(f):""),style:I},h,o().createElement(i(),s({},x,{multiple:!1,onDrop:function(e){var t,n=null==e||null===(t=e[0])||void 0===t?void 0:t.type,r=-1!==N.indexOf(n);H(!0),function(e,t){return new Promise((function(n){var r=e;if(null!=r&&r[0]){var o=r[0],a=new FileReader;return a.onload=function(e){return n(t?(0,l.Xq)(e.target.result,t).then((function(e){return{data:e,size:e.length}})):{data:e.target.result,size:o.size})},a.readAsDataURL(o)}return n({data:null})}))}(e,O).then((function(t){var n=t.data,o=t.size;return Z.current?(H(!1),r&&n&&o<k?L(n,e):q([].concat(d(r?[]:["FORMAT"]),d(n&&o>=k?["SIZE"]:[])),e)):null})).catch((function(e){return Z.current?(H(!1),q(e)):null}))}}),b?o().createElement("div",{style:{position:"relative",width:"100%",height:"100%"}},o().createElement("div",{ref:t,style:{position:"relative",width:"100%",height:"100%",backgroundImage:"url(".concat(b,")"),backgroundSize:null!=O&&O.contain?"contain":"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"}}),o().createElement("div",{className:"dropzone-content-image-added"},g),M):o().createElement("div",{className:"dropzone-content-image"},g,M,y&&o().createElement("div",{className:"dropzone-errors"},y))))}))},83139:(e,t,n)=>{"use strict";n.d(t,{Xq:()=>r,v9:()=>a});var r=function(e,t){return new Promise((function(n,r){var o=t||{},a=o.width,i=void 0===a?64:a,u=o.height,l=void 0===u?64:u,c=o.contain,s=o.type,d=void 0===s?"image/jpeg":s,m=o.quality,v=void 0===m?.5:m,f=new Image;f.crossOrigin="anonymous",f.onload=function(){var e=f.naturalWidth/f.naturalHeight,t=i,r=l,o=i/l,a=document.createElement("canvas");a.setAttribute("width",i),a.setAttribute("height",l),a.style.width=i+"px",a.style.height=l+"px";var u=a.getContext("2d"),s=!c&&e<o||c&&e>o?[t,t/e]:[r*e,r];u.save(),u.translate(t/2,r/2),u.drawImage(f,-s[0]/2,-s[1]/2,s[0],s[1]),u.restore();var m=a.toDataURL(d,v);n(m)},f.onerror=function(e){r(e)},f.src=e}))},o=function(e,t){return new Promise((function(n,r){var o=t||{},a=o.type,i=void 0===a?"image/jpeg":a,u=o.quality,l=void 0===u?.5:u,c=document.createElement("video");c.crossOrigin="anonymous";var s=document.createElement("source"),d=document.createElement("canvas");c.addEventListener("loadedmetadata",(function(){var e=c.videoWidth,t=c.videoHeight;d.setAttribute("width",e),d.setAttribute("height",t),d.style.width=e+"px",d.style.height=t+"px"}),!0),c.addEventListener("loadeddata",(function(){c.currentTime=1}),!0),c.addEventListener("seeked",(function(){d.getContext("2d").drawImage(c,0,0);try{var e=d.toDataURL(i,l);n(e)}catch(e){r(e)}}),!0),c.addEventListener("error",(function(e){r(e)}),!0),c.appendChild(s),c.setAttribute("src",e)}))},a=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1?arguments[1]:void 0,a=/(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})|youtube\.com\/playlist\?list=/,i=null===(e=t.match(a))||void 0===e?void 0:e[1];return i?new Promise((function(e){return e("http://img.youtube.com/vi/".concat(i,"/sddefault.jpg"))})):t.match(/\.(mp4|og[gv]|webm|mov|m4v)($|\?)/i)?o(t).then((function(e){return r(e,n)})):new Promise((function(e,t){return t("Cannot create a thumbnail from the provided source")}))}}}]);