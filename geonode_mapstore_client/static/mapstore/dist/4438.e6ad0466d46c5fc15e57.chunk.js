(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[4438],{39480:(t,e,i)=>{"use strict";i.d(e,{Z:()=>h});var n=i(87982),o=i(80559),r=i(90109),s=i(63190),a=function(t){function e(e,i,n){if(t.call(this),void 0!==n&&void 0===i)this.setFlatCoordinates(n,e);else{var o=i||0;this.setCenterAndRadius(e,o,n)}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.clone=function(){return new e(this.flatCoordinates.slice(),void 0,this.layout)},e.prototype.closestPointXY=function(t,e,i,n){var o=this.flatCoordinates,r=t-o[0],s=e-o[1],a=r*r+s*s;if(a<n){if(0===a)for(var h=0;h<this.stride;++h)i[h]=o[h];else{var p=this.getRadius()/Math.sqrt(a);i[0]=o[0]+p*r,i[1]=o[1]+p*s;for(var c=2;c<this.stride;++c)i[c]=o[c]}return i.length=this.stride,a}return n},e.prototype.containsXY=function(t,e){var i=this.flatCoordinates,n=t-i[0],o=e-i[1];return n*n+o*o<=this.getRadiusSquared_()},e.prototype.getCenter=function(){return this.flatCoordinates.slice(0,this.stride)},e.prototype.computeExtent=function(t){var e=this.flatCoordinates,i=e[this.stride]-e[0];return(0,n.T9)(e[0]-i,e[1]-i,e[0]+i,e[1]+i,t)},e.prototype.getRadius=function(){return Math.sqrt(this.getRadiusSquared_())},e.prototype.getRadiusSquared_=function(){var t=this.flatCoordinates[this.stride]-this.flatCoordinates[0],e=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return t*t+e*e},e.prototype.getType=function(){return o.Z.CIRCLE},e.prototype.intersectsExtent=function(t){var e=this.getExtent();if((0,n.kK)(t,e)){var i=this.getCenter();return t[0]<=i[0]&&t[2]>=i[0]||t[1]<=i[1]&&t[3]>=i[1]||(0,n.H6)(t,this.intersectsCoordinate,this)}return!1},e.prototype.setCenter=function(t){var e=this.stride,i=this.flatCoordinates[e]-this.flatCoordinates[0],n=t.slice();n[e]=n[0]+i;for(var o=1;o<e;++o)n[e+o]=t[o];this.setFlatCoordinates(this.layout,n),this.changed()},e.prototype.setCenterAndRadius=function(t,e,i){this.setLayout(i,t,0),this.flatCoordinates||(this.flatCoordinates=[]);var n=this.flatCoordinates,o=(0,s.IG)(n,0,t,this.stride);n[o++]=n[0]+e;for(var r=1,a=this.stride;r<a;++r)n[o++]=n[r];n.length=o,this.changed()},e.prototype.getCoordinates=function(){return null},e.prototype.setCoordinates=function(t,e){},e.prototype.setRadius=function(t){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+t,this.changed()},e}(r.ZP);a.prototype.transform;const h=a},18037:(t,e,i)=>{"use strict";i.r(e),i.d(e,{default:()=>z}),i(57827);var n=i(27418),o=i.n(n),r=i(94719),s=i(49232),a=i(47870),h=i(9211),p=i(51796),c=i(26700),l=i(38815),u=i(9608),d=i(26659),f=i(68612),g=i(82071),m=i(39265),v=i(64547),y="accuracy",x="accuracyGeometry",w="altitude",_="altitudeAccuracy",b="heading",O="position",C="projection",k="speed",M="tracking",E="trackingOptions",P=function(t){function e(e){t.call(this,d.Z.ERROR),this.code=e.code,this.message=e.message}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(u.ZP);const j=function(t){function e(e){t.call(this);var i=e||{};this.position_=null,this.transform_=v.gD,this.watchId_=void 0,(0,l.oL)(this,(0,s.v_)(C),this.handleProjectionChanged_,this),(0,l.oL)(this,(0,s.v_)(M),this.handleTrackingChanged_,this),void 0!==i.projection&&this.setProjection(i.projection),void 0!==i.trackingOptions&&this.setTrackingOptions(i.trackingOptions),this.setTracking(void 0!==i.tracking&&i.tracking)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.disposeInternal=function(){this.setTracking(!1),t.prototype.disposeInternal.call(this)},e.prototype.handleProjectionChanged_=function(){var t=this.getProjection();t&&(this.transform_=(0,v.WO)((0,v.U2)("EPSG:4326"),t),this.position_&&this.set(O,this.transform_(this.position_)))},e.prototype.handleTrackingChanged_=function(){if(g.De){var t=this.getTracking();t&&void 0===this.watchId_?this.watchId_=navigator.geolocation.watchPosition(this.positionChange_.bind(this),this.positionError_.bind(this),this.getTrackingOptions()):t||void 0===this.watchId_||(navigator.geolocation.clearWatch(this.watchId_),this.watchId_=void 0)}},e.prototype.positionChange_=function(t){var e=t.coords;this.set(y,e.accuracy),this.set(w,null===e.altitude?void 0:e.altitude),this.set(_,null===e.altitudeAccuracy?void 0:e.altitudeAccuracy),this.set(b,null===e.heading?void 0:(0,m.Yr)(e.heading)),this.position_?(this.position_[0]=e.longitude,this.position_[1]=e.latitude):this.position_=[e.longitude,e.latitude];var i=this.transform_(this.position_);this.set(O,i),this.set(k,null===e.speed?void 0:e.speed);var n=(0,f.iu)(this.position_,e.accuracy);n.applyTransform(this.transform_),this.set(x,n),this.changed()},e.prototype.positionError_=function(t){this.setTracking(!1),this.dispatchEvent(new P(t))},e.prototype.getAccuracy=function(){return this.get(y)},e.prototype.getAccuracyGeometry=function(){return this.get(x)||null},e.prototype.getAltitude=function(){return this.get(w)},e.prototype.getAltitudeAccuracy=function(){return this.get(_)},e.prototype.getHeading=function(){return this.get(b)},e.prototype.getPosition=function(){return this.get(O)},e.prototype.getProjection=function(){return this.get(C)},e.prototype.getSpeed=function(){return this.get(k)},e.prototype.getTracking=function(){return this.get(M)},e.prototype.getTrackingOptions=function(){return this.get(E)},e.prototype.setProjection=function(t){this.set(C,(0,v.U2)(t))},e.prototype.setTracking=function(t){this.set(M,t)},e.prototype.setTrackingOptions=function(t){this.set(E,t)},e}(s.ZP);var B=i(10699),Y=i(39480),A=i(76625),X=i(87299),F=i(93785),T=i(62481),D=i(60687),S=i(23493),L=i.n(S);function H(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function I(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var Z=function(){var t=document.createElement("div");t.setAttribute("class","ol-popup");var e=document.createElement("a");e.setAttribute("class","ol-popup-close-btn"),e.setAttribute("href","#close"),e.innerHTML="x";var i=document.createElement("div");i.setAttribute("class","ol-popup-cnt-wrapper");var n=document.createElement("div");n.setAttribute("class","ol-popup-cnt"),i.appendChild(n);var o=document.createElement("div");o.setAttribute("class","ol-popup-tip-wrapper");var r=document.createElement("div");return r.setAttribute("class","ol-popup-tip"),o.appendChild(r),t.appendChild(e),t.appendChild(i),t.appendChild(o),t}(),R=function(t,e){s.ZP.call(this,{state:"DISABLED"}),this.map=t;var i={drawCircle:!0,follow:!0,stopFollowingOnDrag:!1,remainActive:!0,locateStyle:this._getDefaultStyles(),metric:!0,onLocationError:this.onLocationError,keepCurrentZoomLevel:!1,showPopup:!0,strings:{metersUnit:"meters",feetUnit:"feet",popup:"You are within {distance} {unit} from this point"},locateOptions:{maximumAge:2e3,enableHighAccuracy:!1,timeout:1e4,maxZoom:18}};this.options=o()({},i,e||{}),this.geolocate=new j({projection:this.map.getView().getProjection(),trackingOptions:this.options.locateOptions}),this.updateHandler=this._updatePosFt.bind(this),this.geolocate.on("change:position",this.options.locateOptions.rateControl?L()(this.updateHandler,this.options.locateOptions.rateControl):this.updateHandler),this.popup=Z,this.popup.hidden=!0,this.popCnt=Z.getElementsByClassName("ol-popup-cnt")[0],this.overlay=new a.Z({element:this.popup,positioning:"top-center",stopEvent:!1}),this.layer=new c.Z({source:new p.Z({useSpatialIndex:!1})}),this.posFt=new h.Z({geometry:this.geolocate.getAccuracyGeometry(),name:"position",id:"_locate-pos"}),this.posFt.setStyle(this.options.locateStyle),this.layer.getSource().addFeature(this.posFt),this.clickHandler=this.mapClick.bind(this),this.stopHandler=this.stopFollow.bind(this),this.errorHandler=this.options.onLocationError.bind(this)};(0,r.XW)(R,s.ZP),R.prototype.start=function(){this.geolocate.on("error",this.errorHandler),this.follow=this.options.follow,this.geolocate.setTracking(!0),this.layer.setMap(this.map),this.map.addOverlay(this.overlay),this.options.showPopup&&(this.map.on("click",this.clickHandler),this.map.on("touch",this.clickHandler)),this.options.stopFollowingOnDrag&&this.map.on("pointerdrag",this.stopHandler),this.p?this._updatePosFt():this.set("state","LOCATING")},R.prototype.startFollow=function(){this.follow=!0,this.options.stopFollowingOnDrag&&this.map.on("pointerdrag",this.stopHandler),this.p&&this._updatePosFt()},R.prototype.stop=function(){this.geolocate.un("error",this.errorHandler),this.geolocate.setTracking(!1),this.popup.hide=!0,this.map.removeOverlay(this.overlay),this.layer.setMap(null),this.options.showPopup&&(this.map.un("click",this.clickHandler),this.map.un("touch",this.clickHandler)),this.options.stopFollowingOnDrag&&this.map.un("pointerdrag",this.stopHandler),this.set("state","DISABLED")},R.prototype.stopFollow=function(){this.follow=!1,this.map.un("pointerdrag",this.stopHandler),this.set("state","ENABLED")},R.prototype._updatePosFt=function(){var t=this.get("state"),e=this.follow?"FOLLOWING":"ENABLED";e!==t&&this.set("state",e);var i=this.geolocate.getPosition();this.p=i;var n=new B.Z([parseFloat(i[0]),parseFloat(i[1])]);if(this.options.drawCircle){var o=new Y.Z([parseFloat(i[0]),parseFloat(i[1])],this.geolocate.getAccuracy());this.posFt.setGeometry(new A.default([n,o]))}else this.posFt.setGeometry(new A.default([n]));this.popup.hidden||this._updatePopUpCnt(),this.follow&&this.updateView(n),this.options.remainActive||this.geolocate.setTracking(!1)},R.prototype.updateView=function(t){this.follow&&(this.map.getView().setCenter(t.getCoordinates()),this.options.keepCurrentZoomLevel||this.map.getView().setZoom(this.options.locateOptions.maxZoom))},R.prototype._updatePopUpCnt=function(){var t,e;this.options.metric?(t=this.geolocate.getAccuracy(),e=this.options.strings.metersUnit):(t=Math.round(3.2808399*this.geolocate.getAccuracy()),e=this.options.strings.feetUnit);var i=this.options.strings.popup.replace("{distance}",t);this.popCnt.innerHTML=i.replace("{unit}",e),this.overlay.setPosition(this.posFt.getGeometry().getGeometries()[0].getCoordinates()),this.popup.hidden=!1},R.prototype.onLocationError=function(t){alert(t.message)},R.prototype.mapClick=function(t){var e=this.map.forEachFeatureAtPixel(t.pixel,(function(t){return t}));e&&"_locate-pos"===e.get("id")&&this.popup.hidden?this._updatePopUpCnt():this.popup.hidden||(Z.hidden=!0)},R.prototype._getDefaultStyles=function(){return new X.default({image:new D.default({radius:6,fill:new F.default({color:"rgba(42,147,238,0.7)"}),stroke:new T.default({color:"rgba(19,106,236,1)",width:2})}),fill:new F.default({color:"rgba(19,106,236,0.15)"}),stroke:new T.default({color:"rgba(19,106,236,1)",width:2})})},R.prototype.setStrings=function(t){this.options.strings=o()({},this.options.strings,t)},R.prototype.setTrackingOptions=function(t){this.geolocate&&(this.geolocate.setTrackingOptions(t),this.options.locateOptions=function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?H(Object(i),!0).forEach((function(e){I(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):H(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({},t))};const G=R;function N(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function U(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,n)}return i}function W(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?U(Object(i),!0).forEach((function(e){q(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):U(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function q(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var V={follow:!0,remainActive:!0,metric:!0,stopFollowingOnDrag:!0,keepCurrentZoomLevel:!1,locateOptions:{maximumAge:2e3,enableHighAccuracy:!1,timeout:1e4,maxZoom:18}};function J(t){return W(W(W({},V),t),{},{locateOptions:W(W({},V.locateOptions),t.locateOptions)})}const z=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,i;return e=t,(i=[{key:"start",value:function(t){var e=t.map,i=t.options,n=t.messages,o=t.status,r=t.onStateChange,s=t.onLocationError;this.locate=new G(e,J(i)),this.locate.setStrings(n),this.locate.options.onLocationError=s,this.locate.on("propertychange",(function(t){r(t.target.get(t.key))})),this.configureLocate(o)}},{key:"update",value:function(t){var e=t.status,i=t.messages,n=t.options;this.configureLocate(e),this.locate.setStrings(i),this.locate.setTrackingOptions(J(n).locateOptions)}},{key:"clear",value:function(){}},{key:"configureLocate",value:function(t){var e=this.locate.get("state");"ENABLED"===t&&"DISABLED"===e?this.locate.start():"FOLLOWING"===t&&"ENABLED"===e?this.locate.startFollow():"DISABLED"===t&&this.locate.stop()}}])&&N(e.prototype,i),t}()},92870:(t,e,i)=>{(t.exports=i(9252)()).push([t.id,'.msgapi .ol-popup {\n    position: absolute;\n    text-align: center;\n    font: 12px/1.5 "Helvetica Neue", Arial, Helvetica, sans-serif;\n    -ms-transform: translate(-50%,-100%); /* IE 9 */\n    -webkit-transform: translate(-50%,-100%); /* Safari */\n    transform: translate(-50%,-100%);\n}\n.msgapi a.ol-popup-close-btn {\n  position: absolute;\n  top: 0;\n  right: 0;\n  padding: 4px 4px 0 0;\n  text-align: center;\n  width: 18px;\n  height: 14px;\n  font: 16px/14px Tahoma, Verdana, sans-serif;\n  color: #c3c3c3;\n  text-decoration: none;\n  font-weight: bold;\n  background: transparent;\n}\n.msgapi .ol-popup-cnt-wrapper {\n  padding: 1px;\n  text-align: left;\n  border-radius: 12px;\n}\n.msgapi .ol-popup-cnt-wrapper, .msgapi .ol-popup-tip {\n  background: white;\n  box-shadow: 0 3px 14px rgba(0,0,0,0.4);\n}\n.msgapi .ol-popup-cnt {\n  margin: 13px 19px;\n  line-height: 1.4;\n   white-space: nowrap;\n\n}\n.msgapi .ol-popup-tip-wrapper {\n  margin: 0 auto;\n  width: 40px;\n  height: 20px;\n  position: relative;\n  overflow: hidden;\n\n}\n.msgapi .ol-popup-tip {\n  width: 17px;\n  height: 17px;\n  padding: 1px;\n  margin: -10px auto 0;\n  -webkit-transform: rotate(45deg);\n  -moz-transform: rotate(45deg);\n  -ms-transform: rotate(45deg);\n  -o-transform: rotate(45deg);\n  transform: rotate(45deg);\n}\n',""])},23279:(t,e,i)=>{var n=i(13218),o=i(7771),r=i(14841),s=Math.max,a=Math.min;t.exports=function(t,e,i){var h,p,c,l,u,d,f=0,g=!1,m=!1,v=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function y(e){var i=h,n=p;return h=p=void 0,f=e,l=t.apply(n,i)}function x(t){return f=t,u=setTimeout(_,e),g?y(t):l}function w(t){var i=t-d;return void 0===d||i>=e||i<0||m&&t-f>=c}function _(){var t=o();if(w(t))return b(t);u=setTimeout(_,function(t){var i=e-(t-d);return m?a(i,c-(t-f)):i}(t))}function b(t){return u=void 0,v&&h?y(t):(h=p=void 0,l)}function O(){var t=o(),i=w(t);if(h=arguments,p=this,d=t,i){if(void 0===u)return x(d);if(m)return clearTimeout(u),u=setTimeout(_,e),y(d)}return void 0===u&&(u=setTimeout(_,e)),l}return e=r(e)||0,n(i)&&(g=!!i.leading,c=(m="maxWait"in i)?s(r(i.maxWait)||0,e):c,v="trailing"in i?!!i.trailing:v),O.cancel=function(){void 0!==u&&clearTimeout(u),f=0,h=d=p=u=void 0},O.flush=function(){return void 0===u?l:b(o())},O}},7771:(t,e,i)=>{var n=i(55639);t.exports=function(){return n.Date.now()}},23493:(t,e,i)=>{var n=i(23279),o=i(13218);t.exports=function(t,e,i){var r=!0,s=!0;if("function"!=typeof t)throw new TypeError("Expected a function");return o(i)&&(r="leading"in i?!!i.leading:r,s="trailing"in i?!!i.trailing:s),n(t,e,{leading:r,maxWait:e,trailing:s})}},65510:(t,e,i)=>{"use strict";t.exports=o,t.exports.default=o;var n=i(84291);function o(t,e){if(!(this instanceof o))return new o(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function r(t,e,i){if(!i)return e.indexOf(t);for(var n=0;n<e.length;n++)if(i(t,e[n]))return n;return-1}function s(t,e){a(t,0,t.children.length,e,t)}function a(t,e,i,n,o){o||(o=g(null)),o.minX=1/0,o.minY=1/0,o.maxX=-1/0,o.maxY=-1/0;for(var r,s=e;s<i;s++)r=t.children[s],h(o,t.leaf?n(r):r);return o}function h(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function p(t,e){return t.minX-e.minX}function c(t,e){return t.minY-e.minY}function l(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function u(t){return t.maxX-t.minX+(t.maxY-t.minY)}function d(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function f(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function g(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function m(t,e,i,o,r){for(var s,a=[e,i];a.length;)(i=a.pop())-(e=a.pop())<=o||(s=e+Math.ceil((i-e)/o/2)*o,n(t,s,e,i,r),a.push(e,s,s,i))}o.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,i=[],n=this.toBBox;if(!f(t,e))return i;for(var o,r,s,a,h=[];e;){for(o=0,r=e.children.length;o<r;o++)s=e.children[o],f(t,a=e.leaf?n(s):s)&&(e.leaf?i.push(s):d(t,a)?this._all(s,i):h.push(s));e=h.pop()}return i},collides:function(t){var e=this.data,i=this.toBBox;if(!f(t,e))return!1;for(var n,o,r,s,a=[];e;){for(n=0,o=e.children.length;n<o;n++)if(r=e.children[n],f(t,s=e.leaf?i(r):r)){if(e.leaf||d(t,s))return!0;a.push(r)}e=a.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,i=t.length;e<i;e++)this.insert(t[e]);return this}var n=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var o=this.data;this.data=n,n=o}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=g([]),this},remove:function(t,e){if(!t)return this;for(var i,n,o,s,a=this.data,h=this.toBBox(t),p=[],c=[];a||p.length;){if(a||(a=p.pop(),n=p[p.length-1],i=c.pop(),s=!0),a.leaf&&-1!==(o=r(t,a.children,e)))return a.children.splice(o,1),p.push(a),this._condense(p),this;s||a.leaf||!d(a,h)?n?(i++,a=n.children[i],s=!1):a=null:(p.push(a),c.push(i),i=0,n=a,a=a.children[0])}return this},toBBox:function(t){return t},compareMinX:p,compareMinY:c,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var i=[];t;)t.leaf?e.push.apply(e,t.children):i.push.apply(i,t.children),t=i.pop();return e},_build:function(t,e,i,n){var o,r=i-e+1,a=this._maxEntries;if(r<=a)return s(o=g(t.slice(e,i+1)),this.toBBox),o;n||(n=Math.ceil(Math.log(r)/Math.log(a)),a=Math.ceil(r/Math.pow(a,n-1))),(o=g([])).leaf=!1,o.height=n;var h,p,c,l,u=Math.ceil(r/a),d=u*Math.ceil(Math.sqrt(a));for(m(t,e,i,d,this.compareMinX),h=e;h<=i;h+=d)for(m(t,h,c=Math.min(h+d-1,i),u,this.compareMinY),p=h;p<=c;p+=u)l=Math.min(p+u-1,c),o.children.push(this._build(t,p,l,n-1));return s(o,this.toBBox),o},_chooseSubtree:function(t,e,i,n){for(var o,r,s,a,h,p,c,u,d,f;n.push(e),!e.leaf&&n.length-1!==i;){for(c=u=1/0,o=0,r=e.children.length;o<r;o++)h=l(s=e.children[o]),d=t,f=s,(p=(Math.max(f.maxX,d.maxX)-Math.min(f.minX,d.minX))*(Math.max(f.maxY,d.maxY)-Math.min(f.minY,d.minY))-h)<u?(u=p,c=h<c?h:c,a=s):p===u&&h<c&&(c=h,a=s);e=a||e.children[0]}return e},_insert:function(t,e,i){var n=this.toBBox,o=i?t:n(t),r=[],s=this._chooseSubtree(o,this.data,e,r);for(s.children.push(t),h(s,o);e>=0&&r[e].children.length>this._maxEntries;)this._split(r,e),e--;this._adjustParentBBoxes(o,r,e)},_split:function(t,e){var i=t[e],n=i.children.length,o=this._minEntries;this._chooseSplitAxis(i,o,n);var r=this._chooseSplitIndex(i,o,n),a=g(i.children.splice(r,i.children.length-r));a.height=i.height,a.leaf=i.leaf,s(i,this.toBBox),s(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(i,a)},_splitRoot:function(t,e){this.data=g([t,e]),this.data.height=t.height+1,this.data.leaf=!1,s(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,i){var n,o,r,s,h,p,c,u,d,f,g,m,v,y;for(p=c=1/0,n=e;n<=i-e;n++)d=o=a(t,0,n,this.toBBox),f=r=a(t,n,i,this.toBBox),void 0,void 0,void 0,void 0,g=Math.max(d.minX,f.minX),m=Math.max(d.minY,f.minY),v=Math.min(d.maxX,f.maxX),y=Math.min(d.maxY,f.maxY),s=Math.max(0,v-g)*Math.max(0,y-m),h=l(o)+l(r),s<p?(p=s,u=n,c=h<c?h:c):s===p&&h<c&&(c=h,u=n);return u},_chooseSplitAxis:function(t,e,i){var n=t.leaf?this.compareMinX:p,o=t.leaf?this.compareMinY:c;this._allDistMargin(t,e,i,n)<this._allDistMargin(t,e,i,o)&&t.children.sort(n)},_allDistMargin:function(t,e,i,n){t.children.sort(n);var o,r,s=this.toBBox,p=a(t,0,e,s),c=a(t,i-e,i,s),l=u(p)+u(c);for(o=e;o<i-e;o++)r=t.children[o],h(p,t.leaf?s(r):r),l+=u(p);for(o=i-e-1;o>=e;o--)r=t.children[o],h(c,t.leaf?s(r):r),l+=u(c);return l},_adjustParentBBoxes:function(t,e,i){for(var n=i;n>=0;n--)h(e[n],t)},_condense:function(t){for(var e,i=t.length-1;i>=0;i--)0===t[i].children.length?i>0?(e=t[i-1].children).splice(e.indexOf(t[i]),1):this.clear():s(t[i],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}}},84291:function(t){t.exports=function(){"use strict";function t(i,n,o,r,s){for(;r>o;){if(r-o>600){var a=r-o+1,h=n-o+1,p=Math.log(a),c=.5*Math.exp(2*p/3),l=.5*Math.sqrt(p*c*(a-c)/a)*(h-a/2<0?-1:1);t(i,n,Math.max(o,Math.floor(n-h*c/a+l)),Math.min(r,Math.floor(n+(a-h)*c/a+l)),s)}var u=i[n],d=o,f=r;for(e(i,o,n),s(i[r],u)>0&&e(i,o,r);d<f;){for(e(i,d,f),d++,f--;s(i[d],u)<0;)d++;for(;s(i[f],u)>0;)f--}0===s(i[o],u)?e(i,o,f):e(i,++f,r),f<=n&&(o=f+1),n<=f&&(r=f-1)}}function e(t,e,i){var n=t[e];t[e]=t[i],t[i]=n}function i(t,e){return t<e?-1:t>e?1:0}return function(e,n,o,r,s){t(e,n,o||0,r||e.length-1,s||i)}}()},57827:(t,e,i)=>{var n=i(92870);"string"==typeof n&&(n=[[t.id,n,""]]),i(14246)(n,{}),n.locals&&(t.exports=n.locals)}}]);