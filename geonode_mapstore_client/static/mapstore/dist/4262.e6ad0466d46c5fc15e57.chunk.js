(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[4262],{86570:(e,t,r)=>{var n={"./cesium/Layers":19690,"./leaflet/Layers":44712,"./openlayers/Layers":8010};function i(e){var t=o(e);return r(t)}function o(e){if(!r.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}i.keys=function(){return Object.keys(n)},i.resolve=o,e.exports=i,i.id=86570},24262:(e,t,r)=>{"use strict";r.d(t,{ZA:()=>j,Mk:()=>T,ar:()=>_,oH:()=>D,gv:()=>U,V5:()=>A,D$:()=>N,Hi:()=>z,_e:()=>B,Fr:()=>F,R8:()=>Z,Cx:()=>q,lc:()=>K,CK:()=>V,IS:()=>$,AZ:()=>H,C1:()=>Q,lD:()=>J,$0:()=>W,dD:()=>Y,DN:()=>X,z8:()=>ee,Rp:()=>te,Nd:()=>re,Fh:()=>ne,Tt:()=>ie,kf:()=>oe,yJ:()=>ue,EM:()=>ae,QW:()=>le,IK:()=>ce,go:()=>se,IA:()=>de,in:()=>fe,T4:()=>pe});var n,i=r(27418),o=r.n(i),u=(r(94707),r(24261),r(47037)),a=r.n(u),l=r(13218),c=r.n(l),s=r(1469),d=r.n(s),f=r(91175),p=r.n(f),m=r(84596),v=r.n(m),g=r(41609),y=r.n(g),b=r(30998),h=r.n(b),x=(r(78718),r(14293),r(33044));function L(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?L(Object(r),!0).forEach((function(t){S(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):L(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function S(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function I(e){return function(e){if(Array.isArray(e))return R(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return R(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?R(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var k=/\/[\w- ]*geoserver[\w- ]*\//,w=function(e,t){return t.filter((function(t){return(t.group||"Default")===e})).map((function(e){return e.id})).reverse()},j=function(e){return e&&e.wpsUrl||e.search&&e.search.url||e.url},M=function e(t,r){return t.slice(0).reverse().reduce((function(t,n){return t.concat(n.nodes.slice(0).reverse().reduce((function(t,n){return c()(n)?t.concat(e([n],r)):t.concat(function(e,t){return p()(t.filter((function(t){return t.id===e})))}(n,r))}),[]))}),[])},C=function(e,t){return M(e,t)},P=function(e,t){var n=r(86570)("./"+t+"/Layers");return"mapquest"===e.type||"bing"===e.type?n.isSupported(e.type)&&e.apiKey&&"__API_KEY_MAPQUEST__"!==e.apiKey&&!e.invalid:"empty"===e.type||n.isSupported(e.type)&&!e.invalid},T=function e(t,r){return t&&d()(t)?t.reduce((function(t,n){return t||(!n||n.name!==r&&n.id!==r&&n!==r?n&&n.nodes&&n.nodes.length>0?e(n.nodes,r):t:n)}),null):null},_=function e(t){return t&&t.nodes?t.nodes.reduce((function(t,r){var n=[].concat(t);return r.nodes&&(n=t.concat(e(r))),a()(r)?[].concat(I(n),[r]):[].concat(I(n),[r.id])}),[]):[]},D=function e(t,r,n,i){return t&&d()(t)&&t.length>0?t.map((function(t){if(c()(t)){if(t.id===r)return O(O({},t),c()(n)?n:S({},n,i));if(t.nodes)return O(O({},t),{},{nodes:e(t.nodes,r,n,i)})}return t})):[]},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.capabilitiesURL||p()(v()(e.url))},U=function(e,t){if(!e||!t)return{};!d()(t.matrixIds)&&c()(t.matrixIds)&&(t.matrixIds=I(Object.keys(t.matrixIds)));var r=E(t),n=t.matrixIds&&t.matrixIds.reduce((function(t,n){var i=e[r]&&e[r].tileMatrixSet&&e[r].tileMatrixSet[n]&&e[r].tileMatrixSet[n].TileMatrix.map((function(e){return{identifier:e["ows:Identifier"],ranges:e.ranges}}))||[];return 0===i.length?o()({},t):o()({},t,S({},n,I(i)))}),{})||null,i=t.tileMatrixSet&&t.matrixIds.map((function(t){return e[r].tileMatrixSet[t]})).filter((function(e){return e}))||null;return i&&n&&{tileMatrixSet:i,matrixIds:n}||{}},A=function(e){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e&&Object.keys(e).reduce((function(r,n){var i=e[n].reduce((function(e,t){return o()(e,S({},t.id||t.name,{srs:I(Object.keys(t.matrixIds)),matrixIds:o()({},t.matrixIds)}))}),{}),u=e[n].reduce((function(e,t){var r=t.tileMatrixSet.reduce((function(e,t){return o()({},e,S({},t["ows:Identifier"],o()({},t)))}),{}),n=Object.keys(r).reduce((function(e,t){var n=Object.keys(i).filter((function(e){return p()(i[e].srs.filter((function(e){return e===t})))})).map((function(e){return i[e].matrixIds[t]})),u=n[0]&&r[t].TileMatrix.map((function(e,t){return n[0][t]&&n[0][t].ranges?o()({},e,{ranges:n[0][t].ranges}):o()({},e)}));return p()(n)?o()({},e,S({},t,o()({},r[t],{TileMatrix:u}))):o()({},e)}),{});return o()({},e,n)}),{});return o()({},r,S({},n,o()({},t[n]||{},{tileMatrixSet:o()({},r[n]&&r[n].tileMatrixSet||{},u)})))}),o()({},t))||t}(e.filter((function(e){return e.tileMatrixSet})).reduce((function(e,t){var r=E(t);return e[r]?o()({},e,S({},r,[].concat(I(e[r]),[t]))):o()({},e,S({},r,[t]))}),{}))},N=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e.map((function(e){return e.split("?")[0]+t}))},G={},z=function(e){return d()(e.url)?e.url[0]:e.url},B=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=p()(t.filter((function(t){return t.name===e})));return r||t.reduce((function(t,r){return t||!!r.nodes&&n.getGroupByName(e,r.nodes)}),void 0)},F=function(e,t){switch(t.toLowerCase()){case"elevation":return function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reduce((function(e,t){return"elevation"===t.name.toLowerCase()||"depth"===t.name.toLowerCase()?o()({positive:"elevation"===t.name.toLowerCase()},t,{name:"elevation"===t.name.toLowerCase()?t.name:"DIM_"+t.name}):e}),null)}(e);default:return null}},Z=function(e,t){return e&&e.id||e.name+"__"+(t?t.length:Math.random().toString(36).substring(2,15))},q=function(e){return e.id?e:O(O({},e),{},{id:n.getLayerId(e)})},K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return[function(e){return(e.layers||[]).filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.id;return!t})).length>0?O(O({},e),{},{layers:(e.layers||[]).map((function(e){return n.normalizeLayer(e)}))}):e},function(e){return e.groups?e:O(O({},e),{},{groups:{id:"Default",expanded:!0}})}].reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))(e)},V=function(e){return function(t){return(t.group||"Default")===e||0===(t.group||"").indexOf("".concat(e,"."))}},$=function(e,t){var r=0,n=e.map((function(e){return o()({},e,{storeIndex:r++})}));return n.reduce((function(e,t){return-1===e.indexOf(t.group||"Default")?e.concat([t.group||"Default"]):e}),[]).filter((function(e){return"background"!==e})).reverse().reduce((function(e,r){var i=r||"Default";return i.split(".").reduce((function(e,r,u,a){var l=i.split(".",u+1).join("."),s=function(e,t){return p()(t.filter((function(t){return c()(t)&&t.id===e})))}(l,e),f=u===a.length-1;return s?f&&(s.nodes=s.nodes.concat(w(l,n))):(s=function(e,t,r,n){return o()({},{id:e,title:(t||"").replace(/\${dot}/g,"."),name:t,nodes:n?w(e,r):[],expanded:!0})}(l,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return d()(t)&&p()(t.map((function(t){var r=t.id===e?t:null;if(r)return r.title;var n=T(t.nodes,e);return n?n.title:null})))}(l,t)||r,n,f),e.push(s)),s.nodes}),e),e}),[])},H=function(e){return e.reduce((function(e,t){return e.concat(n.getNotEmptyGroup(t))}),[])},Q=function(e,t){var r=function(e){var t=!0;return e.forEach((function(e){e.visibility||(t=!1)})),t},n=function e(t,n){var i=t.nodes.map((function(t){return c()(t)?e(t,n):n.filter((function(e){return e.id===t}))[0]}));return o()({},t,{nodes:i,visibility:r(i)})},i=e.map((function(e){return o()({},e,{expanded:e.expanded||!1})}));return{flat:i,groups:t.map((function(e){return n(e,i)}))}},J=function(e,t){return t.filter((function(e){return"background"===e.group})).concat(C(e,t))},W=function(e,t){return function(r,n){return t(r,e,n)}},Y=function(e,t){return function(r,n){return t(r,n,e)}},X=function(e){if(e&&d()(e.layers)){var t=n.getLayersByGroup(e.layers,e.groups);d()(e.groups)&&(t=e.groups.reduce((function(e,t){var r=e;if(t.title){var i={title:t.title,description:t.description,tooltipOptions:t.tooltipOptions,tooltipPlacement:t.tooltipPlacement};r=n.deepChange(r,t.id,i)}return n.deepChange(r,t.id,"expanded",t.expanded)}),[].concat(t)));var r=function(e){if(!e||!e.layers||!d()(e.layers))return null;var t=e.mapInitialConfig&&e.mapInitialConfig.sources&&o()({},e.mapInitialConfig.sources)||{};return y()(t)?I(e.layers):e.layers.map((function(e){var r=U(t,e);return o()({},e,r)}))}(e);return o()({},e,{layers:{flat:n.reorder(t,r),groups:t}})}return e},ee=function(e){return o()({id:e.id,features:e.features,format:e.format,thumbURL:e.thumbURL&&"blob"===e.thumbURL.split(":")[0]?void 0:e.thumbURL,group:e.group,search:e.search,source:e.source,name:e.name,opacity:e.opacity,provider:e.provider,description:e.description,styles:e.styles,style:e.style,styleName:e.styleName,availableStyles:e.availableStyles,layerFilter:e.layerFilter,title:e.title,transparent:e.transparent,tiled:e.tiled,type:e.type,url:e.url,bbox:e.bbox,visibility:e.visibility,singleTile:e.singleTile||!1,allowedSRS:e.allowedSRS,matrixIds:e.matrixIds,tileMatrixSet:e.tileMatrixSet,requestEncoding:e.requestEncoding,dimensions:e.dimensions||[],maxZoom:e.maxZoom,maxNativeZoom:e.maxNativeZoom,maxResolution:e.maxResolution,minResolution:e.minResolution,disableResolutionLimits:e.disableResolutionLimits,hideLoading:e.hideLoading||!1,handleClickOnLayer:e.handleClickOnLayer||!1,queryable:e.queryable,featureInfo:e.featureInfo,catalogURL:e.catalogURL,capabilitiesURL:e.capabilitiesURL,useForElevation:e.useForElevation||!1,hidden:e.hidden||!1,origin:e.origin,thematic:e.thematic,tooltipOptions:e.tooltipOptions,tooltipPlacement:e.tooltipPlacement,legendOptions:e.legendOptions,tileSize:e.tileSize,version:e.version},e.params?{params:e.params}:{},e.credits?{credits:e.credits}:{},e.extendedParams?{extendedParams:e.extendedParams}:{},e.localizedLayerStyles?{localizedLayerStyles:e.localizedLayerStyles}:{})},te=function(e){k=e},re=function(e){var t=e.url,r=e.regexRule||n.getRegGeoserverRule(),i=d()(t)?t[0]:t;return r.test(i)&&i.match(r)[0]||null},ne=function(e){var t,r,i,o=n.findGeoServerName({url:e.url}),u=z(e);if(o){var a=u.split(o);if(2===a.length){var l=e.name.split(":");2===l.length&&(u=a[0]+o+l[0]+"/"+l[1]+"/"+a[1])}}return t=u,r=O(O({},e.baseParams),e.params),i=Object.keys(r).map((function(e){return e+"="+encodeURIComponent(r[e])})).join("&"),-1===t.indexOf("?")?t+"?"+i:t+"&"+i},ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.search&&e.search.url||e.url},oe=function(e,t){return P(e,t)?function(e){return e&&e.invalid?o()({},e,{invalid:!1}):e}(e):o()({},e,{invalid:!0})},ue=function(e,t){return!!P(e,t)},ae=function(e){return G.getLayerTitleTranslations?G.getLayerTitleTranslations(e):e.Title},le=function(e){var t=N(d()(e.url)?e.url:[e.url]),r={};return t.forEach((function(t){(0,x.addAuthenticationParameter)(t,r,e.securityToken)})),r},ce=function(e){var t=e.filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type,r=e.group,n=e.visibility;return"background"===r&&"google"===t&&n})).length>0,r=e.filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.type;return"google"!==t})),n=r.filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.group;return"background"===t}));if(t&&0===n.filter((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.visibility;return t})).length){if(n.length>0){var i=h()(r,{group:"background"});return r.map((function(e,t){return t===i?O(O({},e),{},{visibility:!0}):e}))}return[{type:"osm",title:"Open Street Map",name:"mapnik",source:"osm",group:"background",visibility:!0}].concat(I(r))}return r},se=function(e){var t=e.imageUrl,r=e.link,n=e.title,i=t?'<img src="'.concat(t,'" ').concat(n?'title="'.concat(n,'"'):"",">"):n;return r&&i?'<a href="'.concat(r,'" target="_blank">').concat(i,"</a>"):i},de=function(e){return c()(e)?{capabilities:e,capabilitiesLoading:null,description:e._abstract,boundingBox:e.latLonBoundingBox,availableStyles:e.style&&(Array.isArray(e.style)?e.style:[e.style])}:{}},fe=function(e){var t=e.title,r=e.name,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";return(null==t?void 0:t[n])||(null==t?void 0:t.default)||t||r},pe=function(e,t){if(e.disableResolutionLimits)return!0;var r=e.minResolution||-1/0,n=e.maxResolution||1/0;return void 0===t||t<n&&t>=r};n={getGroupByName:B,getLayerId:Z,normalizeLayer:q,getNotEmptyGroup:function(e){var t=e.nodes.reduce((function(e,t){return t.nodes?e.concat(n.getNotEmptyGroup(t)):e.concat(t)}),[]);return t.length>0?o()({},e,{nodes:t}):[]},getLayersByGroup:$,deepChange:D,reorder:function(e,t){return t.filter((function(e){return"background"===e.group})).concat(C(e,t))},getRegGeoserverRule:function(){return k},findGeoServerName:re,isInsideResolutionsLimits:pe}},19690:e=>{var t={},r={registerType:function(e,r){t[e]=r},createLayer:function(e,r,n){var i=t[e];return i&&i.create?i.create(r,n):i?i(r,n):null},renderLayer:function(e,r,n,i,o){var u=t[e];return u&&u.render?u.render(r,n,i,o):null},updateLayer:function(e,r,n,i,o){var u=t[e];return u&&u.update?u.update(r,n,i,o):null},isSupported:function(e){return!!t[e]}};e.exports=r},44712:e=>{var t={},r={registerType:function(e,r){t[e]=r},createLayer:function(e,r){var n=t[e];return n&&n.create?n.create(r):n?n(r):null},renderLayer:function(e,r,n,i,o){var u=t[e];return u&&u.render?u.render(r,n,i,o):null},updateLayer:function(e,r,n,i){var o=t[e];return o&&o.update?o.update(r,n,i):null},isValid:function(e,r){var n=t[e];return!n||!n.isValid||n.isValid(r)},isSupported:function(e){return!!t[e]}};e.exports=r}}]);