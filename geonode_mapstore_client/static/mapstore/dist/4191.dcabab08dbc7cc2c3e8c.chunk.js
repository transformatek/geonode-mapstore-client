(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[4191],{88691:(t,e,i)=>{var n=i(59130);t.exports=function(t,e){var i=[];return n(t,(function(t,n,o){e(t,n,o)&&i.push(t)})),i}},95671:(t,e,i)=>{var n=i(40158),o=i(88691),s=i(83733),a=i(80643);t.exports=function(t,e){return(a(t)?n:o)(t,s(e,3))}},2501:(t,e,i)=>{var n=i(6583).isFinite;t.exports=function(t){return"number"==typeof t&&n(t)}},99289:(t,e,i)=>{(t.exports=i(9252)()).push([t.id,'.msgapi .ol-box {\n  box-sizing: border-box;\n  border-radius: 2px;\n  border: 2px solid blue;\n}\n\n.msgapi .ol-mouse-position {\n  top: 8px;\n  right: 8px;\n  position: absolute;\n}\n\n.msgapi .ol-scale-line {\n  background: rgba(0,60,136,0.3);\n  border-radius: 4px;\n  bottom: 8px;\n  left: 8px;\n  padding: 2px;\n  position: absolute;\n}\n.msgapi .ol-scale-line-inner {\n  border: 1px solid #eee;\n  border-top: none;\n  color: #eee;\n  font-size: 10px;\n  text-align: center;\n  margin: 1px;\n  will-change: contents, width;\n}\n.msgapi .ol-overlay-container {\n  will-change: left,right,top,bottom;\n}\n\n.msgapi .ol-unsupported {\n  display: none;\n}\n.msgapi .ol-viewport, .msgapi .ol-unselectable {\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  -webkit-tap-highlight-color: rgba(0,0,0,0);\n}\n.msgapi .ol-selectable {\n  -webkit-touch-callout: default;\n  -webkit-user-select: text;\n  -moz-user-select: text;\n  -ms-user-select: text;\n  user-select: text;\n}\n.msgapi .ol-grabbing {\n  cursor: -webkit-grabbing;\n  cursor: -moz-grabbing;\n  cursor: grabbing;\n}\n.msgapi .ol-grab {\n  cursor: move;\n  cursor: -webkit-grab;\n  cursor: -moz-grab;\n  cursor: grab;\n}\n.msgapi .ol-control {\n  position: absolute;\n  background-color: rgba(255,255,255,0.4);\n  border-radius: 4px;\n  padding: 2px;\n}\n.msgapi .ol-control:hover {\n  background-color: rgba(255,255,255,0.6);\n}\n.msgapi .ol-zoom {\n  top: .5em;\n  left: .5em;\n}\n.msgapi .ol-rotate {\n  top: .5em;\n  right: .5em;\n  transition: opacity .25s linear, visibility 0s linear;\n}\n.msgapi .ol-rotate.ol-hidden {\n  opacity: 0;\n  visibility: hidden;\n  transition: opacity .25s linear, visibility 0s linear .25s;\n}\n.msgapi .ol-zoom-extent {\n  top: 4.643em;\n  left: .5em;\n}\n.msgapi .ol-full-screen {\n  right: .5em;\n  top: .5em;\n}\n@media print {\n  .msgapi .ol-control {\n    display: none;\n  }\n}\n\n.msgapi .ol-control button {\n  display: block;\n  margin: 1px;\n  padding: 0;\n  color: white;\n  font-size: 1.14em;\n  font-weight: bold;\n  text-decoration: none;\n  text-align: center;\n  height: 1.375em;\n  width: 1.375em;\n  line-height: .4em;\n  background-color: rgba(0,60,136,0.5);\n  border: none;\n  border-radius: 2px;\n}\n.msgapi .ol-control button::-moz-focus-inner {\n  border: none;\n  padding: 0;\n}\n.msgapi .ol-zoom-extent button {\n  line-height: 1.4em;\n}\n.msgapi .ol-compass {\n  display: block;\n  font-weight: normal;\n  font-size: 1.2em;\n  will-change: transform;\n}\n.msgapi .ol-touch .ol-control button {\n  font-size: 1.5em;\n}\n.msgapi .ol-touch .ol-zoom-extent {\n  top: 5.5em;\n}\n.msgapi .ol-control button:hover,\n.msgapi .ol-control button:focus {\n  text-decoration: none;\n  background-color: rgba(0,60,136,0.7);\n}\n.msgapi .ol-zoom .ol-zoom-in {\n  border-radius: 2px 2px 0 0;\n}\n.msgapi .ol-zoom .ol-zoom-out {\n  border-radius: 0 0 2px 2px;\n}\n\n\n.msgapi .ol-attribution {\n  text-align: right;\n  bottom: .5em;\n  right: .5em;\n  max-width: calc(100% - 1.3em);\n}\n\n.msgapi .ol-attribution ul {\n  margin: 0;\n  padding: 0 .5em;\n  font-size: .7rem;\n  line-height: 1.375em;\n  color: #000;\n  text-shadow: 0 0 2px #fff;\n}\n.msgapi .ol-attribution li {\n  display: inline;\n  list-style: none;\n  line-height: inherit;\n}\n.msgapi .ol-attribution li:not(:last-child):after {\n  content: " ";\n}\n.msgapi .ol-attribution img {\n  max-height: 2em;\n  max-width: inherit;\n  vertical-align: middle;\n}\n.msgapi .ol-attribution ul, .msgapi .ol-attribution button {\n  display: inline-block;\n}\n.msgapi .ol-attribution.ol-collapsed ul {\n  display: none;\n}\n.msgapi .ol-attribution:not(.ol-collapsed) {\n  background: rgba(255,255,255,0.8);\n}\n.msgapi .ol-attribution.ol-uncollapsible {\n  bottom: 0;\n  right: 0;\n  border-radius: 4px 0 0;\n  height: 1.1em;\n  line-height: 1em;\n}\n.msgapi .ol-attribution.ol-uncollapsible img {\n  margin-top: -.2em;\n  max-height: 1.6em;\n}\n.msgapi .ol-attribution.ol-uncollapsible button {\n  display: none;\n}\n\n.msgapi .ol-zoomslider {\n  top: 4.5em;\n  left: .5em;\n  height: 200px;\n}\n.msgapi .ol-zoomslider button {\n  position: relative;\n  height: 10px;\n}\n\n.msgapi .ol-touch .ol-zoomslider {\n  top: 5.5em;\n}\n\n.msgapi .ol-overviewmap {\n  left: 0.5em;\n  bottom: 0.5em;\n}\n.msgapi .ol-overviewmap.ol-uncollapsible {\n  bottom: 0;\n  left: 0;\n  border-radius: 0 4px 0 0;\n}\n.msgapi .ol-overviewmap .ol-overviewmap-map,\n.msgapi .ol-overviewmap button {\n  display: inline-block;\n}\n.msgapi .ol-overviewmap .ol-overviewmap-map {\n  border: 1px solid #7b98bc;\n  height: 150px;\n  margin: 2px;\n  width: 150px;\n}\n.msgapi .ol-overviewmap:not(.ol-collapsed) button{\n  bottom: 1px;\n  left: 2px;\n  position: absolute;\n}\n.msgapi .ol-overviewmap.ol-collapsed .ol-overviewmap-map,\n.msgapi .ol-overviewmap.ol-uncollapsible button {\n  display: none;\n}\n.msgapi .ol-overviewmap:not(.ol-collapsed) {\n  background: rgba(255,255,255,0.8);\n}\n.msgapi .ol-overviewmap-box {\n  border: 2px dotted rgba(0,60,136,0.7);\n}\n\n.msgapi .ol-overviewmap .ol-overviewmap-box:hover {\n  cursor: move;\n}\n',""])},3728:(t,e,i)=>{"use strict";i.d(e,{Z:()=>y});var n=i(78426),o=i(78471),s=i(40188),a=i(39850),r=i(58493),h=i(13910),l=i(93409),p=i(12868),d=i(86340),c=i(19530),_=i(90728),u=i(67644),m=i(85386),g=i(65637),v=i(73381),f=i(21915);function b(t){this.validateExtent_(),this.updateBox_()}const y=function(t){function e(e){var i=e||{};t.call(this,{element:document.createElement("div"),render:i.render||b,target:i.target}),this.collapsed_=void 0===i.collapsed||i.collapsed,this.collapsible_=void 0===i.collapsible||i.collapsible,this.collapsible_||(this.collapsed_=!1);var s=void 0!==i.className?i.className:"ol-overviewmap",a=void 0!==i.tipLabel?i.tipLabel:"Overview map",r=void 0!==i.collapseLabel?i.collapseLabel:"«";"string"==typeof r?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=r):this.collapseLabel_=r;var h=void 0!==i.label?i.label:"»";"string"==typeof h?(this.label_=document.createElement("span"),this.label_.textContent=h):this.label_=h;var d=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_,c=document.createElement("button");c.setAttribute("type","button"),c.title=a,c.appendChild(d),(0,g.oL)(c,v.Z.CLICK,this.handleClick_,this),this.ovmapDiv_=document.createElement("div"),this.ovmapDiv_.className="ol-overviewmap-map",this.ovmap_=new o.default({controls:new n.Z,interactions:new n.Z,view:i.view});var _=this.ovmap_;i.layers&&i.layers.forEach(function(t){_.addLayer(t)}.bind(this));var m=document.createElement("div");m.className="ol-overviewmap-box",m.style.boxSizing="border-box",this.boxOverlay_=new l.Z({position:[0,0],positioning:p.Z.BOTTOM_LEFT,element:m}),this.ovmap_.addOverlay(this.boxOverlay_);var f=s+" "+u.XV+" "+u.hg+(this.collapsed_&&this.collapsible_?" "+u.hN:"")+(this.collapsible_?"":" ol-uncollapsible"),y=this.element;y.className=f,y.appendChild(this.ovmapDiv_),y.appendChild(c);var w=this,C=this.boxOverlay_,x=this.boxOverlay_.getElement(),k=function(t){var e,i={clientX:(e=t).clientX-x.offsetWidth/2,clientY:e.clientY+x.offsetHeight/2},n=_.getEventCoordinate(i);C.setPosition(n)},E=function(t){var e=_.getEventCoordinate(t);w.getMap().getView().setCenter(e),window.removeEventListener("mousemove",k),window.removeEventListener("mouseup",E)};x.addEventListener("mousedown",(function(){window.addEventListener("mousemove",k),window.addEventListener("mouseup",E)}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setMap=function(e){var i=this.getMap();if(e!==i){if(i){var n=i.getView();n&&this.unbindView_(n),this.ovmap_.setTarget(null)}if(t.prototype.setMap.call(this,e),e){this.ovmap_.setTarget(this.ovmapDiv_),this.listenerKeys.push((0,g.oL)(e,h.Z.PROPERTYCHANGE,this.handleMapPropertyChange_,this)),0===this.ovmap_.getLayers().getLength()&&this.ovmap_.setLayerGroup(e.getLayerGroup());var o=e.getView();o&&(this.bindView_(o),o.isDef()&&(this.ovmap_.updateSize(),this.resetExtent_()))}}},e.prototype.handleMapPropertyChange_=function(t){if(t.key===a.Z.VIEW){var e=t.oldValue;e&&this.unbindView_(e);var i=this.getMap().getView();this.bindView_(i)}},e.prototype.bindView_=function(t){(0,g.oL)(t,(0,r.v_)(d.Z.ROTATION),this.handleRotationChanged_,this)},e.prototype.unbindView_=function(t){(0,g.Ev)(t,(0,r.v_)(d.Z.ROTATION),this.handleRotationChanged_,this)},e.prototype.handleRotationChanged_=function(){this.ovmap_.getView().setRotation(this.getMap().getView().getRotation())},e.prototype.validateExtent_=function(){var t=this.getMap(),e=this.ovmap_;if(t.isRendered()&&e.isRendered()){var i=t.getSize(),n=t.getView().calculateExtent(i),o=e.getSize(),s=e.getView().calculateExtent(o),a=e.getPixelFromCoordinate((0,f.rL)(n)),r=e.getPixelFromCoordinate((0,f.w$)(n)),h=Math.abs(a[0]-r[0]),l=Math.abs(a[1]-r[1]),p=o[0],d=o[1];h<.1*p||l<.1*d||h>.75*p||l>.75*d?this.resetExtent_():(0,f.r4)(s,n)||this.recenter_()}},e.prototype.resetExtent_=function(){var t=this.getMap(),e=this.ovmap_,i=t.getSize(),n=t.getView().calculateExtent(i),o=e.getView(),s=Math.log(7.5)/Math.LN2,a=1/(.1*Math.pow(2,s/2));(0,f.H9)(n,a),o.fit(n)},e.prototype.recenter_=function(){var t=this.getMap(),e=this.ovmap_,i=t.getView();e.getView().setCenter(i.getCenter())},e.prototype.updateBox_=function(){var t=this.getMap(),e=this.ovmap_;if(t.isRendered()&&e.isRendered()){var i=t.getSize(),n=t.getView(),o=e.getView(),s=n.getRotation(),a=this.boxOverlay_,r=this.boxOverlay_.getElement(),h=n.calculateExtent(i),l=o.getResolution(),p=(0,f.hC)(h),d=(0,f.Xv)(h),c=this.calculateCoordinateRotate_(s,p);a.setPosition(c),r&&(r.style.width=Math.abs((p[0]-d[0])/l)+"px",r.style.height=Math.abs((d[1]-p[1])/l)+"px")}},e.prototype.calculateCoordinateRotate_=function(t,e){var i,n=this.getMap().getView().getCenter();return n&&(i=[e[0]-n[0],e[1]-n[1]],(0,_.U1)(i,t),(0,_.IH)(i,n)),i},e.prototype.handleClick_=function(t){t.preventDefault(),this.handleToggle_()},e.prototype.handleToggle_=function(){this.element.classList.toggle(u.hN),this.collapsed_?(0,m.$H)(this.collapseLabel_,this.label_):(0,m.$H)(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_;var t=this.ovmap_;this.collapsed_||t.isRendered()||(t.updateSize(),this.resetExtent_(),(0,g.Vx)(t,s.Z.POSTRENDER,(function(t){this.updateBox_()}),this))},e.prototype.getCollapsible=function(){return this.collapsible_},e.prototype.setCollapsible=function(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),!t&&this.collapsed_&&this.handleToggle_())},e.prototype.setCollapsed=function(t){this.collapsible_&&this.collapsed_!==t&&this.handleToggle_()},e.prototype.getCollapsed=function(){return this.collapsed_},e.prototype.getOverviewMap=function(){return this.ovmap_},e}(c.Z)},25303:(t,e,i)=>{"use strict";i.d(e,{ZP:()=>m});var n=i(58493),o=i(38906),s=i(19530),a=i(67644),r=i(65637),h=i(18672),l=i(40868),p="units",d="degrees",c="metric",_=[1,2,5];function u(t){var e=t.frameState;this.viewState_=e?e.viewState:null,this.updateElement_()}const m=function(t){function e(e){var i=e||{},o=void 0!==i.className?i.className:"ol-scale-line";t.call(this,{element:document.createElement("div"),render:i.render||u,target:i.target}),this.innerElement_=document.createElement("div"),this.innerElement_.className=o+"-inner",this.element.className=o+" "+a.XV,this.element.appendChild(this.innerElement_),this.viewState_=null,this.minWidth_=void 0!==i.minWidth?i.minWidth:64,this.renderedVisible_=!1,this.renderedWidth_=void 0,this.renderedHTML_="",(0,r.oL)(this,(0,n.v_)(p),this.handleUnitsChanged_,this),this.setUnits(i.units||c)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.getUnits=function(){return this.get(p)},e.prototype.handleUnitsChanged_=function(){this.updateElement_()},e.prototype.setUnits=function(t){this.set(p,t)},e.prototype.updateElement_=function(){var t=this.viewState_;if(t){var e=t.center,i=t.projection,n=this.getUnits(),s=n==d?l.default.DEGREES:l.default.METERS,a=(0,h._Q)(i,t.resolution,e,s);i.getUnits()!=l.default.DEGREES&&i.getMetersPerUnit()&&s==l.default.METERS&&(a*=i.getMetersPerUnit());var r=this.minWidth_*a,p="";if(n==d){var u=l.METERS_PER_UNIT[l.default.DEGREES];i.getUnits()==l.default.DEGREES?r*=u:a/=u,r<u/60?(p="″",a*=3600):r<u?(p="′",a*=60):p="°"}else"imperial"==n?r<.9144?(p="in",a/=.0254):r<1609.344?(p="ft",a/=.3048):(p="mi",a/=1609.344):"nautical"==n?(a/=1852,p="nm"):n==c?r<.001?(p="μm",a*=1e6):r<1?(p="mm",a*=1e3):r<1e3?p="m":(p="km",a/=1e3):"us"==n?r<.9144?(p="in",a*=39.37):r<1609.344?(p="ft",a/=.30480061):(p="mi",a/=1609.3472):(0,o.h)(!1,33);for(var m,g,v=3*Math.floor(Math.log(this.minWidth_*a)/Math.log(10));;){if(m=_[(v%3+3)%3]*Math.pow(10,Math.floor(v/3)),g=Math.round(m/a),isNaN(g))return this.element.style.display="none",void(this.renderedVisible_=!1);if(g>=this.minWidth_)break;++v}var f=m+" "+p;this.renderedHTML_!=f&&(this.innerElement_.innerHTML=f,this.renderedHTML_=f),this.renderedWidth_!=g&&(this.innerElement_.style.width=g+"px",this.renderedWidth_=g),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}else this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1)},e}(s.Z)},72445:(t,e,i)=>{"use strict";i.d(e,{ZP:()=>O});var n=i(73381),o=i(23068),s=i(30006),a=i(86968),r=i(58493),h=i(90728),l=i(65637),p=i(9520),d=i(36403),c=i(64011),_=i(69669),u=i(28795),m=i(44538),g=i(25642),v=i(52329),f=i(759),b=i(14303),y=i(52043),w=i(40353),C=i(38024),x=i(73604),k=i(29902),E=i(97016),T=i(31219),L="Point",P="LineString",M="Polygon",Z="Circle",N="drawstart",D=function(t){function e(e,i){t.call(this,e),this.feature=i}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(p.ZP);const O=function(t){function e(e){var i=e;i.stopDown||(i.stopDown=c.Dv),t.call(this,i),this.shouldHandle_=!1,this.downPx_=null,this.downTimeout_,this.lastDragTime_,this.freehand_=!1,this.source_=e.source?e.source:null,this.features_=e.features?e.features:null,this.snapTolerance_=e.snapTolerance?e.snapTolerance:12,this.type_=e.type,this.mode_=function(t){var e;return t===u.Z.POINT||t===u.Z.MULTI_POINT?e=L:t===u.Z.LINE_STRING||t===u.Z.MULTI_LINE_STRING?e=P:t===u.Z.POLYGON||t===u.Z.MULTI_POLYGON?e=M:t===u.Z.CIRCLE&&(e=Z),e}(this.type_),this.stopClick_=!!e.stopClick,this.minPoints_=e.minPoints?e.minPoints:this.mode_===M?3:2,this.maxPoints_=e.maxPoints?e.maxPoints:1/0,this.finishCondition_=e.finishCondition?e.finishCondition:c.uX;var n,o=e.geometryFunction;if(!o)if(this.type_===u.Z.CIRCLE)o=function(t,e){var i=e||new _.Z([NaN,NaN]),n=(0,h.bI)(t[0],t[1]);return i.setCenterAndRadius(t[0],Math.sqrt(n)),i};else{var s,a=this.mode_;a===L?s=y.Z:a===P?s=m.Z:a===M&&(s=w.ZP),o=function(t,e){var i=e;return i?a===M?t[0].length?i.setCoordinates([t[0].concat([t[0][0]])]):i.setCoordinates([]):i.setCoordinates(t):i=new s(t),i}}this.geometryFunction_=o,this.dragVertexDelay_=void 0!==e.dragVertexDelay?e.dragVertexDelay:500,this.finishCoordinate_=null,this.sketchFeature_=null,this.sketchPoint_=null,this.sketchCoords_=null,this.sketchLine_=null,this.sketchLineCoords_=null,this.squaredClickTolerance_=e.clickTolerance?e.clickTolerance*e.clickTolerance:36,this.overlay_=new k.Z({source:new E.Z({useSpatialIndex:!1,wrapX:!!e.wrapX&&e.wrapX}),style:e.style?e.style:(n=(0,T.createEditingStyle)(),function(t,e){return n[t.getGeometry().getType()]}),updateWhileInteracting:!0}),this.geometryName_=e.geometryName,this.condition_=e.condition?e.condition:d.rM,this.freehandCondition_,e.freehand?this.freehandCondition_=d.Bx:this.freehandCondition_=e.freehandCondition?e.freehandCondition:d.vY,(0,l.oL)(this,(0,r.v_)(x.Z.ACTIVE),this.updateState_,this)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setMap=function(e){t.prototype.setMap.call(this,e),this.updateState_()},e.prototype.getOverlay=function(){return this.overlay_},e.prototype.handleEvent=function(e){e.originalEvent.type===n.Z.CONTEXTMENU&&e.preventDefault(),this.freehand_=this.mode_!==L&&this.freehandCondition_(e);var i=e.type===s.Z.POINTERMOVE,o=!0;return!this.freehand_&&this.lastDragTime_&&e.type===s.Z.POINTERDRAG&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=e.pixel,this.shouldHandle_=!this.freehand_,i=!0):this.lastDragTime_=void 0,this.shouldHandle_&&void 0!==this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0)),this.freehand_&&e.type===s.Z.POINTERDRAG&&null!==this.sketchFeature_?(this.addToDrawing_(e),o=!1):this.freehand_&&e.type===s.Z.POINTERDOWN?o=!1:i?(o=e.type===s.Z.POINTERMOVE)&&this.freehand_?o=this.handlePointerMove_(e):(e.pointerEvent.pointerType==b.T2||e.type===s.Z.POINTERDRAG&&void 0===this.downTimeout_)&&this.handlePointerMove_(e):e.type===s.Z.DBLCLICK&&(o=!1),t.prototype.handleEvent.call(this,e)&&o},e.prototype.handleDownEvent=function(t){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=t.pixel,this.finishCoordinate_||this.startDrawing_(t),!0):!!this.condition_(t)&&(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(function(){this.handlePointerMove_(new a.Z(s.Z.POINTERMOVE,t.map,t.pointerEvent,!1,t.frameState))}.bind(this),this.dragVertexDelay_),this.downPx_=t.pixel,!0)},e.prototype.handleUpEvent=function(t){var e=!0;this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(t);var i=this.mode_===Z;return this.shouldHandle_?(this.finishCoordinate_?this.freehand_||i?this.finishDrawing():this.atFinish_(t)?this.finishCondition_(t)&&this.finishDrawing():this.addToDrawing_(t):(this.startDrawing_(t),this.mode_===L&&this.finishDrawing()),e=!1):this.freehand_&&(this.finishCoordinate_=null,this.abortDrawing_()),!e&&this.stopClick_&&t.stopPropagation(),e},e.prototype.handlePointerMove_=function(t){if(this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){var e=this.downPx_,i=t.pixel,n=e[0]-i[0],o=e[1]-i[1],s=n*n+o*o;if(this.shouldHandle_=this.freehand_?s>this.squaredClickTolerance_:s<=this.squaredClickTolerance_,!this.shouldHandle_)return!0}return this.finishCoordinate_?this.modifyDrawing_(t):this.createOrUpdateSketchPoint_(t),!0},e.prototype.atFinish_=function(t){var e=!1;if(this.sketchFeature_){var i=!1,n=[this.finishCoordinate_];if(this.mode_===P)i=this.sketchCoords_.length>this.minPoints_;else if(this.mode_===M){var o=this.sketchCoords_;i=o[0].length>this.minPoints_,n=[o[0][0],o[0][o[0].length-2]]}if(i)for(var s=t.map,a=0,r=n.length;a<r;a++){var h=n[a],l=s.getPixelFromCoordinate(h),p=t.pixel,d=p[0]-l[0],c=p[1]-l[1],_=this.freehand_?1:this.snapTolerance_;if(e=Math.sqrt(d*d+c*c)<=_){this.finishCoordinate_=h;break}}}return e},e.prototype.createOrUpdateSketchPoint_=function(t){var e=t.coordinate.slice();this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(e):(this.sketchPoint_=new o.Z(new y.Z(e)),this.updateSketchFeatures_())},e.prototype.startDrawing_=function(t){var e=t.coordinate;this.finishCoordinate_=e,this.mode_===L?this.sketchCoords_=e.slice():this.mode_===M?(this.sketchCoords_=[[e.slice(),e.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[e.slice(),e.slice()],this.sketchLineCoords_&&(this.sketchLine_=new o.Z(new m.Z(this.sketchLineCoords_)));var i=this.geometryFunction_(this.sketchCoords_);this.sketchFeature_=new o.Z,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(i),this.updateSketchFeatures_(),this.dispatchEvent(new D(N,this.sketchFeature_))},e.prototype.modifyDrawing_=function(t){var e,i,n,s=t.coordinate,a=this.sketchFeature_.getGeometry();if(this.mode_===L?i=this.sketchCoords_:this.mode_===M?(i=(e=this.sketchCoords_[0])[e.length-1],this.atFinish_(t)&&(s=this.finishCoordinate_.slice())):i=(e=this.sketchCoords_)[e.length-1],i[0]=s[0],i[1]=s[1],this.geometryFunction_(this.sketchCoords_,a),this.sketchPoint_&&this.sketchPoint_.getGeometry().setCoordinates(s),a.getType()==u.Z.POLYGON&&this.mode_!==M){this.sketchLine_||(this.sketchLine_=new o.Z);var r=a.getLinearRing(0);(n=this.sketchLine_.getGeometry())?(n.setFlatCoordinates(r.getLayout(),r.getFlatCoordinates()),n.changed()):(n=new m.Z(r.getFlatCoordinates(),r.getLayout()),this.sketchLine_.setGeometry(n))}else this.sketchLineCoords_&&(n=this.sketchLine_.getGeometry()).setCoordinates(this.sketchLineCoords_);this.updateSketchFeatures_()},e.prototype.addToDrawing_=function(t){var e,i,n=t.coordinate,o=this.sketchFeature_.getGeometry();this.mode_===P?(this.finishCoordinate_=n.slice(),(i=this.sketchCoords_).length>=this.maxPoints_&&(this.freehand_?i.pop():e=!0),i.push(n.slice()),this.geometryFunction_(i,o)):this.mode_===M&&((i=this.sketchCoords_[0]).length>=this.maxPoints_&&(this.freehand_?i.pop():e=!0),i.push(n.slice()),e&&(this.finishCoordinate_=i[0]),this.geometryFunction_(this.sketchCoords_,o)),this.updateSketchFeatures_(),e&&this.finishDrawing()},e.prototype.removeLastPoint=function(){if(this.sketchFeature_){var t,e=this.sketchFeature_.getGeometry();this.mode_===P?((t=this.sketchCoords_).splice(-2,1),this.geometryFunction_(t,e),t.length>=2&&(this.finishCoordinate_=t[t.length-2].slice())):this.mode_===M&&((t=this.sketchCoords_[0]).splice(-2,1),this.sketchLine_.getGeometry().setCoordinates(t),this.geometryFunction_(this.sketchCoords_,e)),0===t.length&&(this.finishCoordinate_=null),this.updateSketchFeatures_()}},e.prototype.finishDrawing=function(){var t=this.abortDrawing_();if(t){var e=this.sketchCoords_,i=t.getGeometry();this.mode_===P?(e.pop(),this.geometryFunction_(e,i)):this.mode_===M&&(e[0].pop(),this.geometryFunction_(e,i),e=i.getCoordinates()),this.type_===u.Z.MULTI_POINT?t.setGeometry(new v.Z([e])):this.type_===u.Z.MULTI_LINE_STRING?t.setGeometry(new g.Z([e])):this.type_===u.Z.MULTI_POLYGON&&t.setGeometry(new f.Z([e])),this.dispatchEvent(new D("drawend",t)),this.features_&&this.features_.push(t),this.source_&&this.source_.addFeature(t)}},e.prototype.abortDrawing_=function(){this.finishCoordinate_=null;var t=this.sketchFeature_;return t&&(this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0)),t},e.prototype.extend=function(t){var e=t.getGeometry();this.sketchFeature_=t,this.sketchCoords_=e.getCoordinates();var i=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=i.slice(),this.sketchCoords_.push(i.slice()),this.updateSketchFeatures_(),this.dispatchEvent(new D(N,this.sketchFeature_))},e.prototype.updateSketchFeatures_=function(){var t=[];this.sketchFeature_&&t.push(this.sketchFeature_),this.sketchLine_&&t.push(this.sketchLine_),this.sketchPoint_&&t.push(this.sketchPoint_);var e=this.overlay_.getSource();e.clear(!0),e.addFeatures(t)},e.prototype.updateState_=function(){var t=this.getMap(),e=this.getActive();t&&e||this.abortDrawing_(),this.overlay_.setMap(e?t:null)},e}(C.Z)},1908:(t,e,i)=>{"use strict";i.d(e,{z:()=>a});var n=i(18672),o=i(42558),s=i(44183);function a(t){var e,i,a=Object.keys(t.defs),r=a.length;for(e=0;e<r;++e){var h=a[e];if(!(0,n.U2)(h)){var l=t.defs(h);(0,n.Sx)(new s.Z({code:h,axisOrientation:l.axis,metersPerUnit:l.to_meter,units:l.units}))}}for(e=0;e<r;++e){var p=a[e],d=(0,n.U2)(p);for(i=0;i<r;++i){var c=a[i],_=(0,n.U2)(c);if(!(0,o.U2)(p,c))if(t.defs[p]===t.defs[c])(0,n.rM)([d,_]);else{var u=t(p,c);(0,n.zY)(d,_,u.forward,u.inverse)}}}}},69687:(t,e,i)=>{var n=i(99289);"string"==typeof n&&(n=[[t.id,n,""]]),i(14246)(n,{}),n.locals&&(t.exports=n.locals)}}]);